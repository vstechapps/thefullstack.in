var SV=Object.defineProperty,DV=Object.defineProperties;var CV=Object.getOwnPropertyDescriptors;var xf=Object.getOwnPropertySymbols;var TC=Object.prototype.hasOwnProperty,bC=Object.prototype.propertyIsEnumerable;var wC=(n,e,t)=>e in n?SV(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,$=(n,e)=>{for(var t in e||={})TC.call(e,t)&&wC(n,t,e[t]);if(xf)for(var t of xf(e))bC.call(e,t)&&wC(n,t,e[t]);return n},Te=(n,e)=>DV(n,CV(e));var Q_=(n,e)=>{var t={};for(var r in n)TC.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&xf)for(var r of xf(n))e.indexOf(r)<0&&bC.call(n,r)&&(t[r]=n[r]);return t};var zt=null,Of=!1,Z_=1,RV=null,ln=Symbol("SIGNAL");function ge(n){let e=zt;return zt=n,e}function Ff(){return zt}var Rl={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Nl(n){if(Of)throw new Error("");if(zt===null)return;zt.consumerOnSignalRead(n);let e=zt.producersTail;if(e!==void 0&&e.producer===n)return;let t,r=zt.recomputing;if(r&&(t=e!==void 0?e.nextProducer:zt.producers,t!==void 0&&t.producer===n)){zt.producersTail=t,t.lastReadVersion=n.version;return}let i=n.consumersTail;if(i!==void 0&&i.consumer===zt&&(!r||PV(i,zt)))return;let s=cc(zt),o={producer:n,consumer:zt,nextProducer:t,prevConsumer:i,lastReadVersion:n.version,nextConsumer:void 0};zt.producersTail=o,e!==void 0?e.nextProducer=o:zt.producers=o,s&&CC(n,o)}function AC(){Z_++}function ev(n){if(!(cc(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Z_)){if(!n.producerMustRecompute(n)&&!Uf(n)){X_(n);return}n.producerRecomputeValue(n),X_(n)}}function tv(n){if(n.consumers===void 0)return;let e=Of;Of=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let r=t.consumer;r.dirty||NV(r)}}finally{Of=e}}function nv(){return zt?.consumerAllowSignalWrites!==!1}function NV(n){n.dirty=!0,tv(n),n.consumerMarkedDirty?.(n)}function X_(n){n.dirty=!1,n.lastCleanEpoch=Z_}function Pl(n){return n&&SC(n),ge(n)}function SC(n){n.producersTail=void 0,n.recomputing=!0}function Vf(n,e){ge(e),n&&DC(n)}function DC(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(cc(n))do t=rv(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function Uf(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,r=e.lastReadVersion;if(r!==t.version||(ev(t),r!==t.version))return!0}return!1}function kl(n){if(cc(n)){let e=n.producers;for(;e!==void 0;)e=rv(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function CC(n,e){let t=n.consumersTail,r=cc(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!r)for(let i=n.producers;i!==void 0;i=i.nextProducer)CC(i.producer,i)}function rv(n){let e=n.producer,t=n.nextProducer,r=n.nextConsumer,i=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!cc(e)){let s=e.producers;for(;s!==void 0;)s=rv(s)}return t}function cc(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function iv(n){RV?.(n)}function PV(n,e){let t=e.producersTail;if(t!==void 0){let r=e.producers;do{if(r===n)return!0;if(r===t)break;r=r.nextProducer}while(r!==void 0)}return!1}function sv(n,e){return Object.is(n,e)}function jf(n,e){let t=Object.create(kV);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(ev(t),Nl(t),t.value===Lf)throw t.error;return t.value};return r[ln]=t,iv(t),r}var Y_=Symbol("UNSET"),J_=Symbol("COMPUTING"),Lf=Symbol("ERRORED"),kV=Te($({},Rl),{value:Y_,dirty:!0,error:null,equal:sv,kind:"computed",producerMustRecompute(n){return n.value===Y_||n.value===J_},producerRecomputeValue(n){if(n.value===J_)throw new Error("");let e=n.value;n.value=J_;let t=Pl(n),r,i=!1;try{r=n.computation(),ge(null),i=e!==Y_&&e!==Lf&&r!==Lf&&n.equal(e,r)}catch(s){r=Lf,n.error=s}finally{Vf(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function MV(){throw new Error}var RC=MV;function NC(n){RC(n)}function ov(n){RC=n}var xV=null;function av(n,e){let t=Object.create(Bf);t.value=n,e!==void 0&&(t.equal=e);let r=()=>PC(t);return r[ln]=t,iv(t),[r,o=>Ml(t,o),o=>kC(t,o)]}function PC(n){return Nl(n),n.value}function Ml(n,e){nv()||NC(n),n.equal(n.value,e)||(n.value=e,OV(n))}function kC(n,e){nv()||NC(n),Ml(n,e(n.value))}var Bf=Te($({},Rl),{equal:sv,value:void 0,kind:"signal"});function OV(n){n.version++,AC(),tv(n),xV?.(n)}function cv(n){let e=ge(null);try{return n()}finally{ge(e)}}function le(n){return typeof n=="function"}function uc(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var $f=uc(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Eo(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var rt=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(le(r))try{r()}catch(s){e=s instanceof $f?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{MC(s)}catch(o){e=e??[],o instanceof $f?e=[...e,...o.errors]:e.push(o)}}if(e)throw new $f(e)}}add(e){var t;if(e&&e!==this)if(this.closed)MC(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Eo(t,e)}remove(e){let{_finalizers:t}=this;t&&Eo(t,e),e instanceof n&&e._removeParent(this)}};rt.EMPTY=(()=>{let n=new rt;return n.closed=!0,n})();var uv=rt.EMPTY;function Hf(n){return n instanceof rt||n&&"closed"in n&&le(n.remove)&&le(n.add)&&le(n.unsubscribe)}function MC(n){le(n)?n():n.unsubscribe()}var Yn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var lc={setTimeout(n,e,...t){let{delegate:r}=lc;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=lc;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function qf(n){lc.setTimeout(()=>{let{onUnhandledError:e}=Yn;if(e)e(n);else throw n})}function xl(){}var xC=lv("C",void 0,void 0);function OC(n){return lv("E",void 0,n)}function LC(n){return lv("N",n,void 0)}function lv(n,e,t){return{kind:n,value:e,error:t}}var wo=null;function dc(n){if(Yn.useDeprecatedSynchronousErrorHandling){let e=!wo;if(e&&(wo={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=wo;if(wo=null,t)throw r}}else n()}function FC(n){Yn.useDeprecatedSynchronousErrorHandling&&wo&&(wo.errorThrown=!0,wo.error=n)}var To=class extends rt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Hf(e)&&e.add(this)):this.destination=VV}static create(e,t,r){return new cs(e,t,r)}next(e){this.isStopped?hv(LC(e),this):this._next(e)}error(e){this.isStopped?hv(OC(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?hv(xC,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},LV=Function.prototype.bind;function dv(n,e){return LV.call(n,e)}var fv=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){zf(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){zf(r)}else zf(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){zf(t)}}},cs=class extends To{constructor(e,t,r){super();let i;if(le(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&Yn.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&dv(e.next,s),error:e.error&&dv(e.error,s),complete:e.complete&&dv(e.complete,s)}):i=e}this.destination=new fv(i)}};function zf(n){Yn.useDeprecatedSynchronousErrorHandling?FC(n):qf(n)}function FV(n){throw n}function hv(n,e){let{onStoppedNotification:t}=Yn;t&&lc.setTimeout(()=>t(n,e))}var VV={closed:!0,next:xl,error:FV,complete:xl};var hc=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Jn(n){return n}function Gf(...n){return pv(n)}function pv(n){return n.length===0?Jn:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var fe=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let s=jV(t)?t:new cs(t,r,i);return dc(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=VC(r),new r((i,s)=>{let o=new cs({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[hc](){return this}pipe(...t){return pv(t)(this)}toPromise(t){return t=VC(t),new t((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function VC(n){var e;return(e=n??Yn.Promise)!==null&&e!==void 0?e:Promise}function UV(n){return n&&le(n.next)&&le(n.error)&&le(n.complete)}function jV(n){return n&&n instanceof To||UV(n)&&Hf(n)}function BV(n){return le(n?.lift)}function Le(n){return e=>{if(BV(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Fe(n,e,t,r,i){return new gv(n,e,t,r,i)}var gv=class extends To{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var UC=uc(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var xt=(()=>{class n extends fe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Wf(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new UC}next(t){dc(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){dc(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){dc(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:s}=this;return r||i?uv:(this.currentObservers=null,s.push(t),new rt(()=>{this.currentObservers=null,Eo(s,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){let t=new fe;return t.source=this,t}}return n.create=(e,t)=>new Wf(e,t),n})(),Wf=class extends xt{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:uv}};var Ot=class extends xt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var mv={now(){return(mv.delegate||Date).now()},delegate:void 0};var Kf=class extends rt{constructor(e,t){super()}schedule(e,t=0){return this}};var Ol={setInterval(n,e,...t){let{delegate:r}=Ol;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Ol;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var fc=class extends Kf{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return Ol.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Ol.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Eo(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var pc=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};pc.now=mv.now;var gc=class extends pc{constructor(e,t=pc.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var yv=new gc(fc);var Qf=class extends fc{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Yf=class extends gc{};var _v=new Yf(Qf);var Lt=new fe(n=>n.complete());function jC(n){return n&&le(n.schedule)}function BC(n){return n[n.length-1]}function Jf(n){return le(BC(n))?n.pop():void 0}function us(n){return jC(BC(n))?n.pop():void 0}function Xf(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function HC(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(r.next(h))}catch(g){o(g)}}function c(h){try{d(r.throw(h))}catch(g){o(g)}}function d(h){h.done?s(h.value):i(h.value).then(a,c)}d((r=r.apply(n,e||[])).next())})}function $C(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function bo(n){return this instanceof bo?(this.v=n,this):new bo(n)}function qC(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(S){return function(R){return Promise.resolve(R).then(S,g)}}function a(S,R){r[S]&&(i[S]=function(M){return new Promise(function(k,V){s.push([S,M,k,V])>1||c(S,M)})},R&&(i[S]=R(i[S])))}function c(S,R){try{d(r[S](R))}catch(M){E(s[0][3],M)}}function d(S){S.value instanceof bo?Promise.resolve(S.value.v).then(h,g):E(s[0][2],S)}function h(S){c("next",S)}function g(S){c("throw",S)}function E(S,R){S(R),s.shift(),s.length&&c(s[0][0],s[0][1])}}function zC(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof $C=="function"?$C(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,c){o=n[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(d){s({value:d,done:a})},o)}}var Zf=n=>n&&typeof n.length=="number"&&typeof n!="function";function ep(n){return le(n?.then)}function tp(n){return le(n[hc])}function np(n){return Symbol.asyncIterator&&le(n?.[Symbol.asyncIterator])}function rp(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function $V(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var ip=$V();function sp(n){return le(n?.[ip])}function op(n){return qC(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield bo(t.read());if(i)return yield bo(void 0);yield yield bo(r)}}finally{t.releaseLock()}})}function ap(n){return le(n?.getReader)}function at(n){if(n instanceof fe)return n;if(n!=null){if(tp(n))return HV(n);if(Zf(n))return qV(n);if(ep(n))return zV(n);if(np(n))return GC(n);if(sp(n))return GV(n);if(ap(n))return WV(n)}throw rp(n)}function HV(n){return new fe(e=>{let t=n[hc]();if(le(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function qV(n){return new fe(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function zV(n){return new fe(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,qf)})}function GV(n){return new fe(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function GC(n){return new fe(e=>{KV(n,e).catch(t=>e.error(t))})}function WV(n){return GC(op(n))}function KV(n,e){var t,r,i,s;return HC(this,void 0,void 0,function*(){try{for(t=zC(n);r=yield t.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})}function dn(n,e,t,r=0,i=!1){let s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function ls(n,e=0){return Le((t,r)=>{t.subscribe(Fe(r,i=>dn(r,n,()=>r.next(i),e),()=>dn(r,n,()=>r.complete(),e),i=>dn(r,n,()=>r.error(i),e)))})}function ds(n,e=0){return Le((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function WC(n,e){return at(n).pipe(ds(e),ls(e))}function KC(n,e){return at(n).pipe(ds(e),ls(e))}function QC(n,e){return new fe(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function YC(n,e){return new fe(t=>{let r;return dn(t,e,()=>{r=n[ip](),dn(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){t.error(o);return}s?t.complete():t.next(i)},0,!0)}),()=>le(r?.return)&&r.return()})}function cp(n,e){if(!n)throw new Error("Iterable cannot be null");return new fe(t=>{dn(t,e,()=>{let r=n[Symbol.asyncIterator]();dn(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function JC(n,e){return cp(op(n),e)}function XC(n,e){if(n!=null){if(tp(n))return WC(n,e);if(Zf(n))return QC(n,e);if(ep(n))return KC(n,e);if(np(n))return cp(n,e);if(sp(n))return YC(n,e);if(ap(n))return JC(n,e)}throw rp(n)}function ct(n,e){return e?XC(n,e):at(n)}function be(...n){let e=us(n);return ct(n,e)}function vv(n,e){let t=le(n)?n:()=>n,r=i=>i.error(t());return new fe(e?i=>e.schedule(r,0,i):r)}function up(n){return!!n&&(n instanceof fe||le(n.lift)&&le(n.subscribe))}var ii=uc(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function QV(n,e){let t=typeof e=="object";return new Promise((r,i)=>{let s=new cs({next:o=>{r(o),s.unsubscribe()},error:i,complete:()=>{t?r(e.defaultValue):i(new ii)}});n.subscribe(s)})}function Ke(n,e){return Le((t,r)=>{let i=0;t.subscribe(Fe(r,s=>{r.next(n.call(e,s,i++))}))})}var{isArray:YV}=Array;function JV(n,e){return YV(e)?n(...e):n(e)}function lp(n){return Ke(e=>JV(n,e))}var{isArray:XV}=Array,{getPrototypeOf:ZV,prototype:e2,keys:t2}=Object;function dp(n){if(n.length===1){let e=n[0];if(XV(e))return{args:e,keys:null};if(n2(e)){let t=t2(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function n2(n){return n&&typeof n=="object"&&ZV(n)===e2}function hp(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Iv(...n){let e=us(n),t=Jf(n),{args:r,keys:i}=dp(n);if(r.length===0)return ct([],e);let s=new fe(r2(r,e,i?o=>hp(i,o):Jn));return t?s.pipe(lp(t)):s}function r2(n,e,t=Jn){return r=>{ZC(e,()=>{let{length:i}=n,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)ZC(e,()=>{let d=ct(n[c],e),h=!1;d.subscribe(Fe(r,g=>{s[c]=g,h||(h=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function ZC(n,e,t){n?dn(t,n,e):e()}function eR(n,e,t,r,i,s,o,a){let c=[],d=0,h=0,g=!1,E=()=>{g&&!c.length&&!d&&e.complete()},S=M=>d<r?R(M):c.push(M),R=M=>{s&&e.next(M),d++;let k=!1;at(t(M,h++)).subscribe(Fe(e,V=>{i?.(V),s?S(V):e.next(V)},()=>{k=!0},void 0,()=>{if(k)try{for(d--;c.length&&d<r;){let V=c.shift();o?dn(e,o,()=>R(V)):R(V)}E()}catch(V){e.error(V)}}))};return n.subscribe(Fe(e,S,()=>{g=!0,E()})),()=>{a?.()}}function tn(n,e,t=1/0){return le(e)?tn((r,i)=>Ke((s,o)=>e(r,s,i,o))(at(n(r,i))),t):(typeof e=="number"&&(t=e),Le((r,i)=>eR(r,i,n,t)))}function tR(n=1/0){return tn(Jn,n)}function nR(){return tR(1)}function mc(...n){return nR()(ct(n,us(n)))}function Ll(n){return new fe(e=>{at(n()).subscribe(e)})}function i2(...n){let e=Jf(n),{args:t,keys:r}=dp(n),i=new fe(s=>{let{length:o}=t;if(!o){s.complete();return}let a=new Array(o),c=o,d=o;for(let h=0;h<o;h++){let g=!1;at(t[h]).subscribe(Fe(s,E=>{g||(g=!0,d--),a[h]=E},()=>c--,void 0,()=>{(!c||!g)&&(d||s.next(r?hp(r,a):a),s.complete())}))}});return e?i.pipe(lp(e)):i}function wr(n,e){return Le((t,r)=>{let i=0;t.subscribe(Fe(r,s=>n.call(e,s,i++)&&r.next(s)))})}function Fl(n){return Le((e,t)=>{let r=null,i=!1,s;r=e.subscribe(Fe(t,void 0,void 0,o=>{s=at(n(o,Fl(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function fp(n,e){return le(e)?tn(n,e,1):tn(n,1)}function rR(n){return Le((e,t)=>{let r=!1;e.subscribe(Fe(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function si(n){return n<=0?()=>Lt:Le((e,t)=>{let r=0;e.subscribe(Fe(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function iR(n=s2){return Le((e,t)=>{let r=!1;e.subscribe(Fe(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function s2(){return new ii}function Ev(n){return Le((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function oi(n,e){let t=arguments.length>=2;return r=>r.pipe(n?wr((i,s)=>n(i,s,r)):Jn,si(1),t?rR(e):iR(()=>new ii))}function pp(n){return n<=0?()=>Lt:Le((e,t)=>{let r=[];e.subscribe(Fe(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function gp(...n){let e=us(n);return Le((t,r)=>{(e?mc(n,t,e):mc(n,t)).subscribe(r)})}function ai(n,e){return Le((t,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();t.subscribe(Fe(r,c=>{i?.unsubscribe();let d=0,h=s++;at(n(c,h)).subscribe(i=Fe(r,g=>r.next(e?e(c,g,h,d++):g),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Vl(n){return Le((e,t)=>{at(n).subscribe(Fe(t,()=>t.complete(),xl)),!t.closed&&e.subscribe(t)})}function Tr(n,e,t){let r=le(n)||e||t?{next:n,error:e,complete:t}:n;return r?Le((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(Fe(s,c=>{var d;(d=r.next)===null||d===void 0||d.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var d;a=!1,(d=r.error)===null||d===void 0||d.call(r,c),s.error(c)},()=>{var c,d;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(d=r.finalize)===null||d===void 0||d.call(r)}))}):Jn}var wv;function mp(){return wv}function br(n){let e=wv;return wv=n,e}var sR=Symbol("NotFound");function yc(n){return n===sR||n?.name==="\u0275NotFound"}var vc=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},Vv=new vc("21.1.0");var Ep="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",Y=class extends Error{code;constructor(e,t){super(Ic(e,t)),this.code=e}};function c2(n){return`NG0${Math.abs(n)}`}function Ic(n,e){return`${c2(n)}${e?": "+e:""}`}var ql=globalThis;function Ve(n){for(let e in n)if(n[e]===Ve)return e;throw Error("")}function lR(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function ui(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(ui).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function Uv(n,e){return n?e?`${n} ${e}`:n:e||""}var u2=Ve({__forward_ref__:Ve});function wp(n){return n.__forward_ref__=wp,n.toString=function(){return ui(this())},n}function Ft(n){return jv(n)?n():n}function jv(n){return typeof n=="function"&&n.hasOwnProperty(u2)&&n.__forward_ref__===wp}function Z(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Ro(n){return{providers:n.providers||[],imports:n.imports||[]}}function zl(n){return l2(n,Tp)}function Bv(n){return zl(n)!==null}function l2(n,e){return n.hasOwnProperty(e)&&n[e]||null}function d2(n){let e=n?.[Tp]??null;return e||null}function bv(n){return n&&n.hasOwnProperty(_p)?n[_p]:null}var Tp=Ve({\u0275prov:Ve}),_p=Ve({\u0275inj:Ve}),J=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=Z({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function $v(n){return n&&!!n.\u0275providers}var Hv=Ve({\u0275cmp:Ve}),qv=Ve({\u0275dir:Ve}),zv=Ve({\u0275pipe:Ve}),Gv=Ve({\u0275mod:Ve}),jl=Ve({\u0275fac:Ve}),No=Ve({__NG_ELEMENT_ID__:Ve}),oR=Ve({__NG_ENV_ID__:Ve});function Wv(n){return bp(n,"@NgModule"),n[Gv]||null}function gs(n){return bp(n,"@Component"),n[Hv]||null}function Kv(n){return bp(n,"@Directive"),n[qv]||null}function dR(n){return bp(n,"@Pipe"),n[zv]||null}function bp(n,e){if(n==null)throw new Y(-919,!1)}function Gl(n){return typeof n=="string"?n:n==null?"":String(n)}function hR(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Gl(n)}var fR=Ve({ngErrorCode:Ve}),h2=Ve({ngErrorMessage:Ve}),f2=Ve({ngTokenPath:Ve});function Qv(n,e){return pR("",-200,e)}function Ap(n,e){throw new Y(-201,!1)}function pR(n,e,t){let r=new Y(e,n);return r[fR]=e,r[h2]=n,t&&(r[f2]=t),r}function p2(n){return n[fR]}var Av;function gR(){return Av}function nn(n){let e=Av;return Av=n,e}function Yv(n,e,t){let r=zl(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;Ap(n,"")}var g2={},Ao=g2,Sv="__NG_DI_FLAG__",Dv=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=So(t)||0;try{return this.injector.get(e,r&8?null:Ao,r)}catch(i){if(yc(i))return i;throw i}}};function m2(n,e=0){let t=mp();if(t===void 0)throw new Y(-203,!1);if(t===null)return Yv(n,void 0,e);{let r=y2(e),i=t.retrieve(n,r);if(yc(i)){if(r.optional)return null;throw i}return i}}function me(n,e=0){return(gR()||m2)(Ft(n),e)}function L(n,e){return me(n,So(e))}function So(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function y2(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function Cv(n){let e=[];for(let t=0;t<n.length;t++){let r=Ft(n[t]);if(Array.isArray(r)){if(r.length===0)throw new Y(900,!1);let i,s=0;for(let o=0;o<r.length;o++){let a=r[o],c=_2(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(me(i,s))}else e.push(me(r))}return e}function mR(n,e){return n[Sv]=e,n.prototype[Sv]=e,n}function _2(n){return n[Sv]}function hs(n,e){let t=n.hasOwnProperty(jl);return t?n[jl]:null}function Sp(n,e){n.forEach(t=>Array.isArray(t)?Sp(t,e):e(t))}function Jv(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Wl(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function yR(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let s=i-2;n[i]=n[s],i--}n[e]=t,n[e+1]=r}}function _R(n,e,t){let r=Ec(n,e);return r>=0?n[r|1]=t:(r=~r,yR(n,r,e,t)),r}function Dp(n,e){let t=Ec(n,e);if(t>=0)return n[t|1]}function Ec(n,e){return v2(n,e,1)}function v2(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}var ms={},In=[],ys=new J(""),Xv=new J("",-1),Zv=new J(""),Bl=class{get(e,t=Ao){if(t===Ao){let i=pR("",-201);throw i.name="\u0275NotFound",i}return t}};function Xn(n){return{\u0275providers:n}}function vR(...n){return{\u0275providers:eI(!0,n),\u0275fromNgModule:!0}}function eI(n,...e){let t=[],r=new Set,i,s=o=>{t.push(o)};return Sp(e,o=>{let a=o;vp(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&IR(i,s),t}function IR(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];tI(i,s=>{e(s,r)})}}function vp(n,e,t,r){if(n=Ft(n),!n)return!1;let i=null,s=bv(n),o=!s&&gs(n);if(!s&&!o){let c=n.ngModule;if(s=bv(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=n}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let d of c)vp(d,e,t,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let d;Sp(s.imports,h=>{vp(h,e,t,r)&&(d||=[],d.push(h))}),d!==void 0&&IR(d,e)}if(!a){let d=hs(i)||(()=>new i);e({provide:i,useFactory:d,deps:In},i),e({provide:Zv,useValue:i,multi:!0},i),e({provide:ys,useValue:()=>me(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let d=n;tI(c,h=>{e(h,d)})}}else return!1;return i!==n&&n.providers!==void 0}function tI(n,e){for(let t of n)$v(t)&&(t=t.\u0275providers),Array.isArray(t)?tI(t,e):e(t)}var I2=Ve({provide:String,useValue:Ve});function ER(n){return n!==null&&typeof n=="object"&&I2 in n}function E2(n){return!!(n&&n.useExisting)}function w2(n){return!!(n&&n.useFactory)}function Do(n){return typeof n=="function"}function wR(n){return!!n.useClass}var Kl=new J(""),yp={},aR={},Tv;function Ql(){return Tv===void 0&&(Tv=new Bl),Tv}var Xe=class{},Co=class extends Xe{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,Nv(e,o=>this.processProvider(o)),this.records.set(Xv,_c(void 0,this)),i.has("environment")&&this.records.set(Xe,_c(void 0,this));let s=this.records.get(Kl);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(Zv,In,{self:!0}))}retrieve(e,t){let r=So(t)||0;try{return this.get(e,Ao,r)}catch(i){if(yc(i))return i;throw i}}destroy(){Ul(this),this._destroyed=!0;let e=ge(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ge(e)}}onDestroy(e){return Ul(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Ul(this);let t=br(this),r=nn(void 0),i;try{return e()}finally{br(t),nn(r)}}get(e,t=Ao,r){if(Ul(this),e.hasOwnProperty(oR))return e[oR](this);let i=So(r),s,o=br(this),a=nn(void 0);try{if(!(i&4)){let d=this.records.get(e);if(d===void 0){let h=D2(e)&&zl(e);h&&this.injectableDefInScope(h)?d=_c(Rv(e),yp):d=null,this.records.set(e,d)}if(d!=null)return this.hydrate(e,d,i)}let c=i&2?Ql():this.parent;return t=i&8&&t===Ao?null:t,c.get(e,t)}catch(c){let d=p2(c);throw d===-200||d===-201?new Y(d,null):c}finally{nn(a),br(o)}}resolveInjectorInitializers(){let e=ge(null),t=br(this),r=nn(void 0),i;try{let s=this.get(ys,In,{self:!0});for(let o of s)o()}finally{br(t),nn(r),ge(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(ui(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Ft(e);let t=Do(e)?e:Ft(e&&e.provide),r=b2(e);if(!Do(e)&&e.multi===!0){let i=this.records.get(t);i||(i=_c(void 0,yp,!0),i.factory=()=>Cv(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=ge(null);try{if(t.value===aR)throw Qv(ui(e));return t.value===yp&&(t.value=aR,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&S2(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{ge(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Ft(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Rv(n){let e=zl(n),t=e!==null?e.factory:hs(n);if(t!==null)return t;if(n instanceof J)throw new Y(204,!1);if(n instanceof Function)return T2(n);throw new Y(204,!1)}function T2(n){if(n.length>0)throw new Y(204,!1);let t=d2(n);return t!==null?()=>t.factory(n):()=>new n}function b2(n){if(ER(n))return _c(void 0,n.useValue);{let e=nI(n);return _c(e,yp)}}function nI(n,e,t){let r;if(Do(n)){let i=Ft(n);return hs(i)||Rv(i)}else if(ER(n))r=()=>Ft(n.useValue);else if(w2(n))r=()=>n.useFactory(...Cv(n.deps||[]));else if(E2(n))r=(i,s)=>me(Ft(n.useExisting),s!==void 0&&s&8?8:void 0);else{let i=Ft(n&&(n.useClass||n.provide));if(A2(n))r=()=>new i(...Cv(n.deps));else return hs(i)||Rv(i)}return r}function Ul(n){if(n.destroyed)throw new Y(205,!1)}function _c(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function A2(n){return!!n.deps}function S2(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function D2(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function Nv(n,e){for(let t of n)Array.isArray(t)?Nv(t,e):t&&$v(t)?Nv(t.\u0275providers,e):e(t)}function ut(n,e){let t;n instanceof Co?(Ul(n),t=n):t=new Dv(n);let r,i=br(t),s=nn(void 0);try{return e()}finally{br(i),nn(s)}}function TR(){return gR()!==void 0||mp()!=null}var Zn=0,oe=1,de=2,Vt=3,kn=4,Mn=5,Yl=6,wc=7,Gt=8,_s=9,Ar=10,Ze=11,Tc=12,rI=13,Po=14,xn=15,ko=16,Mo=17,xo=18,vs=19,iI=20,ci=21,Cp=22,Jl=23,En=24,Rp=25,Xl=26,Ut=27,bR=1;var Is=7,Zl=8,ed=9,hn=10;function Sr(n){return Array.isArray(n)&&typeof n[bR]=="object"}function er(n){return Array.isArray(n)&&n[bR]===!0}function sI(n){return(n.flags&4)!==0}function Es(n){return n.componentOffset>-1}function bc(n){return(n.flags&1)===1}function Dr(n){return!!n.template}function Ac(n){return(n[de]&512)!==0}function Oo(n){return(n[de]&256)===256}var AR="svg",SR="math";function On(n){for(;Array.isArray(n);)n=n[Zn];return n}function oI(n,e){return On(e[n])}function tr(n,e){return On(e[n.index])}function Np(n,e){return n.data[e]}function DR(n,e){return n[e]}function aI(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function Ln(n,e){let t=e[n];return Sr(t)?t:t[Zn]}function Pp(n){return(n[de]&128)===128}function CR(n){return er(n[Vt])}function Lo(n,e){return e==null?null:n[e]}function cI(n){n[Mo]=0}function uI(n){n[de]&1024||(n[de]|=1024,Pp(n)&&nd(n))}function RR(n,e){for(;n>0;)e=e[Po],n--;return e}function td(n){return!!(n[de]&9216||n[En]?.dirty)}function kp(n){n[Ar].changeDetectionScheduler?.notify(8),n[de]&64&&(n[de]|=1024),td(n)&&nd(n)}function nd(n){n[Ar].changeDetectionScheduler?.notify(0);let e=fs(n);for(;e!==null&&!(e[de]&8192||(e[de]|=8192,!Pp(e)));)e=fs(e)}function lI(n,e){if(Oo(n))throw new Y(911,!1);n[ci]===null&&(n[ci]=[]),n[ci].push(e)}function NR(n,e){if(n[ci]===null)return;let t=n[ci].indexOf(e);t!==-1&&n[ci].splice(t,1)}function fs(n){let e=n[Vt];return er(e)?e[Vt]:e}function PR(n){return n[wc]??=[]}function kR(n){return n.cleanup??=[]}var ve={lFrame:KR(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Pv=!1;function MR(){return ve.lFrame.elementDepthCount}function xR(){ve.lFrame.elementDepthCount++}function dI(){ve.lFrame.elementDepthCount--}function Mp(){return ve.bindingsEnabled}function OR(){return ve.skipHydrationRootTNode!==null}function hI(n){return ve.skipHydrationRootTNode===n}function fI(){ve.skipHydrationRootTNode=null}function Be(){return ve.lFrame.lView}function fn(){return ve.lFrame.tView}function LR(n){return ve.lFrame.contextLView=n,n[Gt]}function FR(n){return ve.lFrame.contextLView=null,n}function Wt(){let n=pI();for(;n!==null&&n.type===64;)n=n.parent;return n}function pI(){return ve.lFrame.currentTNode}function VR(){let n=ve.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Sc(n,e){let t=ve.lFrame;t.currentTNode=n,t.isParent=e}function gI(){return ve.lFrame.isParent}function UR(){ve.lFrame.isParent=!1}function mI(){return Pv}function yI(n){let e=Pv;return Pv=n,e}function jR(){let n=ve.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function BR(n){return ve.lFrame.bindingIndex=n}function xp(){return ve.lFrame.bindingIndex++}function $R(n){let e=ve.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function HR(){return ve.lFrame.inI18n}function qR(n,e){let t=ve.lFrame;t.bindingIndex=t.bindingRootIndex=n,Op(e)}function zR(){return ve.lFrame.currentDirectiveIndex}function Op(n){ve.lFrame.currentDirectiveIndex=n}function GR(n){let e=ve.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function _I(n){ve.lFrame.currentQueryIndex=n}function C2(n){let e=n[oe];return e.type===2?e.declTNode:e.type===1?n[Mn]:null}function vI(n,e,t){if(t&4){let i=e,s=n;for(;i=i.parent,i===null&&!(t&1);)if(i=C2(s),i===null||(s=s[Po],i.type&10))break;if(i===null)return!1;e=i,n=s}let r=ve.lFrame=WR();return r.currentTNode=e,r.lView=n,!0}function Lp(n){let e=WR(),t=n[oe];ve.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function WR(){let n=ve.lFrame,e=n===null?null:n.child;return e===null?KR(n):e}function KR(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function QR(){let n=ve.lFrame;return ve.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var II=QR;function Fp(){let n=QR();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function YR(n){return(ve.lFrame.contextLView=RR(n,ve.lFrame.contextLView))[Gt]}function Fo(){return ve.lFrame.selectedIndex}function ws(n){ve.lFrame.selectedIndex=n}function EI(){let n=ve.lFrame;return Np(n.tView,n.selectedIndex)}function JR(){return ve.lFrame.currentNamespace}var XR=!0;function Vp(){return XR}function rd(n){XR=n}function kv(n,e=null,t=null,r){let i=wI(n,e,t,r);return i.resolveInjectorInitializers(),i}function wI(n,e=null,t=null,r,i=new Set){let s=[t||In,vR(n)];return r=r||(typeof n=="object"?void 0:ui(n)),new Co(s,e||Ql(),r||null,i)}var At=class n{static THROW_IF_NOT_FOUND=Ao;static NULL=new Bl;static create(e,t){if(Array.isArray(e))return kv({name:""},t,e,"");{let r=e.name??"";return kv({name:r},e.parent,e.providers,r)}}static \u0275prov=Z({token:n,providedIn:"any",factory:()=>me(Xv)});static __NG_ELEMENT_ID__=-1},St=new J(""),Ts=(()=>{class n{static __NG_ELEMENT_ID__=R2;static __NG_ENV_ID__=t=>t}return n})(),Mv=class extends Ts{_lView;constructor(e){super(),this._lView=e}get destroyed(){return Oo(this._lView)}onDestroy(e){let t=this._lView;return lI(t,e),()=>NR(t,e)}};function R2(){return new Mv(Be())}var TI=!1,ZR=new J(""),Cr=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Ot(!1);debugTaskTracker=L(ZR,{optional:!0});get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new fe(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),this.debugTaskTracker?.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.debugTaskTracker?.remove(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=Z({token:n,providedIn:"root",factory:()=>new n})}return n})(),xv=class extends xt{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,TR()&&(this.destroyRef=L(Ts,{optional:!0})??void 0,this.pendingTasks=L(Cr,{optional:!0})??void 0)}emit(e){let t=ge(null);try{super.next(e)}finally{ge(t)}}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof rt&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},rn=xv;function Ip(...n){}function bI(n){let e,t;function r(){n=Ip;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function e0(n){return queueMicrotask(()=>n()),()=>{n=Ip}}var AI="isAngularZone",$l=AI+"_ID",N2=0,Ue=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new rn(!1);onMicrotaskEmpty=new rn(!1);onStable=new rn(!1);onError=new rn(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=TI}=e;if(typeof Zone>"u")throw new Y(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,M2(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(AI)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new Y(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new Y(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,P2,Ip,Ip);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},P2={};function SI(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function k2(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){bI(()=>{n.callbackScheduled=!1,Ov(n),n.isCheckStableRunning=!0,SI(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Ov(n)}function M2(n){let e=()=>{k2(n)},t=N2++;n._inner=n._inner.fork({name:"angular",properties:{[AI]:!0,[$l]:t,[$l+t]:!0},onInvokeTask:(r,i,s,o,a,c)=>{if(x2(c))return r.invokeTask(s,o,a,c);try{return cR(n),r.invokeTask(s,o,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),uR(n)}},onInvoke:(r,i,s,o,a,c,d)=>{try{return cR(n),r.invoke(s,o,a,c,d)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!O2(c)&&e(),uR(n)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,Ov(n),SI(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function Ov(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function cR(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function uR(n){n._nesting--,SI(n)}var Hl=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new rn;onMicrotaskEmpty=new rn;onStable=new rn;onError=new rn;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function x2(n){return t0(n,"__ignore_ng_zone__")}function O2(n){return t0(n,"__scheduler_tick__")}function t0(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var li=class{_console=console;handleError(e){this._console.error("ERROR",e)}},pn=new J("",{factory:()=>{let n=L(Ue),e=L(Xe),t;return r=>{n.runOutsideAngular(()=>{e.destroyed&&!t?setTimeout(()=>{throw r}):(t??=e.get(li),t.handleError(r))})}}}),n0={provide:ys,useValue:()=>{let n=L(li,{optional:!0})},multi:!0};function bs(n,e){let[t,r,i]=av(n,e?.equal),s=t,o=s[ln];return s.set=r,s.update=i,s.asReadonly=r0.bind(s),s}function r0(){let n=this[ln];if(n.readonlyFn===void 0){let e=()=>this();e[ln]=n,n.readonlyFn=e}return n.readonlyFn}var ps=class{},Dc=new J("",{factory:()=>!0});var Up=new J(""),Cc=(()=>{class n{internalPendingTasks=L(Cr);scheduler=L(ps);errorHandler=L(pn);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=Z({token:n,providedIn:"root",factory:()=>new n})}return n})(),DI=(()=>{class n{static \u0275prov=Z({token:n,providedIn:"root",factory:()=>new Lv})}return n})(),Lv=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}},Fv=class{[ln];constructor(e){this[ln]=e}destroy(){this[ln].destroy()}};function gn(n){return cv(n)}function Lc(n){return{toString:n}.toString()}var jp="__parameters__";function q2(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function z2(n,e,t){return Lc(()=>{let r=q2(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,d,h){let g=c.hasOwnProperty(jp)?c[jp]:Object.defineProperty(c,jp,{value:[]})[jp];for(;g.length<=h;)g.push(null);return(g[h]=g[h]||[]).push(o),c}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var wn=mR(z2("Optional"),8);function G2(n){return typeof n=="function"}function k0(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var Wp=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}},Fc=(()=>{let n=()=>M0;return n.ngInherit=!0,n})();function M0(n){return n.type.prototype.ngOnChanges&&(n.setInput=K2),W2}function W2(){let n=O0(this),e=n?.current;if(e){let t=n.previous;if(t===ms)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function K2(n,e,t,r,i){let s=this.declaredInputs[r],o=O0(n)||Q2(n,{previous:ms,current:null}),a=o.current||(o.current={}),c=o.previous,d=c[s];a[s]=new Wp(d&&d.currentValue,t,c===ms),k0(n,e,i,t)}var x0="__ngSimpleChanges__";function O0(n){return n[x0]||null}function Q2(n,e){return n[x0]=e}var i0=[];var qe=function(n,e=null,t){for(let r=0;r<i0.length;r++){let i=i0[r];i(n,e,t)}},Me=(function(n){return n[n.TemplateCreateStart=0]="TemplateCreateStart",n[n.TemplateCreateEnd=1]="TemplateCreateEnd",n[n.TemplateUpdateStart=2]="TemplateUpdateStart",n[n.TemplateUpdateEnd=3]="TemplateUpdateEnd",n[n.LifecycleHookStart=4]="LifecycleHookStart",n[n.LifecycleHookEnd=5]="LifecycleHookEnd",n[n.OutputStart=6]="OutputStart",n[n.OutputEnd=7]="OutputEnd",n[n.BootstrapApplicationStart=8]="BootstrapApplicationStart",n[n.BootstrapApplicationEnd=9]="BootstrapApplicationEnd",n[n.BootstrapComponentStart=10]="BootstrapComponentStart",n[n.BootstrapComponentEnd=11]="BootstrapComponentEnd",n[n.ChangeDetectionStart=12]="ChangeDetectionStart",n[n.ChangeDetectionEnd=13]="ChangeDetectionEnd",n[n.ChangeDetectionSyncStart=14]="ChangeDetectionSyncStart",n[n.ChangeDetectionSyncEnd=15]="ChangeDetectionSyncEnd",n[n.AfterRenderHooksStart=16]="AfterRenderHooksStart",n[n.AfterRenderHooksEnd=17]="AfterRenderHooksEnd",n[n.ComponentStart=18]="ComponentStart",n[n.ComponentEnd=19]="ComponentEnd",n[n.DeferBlockStateStart=20]="DeferBlockStateStart",n[n.DeferBlockStateEnd=21]="DeferBlockStateEnd",n[n.DynamicComponentStart=22]="DynamicComponentStart",n[n.DynamicComponentEnd=23]="DynamicComponentEnd",n[n.HostBindingsUpdateStart=24]="HostBindingsUpdateStart",n[n.HostBindingsUpdateEnd=25]="HostBindingsUpdateEnd",n})(Me||{});function Y2(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=M0(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}function L0(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:d,ngOnDestroy:h}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),d&&((n.viewHooks??=[]).push(t,d),(n.viewCheckHooks??=[]).push(t,d)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function Hp(n,e,t){F0(n,e,3,t)}function qp(n,e,t,r){(n[de]&3)===t&&F0(n,e,t,r)}function CI(n,e){let t=n[de];(t&3)===e&&(t&=16383,t+=1,n[de]=t)}function F0(n,e,t,r){let i=r!==void 0?n[Mo]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[Mo]+=65536),(a<s||s==-1)&&(J2(n,t,e,c),n[Mo]=(n[Mo]&4294901760)+c+2),c++}function s0(n,e){qe(Me.LifecycleHookStart,n,e);let t=ge(null);try{e.call(n)}finally{ge(t),qe(Me.LifecycleHookEnd,n,e)}}function J2(n,e,t,r){let i=t[r]<0,s=t[r+1],o=i?-t[r]:t[r],a=n[o];i?n[de]>>14<n[Mo]>>16&&(n[de]&3)===e&&(n[de]+=16384,s0(a,s)):s0(a,s)}var Nc=-1,Uo=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}};function X2(n){return(n.flags&8)!==0}function Z2(n){return(n.flags&16)!==0}function eU(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{let s=i,o=t[++r];tU(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function V0(n){return n===3||n===4||n===6}function tU(n){return n.charCodeAt(0)===64}function Pc(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?o0(n,t,i,null,e[++r]):o0(n,t,i,null,null))}}return n}function o0(n,e,t,r,i){let s=0,o=n.length;if(e===-1)o=-1;else for(;s<n.length;){let a=n[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<n.length;){let a=n[s];if(typeof a=="number")break;if(a===t){i!==null&&(n[s+1]=i);return}s++,i!==null&&s++}o!==-1&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),i!==null&&n.splice(s++,0,i)}function U0(n){return n!==Nc}function Kp(n){return n&32767}function nU(n){return n>>16}function Qp(n,e){let t=nU(n),r=e;for(;t>0;)r=r[Po],t--;return r}var FI=!0;function Yp(n){let e=FI;return FI=n,e}var rU=256,j0=rU-1,B0=5,iU=0,Rr={};function sU(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(No)&&(r=t[No]),r==null&&(r=t[No]=iU++);let i=r&j0,s=1<<i;e.data[n+(i>>B0)]|=s}function Jp(n,e){let t=$0(n,e);if(t!==-1)return t;let r=e[oe];r.firstCreatePass&&(n.injectorIndex=e.length,RI(r.data,n),RI(e,null),RI(r.blueprint,null));let i=XI(n,e),s=n.injectorIndex;if(U0(i)){let o=Kp(i),a=Qp(i,e),c=a[oe].data;for(let d=0;d<8;d++)e[s+d]=a[o+d]|c[o+d]}return e[s+8]=i,s}function RI(n,e){n.push(0,0,0,0,0,0,0,0,e)}function $0(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function XI(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=W0(i),r===null)return Nc;if(t++,i=i[Po],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Nc}function VI(n,e,t){sU(n,e,t)}function oU(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let s=t[i];if(V0(s))break;if(s===0)i=i+2;else if(typeof s=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(s===e)return t[i+1];i=i+2}}}return null}function H0(n,e,t){if(t&8||n!==void 0)return n;Ap(e,"NodeInjector")}function q0(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[_s],s=nn(void 0);try{return i?i.get(e,r,t&8):Yv(e,r,t&8)}finally{nn(s)}}return H0(r,e,t)}function z0(n,e,t,r=0,i){if(n!==null){if(e[de]&2048&&!(r&2)){let o=dU(n,e,t,r,Rr);if(o!==Rr)return o}let s=G0(n,e,t,r,Rr);if(s!==Rr)return s}return q0(e,t,r,i)}function G0(n,e,t,r,i){let s=uU(t);if(typeof s=="function"){if(!vI(e,n,r))return r&1?H0(i,t,r):q0(e,t,r,i);try{let o;if(o=s(r),o==null&&!(r&8))Ap(t);else return o}finally{II()}}else if(typeof s=="number"){let o=null,a=$0(n,e),c=Nc,d=r&1?e[xn][Mn]:null;for((a===-1||r&4)&&(c=a===-1?XI(n,e):e[a+8],c===Nc||!c0(r,!1)?a=-1:(o=e[oe],a=Kp(c),e=Qp(c,e)));a!==-1;){let h=e[oe];if(a0(s,a,h.data)){let g=aU(a,e,t,o,r,d);if(g!==Rr)return g}c=e[a+8],c!==Nc&&c0(r,e[oe].data[a+8]===d)&&a0(s,a,e)?(o=h,a=Kp(c),e=Qp(c,e)):a=-1}}return i}function aU(n,e,t,r,i,s){let o=e[oe],a=o.data[n+8],c=r==null?Es(a)&&FI:r!=o&&(a.type&3)!==0,d=i&1&&s===a,h=cU(a,o,t,c,d);return h!==null?Xp(e,o,h,a,i):Rr}function cU(n,e,t,r,i){let s=n.providerIndexes,o=e.data,a=s&1048575,c=n.directiveStart,d=n.directiveEnd,h=s>>20,g=r?a:a+h,E=i?a+h:d;for(let S=g;S<E;S++){let R=o[S];if(S<c&&t===R||S>=c&&R.type===t)return S}if(i){let S=o[c];if(S&&Dr(S)&&S.type===t)return c}return null}function Xp(n,e,t,r,i){let s=n[t],o=e.data;if(s instanceof Uo){let a=s;if(a.resolving){let S=hR(o[t]);throw Qv(S)}let c=Yp(a.canSeeViewProviders);a.resolving=!0;let d=o[t].type||o[t],h,g=a.injectImpl?nn(a.injectImpl):null,E=vI(n,r,0);try{s=n[t]=a.factory(void 0,i,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&Y2(t,o[t],e)}finally{g!==null&&nn(g),Yp(c),a.resolving=!1,II()}}return s}function uU(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(No)?n[No]:void 0;return typeof e=="number"?e>=0?e&j0:lU:e}function a0(n,e,t){let r=1<<n;return!!(t[e+(n>>B0)]&r)}function c0(n,e){return!(n&2)&&!(n&1&&e)}var Vo=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return z0(this._tNode,this._lView,e,So(r),t)}};function lU(){return new Vo(Wt(),Be())}function cg(n){return Lc(()=>{let e=n.prototype.constructor,t=e[jl]||UI(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let s=i[jl]||UI(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function UI(n){return jv(n)?()=>{let e=UI(Ft(n));return e&&e()}:hs(n)}function dU(n,e,t,r,i){let s=n,o=e;for(;s!==null&&o!==null&&o[de]&2048&&!Ac(o);){let a=G0(s,o,t,r|2,Rr);if(a!==Rr)return a;let c=s.parent;if(!c){let d=o[iI];if(d){let h=d.get(t,Rr,r);if(h!==Rr)return h}c=W0(o),o=o[Po]}s=c}return i}function W0(n){let e=n[oe],t=e.type;return t===2?e.declTNode:t===1?n[Mn]:null}function ud(n){return oU(Wt(),n)}function hU(){return ug(Wt(),Be())}function ug(n,e){return new ld(tr(n,e))}var ld=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=hU}return n})();function K0(n){return(n.flags&128)===128}var ZI=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(ZI||{}),Q0=new Map,fU=0;function pU(){return fU++}function gU(n){Q0.set(n[vs],n)}function jI(n){Q0.delete(n[vs])}var u0="__ngContext__";function kc(n,e){Sr(e)?(n[u0]=e[vs],gU(e)):n[u0]=e}function Y0(n){return X0(n[Tc])}function J0(n){return X0(n[kn])}function X0(n){for(;n!==null&&!er(n);)n=n[kn];return n}var mU;function eE(n){mU=n}var lg=new J("",{factory:()=>yU}),yU="ng";var dg=new J(""),Ho=new J("",{providedIn:"platform",factory:()=>"unknown"});var hg=new J("",{factory:()=>L(St).body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var Z0=!1,eN=new J("",{factory:()=>Z0});var _U=(n,e,t,r)=>{};function vU(n,e,t,r){_U(n,e,t,r)}function tE(n){return(n.flags&32)===32}var IU=()=>null;function tN(n,e,t=!1){return IU(n,e,t)}function nN(n,e){let t=n.contentQueries;if(t!==null){let r=ge(null);try{for(let i=0;i<t.length;i+=2){let s=t[i],o=t[i+1];if(o!==-1){let a=n.data[o];_I(s),a.contentQueries(2,e[o],o)}}}finally{ge(r)}}}function BI(n,e,t){_I(0);let r=ge(null);try{e(n,t)}finally{ge(r)}}function nE(n,e,t){if(sI(e)){let r=ge(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=n.data[o];if(a.contentQueries){let c=t[o];a.contentQueries(1,c,o)}}}finally{ge(r)}}}var rr=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n[n.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",n})(rr||{});var Bp;function EU(){if(Bp===void 0&&(Bp=null,ql.trustedTypes))try{Bp=ql.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Bp}function l0(n){return EU()?.createScriptURL(n)||n}var Zp=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Ep})`}};function fg(n){return n instanceof Zp?n.changingThisBreaksApplicationSecurity:n}function rE(n,e){let t=rN(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${Ep})`)}return t===e}function rN(n){return n instanceof Zp&&n.getTypeName()||null}var wU=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function iN(n){return n=String(n),n.match(wU)?n:"unsafe:"+n}var TU=/^>|^->|<!--|-->|--!>|<!-$/g,bU=/(<|>)/g,AU="\u200B$1\u200B";function SU(n){return n.replace(TU,e=>e.replace(bU,AU))}function DU(n,e){return n.createText(e)}function CU(n,e,t){n.setValue(e,t)}function RU(n,e){return n.createComment(SU(e))}function sN(n,e,t){return n.createElement(e,t)}function eg(n,e,t,r,i){n.insertBefore(e,t,r,i)}function oN(n,e,t){n.appendChild(e,t)}function d0(n,e,t,r,i){r!==null?eg(n,e,t,r,i):oN(n,e,t)}function NU(n,e,t,r){n.removeChild(null,e,t,r)}function PU(n,e,t){n.setAttribute(e,"style",t)}function kU(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function aN(n,e,t){let{mergedAttrs:r,classes:i,styles:s}=t;r!==null&&eU(n,e,r),i!==null&&kU(n,e,i),s!==null&&PU(n,e,s)}var pg=(function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n})(pg||{});function cN(n){let e=lN();return e?e.sanitize(pg.URL,n)||"":rE(n,"URL")?fg(n):iN(Gl(n))}function uN(n){let e=lN();if(e)return l0(e.sanitize(pg.RESOURCE_URL,n)||"");if(rE(n,"ResourceURL"))return l0(fg(n));throw new Y(904,!1)}var MU=new Set(["embed","frame","iframe","media","script"]),xU=new Set(["base","link","script"]);function OU(n,e){return e==="src"&&MU.has(n)||e==="href"&&xU.has(n)||e==="xlink:href"&&n==="script"?uN:cN}function iE(n,e,t){return OU(e,t)(n)}function lN(){let n=Be();return n&&n[Ar].sanitizer}function dN(n){return n instanceof Function?n():n}function LU(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}var hN="ng-template";function FU(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&LU(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(sE(n))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===t)return!0}return!1}function sE(n){return n.type===4&&n.value!==hN}function VU(n,e,t){let r=n.type===4&&!t?hN:n.value;return e===r}function UU(n,e,t){let r=4,i=n.attrs,s=i!==null?$U(i):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!nr(r)&&!nr(c))return!1;if(o&&nr(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!VU(n,c,t)||c===""&&e.length===1){if(nr(r))return!1;o=!0}}else if(r&8){if(i===null||!FU(n,i,c,t)){if(nr(r))return!1;o=!0}}else{let d=e[++a],h=jU(c,i,sE(n),t);if(h===-1){if(nr(r))return!1;o=!0;continue}if(d!==""){let g;if(h>s?g="":g=i[h+1].toLowerCase(),r&2&&d!==g){if(nr(r))return!1;o=!0}}}}return nr(r)||o}function nr(n){return(n&1)===0}function jU(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){let o=e[i];if(o===n)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return HU(e,n)}function BU(n,e,t=!1){for(let r=0;r<e.length;r++)if(UU(n,e[r],t))return!0;return!1}function $U(n){for(let e=0;e<n.length;e++){let t=n[e];if(V0(t))return e}return n.length}function HU(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function h0(n,e){return n?":not("+e.trim()+")":e}function qU(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if(typeof o=="string")if(r&2){let a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!nr(o)&&(e+=h0(s,i),i=""),r=o,s=s||!nr(r);t++}return i!==""&&(e+=h0(s,i)),e}function zU(n){return n.map(qU).join(",")}function GU(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let s=n[r];if(typeof s=="string")i===2?s!==""&&e.push(s,n[++r]):i===8&&t.push(s);else{if(!nr(i))break;i=s}r++}return t.length&&e.push(1,...t),e}var di={};function oE(n,e,t,r,i,s,o,a,c,d,h){let g=Ut+r,E=g+i,S=WU(g,E),R=typeof d=="function"?d():d;return S[oe]={type:n,blueprint:S,template:t,queries:null,viewQuery:a,declTNode:e,data:S.slice().fill(null,g),bindingStartIndex:g,expandoStartIndex:E,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:R,incompleteFirstPass:!1,ssrId:h}}function WU(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:di);return t}function KU(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=oE(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function aE(n,e,t,r,i,s,o,a,c,d,h){let g=e.blueprint.slice();return g[Zn]=i,g[de]=r|4|128|8|64|1024,(d!==null||n&&n[de]&2048)&&(g[de]|=2048),cI(g),g[Vt]=g[Po]=n,g[Gt]=t,g[Ar]=o||n&&n[Ar],g[Ze]=a||n&&n[Ze],g[_s]=c||n&&n[_s]||null,g[Mn]=s,g[vs]=pU(),g[Yl]=h,g[iI]=d,g[xn]=e.type==2?n[xn]:g,g}function QU(n,e,t){let r=tr(e,n),i=KU(t),s=n[Ar].rendererFactory,o=cE(n,aE(n,i,null,fN(t),r,e,null,s.createRenderer(r,t),null,null,null));return n[e.index]=o}function fN(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function pN(n,e,t,r){if(t===0)return-1;let i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function cE(n,e){return n[Tc]?n[rI][kn]=e:n[Tc]=e,n[rI]=e,e}function YU(n=1){gN(fn(),Be(),Fo()+n,!1)}function gN(n,e,t,r){if(!r)if((e[de]&3)===3){let s=n.preOrderCheckHooks;s!==null&&Hp(e,s,t)}else{let s=n.preOrderHooks;s!==null&&qp(e,s,0,t)}ws(t)}var gg=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(gg||{});function $I(n,e,t,r){let i=ge(null);try{let[s,o,a]=n.inputs[t],c=null;(o&gg.SignalBased)!==0&&(c=e[s][ln]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,c,r,t,s):k0(e,c,s,r)}finally{ge(i)}}var Nr=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(Nr||{}),JU;function uE(n,e){return JU(n,e)}var Mc=new Set,lE=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(lE||{}),dd=new J(""),f0=new Set;function mg(n){f0.has(n)||(f0.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var mN=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=Z({token:n,providedIn:"root",factory:()=>new n})}return n})();var XU=new J("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null,injector:L(Xe)})});function yN(n,e,t){let r=n.get(XU);if(Array.isArray(e))for(let i of e)r.queue.add(i),t?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),t?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(n)}function ZU(n,e){for(let[t,r]of e)yN(n,r.animateFns)}function p0(n,e,t,r){let i=n?.[Xl]?.enter;e!==null&&i&&i.has(t.index)&&ZU(r,i)}function Rc(n,e,t,r,i,s,o,a){if(i!=null){let c,d=!1;er(i)?c=i:Sr(i)&&(d=!0,i=i[Zn]);let h=On(i);n===0&&r!==null?(p0(a,r,s,t),o==null?oN(e,r,h):eg(e,r,h,o||null,!0)):n===1&&r!==null?(p0(a,r,s,t),eg(e,r,h,o||null,!0)):n===2?g0(a,s,t,g=>{NU(e,h,d,g)}):n===3&&g0(a,s,t,()=>{e.destroyNode(h)}),c!=null&&hj(e,n,t,c,s,r,o)}}function ej(n,e){_N(n,e),e[Zn]=null,e[Mn]=null}function tj(n,e,t,r,i,s){r[Zn]=i,r[Mn]=e,yg(n,r,t,1,i,s)}function _N(n,e){e[Ar].changeDetectionScheduler?.notify(9),yg(n,e,e[Ze],2,null,null)}function nj(n){let e=n[Tc];if(!e)return NI(n[oe],n);for(;e;){let t=null;if(Sr(e))t=e[Tc];else{let r=e[hn];r&&(t=r)}if(!t){for(;e&&!e[kn]&&e!==n;)Sr(e)&&NI(e[oe],e),e=e[Vt];e===null&&(e=n),Sr(e)&&NI(e[oe],e),t=e&&e[kn]}e=t}}function dE(n,e){let t=n[ed],r=t.indexOf(e);t.splice(r,1)}function vN(n,e){if(Oo(e))return;let t=e[Ze];t.destroyNode&&yg(n,e,t,3,null,null),nj(e)}function NI(n,e){if(Oo(e))return;let t=ge(null);try{e[de]&=-129,e[de]|=256,e[En]&&kl(e[En]),sj(n,e),ij(n,e),e[oe].type===1&&e[Ze].destroy();let r=e[ko];if(r!==null&&er(e[Vt])){r!==e[Vt]&&dE(r,e);let i=e[xo];i!==null&&i.detachView(n)}jI(e)}finally{ge(t)}}function g0(n,e,t,r){let i=n?.[Xl];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);n&&Mc.add(n[vs]),yN(t,()=>{if(i.leave&&i.leave.has(e.index)){let o=i.leave.get(e.index),a=[];if(o){for(let c=0;c<o.animateFns.length;c++){let d=o.animateFns[c],{promise:h}=d();a.push(h)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),rj(n,r)}else n&&Mc.delete(n[vs]),r(!1)},i)}function rj(n,e){let t=n[Xl]?.running;if(t){t.then(()=>{n[Xl].running=void 0,Mc.delete(n[vs]),e(!0)});return}e(!1)}function ij(n,e){let t=n.cleanup,r=e[wc];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let a=t[o+3];a>=0?r[a]():r[-a].unsubscribe(),o+=2}else{let a=r[t[o+1]];t[o].call(a)}r!==null&&(e[wc]=null);let i=e[ci];if(i!==null){e[ci]=null;for(let o=0;o<i.length;o++){let a=i[o];a()}}let s=e[Jl];if(s!==null){e[Jl]=null;for(let o of s)o.destroy()}}function sj(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Uo)){let s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];qe(Me.LifecycleHookStart,a,c);try{c.call(a)}finally{qe(Me.LifecycleHookEnd,a,c)}}else{qe(Me.LifecycleHookStart,i,s);try{s.call(i)}finally{qe(Me.LifecycleHookEnd,i,s)}}}}}function oj(n,e,t){return aj(n,e.parent,t)}function aj(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Zn];if(Es(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===rr.None||i===rr.Emulated)return null}return tr(r,t)}function cj(n,e,t){return lj(n,e,t)}function uj(n,e,t){return n.type&40?tr(n,t):null}var lj=uj,m0;function hE(n,e,t,r){let i=oj(n,r,e),s=e[Ze],o=r.parent||e[Mn],a=cj(o,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)d0(s,i,t[c],a,!1);else d0(s,i,t,a,!1);m0!==void 0&&m0(s,r,e,t,i)}function id(n,e){if(e!==null){let t=e.type;if(t&3)return tr(e,n);if(t&4)return HI(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return id(n,r);{let i=n[e.index];return er(i)?HI(-1,i):On(i)}}else{if(t&128)return id(n,e.next);if(t&32)return uE(e,n)()||On(n[e.index]);{let r=IN(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=fs(n[xn]);return id(i,r)}else return id(n,e.next)}}}return null}function IN(n,e){if(e!==null){let r=n[xn][Mn],i=e.projection;return r.projection[i]}return null}function HI(n,e){let t=hn+n+1;if(t<e.length){let r=e[t],i=r[oe].firstChild;if(i!==null)return id(r,i)}return e[Is]}function fE(n,e,t,r,i,s,o){for(;t!=null;){let a=r[_s];if(t.type===128){t=t.next;continue}let c=r[t.index],d=t.type;if(o&&e===0&&(c&&kc(On(c),r),t.flags|=2),!tE(t))if(d&8)fE(n,e,t.child,r,i,s,!1),Rc(e,n,a,i,c,t,s,r);else if(d&32){let h=uE(t,r),g;for(;g=h();)Rc(e,n,a,i,g,t,s,r);Rc(e,n,a,i,c,t,s,r)}else d&16?dj(n,e,r,t,i,s):Rc(e,n,a,i,c,t,s,r);t=o?t.projectionNext:t.next}}function yg(n,e,t,r,i,s){fE(t,r,n.firstChild,e,i,s,!1)}function dj(n,e,t,r,i,s){let o=t[xn],c=o[Mn].projection[r.projection];if(Array.isArray(c))for(let d=0;d<c.length;d++){let h=c[d];Rc(e,n,t[_s],i,h,r,s,t)}else{let d=c,h=o[Vt];K0(r)&&(d.flags|=128),fE(n,e,d,h,i,s,!0)}}function hj(n,e,t,r,i,s,o){let a=r[Is],c=On(r);a!==c&&Rc(e,n,t,s,a,i,o);for(let d=hn;d<r.length;d++){let h=r[d];yg(h[oe],h,n,e,s,a)}}function fj(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=r.indexOf("-")===-1?void 0:Nr.DashCase;i==null?n.removeStyle(t,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Nr.Important),n.setStyle(t,r,i,s))}}function EN(n,e,t,r,i){let s=Fo(),o=r&2;try{ws(-1),o&&e.length>Ut&&gN(n,e,Ut,!1);let a=o?Me.TemplateUpdateStart:Me.TemplateCreateStart;qe(a,i,t),t(r,i)}finally{ws(s);let a=o?Me.TemplateUpdateEnd:Me.TemplateCreateEnd;qe(a,i,t)}}function _g(n,e,t){Ej(n,e,t),(t.flags&64)===64&&wj(n,e,t)}function vg(n,e,t=tr){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?t(e,n):n[o];n[i++]=a}}}function pj(n,e,t,r){let s=r.get(eN,Z0)||t===rr.ShadowDom||t===rr.ExperimentalIsolatedShadowDom,o=n.selectRootElement(e,s);return gj(o),o}function gj(n){mj(n)}var mj=()=>null;function yj(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function _j(n,e,t,r,i,s){let o=e[oe];if(yE(n,o,e,t,r)){Es(n)&&Ij(e,n.index);return}n.type&3&&(t=yj(t)),vj(n,e,t,r,i,s)}function vj(n,e,t,r,i,s){if(n.type&3){let o=tr(n,e);r=s!=null?s(r,n.value||"",t):r,i.setProperty(o,t,r)}else n.type&12}function Ij(n,e){let t=Ln(e,n);t[de]&16||(t[de]|=64)}function Ej(n,e,t){let r=t.directiveStart,i=t.directiveEnd;Es(t)&&QU(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||Jp(t,e);let s=t.initialInputs;for(let o=r;o<i;o++){let a=n.data[o],c=Xp(e,n,o,t);if(kc(c,e),s!==null&&Sj(e,o-r,c,a,t,s),Dr(a)){let d=Ln(t.index,e);d[Gt]=Xp(e,n,o,t)}}}function wj(n,e,t){let r=t.directiveStart,i=t.directiveEnd,s=t.index,o=zR();try{ws(s);for(let a=r;a<i;a++){let c=n.data[a],d=e[a];Op(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&Tj(c,d)}}finally{ws(-1),Op(o)}}function Tj(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function pE(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let s=t[i];BU(e,s.selectors,!1)&&(r??=[],Dr(s)?r.unshift(s):r.push(s))}return r}function bj(n,e,t,r,i,s){let o=tr(n,e);Aj(e[Ze],o,s,n.value,t,r,i)}function Aj(n,e,t,r,i,s,o){if(s==null)n.removeAttribute(e,i,t);else{let a=o==null?Gl(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}function Sj(n,e,t,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;a+=2){let c=o[a],d=o[a+1];$I(r,t,c,d)}}function gE(n,e,t,r,i){let s=Ut+t,o=e[oe],a=i(o,e,n,r,t);e[s]=a,Sc(n,!0);let c=n.type===2;return c?(aN(e[Ze],a,n),(MR()===0||bc(n))&&kc(a,e),xR()):kc(a,e),Vp()&&(!c||!tE(n))&&hE(o,e,a,n),n}function mE(n){let e=n;return gI()?UR():(e=e.parent,Sc(e,!1)),e}function Dj(n,e){let t=n[_s];if(!t)return;let r;try{r=t.get(pn,null)}catch{r=null}r?.(e)}function yE(n,e,t,r,i){let s=n.inputs?.[r],o=n.hostDirectiveInputs?.[r],a=!1;if(o)for(let c=0;c<o.length;c+=2){let d=o[c],h=o[c+1],g=e.data[d];$I(g,t[d],h,i),a=!0}if(s)for(let c of s){let d=t[c],h=e.data[c];$I(h,d,r,i),a=!0}return a}function Cj(n,e){let t=Ln(e,n),r=t[oe];Rj(r,t);let i=t[Zn];i!==null&&t[Yl]===null&&(t[Yl]=tN(i,t[_s])),qe(Me.ComponentStart);try{_E(r,t,t[Gt])}finally{qe(Me.ComponentEnd,t[Gt])}}function Rj(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function _E(n,e,t){Lp(e);try{let r=n.viewQuery;r!==null&&BI(1,r,t);let i=n.template;i!==null&&EN(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[xo]?.finishViewCreation(n),n.staticContentQueries&&nN(n,e),n.staticViewQueries&&BI(2,n.viewQuery,t);let s=n.components;s!==null&&Nj(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[de]&=-5,Fp()}}function Nj(n,e){for(let t=0;t<e.length;t++)Cj(n,e[t])}function Pj(n,e,t,r){let i=ge(null);try{let s=e.tView,a=n[de]&4096?4096:16,c=aE(n,s,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),d=n[e.index];c[ko]=d;let h=n[xo];return h!==null&&(c[xo]=h.createEmbeddedView(s)),_E(s,c,t),c}finally{ge(i)}}function y0(n,e){return!e||e.firstChild===null||K0(n)}function od(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let s=e[t.index];s!==null&&r.push(On(s)),er(s)&&wN(s,r);let o=t.type;if(o&8)od(n,e,t.child,r);else if(o&32){let a=uE(t,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=IN(e,t);if(Array.isArray(a))r.push(...a);else{let c=fs(e[xn]);od(c[oe],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function wN(n,e){for(let t=hn;t<n.length;t++){let r=n[t],i=r[oe].firstChild;i!==null&&od(r[oe],r,i,e)}n[Is]!==n[Zn]&&e.push(n[Is])}function TN(n){if(n[Rp]!==null){for(let e of n[Rp])e.impl.addSequence(e);n[Rp].length=0}}var bN=[];function kj(n){return n[En]??Mj(n)}function Mj(n){let e=bN.pop()??Object.create(Oj);return e.lView=n,e}function xj(n){n.lView[En]!==n&&(n.lView=null,bN.push(n))}var Oj=Te($({},Rl),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{nd(n.lView)},consumerOnSignalRead(){this.lView[En]=this}});function Lj(n){let e=n[En]??Object.create(Fj);return e.lView=n,e}var Fj=Te($({},Rl),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=fs(n.lView);for(;e&&!AN(e[oe]);)e=fs(e);e&&uI(e)},consumerOnSignalRead(){this.lView[En]=this}});function AN(n){return n.type!==2}function SN(n){if(n[Jl]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[Jl])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[de]&8192)}}var Vj=100;function DN(n,e=0){let r=n[Ar].rendererFactory,i=!1;i||r.begin?.();try{Uj(n,e)}finally{i||r.end?.()}}function Uj(n,e){let t=mI();try{yI(!0),qI(n,e);let r=0;for(;td(n);){if(r===Vj)throw new Y(103,!1);r++,qI(n,1)}}finally{yI(t)}}function jj(n,e,t,r){if(Oo(e))return;let i=e[de],s=!1,o=!1;Lp(e);let a=!0,c=null,d=null;s||(AN(n)?(d=kj(e),c=Pl(d)):Ff()===null?(a=!1,d=Lj(e),c=Pl(d)):e[En]&&(kl(e[En]),e[En]=null));try{cI(e),BR(n.bindingStartIndex),t!==null&&EN(n,e,t,2,r);let h=(i&3)===3;if(!s)if(h){let S=n.preOrderCheckHooks;S!==null&&Hp(e,S,null)}else{let S=n.preOrderHooks;S!==null&&qp(e,S,0,null),CI(e,0)}if(o||Bj(e),SN(e),CN(e,0),n.contentQueries!==null&&nN(n,e),!s)if(h){let S=n.contentCheckHooks;S!==null&&Hp(e,S)}else{let S=n.contentHooks;S!==null&&qp(e,S,1),CI(e,1)}Hj(n,e);let g=n.components;g!==null&&NN(e,g,0);let E=n.viewQuery;if(E!==null&&BI(2,E,r),!s)if(h){let S=n.viewCheckHooks;S!==null&&Hp(e,S)}else{let S=n.viewHooks;S!==null&&qp(e,S,2),CI(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Cp]){for(let S of e[Cp])S();e[Cp]=null}s||(TN(e),e[de]&=-73)}catch(h){throw s||nd(e),h}finally{d!==null&&(Vf(d,c),a&&xj(d)),Fp()}}function CN(n,e){for(let t=Y0(n);t!==null;t=J0(t))for(let r=hn;r<t.length;r++){let i=t[r];RN(i,e)}}function Bj(n){for(let e=Y0(n);e!==null;e=J0(e)){if(!(e[de]&2))continue;let t=e[ed];for(let r=0;r<t.length;r++){let i=t[r];uI(i)}}}function $j(n,e,t){qe(Me.ComponentStart);let r=Ln(e,n);try{RN(r,t)}finally{qe(Me.ComponentEnd,r[Gt])}}function RN(n,e){Pp(n)&&qI(n,e)}function qI(n,e){let r=n[oe],i=n[de],s=n[En],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&Uf(s)),o||=!1,s&&(s.dirty=!1),n[de]&=-9217,o)jj(r,n,r.template,n[Gt]);else if(i&8192){let a=ge(null);try{SN(n),CN(n,1);let c=r.components;c!==null&&NN(n,c,1),TN(n)}finally{ge(a)}}}function NN(n,e,t){for(let r=0;r<e.length;r++)$j(n,e[r],t)}function Hj(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)ws(~i);else{let s=i,o=t[++r],a=t[++r];qR(o,s);let c=e[s];qe(Me.HostBindingsUpdateStart,c);try{a(2,c)}finally{qe(Me.HostBindingsUpdateEnd,c)}}}}finally{ws(-1)}}function vE(n,e){let t=mI()?64:1088;for(n[Ar].changeDetectionScheduler?.notify(e);n;){n[de]|=t;let r=fs(n);if(Ac(n)&&!r)return n;n=r}return null}function PN(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function qj(n,e,t,r=!0){let i=e[oe];if(zj(i,e,n,t),r){let o=HI(t,n),a=e[Ze],c=a.parentNode(n[Is]);c!==null&&tj(i,n[Mn],a,e,c,o)}let s=e[Yl];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function zI(n,e){if(n.length<=hn)return;let t=hn+e,r=n[t];if(r){let i=r[ko];i!==null&&i!==n&&dE(i,r),e>0&&(n[t-1][kn]=r[kn]);let s=Wl(n,hn+e);ej(r[oe],r);let o=s[xo];o!==null&&o.detachView(s[oe]),r[Vt]=null,r[kn]=null,r[de]&=-129}return r}function zj(n,e,t,r){let i=hn+r,s=t.length;r>0&&(t[i-1][kn]=e),r<s-hn?(e[kn]=t[i],Jv(t,hn+r,e)):(t.push(e),e[kn]=null),e[Vt]=t;let o=e[ko];o!==null&&t!==o&&kN(o,e);let a=e[xo];a!==null&&a.insertView(n),kp(e),e[de]|=128}function kN(n,e){let t=n[ed],r=e[Vt];if(Sr(r))n[de]|=2;else{let i=r[Vt][xn];e[xn]!==i&&(n[de]|=2)}t===null?n[ed]=[e]:t.push(e)}var As=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[oe];return od(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[Gt]}set context(e){this._lView[Gt]=e}get destroyed(){return Oo(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Vt];if(er(e)){let t=e[Zl],r=t?t.indexOf(this):-1;r>-1&&(zI(e,r),Wl(t,r))}this._attachedToViewContainer=!1}vN(this._lView[oe],this._lView)}onDestroy(e){lI(this._lView,e)}markForCheck(){vE(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[de]&=-129}reattach(){kp(this._lView),this._lView[de]|=128}detectChanges(){this._lView[de]|=1024,DN(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Y(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Ac(this._lView),t=this._lView[ko];t!==null&&!e&&dE(t,this._lView),_N(this._lView[oe],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Y(902,!1);this._appRef=e;let t=Ac(this._lView),r=this._lView[ko];r!==null&&!t&&kN(r,this._lView),kp(this._lView)}};var hd=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=Gj;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let s=Pj(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new As(s)}}return n})();function Gj(){return Wj(Wt(),Be())}function Wj(n,e){return n.type&4?new hd(e,n,ug(n,e)):null}function Ig(n,e,t,r,i){let s=n.data[e];if(s===null)s=Kj(n,e,t,r,i),HR()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=r,s.attrs=i;let o=VR();s.injectorIndex=o===null?-1:o.injectorIndex}return Sc(s,!0),s}function Kj(n,e,t,r,i){let s=pI(),o=gI(),a=o?s:s&&s.parent,c=n.data[e]=Yj(n,a,t,e,r,i);return Qj(n,c,s,o),c}function Qj(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function Yj(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return OR()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,fieldIndex:-1,customControlIndex:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var Jj=()=>null;function _0(n,e){return Jj(n,e)}var MN=class{},Eg=class{},GI=class{resolveComponentFactory(e){throw new Y(917,!1)}},fd=class{static NULL=new GI},jo=class{},wg=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>Xj()}return n})();function Xj(){let n=Be(),e=Wt(),t=Ln(e.index,n);return(Sr(t)?t:n)[Ze]}var xN=(()=>{class n{static \u0275prov=Z({token:n,providedIn:"root",factory:()=>null})}return n})();var zp={},WI=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,zp,r);return i!==zp||t===zp?i:this.parentInjector.get(e,t,r)}};function tg(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=Uv(i,a);else if(s==2){let c=a,d=e[++o];r=Uv(r,c+": "+d+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function Dt(n,e=0){let t=Be();if(t===null)return me(n,e);let r=Wt();return z0(r,t,Ft(n),e)}function ON(n,e,t,r,i){let s=r===null?null:{"":-1},o=i(n,t);if(o!==null){let a=o,c=null,d=null;for(let h of o)if(h.resolveHostDirectives!==null){[a,c,d]=h.resolveHostDirectives(o);break}tB(n,e,t,a,s,c,d)}s!==null&&r!==null&&Zj(t,r,s)}function Zj(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let s=t[e[i+1]];if(s==null)throw new Y(-301,!1);r.push(e[i],s)}}function eB(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function tB(n,e,t,r,i,s,o){let a=r.length,c=null;for(let E=0;E<a;E++){let S=r[E];c===null&&Dr(S)&&(c=S,eB(n,t,E)),VI(Jp(t,e),n,S.type)}aB(t,n.data.length,a),c?.viewProvidersResolver&&c.viewProvidersResolver(c);for(let E=0;E<a;E++){let S=r[E];S.providersResolver&&S.providersResolver(S)}let d=!1,h=!1,g=pN(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let E=0;E<a;E++){let S=r[E];if(t.mergedAttrs=Pc(t.mergedAttrs,S.hostAttrs),rB(n,t,e,g,S),oB(g,S,i),o!==null&&o.has(S)){let[M,k]=o.get(S);t.directiveToIndex.set(S.type,[g,M+t.directiveStart,k+t.directiveStart])}else(s===null||!s.has(S))&&t.directiveToIndex.set(S.type,g);S.contentQueries!==null&&(t.flags|=4),(S.hostBindings!==null||S.hostAttrs!==null||S.hostVars!==0)&&(t.flags|=64);let R=S.type.prototype;!d&&(R.ngOnChanges||R.ngOnInit||R.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),d=!0),!h&&(R.ngOnChanges||R.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),h=!0),g++}nB(n,t,s)}function nB(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))v0(0,e,i,r),v0(1,e,i,r),E0(e,r,!1);else{let s=t.get(i);I0(0,e,s,r),I0(1,e,s,r),E0(e,r,!0)}}}function v0(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let s in i)if(i.hasOwnProperty(s)){let o;n===0?o=e.inputs??={}:o=e.outputs??={},o[s]??=[],o[s].push(r),LN(e,s)}}function I0(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let s in i)if(i.hasOwnProperty(s)){let o=i[s],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[o]??=[],a[o].push(r,s),LN(e,o)}}function LN(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function E0(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:s}=n;if(r===null||!t&&i===null||t&&s===null||sE(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let o=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!t&&i.hasOwnProperty(c)){let d=i[c];for(let h of d)if(h===e){o??=[],o.push(c,r[a+1]);break}}else if(t&&s.hasOwnProperty(c)){let d=s[c];for(let h=0;h<d.length;h+=2)if(d[h]===e){o??=[],o.push(d[h+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(o)}function rB(n,e,t,r,i){n.data[r]=i;let s=i.factory||(i.factory=hs(i.type,!0)),o=new Uo(s,Dr(i),Dt,null);n.blueprint[r]=o,t[r]=o,iB(n,e,r,pN(n,t,i.hostVars,di),i)}function iB(n,e,t,r,i){let s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let a=~e.index;sB(o)!=a&&o.push(a),o.push(t,r,s)}}function sB(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function oB(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Dr(e)&&(t[""]=n)}}function aB(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function IE(n,e,t,r,i,s,o,a){let c=e[oe],d=c.consts,h=Lo(d,o),g=Ig(c,n,t,r,h);return s&&ON(c,e,g,Lo(d,a),i),g.mergedAttrs=Pc(g.mergedAttrs,g.attrs),g.attrs!==null&&tg(g,g.attrs,!1),g.mergedAttrs!==null&&tg(g,g.mergedAttrs,!0),c.queries!==null&&c.queries.elementStart(c,g),g}function EE(n,e){L0(n,e),sI(e)&&n.queries.elementEnd(e)}function cB(n,e,t,r,i,s){let o=e.consts,a=Lo(o,i),c=Ig(e,n,t,r,a);if(c.mergedAttrs=Pc(c.mergedAttrs,c.attrs),s!=null){let d=Lo(o,s);c.localNames=[];for(let h=0;h<d.length;h+=2)c.localNames.push(d[h],-1)}return c.attrs!==null&&tg(c,c.attrs,!1),c.mergedAttrs!==null&&tg(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function wE(n){return VN(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function FN(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function VN(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function uB(n,e,t){return n[e]=t}function pd(n,e,t){if(t===di)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function Gp(n,e,t){return function r(i){let s=Es(n)?Ln(n.index,e):e;vE(s,5);let o=e[Gt],a=w0(e,o,t,i),c=r.__ngNextListenerFn__;for(;c;)a=w0(e,o,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function w0(n,e,t,r){let i=ge(null);try{return qe(Me.OutputStart,e,t),t(r)!==!1}catch(s){return Dj(n,s),!1}finally{qe(Me.OutputEnd,e,t),ge(i)}}function UN(n,e,t,r,i,s,o,a){let c=bc(n),d=!1,h=null;if(!r&&c&&(h=dB(e,t,s,n.index)),h!==null){let g=h.__ngLastListenerFn__||h;g.__ngNextListenerFn__=o,h.__ngLastListenerFn__=o,d=!0}else{let g=tr(n,t),E=r?r(g):g;vU(t,E,s,a);let S=i.listen(E,s,a);if(!lB(s)){let R=r?M=>r(On(M[n.index])):n.index;jN(R,e,t,s,a,S,!1)}}return d}function lB(n){return n.startsWith("animation")||n.startsWith("transition")}function dB(n,e,t,r){let i=n.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===t&&i[s+1]===r){let a=e[wc],c=i[s+2];return a&&a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function jN(n,e,t,r,i,s,o){let a=e.firstCreatePass?kR(e):null,c=PR(t),d=c.length;c.push(i,s),a&&a.push(r,n,d,(d+1)*(o?-1:1))}function T0(n,e,t,r,i,s){let o=e[t],a=e[oe],d=a.data[t].outputs[r],g=o[d].subscribe(s);jN(n.index,a,e,i,s,g,!0)}var KI=Symbol("BINDING");var ng=class extends fd{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=gs(e);return new xc(t,this.ngModule)}};function hB(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],s={propName:t,templateName:e,isSignal:(r&gg.SignalBased)!==0};return i&&(s.transform=i),s})}function fB(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function pB(n,e,t){let r=e instanceof Xe?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new WI(t,r):t}function gB(n){let e=n.get(jo,null);if(e===null)throw new Y(407,!1);let t=n.get(xN,null),r=n.get(ps,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function mB(n,e){let t=BN(n);return sN(e,t,t==="svg"?AR:t==="math"?SR:null)}function BN(n){return(n.selectors[0][0]||"div").toLowerCase()}var xc=class extends Eg{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=hB(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=fB(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=zU(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,s,o){qe(Me.DynamicComponentStart);let a=ge(null);try{let c=this.componentDef,d=yB(r,c,o,s),h=pB(c,i||this.ngModule,e),g=gB(h),E=g.rendererFactory.createRenderer(null,c),S=r?pj(E,r,c.encapsulation,h):mB(c,E),R=o?.some(b0)||s?.some(V=>typeof V!="function"&&V.bindings.some(b0)),M=aE(null,d,null,512|fN(c),null,null,g,E,h,null,tN(S,h,!0));M[Ut]=S,Lp(M);let k=null;try{let V=IE(Ut,M,2,"#host",()=>d.directiveRegistry,!0,0);aN(E,S,V),kc(S,M),_g(d,M,V),nE(d,V,M),EE(d,V),t!==void 0&&vB(V,this.ngContentSelectors,t),k=Ln(V.index,M),M[Gt]=k[Gt],_E(d,M,null)}catch(V){throw k!==null&&jI(k),jI(M),V}finally{qe(Me.DynamicComponentEnd),Fp()}return new rg(this.componentType,M,!!R)}finally{ge(a)}}};function yB(n,e,t,r){let i=n?["ng-version","21.1.0"]:GU(e.selectors[0]),s=null,o=null,a=0;if(t)for(let h of t)a+=h[KI].requiredVars,h.create&&(h.targetIdx=0,(s??=[]).push(h)),h.update&&(h.targetIdx=0,(o??=[]).push(h));if(r)for(let h=0;h<r.length;h++){let g=r[h];if(typeof g!="function")for(let E of g.bindings){a+=E[KI].requiredVars;let S=h+1;E.create&&(E.targetIdx=S,(s??=[]).push(E)),E.update&&(E.targetIdx=S,(o??=[]).push(E))}}let c=[e];if(r)for(let h of r){let g=typeof h=="function"?h:h.type,E=Kv(g);c.push(E)}return oE(0,null,_B(s,o),1,a,c,null,null,null,[i],null)}function _B(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function b0(n){let e=n[KI].kind;return e==="input"||e==="twoWay"}var rg=class extends MN{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=Np(t[oe],Ut),this.location=ug(this._tNode,t),this.instance=Ln(this._tNode.index,t)[Gt],this.hostView=this.changeDetectorRef=new As(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,s=yE(r,i[oe],i,e,t);this.previousInputValues.set(e,t);let o=Ln(r.index,i);vE(o,1)}get injector(){return new Vo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function vB(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let s=t[i];r.push(s!=null&&s.length?Array.from(s):null)}}var qo=(()=>{class n{static __NG_ELEMENT_ID__=IB}return n})();function IB(){let n=Wt();return wB(n,Be())}var EB=qo,$N=class extends EB{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return ug(this._hostTNode,this._hostLView)}get injector(){return new Vo(this._hostTNode,this._hostLView)}get parentInjector(){let e=XI(this._hostTNode,this._hostLView);if(U0(e)){let t=Qp(e,this._hostLView),r=Kp(e),i=t[oe].data[r+8];return new Vo(i,t)}else return new Vo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=A0(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-hn}createEmbeddedView(e,t,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=_0(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,i,y0(this._hostTNode,o)),a}createComponent(e,t,r,i,s,o,a){let c=e&&!G2(e),d;if(c)d=t;else{let k=t||{};d=k.index,r=k.injector,i=k.projectableNodes,s=k.environmentInjector||k.ngModuleRef,o=k.directives,a=k.bindings}let h=c?e:new xc(gs(e)),g=r||this.parentInjector;if(!s&&h.ngModule==null){let V=(c?g:this.parentInjector).get(Xe,null);V&&(s=V)}let E=gs(h.componentType??{}),S=_0(this._lContainer,E?.id??null),R=S?.firstChild??null,M=h.create(g,i,R,s,o,a);return this.insertImpl(M.hostView,d,y0(this._hostTNode,S)),M}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(CR(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[Vt],d=new $N(c,c[Mn],c[Vt]);d.detach(d.indexOf(e))}}let s=this._adjustIndex(t),o=this._lContainer;return qj(o,i,s,r),e.attachToViewContainerRef(),Jv(PI(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=A0(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=zI(this._lContainer,t);r&&(Wl(PI(this._lContainer),t),vN(r[oe],r))}detach(e){let t=this._adjustIndex(e,-1),r=zI(this._lContainer,t);return r&&Wl(PI(this._lContainer),t)!=null?new As(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function A0(n){return n[Zl]}function PI(n){return n[Zl]||(n[Zl]=[])}function wB(n,e){let t,r=e[n.index];return er(r)?t=r:(t=PN(r,e,null,n),e[n.index]=t,cE(e,t)),bB(t,e,n,r),new $N(t,n,e)}function TB(n,e){let t=n[Ze],r=t.createComment(""),i=tr(e,n),s=t.parentNode(i);return eg(t,s,r,t.nextSibling(i),!1),r}var bB=DB,AB=()=>!1;function SB(n,e,t){return AB(n,e,t)}function DB(n,e,t,r){if(n[Is])return;let i;t.type&8?i=On(r):i=TB(e,t),n[Is]=i}var Bo=class{},Tg=class{};var ig=class extends Bo{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new ng(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let s=Wv(e);this._bootstrapComponents=dN(s.bootstrap),this._r3Injector=wI(e,t,[{provide:Bo,useValue:this},{provide:fd,useValue:this.componentFactoryResolver},...r],ui(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},sg=class extends Tg{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new ig(this.moduleType,e,[])}};var ad=class extends Bo{injector;componentFactoryResolver=new ng(this);instance=null;constructor(e){super();let t=new Co([...e.providers,{provide:Bo,useValue:this},{provide:fd,useValue:this.componentFactoryResolver}],e.parent||Ql(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function gd(n,e,t=null){return new ad({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var CB=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=eI(!1,t.type),i=r.length>0?gd([r],this._injector,""):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=Z({token:n,providedIn:"environment",factory:()=>new n(me(Xe))})}return n})();function TE(n){return Lc(()=>{let e=HN(n),t=Te($({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===ZI.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(CB).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||rr.Emulated,styles:n.styles||In,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&mg("NgStandalone"),qN(t);let r=n.dependencies;return t.directiveDefs=S0(r,RB),t.pipeDefs=S0(r,dR),t.id=kB(t),t})}function RB(n){return gs(n)||Kv(n)}function Vc(n){return Lc(()=>({type:n.type,bootstrap:n.bootstrap||In,declarations:n.declarations||In,imports:n.imports||In,exports:n.exports||In,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function NB(n,e){if(n==null)return ms;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],s,o,a,c;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s,c=i[3]||null):(s=i,o=i,a=gg.None,c=null),t[s]=[r,a,c],e[s]=o}return t}function PB(n){if(n==null)return ms;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function Ss(n){return Lc(()=>{let e=HN(n);return qN(e),e})}function bE(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function HN(n){let e={};return{type:n.type,providersResolver:null,viewProvidersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||ms,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||In,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:NB(n.inputs,e),outputs:PB(n.outputs),debugInfo:null}}function qN(n){n.features?.forEach(e=>e(n))}function S0(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let i of t){let s=e(i);s!==null&&r.push(s)}return r}:null}function kB(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let s of r.join("|"))e=Math.imul(31,e)+s.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function MB(n){return Object.getPrototypeOf(n.prototype).constructor}function zN(n){let e=MB(n.type),t=!0,r=[n];for(;e;){let i;if(Dr(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Y(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let o=n;o.inputs=kI(n.inputs),o.declaredInputs=kI(n.declaredInputs),o.outputs=kI(n.outputs);let a=i.hostBindings;a&&VB(n,a);let c=i.viewQuery,d=i.contentQueries;if(c&&LB(n,c),d&&FB(n,d),xB(n,i),lR(n.outputs,i.outputs),Dr(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(n),a===zN&&(t=!1)}}e=Object.getPrototypeOf(e)}OB(r)}function xB(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function OB(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Pc(i.hostAttrs,t=Pc(t,i.hostAttrs))}}function kI(n){return n===ms?{}:n===In?[]:n}function LB(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function FB(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,s)=>{e(r,i,s),t(r,i,s)}:n.contentQueries=e}function VB(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function UB(n,e,t,r,i,s,o,a){if(t.firstCreatePass){n.mergedAttrs=Pc(n.mergedAttrs,n.attrs);let h=n.tView=oE(2,n,i,s,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),h.queries=t.queries.embeddedTView(n))}a&&(n.flags|=a),Sc(n,!1);let c=BB(t,e,n,r);Vp()&&hE(t,e,c,n),kc(c,e);let d=PN(c,e,c,n);e[r+Ut]=d,cE(e,d),SB(d,n,e)}function jB(n,e,t,r,i,s,o,a,c,d,h){let g=t+Ut,E;return e.firstCreatePass?(E=Ig(e,g,4,o||null,a||null),Mp()&&ON(e,n,E,Lo(e.consts,d),pE),L0(e,E)):E=e.data[g],UB(E,n,e,t,r,i,s,c),bc(E)&&_g(e,n,E),d!=null&&vg(n,E,h),E}function GN(n,e,t,r,i,s,o,a){let c=Be(),d=fn(),h=Lo(d.consts,s);return jB(c,d,n,e,t,r,i,h,void 0,o,a),GN}var BB=$B;function $B(n,e,t,r){return rd(!0),e[Ze].createComment("")}var AE=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var SE=new J("");function zo(n){return!!n&&typeof n.then=="function"}function bg(n){return!!n&&typeof n.subscribe=="function"}var WN=new J("");var DE=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=L(WN,{optional:!0})??[];injector=L(At);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let s=ut(this.injector,i);if(zo(s))t.push(s);else if(bg(s)){let o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});t.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ag=new J("");function KN(){ov(()=>{let n="";throw new Y(600,n)})}function QN(n){return n.isBoundToModule}var HB=10;var Go=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=L(pn);afterRenderManager=L(mN);zonelessEnabled=L(Dc);rootEffectScheduler=L(DI);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new xt;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=L(Cr);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(Ke(t=>!t))}constructor(){L(dd,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=L(Xe);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=At.NULL){return this._injector.get(Ue).run(()=>{qe(Me.BootstrapComponentStart);let o=t instanceof Eg;if(!this._injector.get(DE).done){let R="";throw new Y(405,R)}let c;o?c=t:c=this._injector.get(fd).resolveComponentFactory(t),this.componentTypes.push(c.componentType);let d=QN(c)?void 0:this._injector.get(Bo),h=r||c.selector,g=c.create(i,[],h,d),E=g.location.nativeElement,S=g.injector.get(SE,null);return S?.registerApplication(E),g.onDestroy(()=>{this.detachView(g.hostView),sd(this.components,g),S?.unregisterApplication(E)}),this._loadComponent(g),qe(Me.BootstrapComponentEnd,g),g})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){qe(Me.ChangeDetectionStart),this.tracingSnapshot!==null?this.tracingSnapshot.run(lE.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw qe(Me.ChangeDetectionEnd),new Y(101,!1);let t=ge(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,ge(t),this.afterTick.next(),qe(Me.ChangeDetectionEnd)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(jo,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<HB;){qe(Me.ChangeDetectionSyncStart);try{this.synchronizeOnce()}finally{qe(Me.ChangeDetectionSyncEnd)}}}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!td(i))continue;let s=r&&!this.zonelessEnabled?0:1;DN(i,s),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>td(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;sd(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(Ag,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>sd(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new Y(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function sd(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Sg(n,e,t,r){let i=Be(),s=xp();if(pd(i,s,e)){let o=fn(),a=EI();bj(a,i,n,e,t,r)}return Sg}var Ene=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";function YN(n,e,t){let r=Be(),i=xp();if(pd(r,i,e)){let s=fn(),o=EI();_j(o,r,n,e,r[Ze],t)}return YN}function D0(n,e,t,r,i){yE(e,n,t,i?"class":"style",r)}function CE(n,e,t,r){let i=Be(),s=i[oe],o=n+Ut,a=s.firstCreatePass?IE(o,i,2,e,pE,Mp(),t,r):s.data[o];if(gE(a,i,n,e,XN),bc(a)){let c=i[oe];_g(c,i,a),nE(c,a,i)}return r!=null&&vg(i,a),CE}function RE(){let n=fn(),e=Wt(),t=mE(e);return n.firstCreatePass&&EE(n,t),hI(t)&&fI(),dI(),t.classesWithoutHost!=null&&X2(t)&&D0(n,t,Be(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&Z2(t)&&D0(n,t,Be(),t.stylesWithoutHost,!1),RE}function Dg(n,e,t,r){return CE(n,e,t,r),RE(),Dg}function NE(n,e,t,r){let i=Be(),s=i[oe],o=n+Ut,a=s.firstCreatePass?cB(o,s,2,e,t,r):s.data[o];return gE(a,i,n,e,XN),r!=null&&vg(i,a),NE}function PE(){let n=Wt(),e=mE(n);return hI(e)&&fI(),dI(),PE}function JN(n,e,t,r){return NE(n,e,t,r),PE(),JN}var XN=(n,e,t,r,i)=>(rd(!0),sN(e[Ze],r,JR()));function ZN(n,e,t){let r=Be(),i=r[oe],s=n+Ut,o=i.firstCreatePass?IE(s,r,8,"ng-container",pE,Mp(),e,t):i.data[s];if(gE(o,r,n,"ng-container",qB),bc(o)){let a=r[oe];_g(a,r,o),nE(a,o,r)}return t!=null&&vg(r,o),ZN}function eP(){let n=fn(),e=Wt(),t=mE(e);return n.firstCreatePass&&EE(n,t),eP}var qB=(n,e,t,r,i)=>(rd(!0),RU(e[Ze],""));function zB(){return Be()}var md="en-US";var GB=md;function tP(n){typeof n=="string"&&(GB=n.toLowerCase().replace(/_/g,"-"))}function Cg(n,e,t){let r=Be(),i=fn(),s=Wt();return WB(i,r,r[Ze],s,n,e,t),Cg}function nP(n,e,t){let r=Be(),i=fn(),s=Wt();return(s.type&3||t)&&UN(s,i,r,t,r[Ze],n,e,Gp(s,r,e)),nP}function WB(n,e,t,r,i,s,o){let a=!0,c=null;if((r.type&3||o)&&(c??=Gp(r,e,s),UN(r,n,e,o,t,i,s,c)&&(a=!1)),a){let d=r.outputs?.[i],h=r.hostDirectiveOutputs?.[i];if(h&&h.length)for(let g=0;g<h.length;g+=2){let E=h[g],S=h[g+1];c??=Gp(r,e,s),T0(r,e,E,S,i,c)}if(d&&d.length)for(let g of d)c??=Gp(r,e,s),T0(r,e,g,i,i,c)}}function KB(n=1){return YR(n)}function $p(n,e){return n<<17|e<<2}function $o(n){return n>>17&32767}function QB(n){return(n&2)==2}function YB(n,e){return n&131071|e<<17}function QI(n){return n|2}function Oc(n){return(n&131068)>>2}function MI(n,e){return n&-131069|e<<2}function JB(n){return(n&1)===1}function YI(n){return n|1}function XB(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=$o(o),c=Oc(o);n[r]=t;let d=!1,h;if(Array.isArray(t)){let g=t;h=g[1],(h===null||Ec(g,h)>0)&&(d=!0)}else h=t;if(i)if(c!==0){let E=$o(n[a+1]);n[r+1]=$p(E,a),E!==0&&(n[E+1]=MI(n[E+1],r)),n[a+1]=YB(n[a+1],r)}else n[r+1]=$p(a,0),a!==0&&(n[a+1]=MI(n[a+1],r)),a=r;else n[r+1]=$p(c,0),a===0?a=r:n[c+1]=MI(n[c+1],r),c=r;d&&(n[r+1]=QI(n[r+1])),C0(n,h,r,!0),C0(n,h,r,!1),ZB(e,h,n,r,s),o=$p(a,c),s?e.classBindings=o:e.styleBindings=o}function ZB(n,e,t,r,i){let s=i?n.residualClasses:n.residualStyles;s!=null&&typeof e=="string"&&Ec(s,e)>=0&&(t[r+1]=YI(t[r+1]))}function C0(n,e,t,r){let i=n[t+1],s=e===null,o=r?$o(i):Oc(i),a=!1;for(;o!==0&&(a===!1||s);){let c=n[o],d=n[o+1];e$(c,e)&&(a=!0,n[o+1]=r?YI(d):QI(d)),o=r?$o(d):Oc(d)}a&&(n[t+1]=r?QI(i):YI(i))}function e$(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Ec(n,e)>=0:!1}function rP(n,e){return t$(n,e,null,!0),rP}function t$(n,e,t,r){let i=Be(),s=fn(),o=$R(2);if(s.firstUpdatePass&&r$(s,n,o,r),e!==di&&pd(i,o,e)){let a=s.data[Fo()];c$(s,a,i,i[Ze],n,i[o+1]=u$(e,t),r,o)}}function n$(n,e){return e>=n.expandoStartIndex}function r$(n,e,t,r){let i=n.data;if(i[t+1]===null){let s=i[Fo()],o=n$(n,t);l$(s,r)&&e===null&&!o&&(e=!1),e=i$(i,s,e,r),XB(i,s,e,t,o,r)}}function i$(n,e,t,r){let i=GR(n),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=xI(null,n,e,t,r),t=cd(t,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||n[o]!==i)if(t=xI(i,n,e,t,r),s===null){let c=s$(n,e,r);c!==void 0&&Array.isArray(c)&&(c=xI(null,n,e,c[1],r),c=cd(c,e.attrs,r),o$(n,e,r,c))}else s=a$(n,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),t}function s$(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Oc(r)!==0)return n[$o(r)]}function o$(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[$o(i)]=r}function a$(n,e,t){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=n[s].hostAttrs;r=cd(r,o,t)}return cd(r,e.attrs,t)}function xI(n,e,t,r,i){let s=null,o=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<o&&(s=e[a],r=cd(r,s.hostAttrs,i),s!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function cd(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),_R(n,o,t?!0:e[++s]))}return n===void 0?null:n}function c$(n,e,t,r,i,s,o,a){if(!(e.type&3))return;let c=n.data,d=c[a+1],h=JB(d)?R0(c,e,t,i,Oc(d),o):void 0;if(!og(h)){og(s)||QB(d)&&(s=R0(c,null,t,i,a,o));let g=oI(Fo(),t);fj(r,o,g,i,s)}}function R0(n,e,t,r,i,s){let o=e===null,a;for(;i>0;){let c=n[i],d=Array.isArray(c),h=d?c[1]:c,g=h===null,E=t[i+1];E===di&&(E=g?In:void 0);let S=g?Dp(E,r):h===r?E:void 0;if(d&&!og(S)&&(S=Dp(c,r)),og(S)&&(a=S,o))return a;let R=n[i+1];i=o?$o(R):Oc(R)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=Dp(c,r))}return a}function og(n){return n!==void 0}function u$(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=ui(fg(n)))),n}function l$(n,e){return(n.flags&(e?8:16))!==0}function d$(n,e=""){let t=Be(),r=fn(),i=n+Ut,s=r.firstCreatePass?Ig(r,i,1,e,null):r.data[i],o=h$(r,t,s,e,n);t[i]=o,Vp()&&hE(r,t,o,s),Sc(s,!1)}var h$=(n,e,t,r,i)=>(rd(!0),DU(e[Ze],r));function f$(n,e,t,r=""){return pd(n,xp(),t)?e+Gl(t)+r:di}function iP(n){return kE("",n),iP}function kE(n,e,t){let r=Be(),i=f$(r,n,e,t);return i!==di&&p$(r,Fo(),i),kE}function p$(n,e,t){let r=oI(e,n);CU(n[Ze],r,t)}function N0(n,e,t){let r=fn();r.firstCreatePass&&sP(e,r.data,r.blueprint,Dr(n),t)}function sP(n,e,t,r,i){if(n=Ft(n),Array.isArray(n))for(let s=0;s<n.length;s++)sP(n[s],e,t,r,i);else{let s=fn(),o=Be(),a=Wt(),c=Do(n)?n:Ft(n.provide),d=nI(n),h=a.providerIndexes&1048575,g=a.directiveStart,E=a.providerIndexes>>20;if(Do(n)||!n.multi){let S=new Uo(d,i,Dt,null),R=LI(c,e,i?h:h+E,g);R===-1?(VI(Jp(a,o),s,c),OI(s,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(S),o.push(S)):(t[R]=S,o[R]=S)}else{let S=LI(c,e,h+E,g),R=LI(c,e,h,h+E),M=S>=0&&t[S],k=R>=0&&t[R];if(i&&!k||!i&&!M){VI(Jp(a,o),s,c);let V=y$(i?m$:g$,t.length,i,r,d,n);!i&&k&&(t[R].providerFactory=V),OI(s,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(V),o.push(V)}else{let V=oP(t[i?R:S],d,!i&&r);OI(s,n,S>-1?S:R,V)}!i&&r&&k&&t[R].componentProviders++}}}function OI(n,e,t,r){let i=Do(e),s=wR(e);if(i||s){let c=(s?Ft(e.useClass):e).prototype.ngOnDestroy;if(c){let d=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=d.indexOf(t);h===-1?d.push(t,[r,c]):d[h+1].push(r,c)}else d.push(t,c)}}}function oP(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function LI(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function g$(n,e,t,r,i){return JI(this.multi,[])}function m$(n,e,t,r,i){let s=this.multi,o;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=Xp(r,r[oe],this.providerFactory.index,i);o=c.slice(0,a),JI(s,o);for(let d=a;d<c.length;d++)o.push(c[d])}else o=[],JI(s,o);return o}function JI(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function y$(n,e,t,r,i,s){let o=new Uo(n,t,Dt,null);return o.multi=[],o.index=e,o.componentProviders=0,oP(o,i,r&&!t),o}function _$(n,e){return t=>{t.providersResolver=(r,i)=>N0(r,i?i(n):n,!1),e&&(t.viewProvidersResolver=(r,i)=>N0(r,i?i(e):e,!0))}}function v$(n,e){let t=n[e];return t===di?void 0:t}function I$(n,e,t,r,i,s){let o=e+t;return pd(n,o,i)?uB(n,o+1,s?r.call(s,i):r(i)):v$(n,o+1)}function E$(n,e){let t=fn(),r,i=n+Ut;t.firstCreatePass?(r=w$(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let s=r.factory||(r.factory=hs(r.type,!0)),o,a=nn(Dt);try{let c=Yp(!1),d=s();return Yp(c),aI(t,Be(),i,d),d}finally{nn(a)}}function w$(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function T$(n,e,t){let r=n+Ut,i=Be(),s=DR(i,r);return b$(i,r)?I$(i,jR(),e,s.transform,t,s):s.transform(t)}function b$(n,e){return n[oe].data[e].pure}var ag=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},ME=(()=>{class n{compileModuleSync(t){return new sg(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=Wv(t),s=dN(i.declarations).reduce((o,a)=>{let c=gs(a);return c&&o.push(new xc(c)),o},[]);return new ag(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var aP=(()=>{class n{applicationErrorHandler=L(pn);appRef=L(Go);taskService=L(Cr);ngZone=L(Ue);zonelessEnabled=L(Dc);tracing=L(dd,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new rt;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get($l):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(L(Up,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{let t=this.taskService.add();if(!this.runningTick&&(this.cleanup(),!this.zonelessEnabled||this.appRef.includeAllTestViews)){this.taskService.remove(t);return}this.switchToMicrotaskScheduler(),this.taskService.remove(t)})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}switchToMicrotaskScheduler(){this.ngZone.runOutsideAngular(()=>{let t=this.taskService.add();this.useMicrotaskScheduler=!0,queueMicrotask(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})})}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?e0:bI;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get($l+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.applicationErrorHandler(r)}finally{this.taskService.remove(t),this.cleanup()}}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function cP(){return[{provide:ps,useExisting:aP},{provide:Ue,useClass:Hl},{provide:Dc,useValue:!0}]}function A$(){return typeof $localize<"u"&&$localize.locale||md}var Rg=new J("",{factory:()=>L(Rg,{optional:!0,skipSelf:!0})||A$()});function uP(n,e){return jf(n,e?.equal)}var pP=Symbol("InputSignalNode#UNSET"),G$=Te($({},Bf),{transformFn:void 0,applyValueToInputSignal(n,e){Ml(n,e)}});function gP(n,e){let t=Object.create(G$);t.value=n,t.transformFn=e?.transform;function r(){if(Nl(t),t.value===pP){let i=null;throw new Y(-950,i)}return t.value}return r[ln]=t,r}var Pg=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>ud(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}};function lP(n,e){return gP(n,e)}function W$(n){return gP(pP,n)}var mP=(lP.required=W$,lP);var K$=(()=>{class n{zone=L(Ue);changeDetectionScheduler=L(ps);applicationRef=L(Go);applicationErrorHandler=L(pn);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(t){this.applicationErrorHandler(t)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Q$=new J("",{factory:()=>!1});function Y$({ngZoneFactory:n,scheduleInRootZone:e}){return n??=()=>new Ue(Te($({},yP()),{scheduleInRootZone:e})),[{provide:Dc,useValue:!1},{provide:Ue,useFactory:n},{provide:ys,multi:!0,useFactory:()=>{let t=L(K$,{optional:!0});return()=>t.initialize()}},{provide:ys,multi:!0,useFactory:()=>{let t=L(J$);return()=>{t.initialize()}}},{provide:Up,useValue:e??TI}]}function Qce(n){let e=n?.scheduleInRootZone,t=Y$({ngZoneFactory:()=>{let r=yP(n);return r.scheduleInRootZone=e,r.shouldCoalesceEventChangeDetection&&mg("NgZone_CoalesceEvent"),new Ue(r)},scheduleInRootZone:e});return Xn([{provide:Q$,useValue:!0},t])}function yP(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var J$=(()=>{class n{subscription=new rt;initialized=!1;zone=L(Ue);pendingTasks=L(Cr);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ue.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ue.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var xE=new J(""),X$=new J("");function yd(n){return!n.moduleRef}function Z$(n){let e=yd(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Ue);return t.run(()=>{yd(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(pn),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),yd(n)){let s=()=>e.destroy(),o=n.platformInjector.get(xE);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{let s=()=>n.moduleRef.destroy(),o=n.platformInjector.get(xE);o.add(s),n.moduleRef.onDestroy(()=>{sd(n.allPlatformModules,n.moduleRef),i.unsubscribe(),o.delete(s)})}return t4(r,t,()=>{let s=e.get(Cr),o=s.add(),a=e.get(DE);return a.runInitializers(),a.donePromise.then(()=>{let c=e.get(Rg,md);if(tP(c||md),!e.get(X$,!0))return yd(n)?e.get(Go):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(yd(n)){let h=e.get(Go);return n.rootComponent!==void 0&&h.bootstrap(n.rootComponent),h}else return e4?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>{s.remove(o)})})})}var e4;function t4(n,e,t){try{let r=t();return zo(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var Ng=null;function n4(n=[],e){return At.create({name:e,providers:[{provide:Kl,useValue:"platform"},{provide:xE,useValue:new Set([()=>Ng=null])},...n]})}function r4(n=[]){if(Ng)return Ng;let e=n4(n);return Ng=e,KN(),i4(e),e}function i4(n){let e=n.get(dg,null);ut(n,()=>{e?.forEach(t=>t())})}function UE(){return!1}var s4=1e4;var Yce=s4-1e3;var _d=(()=>{class n{static __NG_ELEMENT_ID__=o4}return n})();function o4(n){return a4(Wt(),Be(),(n&16)===16)}function a4(n,e,t){if(Es(n)&&!t){let r=Ln(n.index,e);return new As(r,r)}else if(n.type&175){let r=e[xn];return new As(r,e)}return null}var OE=class{constructor(){}supports(e){return wE(e)}create(e){return new LE(e)}},c4=(n,e)=>e,LE=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||c4}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){let o=!r||t&&t.currentIndex<dP(r,i,s)?t:r,a=dP(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,o.previousIndex==null)i++;else{s||(s=[]);let d=a-i,h=c-i;if(d!=h){for(let E=0;E<d;E++){let S=E<s.length?s[E]:s[E]=0,R=S+E;h<=R&&R<d&&(s[E]=S+1)}let g=o.previousIndex;s[g]=h-d}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!wE(e))throw new Y(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,s,o,a),r=!0):(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)),t=t._next}else i=0,FN(e,a=>{o=this._trackByFn(i,a),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,a,o,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new FE(t,r),s,i)),e}_verifyReinsertion(e,t,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new kg),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new kg),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},FE=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},VE=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},kg=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new VE,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function dP(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function hP(){return new jE([new OE])}var jE=(()=>{class n{factories;static \u0275prov=Z({token:n,providedIn:"root",factory:hP});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:()=>{let r=L(n,{optional:!0,skipSelf:!0});return n.create(t,r||hP())}}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new Y(901,!1)}}return n})();function _P(n){let{rootComponent:e,appProviders:t,platformProviders:r,platformRef:i}=n;qe(Me.BootstrapApplicationStart);try{let s=i?.injector??r4(r),o=[cP(),n0,...t||[]],a=new ad({providers:o,parent:s,debugName:"",runEnvironmentInitializers:!1});return Z$({r3Injector:a.injector,platformInjector:s,rootComponent:e})}catch(s){return Promise.reject(s)}finally{qe(Me.BootstrapApplicationEnd)}}function Mg(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}var vP=null;function fi(){return vP}function BE(n){vP??=n}var vd=class{},xg=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:()=>L(IP),providedIn:"platform"})}return n})();var IP=(()=>{class n extends xg{_location;_history;_doc=L(St);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return fi().getBaseHref(this._doc)}onPopState(t){let r=fi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=fi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function TP(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function EP(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function Ds(n){return n&&n[0]!=="?"?`?${n}`:n}var Uc=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:()=>L(l4),providedIn:"root"})}return n})(),u4=new J(""),l4=(()=>{class n extends Uc{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??L(St).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return TP(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Ds(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+Ds(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+Ds(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(me(xg),me(u4,8))};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),jc=(()=>{class n{_subject=new xt;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=f4(EP(wP(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ds(r))}normalize(t){return n.stripTrailingSlash(h4(this._basePath,wP(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ds(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ds(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Ds;static joinWithSlash=TP;static stripTrailingSlash=EP;static \u0275fac=function(r){return new(r||n)(me(Uc))};static \u0275prov=Z({token:n,factory:()=>d4(),providedIn:"root"})}return n})();function d4(){return new jc(me(Uc))}function h4(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function wP(n){return n.replace(/\/index.html$/,"")}function f4(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var Og=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},SP=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Og(i.item,this._ngForOf,-1,-1),o===null?void 0:o);else if(o==null)r.remove(s===null?void 0:s);else if(s!==null){let a=r.get(s);r.move(a,o),bP(a,i)}});for(let i=0,s=r.length;i<s;i++){let a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let s=r.get(i.currentIndex);bP(s,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(Dt(qo),Dt(hd),Dt(jE))};static \u0275dir=Ss({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function bP(n,e){n.context.$implicit=e.item}var p4=(()=>{class n{_viewContainer;_context=new Lg;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){AP(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){AP(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(Dt(qo),Dt(hd))};static \u0275dir=Ss({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),Lg=class{$implicit=null;ngIf=null};function AP(n,e){if(n&&!n.createEmbeddedView)throw new Y(2020,!1)}function g4(n,e){return new Y(2100,!1)}var $E=class{createSubscription(e,t,r){return gn(()=>e.subscribe({next:t,error:r}))}dispose(e){gn(()=>e.unsubscribe())}},HE=class{createSubscription(e,t,r){return e.then(i=>t?.(i),i=>r?.(i)),{unsubscribe:()=>{t=null,r=null}}}dispose(e){e.unsubscribe()}},m4=new HE,y4=new $E,_4=(()=>{class n{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;applicationErrorHandler=L(pn);constructor(t){this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r),r=>this.applicationErrorHandler(r))}_selectStrategy(t){if(zo(t))return m4;if(bg(t))return y4;throw g4(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(r){return new(r||n)(Dt(_d,16))};static \u0275pipe=bE({name:"async",type:n,pure:!1})}return n})();var DP=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Vc({type:n});static \u0275inj=Ro({})}return n})();function qE(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,s]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var Id=class{};var CP="browser";var Ed=class{_doc;constructor(e){this._doc=e}manager},Fg=(()=>{class n extends Ed{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,s){return t.addEventListener(r,i,s),()=>this.removeEventListener(t,r,i,s)}removeEventListener(t,r,i,s){return t.removeEventListener(r,i,s)}static \u0275fac=function(r){return new(r||n)(me(St))};static \u0275prov=Z({token:n,factory:n.\u0275fac})}return n})(),jg=new J(""),KE=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(o=>{o.manager=this});let i=t.filter(o=>!(o instanceof Fg));this._plugins=i.slice().reverse();let s=t.find(o=>o instanceof Fg);s&&this._plugins.push(s)}addEventListener(t,r,i,s){return this._findPluginFor(r).addEventListener(t,r,i,s)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new Y(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(me(jg),me(Ue))};static \u0275prov=Z({token:n,factory:n.\u0275fac})}return n})(),zE="ng-app-id";function RP(n){for(let e of n)e.remove()}function NP(n,e){let t=e.createElement("style");return t.textContent=n,t}function I4(n,e,t,r){let i=n.head?.querySelectorAll(`style[${zE}="${e}"],link[${zE}="${e}"]`);if(i)for(let s of i)s.removeAttribute(zE),s instanceof HTMLLinkElement?r.set(s.href.slice(s.href.lastIndexOf("/")+1),{usage:0,elements:[s]}):s.textContent&&t.set(s.textContent,{usage:0,elements:[s]})}function WE(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var QE=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,I4(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,NP);r?.forEach(i=>this.addUsage(i,this.external,WE))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let s=r.get(t);s?s.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(o=>this.addElement(o,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(RP(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])RP(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,NP(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,WE(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(me(St),me(lg),me(hg,8),me(Ho))};static \u0275prov=Z({token:n,factory:n.\u0275fac})}return n})(),GE={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},YE=/%COMP%/g;var kP="%COMP%",E4=`_nghost-${kP}`,w4=`_ngcontent-${kP}`,T4=!0,b4=new J("",{factory:()=>T4});function A4(n){return w4.replace(YE,n)}function S4(n){return E4.replace(YE,n)}function MP(n,e){return e.map(t=>t.replace(YE,n))}var JE=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;constructor(t,r,i,s,o,a,c=null,d=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.ngZone=a,this.nonce=c,this.tracingService=d,this.defaultRenderer=new wd(t,o,a,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof Ug?i.applyToHost(t):i instanceof Td&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,a=this.ngZone,c=this.eventManager,d=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,g=this.tracingService;switch(r.encapsulation){case rr.Emulated:s=new Ug(c,d,r,this.appId,h,o,a,g);break;case rr.ShadowDom:return new Vg(c,t,r,o,a,this.nonce,g,d);case rr.ExperimentalIsolatedShadowDom:return new Vg(c,t,r,o,a,this.nonce,g);default:s=new Td(c,d,r,h,o,a,g);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(me(KE),me(QE),me(lg),me(b4),me(St),me(Ue),me(hg),me(dd,8))};static \u0275prov=Z({token:n,factory:n.\u0275fac})}return n})(),wd=class{eventManager;doc;ngZone;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.tracingService=i}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(GE[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(PP(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(PP(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new Y(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=GE[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=GE[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Nr.DashCase|Nr.Important)?e.style.setProperty(t,r,i&Nr.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Nr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=fi().getGlobalEventTarget(this.doc,e),!e))throw new Y(5102,!1);let s=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(s=this.tracingService.wrapEventListener(e,t,s)),this.eventManager.addEventListener(e,t,s,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function PP(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Vg=class extends wd{hostEl;sharedStylesHost;shadowRoot;constructor(e,t,r,i,s,o,a,c){super(e,i,s,a),this.hostEl=t,this.sharedStylesHost=c,this.shadowRoot=t.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let d=r.styles;d=MP(r.id,d);for(let g of d){let E=document.createElement("style");o&&E.setAttribute("nonce",o),E.textContent=g,this.shadowRoot.appendChild(E)}let h=r.getExternalStyles?.();if(h)for(let g of h){let E=WE(g,i);o&&E.setAttribute("nonce",o),this.shadowRoot.appendChild(E)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},Td=class extends wd{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let d=r.styles;this.styles=c?MP(c,d):d,this.styleUrls=r.getExternalStyles?.(c)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&Mc.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Ug=class extends Td{contentAttr;hostAttr;constructor(e,t,r,i,s,o,a,c){let d=i+"-"+r.id;super(e,t,r,s,o,a,c,d),this.contentAttr=A4(d),this.hostAttr=S4(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var Bg=class n extends vd{supportsDOMEvents=!0;static makeCurrent(){BE(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=D4();return t==null?null:C4(t)}resetBaseElement(){bd=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return qE(document.cookie,e)}},bd=null;function D4(){return bd=bd||document.head.querySelector("base"),bd?bd.getAttribute("href"):null}function C4(n){return new URL(n,document.baseURI).pathname}var R4=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac})}return n})(),xP=["alt","control","meta","shift"],N4={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},P4={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},OP=(()=>{class n extends Ed{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,s){let o=n.parseEventName(r),a=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>fi().onAndCancel(t,o.domEventName,a,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=n._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),xP.forEach(d=>{let h=r.indexOf(d);h>-1&&(r.splice(h,1),o+=d+".")}),o+=s,r.length!=0||s.length===0)return null;let c={};return c.domEventName=i,c.fullKey=o,c}static matchEventFullKeyCode(t,r){let i=N4[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),xP.forEach(o=>{if(o!==i){let a=P4[o];a(t)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(me(St))};static \u0275prov=Z({token:n,factory:n.\u0275fac})}return n})();async function k4(n,e,t){let r=$({rootComponent:n},M4(e,t));return _P(r)}function M4(n,e){return{platformRef:e?.platformRef,appProviders:[...V4,...n?.providers??[]],platformProviders:F4}}function x4(){Bg.makeCurrent()}function O4(){return new li}function L4(){return eE(document),document}var F4=[{provide:Ho,useValue:CP},{provide:dg,useValue:x4,multi:!0},{provide:St,useFactory:L4}];var V4=[{provide:Kl,useValue:"root"},{provide:li,useFactory:O4},{provide:jg,useClass:Fg,multi:!0},{provide:jg,useClass:OP,multi:!0},JE,QE,KE,{provide:jo,useExisting:JE},{provide:Id,useClass:R4},[]];var LP=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(me(St))};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var ce="primary",Ld=Symbol("RouteTitle"),nw=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Qo(n){return new nw(n)}function XE(n,e,t){for(let r=0;r<n.length;r++){let i=n[r],s=e[r];if(i[0]===":")t[i.substring(1)]=s;else if(i!==s.path)return!1}return!0}function GP(n,e,t){let r=t.path.split("/"),i=r.indexOf("**");if(i===-1){if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let c={},d=n.slice(0,r.length);return XE(r,d,c)?{consumed:d,posParams:c}:null}if(i!==r.lastIndexOf("**"))return null;let s=r.slice(0,i),o=r.slice(i+1);if(s.length+o.length>n.length||t.pathMatch==="full"&&e.hasChildren()&&t.path!=="**")return null;let a={};return!XE(s,n.slice(0,s.length),a)||!XE(o,n.slice(n.length-o.length),a)?null:{consumed:n,posParams:a}}function Wg(n){return new Promise((e,t)=>{n.pipe(oi()).subscribe({next:r=>e(r),error:r=>t(r)})})}function j4(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Pr(n[t],e[t]))return!1;return!0}function Pr(n,e){let t=n?rw(n):void 0,r=e?rw(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!WP(n[i],e[i]))return!1;return!0}function rw(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function WP(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}else return n===e}function B4(n){return n.length>0?n[n.length-1]:null}function Xo(n){return up(n)?n:zo(n)?ct(Promise.resolve(n)):be(n)}function KP(n){return up(n)?Wg(n):Promise.resolve(n)}var $4={exact:YP,subset:JP},QP={exact:H4,subset:q4,ignored:()=>!0};function FP(n,e,t){return $4[t.paths](n.root,e.root,t.matrixParams)&&QP[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function H4(n,e){return Pr(n,e)}function YP(n,e,t){if(!Wo(n.segments,e.segments)||!qg(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!YP(n.children[r],e.children[r],t))return!1;return!0}function q4(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>WP(n[t],e[t]))}function JP(n,e,t){return XP(n,e,e.segments,t)}function XP(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Wo(i,t)||e.hasChildren()||!qg(i,t,r))}else if(n.segments.length===t.length){if(!Wo(n.segments,t)||!qg(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!JP(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!Wo(n.segments,i)||!qg(n.segments,i,r)||!n.children[ce]?!1:XP(n.children[ce],e,s,r)}}function qg(n,e,t){return e.every((r,i)=>QP[t](n[i].parameters,r.parameters))}var sr=class{root;queryParams;fragment;_queryParamMap;constructor(e=new xe([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Qo(this.queryParams),this._queryParamMap}toString(){return W4.serialize(this)}},xe=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return zg(this)}},Cs=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Qo(this.parameters),this._parameterMap}toString(){return ek(this)}};function z4(n,e){return Wo(n,e)&&n.every((t,r)=>Pr(t.parameters,e[r].parameters))}function Wo(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function G4(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===ce&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==ce&&(t=t.concat(e(i,r)))}),t}var Fd=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:()=>new Rs,providedIn:"root"})}return n})(),Rs=class{parse(e){let t=new sw(e);return new sr(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Ad(e.root,!0)}`,r=Y4(e.queryParams),i=typeof e.fragment=="string"?`#${K4(e.fragment)}`:"";return`${t}${r}${i}`}},W4=new Rs;function zg(n){return n.segments.map(e=>ek(e)).join("/")}function Ad(n,e){if(!n.hasChildren())return zg(n);if(e){let t=n.children[ce]?Ad(n.children[ce],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==ce&&r.push(`${i}:${Ad(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=G4(n,(r,i)=>i===ce?[Ad(n.children[ce],!1)]:[`${i}:${Ad(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[ce]!=null?`${zg(n)}/${t[0]}`:`${zg(n)}/(${t.join("//")})`}}function ZP(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function $g(n){return ZP(n).replace(/%3B/gi,";")}function K4(n){return encodeURI(n)}function iw(n){return ZP(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Gg(n){return decodeURIComponent(n)}function VP(n){return Gg(n.replace(/\+/g,"%20"))}function ek(n){return`${iw(n.path)}${Q4(n.parameters)}`}function Q4(n){return Object.entries(n).map(([e,t])=>`;${iw(e)}=${iw(t)}`).join("")}function Y4(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${$g(t)}=${$g(i)}`).join("&"):`${$g(t)}=${$g(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var J4=/^[^\/()?;#]+/;function ZE(n){let e=n.match(J4);return e?e[0]:""}var X4=/^[^\/()?;=#]+/;function Z4(n){let e=n.match(X4);return e?e[0]:""}var eH=/^[^=?&#]+/;function tH(n){let e=n.match(eH);return e?e[0]:""}var nH=/^[^&#]+/;function rH(n){let e=n.match(nH);return e?e[0]:""}var sw=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new xe([],{}):new xe([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[ce]=new xe(e,t)),r}parseSegment(){let e=ZE(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Y(4009,!1);return this.capture(e),new Cs(Gg(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=Z4(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=ZE(this.remaining);i&&(r=i,this.capture(r))}e[Gg(t)]=Gg(r)}parseQueryParam(e){let t=tH(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let o=rH(this.remaining);o&&(r=o,this.capture(r))}let i=VP(t),s=VP(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=ZE(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new Y(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=ce);let o=this.parseChildren();t[s??ce]=Object.keys(o).length===1&&o[ce]?o[ce]:new xe([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Y(4011,!1)}};function tk(n){return n.segments.length>0?new xe([],{[ce]:n}):n}function nk(n){let e={};for(let[r,i]of Object.entries(n.children)){let s=nk(i);if(r===ce&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let t=new xe(n.segments,e);return iH(t)}function iH(n){if(n.numberOfChildren===1&&n.children[ce]){let e=n.children[ce];return new xe(n.segments.concat(e.segments),e.children)}return n}function Ns(n){return n instanceof sr}function rk(n,e,t=null,r=null,i=new Rs){let s=ik(n);return sk(s,e,t,r,i)}function ik(n){let e;function t(s){let o={};for(let c of s.children){let d=t(c);o[c.outlet]=d}let a=new xe(s.url,o);return s===n&&(e=a),a}let r=t(n.root),i=tk(r);return e??i}function sk(n,e,t,r,i){let s=n;for(;s.parent;)s=s.parent;if(e.length===0)return ew(s,s,s,t,r,i);let o=sH(e);if(o.toRoot())return ew(s,s,new xe([],{}),t,r,i);let a=oH(o,s,n),c=a.processChildren?Dd(a.segmentGroup,a.index,o.commands):ak(a.segmentGroup,a.index,o.commands);return ew(s,a.segmentGroup,c,t,r,i)}function Kg(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Nd(n){return typeof n=="object"&&n!=null&&n.outlets}function UP(n,e,t){n||="\u0275";let r=new sr;return r.queryParams={[n]:e},t.parse(t.serialize(r)).queryParams[n]}function ew(n,e,t,r,i,s){let o={};for(let[d,h]of Object.entries(r??{}))o[d]=Array.isArray(h)?h.map(g=>UP(d,g,s)):UP(d,h,s);let a;n===e?a=t:a=ok(n,e,t);let c=tk(nk(a));return new sr(c,o,i)}function ok(n,e,t){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===e?r[i]=t:r[i]=ok(s,e,t)}),new xe(n.segments,r)}var Qg=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Kg(r[0]))throw new Y(4003,!1);let i=r.find(Nd);if(i&&i!==B4(r))throw new Y(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function sH(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Qg(!0,0,n);let e=0,t=!1,r=n.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,d])=>{a[c]=typeof d=="string"?d.split("/"):d}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new Qg(t,e,r)}var $c=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function oH(n,e,t){if(n.isAbsolute)return new $c(e,!0,0);if(!t)return new $c(e,!1,NaN);if(t.parent===null)return new $c(t,!0,0);let r=Kg(n.commands[0])?0:1,i=t.segments.length-1+r;return aH(t,i,n.numberOfDoubleDots)}function aH(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new Y(4005,!1);i=r.segments.length}return new $c(r,!1,i-s)}function cH(n){return Nd(n[0])?n[0].outlets:{[ce]:n}}function ak(n,e,t){if(n??=new xe([],{}),n.segments.length===0&&n.hasChildren())return Dd(n,e,t);let r=uH(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new xe(n.segments.slice(0,r.pathIndex),{});return s.children[ce]=new xe(n.segments.slice(r.pathIndex),n.children),Dd(s,0,i)}else return r.match&&i.length===0?new xe(n.segments,{}):r.match&&!n.hasChildren()?ow(n,e,t):r.match?Dd(n,0,i):ow(n,e,t)}function Dd(n,e,t){if(t.length===0)return new xe(n.segments,{});{let r=cH(t),i={};if(Object.keys(r).some(s=>s!==ce)&&n.children[ce]&&n.numberOfChildren===1&&n.children[ce].segments.length===0){let s=Dd(n.children[ce],e,t);return new xe(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=ak(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new xe(n.segments,i)}}function uH(n,e,t){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;let o=n.segments[i],a=t[r];if(Nd(a))break;let c=`${a}`,d=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&d&&typeof d=="object"&&d.outlets===void 0){if(!BP(c,d,o))return s;r+=2}else{if(!BP(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function ow(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let s=t[i];if(Nd(s)){let c=lH(s.outlets);return new xe(r,c)}if(i===0&&Kg(t[0])){let c=n.segments[e];r.push(new Cs(c.path,jP(t[0]))),i++;continue}let o=Nd(s)?s.outlets[ce]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&Kg(a)?(r.push(new Cs(o,jP(a))),i+=2):(r.push(new Cs(o,{})),i++)}return new xe(r,{})}function lH(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=ow(new xe([],{}),0,r))}),e}function jP(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function BP(n,e,t){return n==t.path&&Pr(e,t.parameters)}var Cd="imperative",Ct=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(Ct||{}),bn=class{id;url;constructor(e,t){this.id=e,this.url=t}},Yo=class extends bn{type=Ct.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},kr=class extends bn{urlAfterRedirects;type=Ct.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Kt=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(Kt||{}),Pd=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(Pd||{}),Fn=class extends bn{reason;code;type=Ct.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}};function ck(n){return n instanceof Fn&&(n.code===Kt.Redirect||n.code===Kt.SupersededByNewNavigation)}var gi=class extends bn{reason;code;type=Ct.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},Jo=class extends bn{error;target;type=Ct.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},qc=class extends bn{urlAfterRedirects;state;type=Ct.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Yg=class extends bn{urlAfterRedirects;state;type=Ct.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Jg=class extends bn{urlAfterRedirects;state;shouldActivate;type=Ct.GuardsCheckEnd;constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Xg=class extends bn{urlAfterRedirects;state;type=Ct.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Zg=class extends bn{urlAfterRedirects;state;type=Ct.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},em=class{route;type=Ct.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},tm=class{route;type=Ct.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},nm=class{snapshot;type=Ct.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},rm=class{snapshot;type=Ct.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},im=class{snapshot;type=Ct.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},sm=class{snapshot;type=Ct.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var zc=class{},Gc=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function dH(n){return!(n instanceof zc)&&!(n instanceof Gc)}var om=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return this.route?.snapshot._environmentInjector??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Qc(this.rootInjector)}},Qc=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new om(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(me(Xe))};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),am=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=aw(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=aw(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=cw(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return cw(e,this._root).map(t=>t.value)}};function aw(n,e){if(n===e.value)return e;for(let t of e.children){let r=aw(n,t);if(r)return r}return null}function cw(n,e){if(n===e.value)return[e];for(let t of e.children){let r=cw(n,t);if(r.length)return r.unshift(e),r}return[]}var Tn=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Bc(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var kd=class extends am{snapshot;constructor(e,t){super(e),this.snapshot=t,mw(this,e)}toString(){return this.snapshot.toString()}};function uk(n,e){let t=hH(n,e),r=new Ot([new Cs("",{})]),i=new Ot({}),s=new Ot({}),o=new Ot({}),a=new Ot(""),c=new mi(r,i,o,a,s,ce,n,t.root);return c.snapshot=t.root,new kd(new Tn(c,[]),t)}function hH(n,e){let t={},r={},i={},o=new Ko([],t,i,"",r,ce,n,null,{},e);return new Md("",new Tn(o,[]))}var mi=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(Ke(d=>d[Ld]))??be(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Ke(e=>Qo(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Ke(e=>Qo(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function cm(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:$($({},e.params),n.params),data:$($({},e.data),n.data),resolve:$($($($({},n.data),e.data),i?.data),n._resolvedData)}:r={params:$({},n.params),data:$({},n.data),resolve:$($({},n.data),n._resolvedData??{})},i&&dk(i)&&(r.resolve[Ld]=i.title),r}var Ko=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;_environmentInjector;get title(){return this.data?.[Ld]}constructor(e,t,r,i,s,o,a,c,d,h){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=d,this._environmentInjector=h}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Qo(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Qo(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Md=class extends am{url;constructor(e,t){super(t),this.url=e,mw(this,t)}toString(){return lk(this._root)}};function mw(n,e){e.value._routerState=n,e.children.forEach(t=>mw(n,t))}function lk(n){let e=n.children.length>0?` { ${n.children.map(lk).join(", ")} } `:"";return`${n.value}${e}`}function tw(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Pr(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Pr(e.params,t.params)||n.paramsSubject.next(t.params),j4(e.url,t.url)||n.urlSubject.next(t.url),Pr(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function uw(n,e){let t=Pr(n.params,e.params)&&z4(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||uw(n.parent,e.parent))}function dk(n){return typeof n.title=="string"||n.title===null}var hk=new J(""),yw=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=ce;activateEvents=new rn;deactivateEvents=new rn;attachEvents=new rn;detachEvents=new rn;routerOutletData=mP();parentContexts=L(Qc);location=L(qo);changeDetector=L(_d);inputBinder=L(hm,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Y(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Y(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Y(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Y(4013,!1);this._activatedRoute=t;let i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new lw(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(o,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Ss({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Fc]})}return n})(),lw=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===mi?this.route:e===Qc?this.childContexts:e===hk?this.outletData:this.parent.get(e,t)}},hm=new J("");var _w=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=TE({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Dg(0,"router-outlet")},dependencies:[yw],encapsulation:2})}return n})();function vw(n){let e=n.children&&n.children.map(vw),t=e?Te($({},n),{children:e}):$({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ce&&(t.component=_w),t}function fH(n,e,t){let r=xd(n,e._root,t?t._root:void 0);return new kd(r,e)}function xd(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=pH(n,e,t);return new Tn(r,i)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>xd(n,a)),o}}let r=gH(e.value),i=e.children.map(s=>xd(n,s));return new Tn(r,i)}}function pH(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return xd(n,r,i);return xd(n,r)})}function gH(n){return new mi(new Ot(n.url),new Ot(n.params),new Ot(n.queryParams),new Ot(n.fragment),new Ot(n.data),n.outlet,n.component,n)}var Wc=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},fk="ngNavigationCancelingError";function um(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Ns(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=pk(!1,Kt.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function pk(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[fk]=!0,t.cancellationCode=e,t}function mH(n){return gk(n)&&Ns(n.url)}function gk(n){return!!n&&n[fk]}var dw=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),tw(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Bc(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Bc(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Bc(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Bc(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new sm(s.value.snapshot))}),e.children.length&&this.forwardEvent(new rm(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(tw(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),tw(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},lm=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Hc=class{component;route;constructor(e,t){this.component=e,this.route=t}};function yH(n,e,t){let r=n._root,i=e?e._root:null;return Sd(r,i,t,[r.value])}function _H(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Yc(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!Bv(n)?n:e.get(n):r}function Sd(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Bc(e);return n.children.forEach(o=>{vH(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Rd(a,t.getContext(o),i)),i}function vH(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=IH(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new lm(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Sd(n,e,a?a.children:null,r,i):Sd(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Hc(a.outlet.component,o))}else o&&Rd(e,a,i),i.canActivateChecks.push(new lm(r)),s.component?Sd(n,null,a?a.children:null,r,i):Sd(n,null,t,r,i);return i}function IH(n,e,t){if(typeof t=="function")return ut(e._environmentInjector,()=>t(n,e));switch(t){case"pathParamsChange":return!Wo(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Wo(n.url,e.url)||!Pr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!uw(n,e)||!Pr(n.queryParams,e.queryParams);default:return!uw(n,e)}}function Rd(n,e,t){let r=Bc(n),i=n.value;Object.entries(r).forEach(([s,o])=>{i.component?e?Rd(o,e.children.getContext(s),t):Rd(o,null,t):Rd(o,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Hc(e.outlet.component,i)):t.canDeactivateChecks.push(new Hc(null,i)):t.canDeactivateChecks.push(new Hc(null,i))}function Vd(n){return typeof n=="function"}function EH(n){return typeof n=="boolean"}function wH(n){return n&&Vd(n.canLoad)}function TH(n){return n&&Vd(n.canActivate)}function bH(n){return n&&Vd(n.canActivateChild)}function AH(n){return n&&Vd(n.canDeactivate)}function SH(n){return n&&Vd(n.canMatch)}function mk(n){return n instanceof ii||n?.name==="EmptyError"}var Hg=Symbol("INITIAL_VALUE");function Kc(){return ai(n=>Iv(n.map(e=>e.pipe(si(1),gp(Hg)))).pipe(Ke(e=>{for(let t of e)if(t!==!0){if(t===Hg)return Hg;if(t===!1||DH(t))return t}return!0}),wr(e=>e!==Hg),si(1)))}function DH(n){return Ns(n)||n instanceof Wc}function yk(n){return n.aborted?be(void 0).pipe(si(1)):new fe(e=>{let t=()=>{e.next(),e.complete()};return n.addEventListener("abort",t),()=>n.removeEventListener("abort",t)})}function _k(n){return Vl(yk(n))}function CH(n){return tn(e=>{let{targetSnapshot:t,currentSnapshot:r,guards:{canActivateChecks:i,canDeactivateChecks:s}}=e;return s.length===0&&i.length===0?be(Te($({},e),{guardsResult:!0})):RH(s,t,r).pipe(tn(o=>o&&EH(o)?NH(t,i,n):be(o)),Ke(o=>Te($({},e),{guardsResult:o})))})}function RH(n,e,t){return ct(n).pipe(tn(r=>OH(r.component,r.route,t,e)),oi(r=>r!==!0,!0))}function NH(n,e,t){return ct(e).pipe(fp(r=>mc(kH(r.route.parent,t),PH(r.route,t),xH(n,r.path),MH(n,r.route))),oi(r=>r!==!0,!0))}function PH(n,e){return n!==null&&e&&e(new im(n)),be(!0)}function kH(n,e){return n!==null&&e&&e(new nm(n)),be(!0)}function MH(n,e){let t=e.routeConfig?e.routeConfig.canActivate:null;if(!t||t.length===0)return be(!0);let r=t.map(i=>Ll(()=>{let s=e._environmentInjector,o=Yc(i,s),a=TH(o)?o.canActivate(e,n):ut(s,()=>o(e,n));return Xo(a).pipe(oi())}));return be(r).pipe(Kc())}function xH(n,e){let t=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(s=>_H(s)).filter(s=>s!==null).map(s=>Ll(()=>{let o=s.guards.map(a=>{let c=s.node._environmentInjector,d=Yc(a,c),h=bH(d)?d.canActivateChild(t,n):ut(c,()=>d(t,n));return Xo(h).pipe(oi())});return be(o).pipe(Kc())}));return be(i).pipe(Kc())}function OH(n,e,t,r){let i=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!i||i.length===0)return be(!0);let s=i.map(o=>{let a=e._environmentInjector,c=Yc(o,a),d=AH(c)?c.canDeactivate(n,e,t,r):ut(a,()=>c(n,e,t,r));return Xo(d).pipe(oi())});return be(s).pipe(Kc())}function LH(n,e,t,r,i){let s=e.canLoad;if(s===void 0||s.length===0)return be(!0);let o=s.map(a=>{let c=Yc(a,n),d=wH(c)?c.canLoad(e,t):ut(n,()=>c(e,t)),h=Xo(d);return i?h.pipe(_k(i)):h});return be(o).pipe(Kc(),vk(r))}function vk(n){return Gf(Tr(e=>{if(typeof e!="boolean")throw um(n,e)}),Ke(e=>e===!0))}function FH(n,e,t,r,i){let s=e.canMatch;if(!s||s.length===0)return be(!0);let o=s.map(a=>{let c=Yc(a,n),d=SH(c)?c.canMatch(e,t):ut(n,()=>c(e,t));return Xo(d).pipe(_k(i))});return be(o).pipe(Kc(),vk(r))}var pi=class n extends Error{segmentGroup;constructor(e){super(),this.segmentGroup=e||null,Object.setPrototypeOf(this,n.prototype)}},Od=class n extends Error{urlTree;constructor(e){super(),this.urlTree=e,Object.setPrototypeOf(this,n.prototype)}};function VH(n){throw new Y(4e3,!1)}function UH(n){throw pk(!1,Kt.GuardRejected)}var hw=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}async lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return r;if(i.numberOfChildren>1||!i.children[ce])throw VH(`${e.redirectTo}`);i=i.children[ce]}}async applyRedirectCommands(e,t,r,i,s){let o=await jH(t,i,s);if(o instanceof sr)throw new Od(o);let a=this.applyRedirectCreateUrlTree(o,this.urlSerializer.parse(o),e,r);if(o[0]==="/")throw new Od(a);return a}applyRedirectCreateUrlTree(e,t,r,i){let s=this.createSegmentGroup(e,t.root,r,i);return new sr(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){let s=this.createSegments(e,t.segments,r,i),o={};return Object.entries(t.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new xe(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new Y(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function jH(n,e,t){if(typeof n=="string")return Promise.resolve(n);let r=n,{queryParams:i,fragment:s,routeConfig:o,url:a,outlet:c,params:d,data:h,title:g,paramMap:E,queryParamMap:S}=e;return Wg(Xo(ut(t,()=>r({params:d,data:h,queryParams:i,fragment:s,routeConfig:o,url:a,outlet:c,title:g,paramMap:E,queryParamMap:S}))))}function BH(n,e){return n.providers&&!n._injector&&(n._injector=gd(n.providers,e,`Route: ${n.path}`)),n._injector??e}function ir(n){return n.outlet||ce}function $H(n,e){let t=n.filter(r=>ir(r)===e);return t.push(...n.filter(r=>ir(r)!==e)),t}var fw={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function HH(n,e,t,r,i,s){let o=Ik(n,e,t);return o.matched?(r=BH(e,r),FH(r,e,t,i,s).pipe(Ke(a=>a===!0?o:$({},fw)))):be(o)}function Ik(n,e,t){if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?$({},fw):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||GP)(t,n,e);if(!i)return $({},fw);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?$($({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function $P(n,e,t,r){return t.length>0&&GH(n,t,r)?{segmentGroup:new xe(e,zH(r,new xe(t,n.children))),slicedSegments:[]}:t.length===0&&WH(n,t,r)?{segmentGroup:new xe(n.segments,qH(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new xe(n.segments,n.children),slicedSegments:t}}function qH(n,e,t,r){let i={};for(let s of t)if(fm(n,e,s)&&!r[ir(s)]){let o=new xe([],{});i[ir(s)]=o}return $($({},r),i)}function zH(n,e){let t={};t[ce]=e;for(let r of n)if(r.path===""&&ir(r)!==ce){let i=new xe([],{});t[ir(r)]=i}return t}function GH(n,e,t){return t.some(r=>fm(n,e,r)&&ir(r)!==ce)}function WH(n,e,t){return t.some(r=>fm(n,e,r))}function fm(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function KH(n,e,t){return e.length===0&&!n.children[t]}var pw=class{};async function QH(n,e,t,r,i,s,o="emptyOnly",a){return new gw(n,e,t,r,i,o,s,a).recognize()}var YH=31,gw=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;abortSignal;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,s,o,a,c){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.abortSignal=c,this.applyRedirects=new hw(this.urlSerializer,this.urlTree)}noMatchError(e){return new Y(4002,`'${e.segmentGroup}'`)}async recognize(){let e=$P(this.urlTree.root,[],[],this.config).segmentGroup,{children:t,rootSnapshot:r}=await this.match(e),i=new Tn(r,t),s=new Md("",i),o=rk(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}async match(e){let t=new Ko([],Object.freeze({}),Object.freeze($({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ce,this.rootComponentType,null,{},this.injector);try{return{children:await this.processSegmentGroup(this.injector,this.config,e,ce,t),rootSnapshot:t}}catch(r){if(r instanceof Od)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof pi?this.noMatchError(r):r}}async processSegmentGroup(e,t,r,i,s){if(r.segments.length===0&&r.hasChildren())return this.processChildren(e,t,r,s);let o=await this.processSegment(e,t,r,r.segments,i,!0,s);return o instanceof Tn?[o]:[]}async processChildren(e,t,r,i){let s=[];for(let c of Object.keys(r.children))c==="primary"?s.unshift(c):s.push(c);let o=[];for(let c of s){let d=r.children[c],h=$H(t,c),g=await this.processSegmentGroup(e,h,d,c,i);o.push(...g)}let a=Ek(o);return JH(a),a}async processSegment(e,t,r,i,s,o,a){for(let c of t)try{return await this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,s,o,a)}catch(d){if(d instanceof pi||mk(d))continue;throw d}if(KH(r,i,s))return new pw;throw new pi(r)}async processSegmentAgainstRoute(e,t,r,i,s,o,a,c){if(ir(r)!==o&&(o===ce||!fm(i,s,r)))throw new pi(i);if(r.redirectTo===void 0)return this.matchSegmentAgainstRoute(e,i,r,s,o,c);if(this.allowRedirects&&a)return this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o,c);throw new pi(i)}async expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o,a){let{matched:c,parameters:d,consumedSegments:h,positionalParamSegments:g,remainingSegments:E}=Ik(t,i,s);if(!c)throw new pi(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>YH&&(this.allowRedirects=!1));let S=new Ko(s,d,Object.freeze($({},this.urlTree.queryParams)),this.urlTree.fragment,HP(i),ir(i),i.component??i._loadedComponent??null,i,qP(i),e),R=cm(S,a,this.paramsInheritanceStrategy);if(S.params=Object.freeze(R.params),S.data=Object.freeze(R.data),this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let M=await this.applyRedirects.applyRedirectCommands(h,i.redirectTo,g,S,e),k=await this.applyRedirects.lineralizeSegments(i,M);return this.processSegment(e,r,t,k.concat(E),o,!1,a)}async matchSegmentAgainstRoute(e,t,r,i,s,o){if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let a=await Wg(HH(t,r,i,e,this.urlSerializer,this.abortSignal));if(r.path==="**"&&(t.children={}),!a?.matched)throw new pi(t);e=r._injector??e;let{routes:c}=await this.getChildConfig(e,r,i),d=r._loadedInjector??e,{parameters:h,consumedSegments:g,remainingSegments:E}=a,S=new Ko(g,h,Object.freeze($({},this.urlTree.queryParams)),this.urlTree.fragment,HP(r),ir(r),r.component??r._loadedComponent??null,r,qP(r),e),R=cm(S,o,this.paramsInheritanceStrategy);S.params=Object.freeze(R.params),S.data=Object.freeze(R.data);let{segmentGroup:M,slicedSegments:k}=$P(t,g,E,c);if(k.length===0&&M.hasChildren()){let K=await this.processChildren(d,c,M,S);return new Tn(S,K)}if(c.length===0&&k.length===0)return new Tn(S,[]);let V=ir(r)===s,z=await this.processSegment(d,c,M,k,V?ce:s,!0,S);return new Tn(S,z instanceof Tn?[z]:[])}async getChildConfig(e,t,r){if(t.children)return{routes:t.children,injector:e};if(t.loadChildren){if(t._loadedRoutes!==void 0){let s=t._loadedNgModuleFactory;return s&&!t._loadedInjector&&(t._loadedInjector=s.create(e).injector),{routes:t._loadedRoutes,injector:t._loadedInjector}}if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);if(await Wg(LH(e,t,r,this.urlSerializer,this.abortSignal))){let s=await this.configLoader.loadChildren(e,t);return t._loadedRoutes=s.routes,t._loadedInjector=s.injector,t._loadedNgModuleFactory=s.factory,s}throw UH(t)}return{routes:[],injector:e}}};function JH(n){n.sort((e,t)=>e.value.outlet===ce?-1:t.value.outlet===ce?1:e.value.outlet.localeCompare(t.value.outlet))}function XH(n){let e=n.value.routeConfig;return e&&e.path===""}function Ek(n){let e=[],t=new Set;for(let r of n){if(!XH(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=Ek(r.children);e.push(new Tn(r.value,i))}return e.filter(r=>!t.has(r))}function HP(n){return n.data||{}}function qP(n){return n.resolve||{}}function ZH(n,e,t,r,i,s,o){return tn(async a=>{let{state:c,tree:d}=await QH(n,e,t,r,a.extractedUrl,i,s,o);return Te($({},a),{targetSnapshot:c,urlAfterRedirects:d})})}function eq(n){return tn(e=>{let{targetSnapshot:t,guards:{canActivateChecks:r}}=e;if(!r.length)return be(e);let i=new Set(r.map(a=>a.route)),s=new Set;for(let a of i)if(!s.has(a))for(let c of wk(a))s.add(c);let o=0;return ct(s).pipe(fp(a=>i.has(a)?tq(a,t,n):(a.data=cm(a,a.parent,n).resolve,be(void 0))),Tr(()=>o++),pp(1),tn(a=>o===s.size?be(e):Lt))})}function wk(n){let e=n.children.map(t=>wk(t)).flat();return[n,...e]}function tq(n,e,t){let r=n.routeConfig,i=n._resolve;return r?.title!==void 0&&!dk(r)&&(i[Ld]=r.title),Ll(()=>(n.data=cm(n,n.parent,t).resolve,nq(i,n,e).pipe(Ke(s=>(n._resolvedData=s,n.data=$($({},n.data),s),null)))))}function nq(n,e,t){let r=rw(n);if(r.length===0)return be({});let i={};return ct(r).pipe(tn(s=>rq(n[s],e,t).pipe(oi(),Tr(o=>{if(o instanceof Wc)throw um(new Rs,o);i[s]=o}))),pp(1),Ke(()=>i),Fl(s=>mk(s)?Lt:vv(s)))}function rq(n,e,t){let r=e._environmentInjector,i=Yc(n,r),s=i.resolve?i.resolve(e,t):ut(r,()=>i(e,t));return Xo(s)}function zP(n){return ai(e=>{let t=n(e);return t?ct(t).pipe(Ke(()=>e)):be(e)})}var Iw=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===ce);return r}getResolvedTitleForRoute(t){return t.data[Ld]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:()=>L(Tk),providedIn:"root"})}return n})(),Tk=(()=>{class n extends Iw{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(me(LP))};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Jc=new J("",{factory:()=>({})}),Ud=new J(""),bk=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=L(ME);async loadComponent(t,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Promise.resolve(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let s=await KP(ut(t,()=>r.loadComponent())),o=await Dk(Sk(s));return this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o,o}finally{this.componentLoaders.delete(r)}})();return this.componentLoaders.set(r,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Promise.resolve({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let s=await Ak(r,this.compiler,t,this.onLoadEndListener);return r._loadedRoutes=s.routes,r._loadedInjector=s.injector,r._loadedNgModuleFactory=s.factory,s}finally{this.childrenLoaders.delete(r)}})();return this.childrenLoaders.set(r,i),i}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();async function Ak(n,e,t,r){let i=await KP(ut(t,()=>n.loadChildren())),s=await Dk(Sk(i)),o;s instanceof Tg||Array.isArray(s)?o=s:o=await e.compileModuleAsync(s),r&&r(n);let a,c,d=!1,h;return Array.isArray(o)?(c=o,d=!0):(a=o.create(t).injector,h=o,c=a.get(Ud,[],{optional:!0,self:!0}).flat()),{routes:c.map(vw),injector:a,factory:h}}function iq(n){return n&&typeof n=="object"&&"default"in n}function Sk(n){return iq(n)?n.default:n}async function Dk(n){return n}var pm=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:()=>L(sq),providedIn:"root"})}return n})(),sq=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ck=new J("");var oq=()=>{},Rk=new J(""),Nk=(()=>{class n{currentNavigation=bs(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=bs(null);events=new xt;transitionAbortWithErrorSubject=new xt;configLoader=L(bk);environmentInjector=L(Xe);destroyRef=L(Ts);urlSerializer=L(Fd);rootContexts=L(Qc);location=L(jc);inputBindingEnabled=L(hm,{optional:!0})!==null;titleStrategy=L(Iw);options=L(Jc,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=L(pm);createViewTransition=L(Ck,{optional:!0});navigationErrorHandler=L(Rk,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>be(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new em(i)),r=i=>this.events.next(new tm(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;gn(()=>{this.transitions?.next(Te($({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))})}setupNavigations(t){return this.transitions=new Ot(null),this.transitions.pipe(wr(r=>r!==null),ai(r=>{let i=!1,s=new AbortController,o=()=>!i&&this.currentTransition?.id===r.id;return be(r).pipe(ai(a=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Kt.SupersededByNewNavigation),Lt;this.currentTransition=r;let c=this.lastSuccessfulNavigation();this.currentNavigation.set({id:a.id,initialUrl:a.rawUrl,extractedUrl:a.extractedUrl,targetBrowserUrl:typeof a.extras.browserUrl=="string"?this.urlSerializer.parse(a.extras.browserUrl):a.extras.browserUrl,trigger:a.source,extras:a.extras,previousNavigation:c?Te($({},c),{previousNavigation:null}):null,abort:()=>s.abort()});let d=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=a.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!d&&h!=="reload")return this.events.next(new gi(a.id,this.urlSerializer.serialize(a.rawUrl),"",Pd.IgnoredSameUrlNavigation)),a.resolve(!1),Lt;if(this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return be(a).pipe(ai(g=>(this.events.next(new Yo(g.id,this.urlSerializer.serialize(g.extractedUrl),g.source,g.restoredState)),g.id!==this.navigationId?Lt:Promise.resolve(g))),ZH(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy,s.signal),Tr(g=>{r.targetSnapshot=g.targetSnapshot,r.urlAfterRedirects=g.urlAfterRedirects,this.currentNavigation.update(S=>(S.finalUrl=g.urlAfterRedirects,S));let E=new qc(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(E)}));if(d&&this.urlHandlingStrategy.shouldProcessUrl(a.currentRawUrl)){let{id:g,extractedUrl:E,source:S,restoredState:R,extras:M}=a,k=new Yo(g,this.urlSerializer.serialize(E),S,R);this.events.next(k);let V=uk(this.rootComponentType,this.environmentInjector).snapshot;return this.currentTransition=r=Te($({},a),{targetSnapshot:V,urlAfterRedirects:E,extras:Te($({},M),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(z=>(z.finalUrl=E,z)),be(r)}else return this.events.next(new gi(a.id,this.urlSerializer.serialize(a.extractedUrl),"",Pd.IgnoredByUrlHandlingStrategy)),a.resolve(!1),Lt}),Ke(a=>{let c=new Yg(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);return this.events.next(c),this.currentTransition=r=Te($({},a),{guards:yH(a.targetSnapshot,a.currentSnapshot,this.rootContexts)}),r}),CH(a=>this.events.next(a)),ai(a=>{if(r.guardsResult=a.guardsResult,a.guardsResult&&typeof a.guardsResult!="boolean")throw um(this.urlSerializer,a.guardsResult);let c=new Jg(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);if(this.events.next(c),!o())return Lt;if(!a.guardsResult)return this.cancelNavigationTransition(a,"",Kt.GuardRejected),Lt;if(a.guards.canActivateChecks.length===0)return be(a);let d=new Xg(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);if(this.events.next(d),!o())return Lt;let h=!1;return be(a).pipe(eq(this.paramsInheritanceStrategy),Tr({next:()=>{h=!0;let g=new Zg(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(g)},complete:()=>{h||this.cancelNavigationTransition(a,"",Kt.NoDataFromResolver)}}))}),zP(a=>{let c=h=>{let g=[];if(h.routeConfig?._loadedComponent)h.component=h.routeConfig?._loadedComponent;else if(h.routeConfig?.loadComponent){let E=h._environmentInjector;g.push(this.configLoader.loadComponent(E,h.routeConfig).then(S=>{h.component=S}))}for(let E of h.children)g.push(...c(E));return g},d=c(a.targetSnapshot.root);return d.length===0?be(a):ct(Promise.all(d).then(()=>a))}),zP(()=>this.afterPreactivation()),ai(()=>{let{currentSnapshot:a,targetSnapshot:c}=r,d=this.createViewTransition?.(this.environmentInjector,a.root,c.root);return d?ct(d).pipe(Ke(()=>r)):be(r)}),si(1),Ke(a=>{let c=fH(t.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);this.currentTransition=r=a=Te($({},a),{targetRouterState:c}),this.currentNavigation.update(d=>(d.targetRouterState=c,d)),this.events.next(new zc),o()&&(new dw(t.routeReuseStrategy,r.targetRouterState,r.currentRouterState,d=>this.events.next(d),this.inputBindingEnabled).activate(this.rootContexts),o()&&(i=!0,this.currentNavigation.update(d=>(d.abort=oq,d)),this.lastSuccessfulNavigation.set(gn(this.currentNavigation)),this.events.next(new kr(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects))),this.titleStrategy?.updateTitle(a.targetRouterState.snapshot),a.resolve(!0)))}),Vl(yk(s.signal).pipe(wr(()=>!i&&!r.targetRouterState),Tr(()=>{this.cancelNavigationTransition(r,s.signal.reason+"",Kt.Aborted)}))),Tr({complete:()=>{i=!0}}),Vl(this.transitionAbortWithErrorSubject.pipe(Tr(a=>{throw a}))),Ev(()=>{s.abort(),i||this.cancelNavigationTransition(r,"",Kt.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),Fl(a=>{if(i=!0,this.destroyed)return r.resolve(!1),Lt;if(gk(a))this.events.next(new Fn(r.id,this.urlSerializer.serialize(r.extractedUrl),a.message,a.cancellationCode)),mH(a)?this.events.next(new Gc(a.url,a.navigationBehaviorOptions)):r.resolve(!1);else{let c=new Jo(r.id,this.urlSerializer.serialize(r.extractedUrl),a,r.targetSnapshot??void 0);try{let d=ut(this.environmentInjector,()=>this.navigationErrorHandler?.(c));if(d instanceof Wc){let{message:h,cancellationCode:g}=um(this.urlSerializer,d);this.events.next(new Fn(r.id,this.urlSerializer.serialize(r.extractedUrl),h,g)),this.events.next(new Gc(d.redirectTo,d.navigationBehaviorOptions))}else throw this.events.next(c),a}catch(d){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(d)}}return Lt}))}))}cancelNavigationTransition(t,r,i){let s=new Fn(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=gn(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return t.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function aq(n){return n!==Cd}var Pk=new J("");var kk=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:()=>L(cq),providedIn:"root"})}return n})(),dm=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}shouldDestroyInjector(e){return!0}},cq=(()=>{class n extends dm{static \u0275fac=(()=>{let t;return function(i){return(t||(t=cg(n)))(i||n)}})();static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ew=(()=>{class n{urlSerializer=L(Fd);options=L(Jc,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=L(jc);urlHandlingStrategy=L(pm);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new sr;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let s=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,o=i??s;return o instanceof sr?this.urlSerializer.serialize(o):o}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=uk(null,L(Xe));getRouterState(){return this.routerState}_stateMemento=this.createStateMemento();get stateMemento(){return this._stateMemento}updateStateMemento(){this._stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}restoredState(){return this.location.getState()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:()=>L(uq),providedIn:"root"})}return n})(),uq=(()=>{class n extends Ew{currentPageId=0;lastSuccessfulId=-1;get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof Yo?this.updateStateMemento():t instanceof gi?this.commitTransition(r):t instanceof qc?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof zc?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Fn&&!ck(t)?this.restoreHistory(r):t instanceof Jo?this.restoreHistory(r,!0):t instanceof kr&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:s,state:o}=r;if(this.location.isCurrentPathEqualTo(t)||s){let a=this.browserPageId,c=$($({},o),this.generateNgRouterState(i,a));this.location.replaceState(t,"",c)}else{let a=$($({},o),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.getCurrentUrlTree()===t.finalUrl&&s===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=cg(n)))(i||n)}})();static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ww(n,e){n.events.pipe(wr(t=>t instanceof kr||t instanceof Fn||t instanceof Jo||t instanceof gi),Ke(t=>t instanceof kr||t instanceof gi?0:(t instanceof Fn?t.code===Kt.Redirect||t.code===Kt.SupersededByNewNavigation:!1)?2:1),wr(t=>t!==2),si(1)).subscribe(()=>{e()})}var Mk={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},xk={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},jd=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=L(AE);stateManager=L(Ew);options=L(Jc,{optional:!0})||{};pendingTasks=L(Cr);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=L(Nk);urlSerializer=L(Fd);location=L(jc);urlHandlingStrategy=L(pm);injector=L(Xe);_events=new xt;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=L(kk);injectorCleanup=L(Pk,{optional:!0});onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=L(Ud,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!L(hm,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{}}),this.subscribeToNavigationEvents()}eventsSubscription=new rt;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=gn(this.navigationTransitions.currentNavigation);if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof Fn&&r.code!==Kt.Redirect&&r.code!==Kt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof kr)this.navigated=!0,this.injectorCleanup?.(this.routeReuseStrategy,this.routerState,this.config);else if(r instanceof Gc){let o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=$({scroll:i.extras.scroll,browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||aq(i.source)},o);this.scheduleNavigation(a,Cd,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}dH(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Cd,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let c=$({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(s.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s).catch(c=>{this.disposed||this.injector.get(pn)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return gn(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(vw),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription?.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0,this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=r,d=c?this.currentUrlTree.fragment:o,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=$($({},this.currentUrlTree.queryParams),s);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=s||null}h!==null&&(h=this.removeEmptyProps(h));let g;try{let E=i?i.snapshot:this.routerState.snapshot.root;g=ik(E)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),g=this.currentUrlTree.root}return sk(g,t,h,d??null,this.urlSerializer)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Ns(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Cd,null,r)}navigate(t,r={skipLocationChange:!1}){return lq(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.console.warn(Ic(4018,!1)),this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=$({},Mk):r===!1?i=$({},xk):i=r,Ns(t))return FP(this.currentUrlTree,t,i);let s=this.parseUrl(t);return FP(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,d;o?(a=o.resolve,c=o.reject,d=o.promise):d=new Promise((g,E)=>{a=g,c=E});let h=this.pendingTasks.add();return ww(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:c,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(g=>Promise.reject(g))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function lq(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new Y(4008,!1)}var Ok=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=bs(null);get href(){return gn(this.reactiveHref)}set href(t){this.reactiveHref.set(t)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new xt;applicationErrorHandler=L(pn);options=L(Jc,{optional:!0});constructor(t,r,i,s,o,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=a,this.reactiveHref.set(L(new Pg("href"),{optional:!0}));let c=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area"||!!(typeof customElements=="object"&&customElements.get(c)?.observedAttributes?.includes?.("href")),this.isAnchorElement&&(this.setTabIndexIfNotOnNativeEl("0"),this.subscribeToNavigationEventsIfNecessary())}subscribeToNavigationEventsIfNecessary(){this.subscription===void 0&&(this.subscription=this.router.events.subscribe(t=>{t instanceof kr&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Ns(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,s,o){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||s||o||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c)?.catch(d=>{this.applicationErrorHandler(d)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.reactiveHref.set(t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t))??"":null)}applyAttributeValue(t,r){let i=this.renderer,s=this.el.nativeElement;r!==null?i.setAttribute(s,t,r):i.removeAttribute(s,t)}get urlTree(){return this.routerLinkInput===null?null:Ns(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(Dt(jd),Dt(mi),ud("tabindex"),Dt(wg),Dt(ld),Dt(Uc))};static \u0275dir=Ss({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&Cg("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),r&2&&Sg("href",i.reactiveHref(),iE)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Mg],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Mg],replaceUrl:[2,"replaceUrl","replaceUrl",Mg],routerLink:"routerLink"},features:[Fc]})}return n})();var fq=new J("");function pq(n,...e){return Xn([{provide:Ud,multi:!0,useValue:n},[],{provide:mi,useFactory:gq},{provide:Ag,multi:!0,useFactory:mq},e.map(t=>t.\u0275providers)])}function gq(){return L(jd).routerState.root}function mq(){let n=L(At);return e=>{let t=n.get(Go);if(e!==t.components[0])return;let r=n.get(jd),i=n.get(yq);n.get(_q)===1&&r.initialNavigation(),n.get(vq,null,{optional:!0})?.setUpPreloading(),n.get(fq,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var yq=new J("",{factory:()=>new xt}),_q=new J("",{factory:()=>1});var vq=new J("");var Lk=()=>{};var Uk=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},Iq=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],a=n[t++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},gm={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,a=o?n[i+1]:0,c=i+2<n.length,d=c?n[i+2]:0,h=s>>2,g=(s&3)<<4|a>>4,E=(a&15)<<2|d>>6,S=d&63;c||(S=64,o||(E=64)),r.push(t[h],t[g],t[E],t[S])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Uk(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Iq(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let d=i<n.length?t[n.charAt(i)]:64;++i;let g=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||d==null||g==null)throw new bw;let E=s<<2|a>>4;if(r.push(E),d!==64){let S=a<<4&240|d>>2;if(r.push(S),g!==64){let R=d<<6&192|g;r.push(R)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},bw=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},Eq=function(n){let e=Uk(n);return gm.encodeByteArray(e,!0)},$d=function(n){return Eq(n).replace(/\./g,"")},mm=function(n){try{return gm.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Sw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var wq=()=>Sw().__FIREBASE_DEFAULTS__,Tq=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},bq=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&mm(n[1]);return e&&JSON.parse(e)},ym=()=>{try{return Lk()||wq()||Tq()||bq()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Dw=n=>{var e,t;return(t=(e=ym())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},jk=n=>{let e=Dw(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Cw=()=>{var n;return(n=ym())===null||n===void 0?void 0:n.config},Rw=n=>{var e;return(e=ym())===null||e===void 0?void 0:e[`_${n}`]};var Zo=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function Ps(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function _m(n){return(await fetch(n,{credentials:"include"})).ok}function Bk(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[$d(JSON.stringify(t)),$d(JSON.stringify(o)),""].join(".")}var Bd={};function Aq(){let n={prod:[],emulator:[]};for(let e of Object.keys(Bd))Bd[e]?n.emulator.push(e):n.prod.push(e);return n}function Sq(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var Fk=!1;function vm(n,e){if(typeof window>"u"||typeof document>"u"||!Ps(window.location.host)||Bd[n]===e||Bd[n]||Fk)return;Bd[n]=e;function t(E){return`__firebase__banner__${E}`}let r="__firebase__banner",s=Aq().prod.length>0;function o(){let E=document.getElementById(r);E&&E.remove()}function a(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function c(E,S){E.setAttribute("width","24"),E.setAttribute("id",S),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function d(){let E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{Fk=!0,o()},E}function h(E,S){E.setAttribute("id",S),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function g(){let E=Sq(r),S=t("text"),R=document.getElementById(S)||document.createElement("span"),M=t("learnmore"),k=document.getElementById(M)||document.createElement("a"),V=t("preprendIcon"),z=document.getElementById(V)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){let K=E.element;a(K),h(k,M);let ye=d();c(z,V),K.append(z,R,k,ye),document.body.appendChild(K)}s?(R.innerText="Preview backend disconnected.",z.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(z.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,R.innerText="Preview backend running in this workspace."),R.setAttribute("id",S)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}function Rt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function $k(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Rt())}function Dq(){var n;let e=(n=ym())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Hk(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function qk(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function zk(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Gk(){let n=Rt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Wk(){return!Dq()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Hd(){try{return typeof indexedDB=="object"}catch{return!1}}function Kk(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var Cq="FirebaseError",An=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=Cq,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,or.prototype.create)}},or=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?Rq(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new An(i,a,r)}};function Rq(n,e){return n.replace(Nq,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var Nq=/\{\$([^}]+)}/g;function Qk(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Mr(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],o=e[i];if(Vk(s)&&Vk(o)){if(!Mr(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function Vk(n){return n!==null&&typeof n=="object"}function Xc(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Yk(n,e){let t=new Aw(n,e);return t.subscribe.bind(t)}var Aw=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");Pq(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Tw),i.error===void 0&&(i.error=Tw),i.complete===void 0&&(i.complete=Tw);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function Pq(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Tw(){}var ghe=14400*1e3;function jt(n){return n&&n._delegate?n._delegate:n}var sn=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var ea="[DEFAULT]";var Nw=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new Zo;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Mq(e))try{this.getOrInitializeService({instanceIdentifier:ea})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=ea){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ea){return this.instances.has(e)}getOptions(e=ea){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:kq(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ea){return this.component?this.component.multipleInstances?e:ea:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function kq(n){return n===ea?void 0:n}function Mq(n){return n.instantiationMode==="EAGER"}var Im=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Nw(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var xq=[],Ie=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(Ie||{}),Oq={debug:Ie.DEBUG,verbose:Ie.VERBOSE,info:Ie.INFO,warn:Ie.WARN,error:Ie.ERROR,silent:Ie.SILENT},Lq=Ie.INFO,Fq={[Ie.DEBUG]:"log",[Ie.VERBOSE]:"log",[Ie.INFO]:"info",[Ie.WARN]:"warn",[Ie.ERROR]:"error"},Vq=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=Fq[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},xr=class{constructor(e){this.name=e,this._logLevel=Lq,this._logHandler=Vq,this._userLogHandler=null,xq.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ie))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Oq[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ie.DEBUG,...e),this._logHandler(this,Ie.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ie.VERBOSE,...e),this._logHandler(this,Ie.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ie.INFO,...e),this._logHandler(this,Ie.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ie.WARN,...e),this._logHandler(this,Ie.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ie.ERROR,...e),this._logHandler(this,Ie.ERROR,...e)}};var Uq=(n,e)=>e.some(t=>n instanceof t),Jk,Xk;function jq(){return Jk||(Jk=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Bq(){return Xk||(Xk=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var Zk=new WeakMap,kw=new WeakMap,eM=new WeakMap,Pw=new WeakMap,xw=new WeakMap;function $q(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(Or(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&Zk.set(t,n)}).catch(()=>{}),xw.set(e,n),e}function Hq(n){if(kw.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});kw.set(n,e)}var Mw={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return kw.get(n);if(e==="objectStoreNames")return n.objectStoreNames||eM.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Or(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function tM(n){Mw=n(Mw)}function qq(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Em(this),e,...t);return eM.set(r,e.sort?e.sort():[e]),Or(r)}:Bq().includes(n)?function(...e){return n.apply(Em(this),e),Or(Zk.get(this))}:function(...e){return Or(n.apply(Em(this),e))}}function zq(n){return typeof n=="function"?qq(n):(n instanceof IDBTransaction&&Hq(n),Uq(n,jq())?new Proxy(n,Mw):n)}function Or(n){if(n instanceof IDBRequest)return $q(n);if(Pw.has(n))return Pw.get(n);let e=zq(n);return e!==n&&(Pw.set(n,e),xw.set(e,n)),e}var Em=n=>xw.get(n);function wm(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(n,e),a=Or(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Or(o.result),c.oldVersion,c.newVersion,Or(o.transaction),c)}),t&&o.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),a}var Gq=["get","getKey","getAll","getAllKeys","count"],Wq=["put","add","delete","clear"],Ow=new Map;function nM(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Ow.get(e))return Ow.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=Wq.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Gq.includes(t)))return;let s=async function(o,...a){let c=this.transaction(o,i?"readwrite":"readonly"),d=c.store;return r&&(d=d.index(a.shift())),(await Promise.all([d[t](...a),i&&c.done]))[0]};return Ow.set(e,s),s}tM(n=>Te($({},n),{get:(e,t,r)=>nM(e,t)||n.get(e,t,r),has:(e,t)=>!!nM(e,t)||n.has(e,t)}));var Fw=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Kq(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function Kq(n){let e=n.getComponent();return e?.type==="VERSION"}var Vw="@firebase/app",rM="0.13.2";var yi=new xr("@firebase/app"),Qq="@firebase/app-compat",Yq="@firebase/analytics-compat",Jq="@firebase/analytics",Xq="@firebase/app-check-compat",Zq="@firebase/app-check",e6="@firebase/auth",t6="@firebase/auth-compat",n6="@firebase/database",r6="@firebase/data-connect",i6="@firebase/database-compat",s6="@firebase/functions",o6="@firebase/functions-compat",a6="@firebase/installations",c6="@firebase/installations-compat",u6="@firebase/messaging",l6="@firebase/messaging-compat",d6="@firebase/performance",h6="@firebase/performance-compat",f6="@firebase/remote-config",p6="@firebase/remote-config-compat",g6="@firebase/storage",m6="@firebase/storage-compat",y6="@firebase/firestore",_6="@firebase/ai",v6="@firebase/firestore-compat",I6="firebase",E6="11.10.0";var Uw="[DEFAULT]",w6={[Vw]:"fire-core",[Qq]:"fire-core-compat",[Jq]:"fire-analytics",[Yq]:"fire-analytics-compat",[Zq]:"fire-app-check",[Xq]:"fire-app-check-compat",[e6]:"fire-auth",[t6]:"fire-auth-compat",[n6]:"fire-rtdb",[r6]:"fire-data-connect",[i6]:"fire-rtdb-compat",[s6]:"fire-fn",[o6]:"fire-fn-compat",[a6]:"fire-iid",[c6]:"fire-iid-compat",[u6]:"fire-fcm",[l6]:"fire-fcm-compat",[d6]:"fire-perf",[h6]:"fire-perf-compat",[f6]:"fire-rc",[p6]:"fire-rc-compat",[g6]:"fire-gcs",[m6]:"fire-gcs-compat",[y6]:"fire-fst",[v6]:"fire-fst-compat",[_6]:"fire-vertex","fire-js":"fire-js",[I6]:"fire-js-all"};var qd=new Map,T6=new Map,jw=new Map;function iM(n,e){try{n.container.addComponent(e)}catch(t){yi.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ar(n){let e=n.name;if(jw.has(e))return yi.debug(`There were multiple attempts to register component ${e}.`),!1;jw.set(e,n);for(let t of qd.values())iM(t,n);for(let t of T6.values())iM(t,n);return!0}function Zc(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Sn(n){return n==null?!1:n.settings!==void 0}var b6={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ks=new or("app","Firebase",b6);var Bw=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new sn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ks.create("app-deleted",{appName:this._name})}};var Ms=E6;function qw(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Uw,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw ks.create("bad-app-name",{appName:String(i)});if(t||(t=Cw()),!t)throw ks.create("no-options");let s=qd.get(i);if(s){if(Mr(t,s.options)&&Mr(r,s.config))return s;throw ks.create("duplicate-app",{appName:i})}let o=new Im(i);for(let c of jw.values())o.addComponent(c);let a=new Bw(t,r,o);return qd.set(i,a),a}function ta(n=Uw){let e=qd.get(n);if(!e&&n===Uw&&Cw())return qw();if(!e)throw ks.create("no-app",{appName:n});return e}function Tm(){return Array.from(qd.values())}function et(n,e,t){var r;let i=(r=w6[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),yi.warn(a.join(" "));return}ar(new sn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var A6="firebase-heartbeat-database",S6=1,zd="firebase-heartbeat-store",Lw=null;function cM(){return Lw||(Lw=wm(A6,S6,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(zd)}catch(t){console.warn(t)}}}}).catch(n=>{throw ks.create("idb-open",{originalErrorMessage:n.message})})),Lw}async function D6(n){try{let t=(await cM()).transaction(zd),r=await t.objectStore(zd).get(uM(n));return await t.done,r}catch(e){if(e instanceof An)yi.warn(e.message);else{let t=ks.create("idb-get",{originalErrorMessage:e?.message});yi.warn(t.message)}}}async function sM(n,e){try{let r=(await cM()).transaction(zd,"readwrite");await r.objectStore(zd).put(e,uM(n)),await r.done}catch(t){if(t instanceof An)yi.warn(t.message);else{let r=ks.create("idb-set",{originalErrorMessage:t?.message});yi.warn(r.message)}}}function uM(n){return`${n.name}!${n.options.appId}`}var C6=1024,R6=30,$w=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new Hw(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=oM();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>R6){let o=P6(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){yi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=oM(),{heartbeatsToSend:r,unsentEntries:i}=N6(this._heartbeatsCache.heartbeats),s=$d(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return yi.warn(t),""}}};function oM(){return new Date().toISOString().substring(0,10)}function N6(n,e=C6){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),aM(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),aM(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var Hw=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Hd()?Kk().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let t=await D6(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){let i=await this.read();return sM(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){let i=await this.read();return sM(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}};function aM(n){return $d(JSON.stringify({version:2,heartbeats:n})).length}function P6(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function k6(n){ar(new sn("platform-logger",e=>new Fw(e),"PRIVATE")),ar(new sn("heartbeat",e=>new $w(e),"PRIVATE")),et(Vw,rM,n),et(Vw,rM,"esm2017"),et("fire-js","")}k6("");var M6="firebase",x6="11.10.0";et(M6,x6,"app");function lM(n){n===void 0&&(n=L(At));let e=n.get(Cc);return t=>new fe(r=>{let i=e.add(),s=!1;function o(){s||(i(),s=!0)}let a=t.subscribe({next:c=>{r.next(c),o()},complete:()=>{r.complete(),o()},error:c=>{r.error(c),o()}});return a.add(()=>{r.unsubscribe(),o()}),a})}var xs=new vc("ANGULARFIRE2_VERSION");function Gd(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var tu=(n,e)=>{let t=e?[e]:Tm(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},eu=(function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n})(eu||{}),dM=UE()&&typeof Zone<"u"?eu.WARN:eu.SILENT;var bm=class{zone;delegate;constructor(e,t=_v){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(o){i?i.runGuarded(()=>{e.apply(this,[o])}):e.apply(this,[o])};return this.delegate.schedule(s,t,r)}},Os=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=L(Ue);this.outsideAngular=t.runOutsideAngular(()=>new bm(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new bm(typeof Zone>"u"?void 0:Zone.current,yv))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),hM=!1;function O6(n,e){!hM&&(dM>eu.SILENT||UE())&&(hM=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),dM>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function L6(n){let e=L(Ue,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function na(n){let e=L(Ue,{optional:!0});return e?e.run(()=>n()):n()}var F6=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),ut(t,()=>na(()=>n.apply(void 0,r)))),on=(n,e,t)=>(t||=e?eu.WARN:eu.VERBOSE,function(){let r,i=arguments,s,o,a;try{s=L(Os),o=L(Cc),a=L(Xe)}catch{return O6(n,t),n.apply(this,i)}for(let d=0;d<arguments.length;d++)typeof i[d]=="function"&&(e&&(r||=na(()=>o.add())),i[d]=F6(i[d],r,a));let c=L6(()=>n.apply(this,i));return e?c instanceof fe?c.pipe(ds(s.outsideAngular),ls(s.insideAngular),lM(a)):c instanceof Promise?na(()=>{let d=o.add();return new Promise((h,g)=>{c.then(E=>ut(a,()=>na(()=>h(E))),E=>ut(a,()=>na(()=>g(E)))).finally(d)})}):typeof c=="function"&&r?function(){return setTimeout(r,0),c.apply(this,arguments)}:na(()=>c):c instanceof fe?c.pipe(ds(s.outsideAngular),ls(s.insideAngular)):na(()=>c)});var _i=class{constructor(e){return e}},ra=class{constructor(){return Tm()}};function V6(n){return n&&n.length===1?n[0]:new _i(ta())}var zw=new J("angularfire2._apps"),U6={provide:_i,useFactory:V6,deps:[[new wn,zw]]},j6={provide:ra,deps:[[new wn,zw]]};function B6(n){return(e,t)=>{let r=t.get(Ho);et("angularfire",xs.full,"core"),et("angularfire",xs.full,"app"),et("angular",Vv.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new _i(i)}}function afe(n,...e){return Xn([U6,j6,{provide:zw,useFactory:B6(n),multi:!0,deps:[Ue,At,Os,...e]}])}var cfe=on(qw,!0);var $6=new Map,H6={activated:!1,tokenObservers:[]},q6={initialized:!1,enabled:!1};function cr(n){return $6.get(n)||Object.assign({},H6)}function mM(){return q6}var z6="https://content-firebaseappcheck.googleapis.com/v1";var G6="exchangeDebugToken",fM={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},yfe=1440*60*1e3;var Kw=class{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new Zo,this.pending.promise.catch(t=>{}),await W6(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new Zo,this.pending.promise.catch(t=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function W6(n){return new Promise(e=>{setTimeout(e,n)})}var K6={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Ls=new or("appCheck","AppCheck",K6);function yM(n){if(!cr(n).activated)throw Ls.create("use-before-activation",{appName:n.name})}async function _M({url:n,body:e},t){let r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){let g=await i.getHeartbeatsHeader();g&&(r["X-Firebase-Client"]=g)}let s={method:"POST",body:JSON.stringify(e),headers:r},o;try{o=await fetch(n,s)}catch(g){throw Ls.create("fetch-network-error",{originalErrorMessage:g?.message})}if(o.status!==200)throw Ls.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(g){throw Ls.create("fetch-parse-error",{originalErrorMessage:g?.message})}let c=a.ttl.match(/^([\d.]+)(s)$/);if(!c||!c[2]||isNaN(Number(c[1])))throw Ls.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});let d=Number(c[1])*1e3,h=Date.now();return{token:a.token,expireTimeMillis:h+d,issuedAtTimeMillis:h}}function vM(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${z6}/projects/${t}/apps/${r}:${G6}?key=${i}`,body:{debug_token:e}}}var Q6="firebase-app-check-database",Y6=1,Qw="firebase-app-check-store";var Am=null;function J6(){return Am||(Am=new Promise((n,e)=>{try{let t=indexedDB.open(Q6,Y6);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Ls.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;r.oldVersion===0&&i.createObjectStore(Qw,{keyPath:"compositeKey"})}}catch(t){e(Ls.create("storage-open",{originalErrorMessage:t?.message}))}}),Am)}function X6(n,e){return Z6(ez(n),e)}async function Z6(n,e){let r=(await J6()).transaction(Qw,"readwrite"),s=r.objectStore(Qw).put({compositeKey:n,value:e});return new Promise((o,a)=>{s.onsuccess=c=>{o()},r.onerror=c=>{var d;a(Ls.create("storage-set",{originalErrorMessage:(d=c.target.error)===null||d===void 0?void 0:d.message}))}})}function ez(n){return`${n.options.appId}-${n.name}`}var Wd=new xr("@firebase/app-check");function Gw(n,e){return Hd()?X6(n,e).catch(t=>{Wd.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function IM(){return mM().enabled}async function EM(){let n=mM();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}var tz={error:"UNKNOWN_ERROR"};function nz(n){return gm.encodeString(JSON.stringify(n),!1)}async function Yw(n,e=!1,t=!1){let r=n.app;yM(r);let i=cr(r),s=i.token,o;if(s&&!Kd(s)&&(i.token=void 0,s=void 0),!s){let d=await i.cachedTokenPromise;d&&(Kd(d)?s=d:await Gw(r,void 0))}if(!e&&s&&Kd(s))return{token:s.token};let a=!1;if(IM())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=_M(vM(r,await EM()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let d=await i.exchangeTokenPromise;return await Gw(r,d),i.token=d,{token:d.token}}catch(d){return d.code==="appCheck/throttled"||d.code==="appCheck/initial-throttle"?Wd.warn(d.message):t&&Wd.error(d),Ww(d)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),s=await cr(r).exchangeTokenPromise}catch(d){d.code==="appCheck/throttled"||d.code==="appCheck/initial-throttle"?Wd.warn(d.message):t&&Wd.error(d),o=d}let c;return s?o?Kd(s)?c={token:s.token,internalError:o}:c=Ww(o):(c={token:s.token},i.token=s,await Gw(r,s)):c=Ww(o),a&&oz(r,c),c}async function rz(n){let e=n.app;yM(e);let{provider:t}=cr(e);if(IM()){let r=await EM(),{token:i}=await _M(vM(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=await t.getToken();return{token:r}}}function iz(n,e,t,r){let{app:i}=n,s=cr(i),o={next:t,error:r,type:e};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&Kd(s.token)){let a=s.token;Promise.resolve().then(()=>{t({token:a.token}),pM(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>pM(n))}function wM(n,e){let t=cr(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function pM(n){let{app:e}=n,t=cr(e),r=t.tokenRefresher;r||(r=sz(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function sz(n){let{app:e}=n;return new Kw(async()=>{let t=cr(e),r;if(t.token?r=await Yw(n,!0):r=await Yw(n),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{let t=cr(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},fM.RETRIAL_MIN_WAIT,fM.RETRIAL_MAX_WAIT)}function oz(n,e){let t=cr(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Kd(n){return n.expireTimeMillis-Date.now()>0}function Ww(n){return{token:nz(tz),error:n}}var Jw=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=cr(this.app);for(let t of e)wM(this.app,t.next);return Promise.resolve()}};function az(n,e){return new Jw(n,e)}function cz(n){return{getToken:e=>Yw(n,e),getLimitedUseToken:()=>rz(n),addTokenListener:e=>iz(n,"INTERNAL",e),removeTokenListener:e=>wM(n.app,e)}}var uz="@firebase/app-check",lz="0.10.1";var dz="app-check",gM="app-check-internal";function hz(){ar(new sn(dz,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return az(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(gM).initialize()})),ar(new sn(gM,n=>{let e=n.getProvider("app-check").getImmediate();return cz(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),et(uz,lz)}hz();var fz="app-check";var nu=class{constructor(){return tu(fz)}};var pz=["localhost","0.0.0.0","127.0.0.1"],Rfe=typeof window<"u"&&pz.includes(window.location.hostname);var TM=()=>{};var bM=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},gz=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],a=n[t++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},AM={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,a=o?n[i+1]:0,c=i+2<n.length,d=c?n[i+2]:0,h=s>>2,g=(s&3)<<4|a>>4,E=(a&15)<<2|d>>6,S=d&63;c||(S=64,o||(E=64)),r.push(t[h],t[g],t[E],t[S])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(bM(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):gz(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let d=i<n.length?t[n.charAt(i)]:64;++i;let g=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||d==null||g==null)throw new Zw;let E=s<<2|a>>4;if(r.push(E),d!==64){let S=a<<4&240|d>>2;if(r.push(S),g!==64){let R=d<<6&192|g;r.push(R)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Zw=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},mz=function(n){let e=bM(n);return AM.encodeByteArray(e,!0)},tT=function(n){return mz(n).replace(/\./g,"")},Sm=function(n){try{return AM.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function SM(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var yz=()=>SM().__FIREBASE_DEFAULTS__,_z=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},vz=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Sm(n[1]);return e&&JSON.parse(e)},DM=()=>{try{return TM()||yz()||_z()||vz()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}};var CM=n=>DM()?.[`_${n}`];function Qd(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function Dn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function RM(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Dn())}function Iz(){let n=DM()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function NM(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function PM(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function kM(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function MM(){return!Iz()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function nT(){try{return typeof indexedDB=="object"}catch{return!1}}function xM(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}var Ez="FirebaseError",Vn=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=Ez,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,vi.prototype.create)}},vi=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?wz(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Vn(i,a,r)}};function wz(n,e){return n.replace(Tz,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var Tz=/\{\$([^}]+)}/g;function rT(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function OM(n,e){let t=new eT(n,e);return t.subscribe.bind(t)}var eT=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");bz(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Xw),i.error===void 0&&(i.error=Xw),i.complete===void 0&&(i.complete=Xw);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function bz(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Xw(){}var xfe=14400*1e3;function Lr(n){return n&&n._delegate?n._delegate:n}var ur=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Az=[],Ee=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(Ee||{}),Sz={debug:Ee.DEBUG,verbose:Ee.VERBOSE,info:Ee.INFO,warn:Ee.WARN,error:Ee.ERROR,silent:Ee.SILENT},Dz=Ee.INFO,Cz={[Ee.DEBUG]:"log",[Ee.VERBOSE]:"log",[Ee.INFO]:"info",[Ee.WARN]:"warn",[Ee.ERROR]:"error"},Rz=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=Cz[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Fs=class{constructor(e){this.name=e,this._logLevel=Dz,this._logHandler=Rz,this._userLogHandler=null,Az.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ee))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Sz[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ee.DEBUG,...e),this._logHandler(this,Ee.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ee.VERBOSE,...e),this._logHandler(this,Ee.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ee.INFO,...e),this._logHandler(this,Ee.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ee.WARN,...e),this._logHandler(this,Ee.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ee.ERROR,...e),this._logHandler(this,Ee.ERROR,...e)}};var sT=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Nz(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function Nz(n){return n.getComponent()?.type==="VERSION"}var oT="@firebase/app",LM="0.14.7";var Ei=new Fs("@firebase/app"),Pz="@firebase/app-compat",kz="@firebase/analytics-compat",Mz="@firebase/analytics",xz="@firebase/app-check-compat",Oz="@firebase/app-check",Lz="@firebase/auth",Fz="@firebase/auth-compat",Vz="@firebase/database",Uz="@firebase/data-connect",jz="@firebase/database-compat",Bz="@firebase/functions",$z="@firebase/functions-compat",Hz="@firebase/installations",qz="@firebase/installations-compat",zz="@firebase/messaging",Gz="@firebase/messaging-compat",Wz="@firebase/performance",Kz="@firebase/performance-compat",Qz="@firebase/remote-config",Yz="@firebase/remote-config-compat",Jz="@firebase/storage",Xz="@firebase/storage-compat",Zz="@firebase/firestore",e9="@firebase/ai",t9="@firebase/firestore-compat",n9="firebase",r9="12.8.0";var i9={[oT]:"fire-core",[Pz]:"fire-core-compat",[Mz]:"fire-analytics",[kz]:"fire-analytics-compat",[Oz]:"fire-app-check",[xz]:"fire-app-check-compat",[Lz]:"fire-auth",[Fz]:"fire-auth-compat",[Vz]:"fire-rtdb",[Uz]:"fire-data-connect",[jz]:"fire-rtdb-compat",[Bz]:"fire-fn",[$z]:"fire-fn-compat",[Hz]:"fire-iid",[qz]:"fire-iid-compat",[zz]:"fire-fcm",[Gz]:"fire-fcm-compat",[Wz]:"fire-perf",[Kz]:"fire-perf-compat",[Qz]:"fire-rc",[Yz]:"fire-rc-compat",[Jz]:"fire-gcs",[Xz]:"fire-gcs-compat",[Zz]:"fire-fst",[t9]:"fire-fst-compat",[e9]:"fire-vertex","fire-js":"fire-js",[n9]:"fire-js-all"};var s9=new Map,o9=new Map,FM=new Map;function VM(n,e){try{n.container.addComponent(e)}catch(t){Ei.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Vs(n){let e=n.name;if(FM.has(e))return Ei.debug(`There were multiple attempts to register component ${e}.`),!1;FM.set(e,n);for(let t of s9.values())VM(t,n);for(let t of o9.values())VM(t,n);return!0}function wi(n){return n==null?!1:n.settings!==void 0}var a9={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},lT=new vi("app","Firebase",a9);var ru=r9;function Ii(n,e,t){let r=i9[n]??n;t&&(r+=`-${t}`);let i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){let o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ei.warn(o.join(" "));return}Vs(new ur(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var c9="firebase-heartbeat-database",u9=1,Yd="firebase-heartbeat-store",iT=null;function $M(){return iT||(iT=wm(c9,u9,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Yd)}catch(t){console.warn(t)}}}}).catch(n=>{throw lT.create("idb-open",{originalErrorMessage:n.message})})),iT}async function l9(n){try{let t=(await $M()).transaction(Yd),r=await t.objectStore(Yd).get(HM(n));return await t.done,r}catch(e){if(e instanceof Vn)Ei.warn(e.message);else{let t=lT.create("idb-get",{originalErrorMessage:e?.message});Ei.warn(t.message)}}}async function UM(n,e){try{let r=(await $M()).transaction(Yd,"readwrite");await r.objectStore(Yd).put(e,HM(n)),await r.done}catch(t){if(t instanceof Vn)Ei.warn(t.message);else{let r=lT.create("idb-set",{originalErrorMessage:t?.message});Ei.warn(r.message)}}}function HM(n){return`${n.name}!${n.options.appId}`}var d9=1024,h9=30,aT=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new cT(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{let t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=jM();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>h9){let i=p9(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Ei.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=jM(),{heartbeatsToSend:t,unsentEntries:r}=f9(this._heartbeatsCache.heartbeats),i=tT(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return Ei.warn(e),""}}};function jM(){return new Date().toISOString().substring(0,10)}function f9(n,e=d9){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),BM(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),BM(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var cT=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return nT()?xM().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let t=await l9(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return UM(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return UM(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}};function BM(n){return tT(JSON.stringify({version:2,heartbeats:n})).length}function p9(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function g9(n){Vs(new ur("platform-logger",e=>new sT(e),"PRIVATE")),Vs(new ur("heartbeat",e=>new aT(e),"PRIVATE")),Ii(oT,LM,n),Ii(oT,LM,"esm2020"),Ii("fire-js","")}g9("");function JM(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var XM=JM,ZM=new vi("auth","Firebase",JM());var Nm=new Fs("@firebase/auth");function I9(n,...e){Nm.logLevel<=Ee.WARN&&Nm.warn(`Auth (${ru}): ${n}`,...e)}function Cm(n,...e){Nm.logLevel<=Ee.ERROR&&Nm.error(`Auth (${ru}): ${n}`,...e)}function qM(n,...e){throw wT(n,...e)}function ET(n,...e){return wT(n,...e)}function ex(n,e,t){let r=Te($({},XM()),{[e]:t});return new vi("auth","Firebase",r).create(e,{appName:n.name})}function Rm(n){return ex(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function wT(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return ZM.create(n,...e)}function Oe(n,e,...t){if(!n)throw wT(e,...t)}function Jd(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Cm(e),new Error(e)}function Pm(n,e){n||Jd(e)}function E9(){return zM()==="http:"||zM()==="https:"}function zM(){return typeof self<"u"&&self.location?.protocol||null}function w9(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(E9()||PM()||"connection"in navigator)?navigator.onLine:!0}function T9(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var oa=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Pm(t>e,"Short delay should be less than long delay!"),this.isMobile=RM()||kM()}get(){return w9()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function b9(n,e){Pm(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var km=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Jd("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Jd("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Jd("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var A9={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var S9=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],D9=new oa(3e4,6e4);function tx(n,e){return n.tenantId&&!e.tenantId?Te($({},e),{tenantId:n.tenantId}):e}async function Fm(n,e,t,r,i={}){return nx(n,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});let a=rT($({key:n.config.apiKey},o)).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);let d=$({method:e,headers:c},s);return NM()||(d.referrerPolicy="no-referrer"),n.emulatorConfig&&Qd(n.emulatorConfig.host)&&(d.credentials="include"),km.fetch()(await rx(n,n.config.apiHost,t,a),d)})}async function nx(n,e,t){n._canInitEmulator=!1;let r=$($({},A9),e);try{let i=new fT(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=await s.json();if("needConfirmation"in o)throw Dm(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,d]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Dm(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Dm(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw Dm(n,"user-disabled",o);let h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw ex(n,h,d);qM(n,h)}}catch(i){if(i instanceof Vn)throw i;qM(n,"network-request-failed",{message:String(i)})}}async function rx(n,e,t,r){let i=`${e}${t}?${r}`,s=n,o=s.config.emulator?b9(n.config,i):`${n.config.apiScheme}://${i}`;return S9.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}var fT=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(ET(this.auth,"network-request-failed")),D9.get())})}};function Dm(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=ET(n,e,r);return i.customData._tokenResponse=t,i}async function C9(n,e){return Fm(n,"POST","/v1/accounts:delete",e)}async function Mm(n,e){return Fm(n,"POST","/v1/accounts:lookup",e)}function Xd(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function ix(n,e=!1){let t=Lr(n),r=await t.getIdToken(e),i=sx(r);Oe(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Xd(dT(i.auth_time)),issuedAtTime:Xd(dT(i.iat)),expirationTime:Xd(dT(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}}function dT(n){return Number(n)*1e3}function sx(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Cm("JWT malformed, contained fewer than 3 sections"),null;try{let i=Sm(t);return i?JSON.parse(i):(Cm("Failed to decode base64 JWT payload"),null)}catch(i){return Cm("Caught error parsing JWT payload as JSON",i?.toString()),null}}function GM(n){let e=sx(n);return Oe(e,"internal-error"),Oe(typeof e.exp<"u","internal-error"),Oe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function pT(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Vn&&R9(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function R9({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var gT=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){let t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;let r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var eh=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xd(this.lastLoginAt),this.creationTime=Xd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function xm(n){let e=n.auth,t=await n.getIdToken(),r=await pT(n,Mm(e,{idToken:t}));Oe(r?.users.length,e,"internal-error");let i=r.users[0];n._notifyReloadListener(i);let s=i.providerUserInfo?.length?ax(i.providerUserInfo):[],o=N9(n.providerData,s),a=n.isAnonymous,c=!(n.email&&i.passwordHash)&&!o?.length,d=a?c:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new eh(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(n,h)}async function ox(n){let e=Lr(n);await xm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function N9(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function ax(n){return n.map(r=>{var i=r,{providerId:e}=i,t=Q_(i,["providerId"]);return{providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}})}async function P9(n,e){let t=await nx(n,{},async()=>{let r=rT({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=await rx(n,i,"/v1/token",`key=${s}`),a=await n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:r};return n.emulatorConfig&&Qd(n.emulatorConfig.host)&&(c.credentials="include"),km.fetch()(o,c)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function k9(n,e){return Fm(n,"POST","/v2/accounts:revokeToken",tx(n,e))}var Zd=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Oe(e.idToken,"internal-error"),Oe(typeof e.idToken<"u","internal-error"),Oe(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):GM(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Oe(e.length!==0,"internal-error");let t=GM(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Oe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:r,refreshToken:i,expiresIn:s}=await P9(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(Oe(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Oe(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(Oe(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Jd("not implemented")}};function Us(n,e){Oe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var ia=class n{constructor(s){var o=s,{uid:e,auth:t,stsTokenManager:r}=o,i=Q_(o,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new gT(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new eh(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){let t=await pT(this,this.stsTokenManager.getToken(this.auth,e));return Oe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return ix(this,e)}reload(){return ox(this)}_assign(e){this!==e&&(Oe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>$({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Te($({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await xm(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(wi(this.auth.app))return Promise.reject(Rm(this.auth));let e=await this.getIdToken();return await pT(this,C9(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Te($({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>$({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){let r=t.displayName??void 0,i=t.email??void 0,s=t.phoneNumber??void 0,o=t.photoURL??void 0,a=t.tenantId??void 0,c=t._redirectEventId??void 0,d=t.createdAt??void 0,h=t.lastLoginAt??void 0,{uid:g,emailVerified:E,isAnonymous:S,providerData:R,stsTokenManager:M}=t;Oe(g&&M,e,"internal-error");let k=Zd.fromJSON(this.name,M);Oe(typeof g=="string",e,"internal-error"),Us(r,e.name),Us(i,e.name),Oe(typeof E=="boolean",e,"internal-error"),Oe(typeof S=="boolean",e,"internal-error"),Us(s,e.name),Us(o,e.name),Us(a,e.name),Us(c,e.name),Us(d,e.name),Us(h,e.name);let V=new n({uid:g,auth:e,email:i,emailVerified:E,displayName:r,isAnonymous:S,photoURL:o,phoneNumber:s,tenantId:a,stsTokenManager:k,createdAt:d,lastLoginAt:h});return R&&Array.isArray(R)&&(V.providerData=R.map(z=>$({},z))),c&&(V._redirectEventId=c),V}static async _fromIdTokenResponse(e,t,r=!1){let i=new Zd;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await xm(s),s}static async _fromGetAccountInfoResponse(e,t,r){let i=t.users[0];Oe(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?ax(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new Zd;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new eh(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,d),c}};var WM=new Map;function sa(n){Pm(n instanceof Function,"Expected a class definition");let e=WM.get(n);return e?(Pm(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,WM.set(n,e),e)}var M9=(()=>{class n{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){let r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),mT=M9;function hT(n,e,t){return`firebase:${n}:${e}:${t}`}var Om=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=hT(this.userKey,i.apiKey,s),this.fullPersistenceKey=hT("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=await Mm(this.auth,{idToken:e}).catch(()=>{});return t?ia._fromGetAccountInfoResponse(this.auth,t,e):null}return ia._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new n(sa(mT),e,r);let i=(await Promise.all(t.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d),s=i[0]||sa(mT),o=hT(r,e.config.apiKey,e.name),a=null;for(let d of t)try{let h=await d._get(o);if(h){let g;if(typeof h=="string"){let E=await Mm(e,{idToken:h}).catch(()=>{});if(!E)break;g=await ia._fromGetAccountInfoResponse(e,E,h)}else g=ia._fromJSON(e,h);d!==s&&(a=g),s=d;break}}catch{}let c=i.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new n(s,e,r):(s=c[0],a&&await s._set(o,a.toJSON()),await Promise.all(t.map(async d=>{if(d!==s)try{await d._remove(o)}catch{}})),new n(s,e,r))}};function KM(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(F9(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(x9(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(U9(e))return"Blackberry";if(j9(e))return"Webos";if(O9(e))return"Safari";if((e.includes("chrome/")||L9(e))&&!e.includes("edge/"))return"Chrome";if(V9(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function x9(n=Dn()){return/firefox\//i.test(n)}function O9(n=Dn()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function L9(n=Dn()){return/crios\//i.test(n)}function F9(n=Dn()){return/iemobile/i.test(n)}function V9(n=Dn()){return/android/i.test(n)}function U9(n=Dn()){return/blackberry/i.test(n)}function j9(n=Dn()){return/webos/i.test(n)}function cx(n,e=[]){let t;switch(n){case"Browser":t=KM(Dn());break;case"Worker":t=`${KM(Dn())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ru}/${r}`}var yT=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}};async function B9(n,e={}){return Fm(n,"GET","/v2/passwordPolicy",tx(n,e))}var $9=6,_T=class{constructor(e){let t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??$9,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){let t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var vT=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Lm(this),this.idTokenSubscription=new Lm(this),this.beforeStateQueue=new yT(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ZM,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=sa(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Om.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await Mm(this,{idToken:e}),r=await ia._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(wi(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(o,o))}):this.directlySetCurrentUser(null)}let t=await this.assertedPersistence.getCurrentUser(),r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let s=this.redirectUser?._redirectEventId,o=r?._redirectEventId,a=await this.tryRedirectSignIn(e);(!s||s===o)&&a?.user&&(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Oe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await xm(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=T9()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(wi(this.app))return Promise.reject(Rm(this));let t=e?Lr(e):null;return t&&Oe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Oe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return wi(this.app)?Promise.reject(Rm(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return wi(this.app)?Promise.reject(Rm(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(sa(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await B9(this),t=new _T(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new vi("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await k9(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){let r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&sa(e)||this._popupRedirectResolver;Oe(t,this,"argument-error"),this.redirectPersistenceManager=await Om.create(this,[sa(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Oe(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(t);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=cx(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);let t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);let r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(wi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&I9(`Error while retrieving App Check token: ${e.error}`),e?.token}};function H9(n){return Lr(n)}var Lm=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=OM(t=>this.observer=t)}get next(){return Oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var q9={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function z9(n){q9=n}function G9(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function W9(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(sa);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function TT(n,e,t,r){return Lr(n).onIdTokenChanged(e,t,r)}var upe=G9("rcb"),lpe=new oa(3e4,6e4);var dpe=new oa(2e3,1e4);var hpe=600*1e3;var fpe=new oa(3e4,6e4);var ppe=new oa(5e3,15e3);var gpe=encodeURIComponent("fac");var QM="@firebase/auth",YM="1.12.0";var IT=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function K9(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Q9(n){Vs(new ur("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Oe(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:cx(n)},d=new vT(r,i,s,c);return W9(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Vs(new ur("auth-internal",e=>{let t=H9(e.getProvider("auth").getImmediate());return(r=>new IT(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ii(QM,YM,K9(n)),Ii(QM,YM,"esm2020")}var Y9=300,mpe=CM("authIdTokenMaxAge")||Y9;function J9(){return document.getElementsByTagName("head")?.[0]??document}z9({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=ET("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",J9().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Q9("Browser");function ux(n){return new fe(function(e){var t=TT(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}function bx(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var Ax=bx,Sx=new or("auth","Firebase",bx());var Hm=new xr("@firebase/auth");function e3(n,...e){Hm.logLevel<=Ie.WARN&&Hm.warn(`Auth (${Ms}): ${n}`,...e)}function Um(n,...e){Hm.logLevel<=Ie.ERROR&&Hm.error(`Auth (${Ms}): ${n}`,...e)}function Vr(n,...e){throw BT(n,...e)}function lr(n,...e){return BT(n,...e)}function jT(n,e,t){let r=Object.assign(Object.assign({},Ax()),{[e]:t});return new or("auth","Firebase",r).create(e,{appName:n.name})}function aa(n){return jT(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function t3(n,e,t){let r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Vr(n,"argument-error"),jT(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function BT(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return Sx.create(n,...e)}function se(n,e,...t){if(!n)throw BT(e,...t)}function Ti(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Um(e),new Error(e)}function Ai(n,e){n||Ti(e)}function ST(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function n3(){return lx()==="http:"||lx()==="https:"}function lx(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function r3(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(n3()||qk()||"connection"in navigator)?navigator.onLine:!0}function i3(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var ca=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ai(t>e,"Short delay should be less than long delay!"),this.isMobile=$k()||zk()}get(){return r3()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function $T(n,e){Ai(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var qm=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ti("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ti("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ti("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var s3={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var o3=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],a3=new ca(3e4,6e4);function HT(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function su(n,e,t,r,i={}){return Dx(n,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});let a=Xc(Object.assign({key:n.config.apiKey},o)).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);let d=Object.assign({method:e,headers:c},s);return Hk()||(d.referrerPolicy="no-referrer"),n.emulatorConfig&&Ps(n.emulatorConfig.host)&&(d.credentials="include"),qm.fetch()(await Cx(n,n.config.apiHost,t,a),d)})}async function Dx(n,e,t){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},s3),e);try{let i=new DT(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=await s.json();if("needConfirmation"in o)throw Vm(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,d]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Vm(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Vm(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw Vm(n,"user-disabled",o);let h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw jT(n,h,d);Vr(n,h)}}catch(i){if(i instanceof An)throw i;Vr(n,"network-request-failed",{message:String(i)})}}async function c3(n,e,t,r,i={}){let s=await su(n,e,t,r,i);return"mfaPendingCredential"in s&&Vr(n,"multi-factor-auth-required",{_serverResponse:s}),s}async function Cx(n,e,t,r){let i=`${e}${t}?${r}`,s=n,o=s.config.emulator?$T(n.config,i):`${n.config.apiScheme}://${i}`;return o3.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}var DT=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(lr(this.auth,"network-request-failed")),a3.get())})}};function Vm(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=lr(n,e,r);return i.customData._tokenResponse=t,i}async function u3(n,e){return su(n,"POST","/v1/accounts:delete",e)}async function zm(n,e){return su(n,"POST","/v1/accounts:lookup",e)}function th(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function qT(n,e=!1){let t=jt(n),r=await t.getIdToken(e),i=zT(r);se(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:th(bT(i.auth_time)),issuedAtTime:th(bT(i.iat)),expirationTime:th(bT(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}}function bT(n){return Number(n)*1e3}function zT(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Um("JWT malformed, contained fewer than 3 sections"),null;try{let i=mm(t);return i?JSON.parse(i):(Um("Failed to decode base64 JWT payload"),null)}catch(i){return Um("Caught error parsing JWT payload as JSON",i?.toString()),null}}function dx(n){let e=zT(n);return se(e,"internal-error"),se(typeof e.exp<"u","internal-error"),se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function rh(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof An&&l3(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function l3({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var CT=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var ih=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=th(this.lastLoginAt),this.creationTime=th(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function Gm(n){var e;let t=n.auth,r=await n.getIdToken(),i=await rh(n,zm(t,{idToken:r}));se(i?.users.length,t,"internal-error");let s=i.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?Rx(s.providerUserInfo):[],a=d3(n.providerData,o),c=n.isAnonymous,d=!(n.email&&s.passwordHash)&&!a?.length,h=c?d:!1,g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new ih(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(n,g)}async function GT(n){let e=jt(n);await Gm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function d3(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Rx(n){return n.map(e=>{var{providerId:t}=e,r=Xf(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}async function h3(n,e){let t=await Dx(n,{},async()=>{let r=Xc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=await Cx(n,i,"/v1/token",`key=${s}`),a=await n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:r};return n.emulatorConfig&&Ps(n.emulatorConfig.host)&&(c.credentials="include"),qm.fetch()(o,c)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function f3(n,e){return su(n,"POST","/v2/accounts:revokeToken",HT(n,e))}var nh=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){se(e.idToken,"internal-error"),se(typeof e.idToken<"u","internal-error"),se(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):dx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){se(e.length!==0,"internal-error");let t=dx(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:r,refreshToken:i,expiresIn:s}=await h3(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(se(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(se(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(se(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Ti("not implemented")}};function js(n,e){se(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Bs=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=Xf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new CT(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new ih(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){let t=await rh(this,this.stsTokenManager.getToken(this.auth,e));return se(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return qT(this,e)}reload(){return GT(this)}_assign(e){this!==e&&(se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Gm(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Sn(this.auth.app))return Promise.reject(aa(this.auth));let e=await this.getIdToken();return await rh(this,u3(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,c,d,h;let g=(r=t.displayName)!==null&&r!==void 0?r:void 0,E=(i=t.email)!==null&&i!==void 0?i:void 0,S=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,R=(o=t.photoURL)!==null&&o!==void 0?o:void 0,M=(a=t.tenantId)!==null&&a!==void 0?a:void 0,k=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,V=(d=t.createdAt)!==null&&d!==void 0?d:void 0,z=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:K,emailVerified:ye,isAnonymous:ze,providerData:re,stsTokenManager:b}=t;se(K&&b,e,"internal-error");let _=nh.fromJSON(this.name,b);se(typeof K=="string",e,"internal-error"),js(g,e.name),js(E,e.name),se(typeof ye=="boolean",e,"internal-error"),se(typeof ze=="boolean",e,"internal-error"),js(S,e.name),js(R,e.name),js(M,e.name),js(k,e.name),js(V,e.name),js(z,e.name);let I=new n({uid:K,auth:e,email:E,emailVerified:ye,displayName:g,isAnonymous:ze,photoURL:R,phoneNumber:S,tenantId:M,stsTokenManager:_,createdAt:V,lastLoginAt:z});return re&&Array.isArray(re)&&(I.providerData=re.map(T=>Object.assign({},T))),k&&(I._redirectEventId=k),I}static async _fromIdTokenResponse(e,t,r=!1){let i=new nh;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Gm(s),s}static async _fromGetAccountInfoResponse(e,t,r){let i=t.users[0];se(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?Rx(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new nh;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new ih(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,d),c}};var hx=new Map;function bi(n){Ai(n instanceof Function,"Expected a class definition");let e=hx.get(n);return e?(Ai(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,hx.set(n,e),e)}var p3=(()=>{class n{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){let r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),RT=p3;function jm(n,e,t){return`firebase:${n}:${e}:${t}`}var Wm=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=jm(this.userKey,i.apiKey,s),this.fullPersistenceKey=jm("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=await zm(this.auth,{idToken:e}).catch(()=>{});return t?Bs._fromGetAccountInfoResponse(this.auth,t,e):null}return Bs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new n(bi(RT),e,r);let i=(await Promise.all(t.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d),s=i[0]||bi(RT),o=jm(r,e.config.apiKey,e.name),a=null;for(let d of t)try{let h=await d._get(o);if(h){let g;if(typeof h=="string"){let E=await zm(e,{idToken:h}).catch(()=>{});if(!E)break;g=await Bs._fromGetAccountInfoResponse(e,E,h)}else g=Bs._fromJSON(e,h);d!==s&&(a=g),s=d;break}}catch{}let c=i.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new n(s,e,r):(s=c[0],a&&await s._set(o,a.toJSON()),await Promise.all(t.map(async d=>{if(d!==s)try{await d._remove(o)}catch{}})),new n(s,e,r))}};function fx(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Mx(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Nx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Ox(e))return"Blackberry";if(Lx(e))return"Webos";if(Px(e))return"Safari";if((e.includes("chrome/")||kx(e))&&!e.includes("edge/"))return"Chrome";if(xx(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function Nx(n=Rt()){return/firefox\//i.test(n)}function Px(n=Rt()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function kx(n=Rt()){return/crios\//i.test(n)}function Mx(n=Rt()){return/iemobile/i.test(n)}function xx(n=Rt()){return/android/i.test(n)}function Ox(n=Rt()){return/blackberry/i.test(n)}function Lx(n=Rt()){return/webos/i.test(n)}function WT(n=Rt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function g3(n=Rt()){var e;return WT(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function m3(){return Gk()&&document.documentMode===10}function Fx(n=Rt()){return WT(n)||xx(n)||Lx(n)||Ox(n)||/windows phone/i.test(n)||Mx(n)}function Vx(n,e=[]){let t;switch(n){case"Browser":t=fx(Rt());break;case"Worker":t=`${fx(Rt())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ms}/${r}`}var NT=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}};async function y3(n,e={}){return su(n,"GET","/v2/passwordPolicy",HT(n,e))}var _3=6,PT=class{constructor(e){var t,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:_3,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var kT=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Km(this),this.idTokenSubscription=new Km(this),this.beforeStateQueue=new NT(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Sx,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=bi(t)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await Wm.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await zm(this,{idToken:e}),r=await Bs._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Sn(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=await this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Gm(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=i3()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Sn(this.app))return Promise.reject(aa(this));let t=e?jt(e):null;return t&&se(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Sn(this.app)?Promise.reject(aa(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Sn(this.app)?Promise.reject(aa(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(bi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await y3(this),t=new PT(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new or("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await f3(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){let r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&bi(e)||this._popupRedirectResolver;se(t,this,"argument-error"),this.redirectPersistenceManager=await Wm.create(this,[bi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(se(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(t);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Vx(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);let i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(Sn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&e3(`Error while retrieving App Check token: ${t.error}`),t?.token}};function ny(n){return jt(n)}var Km=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=Yk(t=>this.observer=t)}get next(){return se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var KT={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function v3(n){KT=n}function I3(n){return KT.loadJS(n)}function E3(){return KT.gapiScript}function Ux(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function QT(n,e){let t=Zc(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),s=t.getOptions();if(Mr(s,e??{}))return i;Vr(i,"already-initialized")}return t.initialize({options:e})}function w3(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(bi);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function YT(n,e,t){let r=ny(n);se(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,s=jx(e),{host:o,port:a}=T3(e),c=a===null?"":`:${a}`,d={url:`${s}//${o}${c}/`},h=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){se(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),se(Mr(d,r.config.emulator)&&Mr(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Ps(o)?(_m(`${s}//${o}${c}`),vm("Auth",!0)):i||b3()}function jx(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function T3(n){let e=jx(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:px(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:px(o)}}}function px(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function b3(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var sh=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ti("not implemented")}_getIdTokenResponse(e){return Ti("not implemented")}_linkToIdToken(e,t){return Ti("not implemented")}_getReauthenticationResolver(e){return Ti("not implemented")}};async function iu(n,e){return c3(n,"POST","/v1/accounts:signInWithIdp",HT(n,e))}var A3="http://localhost",Qm=class n extends sh{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Vr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,s=Xf(t,["providerId","signInMethod"]);if(!r||!i)return null;let o=new n(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){let t=this.buildRequest();return iu(e,t)}_linkToIdToken(e,t){let r=this.buildRequest();return r.idToken=t,iu(e,r)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,iu(e,t)}buildRequest(){let e={requestUri:A3,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Xc(t)}return e}};var oh=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Ym=class extends oh{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var S3=(()=>{class n extends Ym{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return Qm._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:r,oauthAccessToken:i}=t;if(!r&&!i)return null;try{return n.credential(r,i)}catch{return null}}}n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com";return n})();var ah=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){let s=await Bs._fromIdTokenResponse(e,r,i),o=gx(r);return new n({user:s,providerId:o,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);let i=gx(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})}};function gx(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var MT=class n extends An{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function Bx(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?MT._fromErrorAndOperation(n,s,e,r):s})}async function D3(n,e,t=!1){let r=await rh(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return ah._forOperation(n,"link",r)}async function C3(n,e,t=!1){let{auth:r}=n;if(Sn(r.app))return Promise.reject(aa(r));let i="reauthenticate";try{let s=await rh(n,Bx(r,i,e,n),t);se(s.idToken,r,"internal-error");let o=zT(s.idToken);se(o,r,"internal-error");let{sub:a}=o;return se(n.uid===a,r,"user-mismatch"),ah._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&Vr(r,"user-mismatch"),s}}async function R3(n,e,t=!1){if(Sn(n.app))return Promise.reject(aa(n));let r="signIn",i=await Bx(n,r,e),s=await ah._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}function JT(n,e,t,r){return jt(n).onIdTokenChanged(e,t,r)}function XT(n,e,t){return jt(n).beforeAuthStateChanged(e,t)}function ZT(n){return jt(n).signOut()}var Jm="__sak";var Xm=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Jm,"1"),this.storage.removeItem(Jm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var N3=1e3,P3=10,k3=(()=>{class n extends Xm{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Fx(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&t(r,s,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,c,d)=>{this.notifyListeners(a,d)});return}let i=t.key;r?this.detachListener():this.stopPolling();let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);m3()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,P3):s()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},N3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,r){await super._set(t,r),this.localCache[t]=JSON.stringify(r)}async _get(t){let r=await super._get(t);return this.localCache[t]=JSON.stringify(r),r}async _remove(t){await super._remove(t),delete this.localCache[t]}}return n.type="LOCAL",n})(),$x=k3;var M3=(()=>{class n extends Xm{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),eb=M3;function x3(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}var O3=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){let r=t,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let c=Array.from(a).map(async h=>h(r.origin,o)),d=await x3(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:d})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function tb(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var xT=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{let d=tb("",20);i.port1.start();let h=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(g){let E=g;if(E.data.eventId===d)switch(E.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(E.data.response);break;default:clearTimeout(h),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}};function Fr(){return window}function L3(n){Fr().location.href=n}function Hx(){return typeof Fr().WorkerGlobalScope<"u"&&typeof Fr().importScripts=="function"}async function F3(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function V3(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function U3(){return Hx()?self:null}var qx="firebaseLocalStorageDb",j3=1,Zm="firebaseLocalStorage",zx="fbase_key",ua=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function ry(n,e){return n.transaction([Zm],e?"readwrite":"readonly").objectStore(Zm)}function B3(){let n=indexedDB.deleteDatabase(qx);return new ua(n).toPromise()}function OT(){let n=indexedDB.open(qx,j3);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(Zm,{keyPath:zx})}catch(i){t(i)}}),n.addEventListener("success",async()=>{let r=n.result;r.objectStoreNames.contains(Zm)?e(r):(r.close(),await B3(),e(await OT()))})})}async function mx(n,e,t){let r=ry(n,!0).put({[zx]:e,value:t});return new ua(r).toPromise()}async function $3(n,e){let t=ry(n,!1).get(e),r=await new ua(t).toPromise();return r===void 0?null:r.value}function yx(n,e){let t=ry(n,!0).delete(e);return new ua(t).toPromise()}var H3=800,q3=3,z3=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await OT(),this.db)}async _withRetries(t){let r=0;for(;;)try{let i=await this._openDb();return await t(i)}catch(i){if(r++>q3)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Hx()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=O3._getInstance(U3()),this.receiver._subscribe("keyChanged",async(t,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(t,r)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await F3(),!this.activeServiceWorker)return;this.sender=new xT(this.activeServiceWorker);let i=await this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||V3()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let t=await OT();return await mx(t,Jm,"1"),await yx(t,Jm),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,r){return this._withPendingWrite(async()=>(await this._withRetries(i=>mx(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)))}async _get(t){let r=await this._withRetries(i=>$3(i,t));return this.localCache[t]=r,r}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(r=>yx(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){let t=await this._withRetries(s=>{let o=ry(s,!1).getAll();return new ua(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:s,value:o}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),H3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),Gx=z3;var ame=Ux("rcb"),cme=new ca(3e4,6e4);function Wx(n,e){return e?bi(e):(se(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var ch=class extends sh{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return iu(e,this._buildIdpRequest())}_linkToIdToken(e,t){return iu(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return iu(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function G3(n){return R3(n.auth,new ch(n),n.bypassAuthState)}function W3(n){let{auth:e,user:t}=n;return se(t,e,"internal-error"),C3(t,new ch(n),n.bypassAuthState)}async function K3(n){let{auth:e,user:t}=n;return se(t,e,"internal-error"),D3(t,new ch(n),n.bypassAuthState)}var ey=class{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){let{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return G3;case"linkViaPopup":case"linkViaRedirect":return K3;case"reauthViaPopup":case"reauthViaRedirect":return W3;default:Vr(this.auth,"internal-error")}}resolve(e){Ai(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ai(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var Q3=new ca(2e3,1e4);async function nb(n,e,t){if(Sn(n.app))return Promise.reject(lr(n,"operation-not-supported-in-this-environment"));let r=ny(n);t3(n,e,oh);let i=Wx(r,t);return new Y3(r,"signInViaPopup",e,i).executeNotNull()}var Y3=(()=>{class n extends ey{constructor(t,r,i,s,o){super(t,r,s,o),this.provider=i,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}async executeNotNull(){let t=await this.execute();return se(t,this.auth,"internal-error"),t}async onExecution(){Ai(this.filter.length===1,"Popup operations only handle one event");let t=tb();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(lr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(lr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){let t=()=>{var r,i;if(!((i=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(lr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,Q3.get())};t()}}n.currentPopupAction=null;return n})(),J3="pendingRedirect",Bm=new Map,LT=class extends ey{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Bm.get(this.auth._key());if(!e){try{let r=await X3(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Bm.set(this.auth._key(),e)}return this.bypassAuthState||Bm.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function X3(n,e){let t=tG(e),r=eG(n);if(!await r._isAvailable())return!1;let i=await r._get(t)==="true";return await r._remove(t),i}function Z3(n,e){Bm.set(n._key(),e)}function eG(n){return bi(n._redirectPersistence)}function tG(n){return jm(J3,n.config.apiKey,n.name)}async function nG(n,e,t=!1){if(Sn(n.app))return Promise.reject(aa(n));let r=ny(n),i=Wx(r,e),o=await new LT(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}var rG=600*1e3,FT=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!iG(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!Kx(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(lr(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=rG&&this.cachedEventUids.clear(),this.cachedEventUids.has(_x(e))}saveEventToCache(e){this.cachedEventUids.add(_x(e)),this.lastProcessedEventTime=Date.now()}};function _x(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Kx({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function iG(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Kx(n);default:return!1}}async function sG(n,e={}){return su(n,"GET","/v1/projects",e)}var oG=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,aG=/^https?/;async function cG(n){if(n.config.emulator)return;let{authorizedDomains:e}=await sG(n);for(let t of e)try{if(uG(t))return}catch{}Vr(n,"unauthorized-domain")}function uG(n){let e=ST(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!aG.test(t))return!1;if(oG.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var lG=new ca(3e4,6e4);function vx(){let n=Fr().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function dG(n){return new Promise((e,t)=>{var r,i,s;function o(){vx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{vx(),t(lr(n,"network-request-failed"))},timeout:lG.get()})}if(!((i=(r=Fr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Fr().gapi)===null||s===void 0)&&s.load)o();else{let a=Ux("iframefcb");return Fr()[a]=()=>{gapi.load?o():t(lr(n,"network-request-failed"))},I3(`${E3()}?onload=${a}`).catch(c=>t(c))}}).catch(e=>{throw $m=null,e})}var $m=null;function hG(n){return $m=$m||dG(n),$m}var fG=new ca(5e3,15e3),pG="__/auth/iframe",gG="emulator/auth/iframe",mG={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},yG=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function _G(n){let e=n.config;se(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?$T(e,gG):`https://${n.config.authDomain}/${pG}`,r={apiKey:e.apiKey,appName:n.name,v:Ms},i=yG.get(n.config.apiHost);i&&(r.eid=i);let s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${Xc(r).slice(1)}`}async function vG(n){let e=await hG(n),t=Fr().gapi;return se(t,n,"internal-error"),e.open({where:document.body,url:_G(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:mG,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});let o=lr(n,"network-request-failed"),a=Fr().setTimeout(()=>{s(o)},fG.get());function c(){Fr().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{s(o)})}))}var IG={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},EG=500,wG=600,TG="_blank",bG="http://localhost",ty=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function AG(n,e,t,r=EG,i=wG){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},IG),{width:r.toString(),height:i.toString(),top:s,left:o}),d=Rt().toLowerCase();t&&(a=kx(d)?TG:t),Nx(d)&&(e=e||bG,c.scrollbars="yes");let h=Object.entries(c).reduce((E,[S,R])=>`${E}${S}=${R},`,"");if(g3(d)&&a!=="_self")return SG(e||"",a),new ty(null);let g=window.open(e||"",a,h);se(g,n,"popup-blocked");try{g.focus()}catch{}return new ty(g)}function SG(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var DG="__/auth/handler",CG="emulator/auth/handler",RG=encodeURIComponent("fac");async function Ix(n,e,t,r,i,s){se(n.config.authDomain,n,"auth-domain-config-required"),se(n.config.apiKey,n,"invalid-api-key");let o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Ms,eventId:i};if(e instanceof oh){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",Qk(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,g]of Object.entries(s||{}))o[h]=g}if(e instanceof Ym){let h=e.getScopes().filter(g=>g!=="");h.length>0&&(o.scopes=h.join(","))}n.tenantId&&(o.tid=n.tenantId);let a=o;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let c=await n._getAppCheckToken(),d=c?`#${RG}=${encodeURIComponent(c)}`:"";return`${NG(n)}?${Xc(a).slice(1)}${d}`}function NG({config:n}){return n.emulator?$T(n,CG):`https://${n.authDomain}/${DG}`}var AT="webStorageSupport",VT=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=eb,this._completeRedirectFn=nG,this._overrideRedirectResult=Z3}async _openPopup(e,t,r,i){var s;Ai((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=await Ix(e,t,r,ST(),i);return AG(e,o,tb())}async _openRedirect(e,t,r,i){await this._originValidation(e);let s=await Ix(e,t,r,ST(),i);return L3(s),new Promise(()=>{})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(Ai(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){let t=await vG(e),r=new FT(e);return t.register("authEvent",i=>(se(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(AT,{type:AT},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[AT];o!==void 0&&t(!!o),Vr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=cG(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Fx()||Px()||WT()}},Qx=VT;var Ex="@firebase/auth",wx="1.10.8";var UT=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function PG(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function kG(n){ar(new sn("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;se(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Vx(n)},d=new kT(r,i,s,c);return w3(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),ar(new sn("auth-internal",e=>{let t=ny(e.getProvider("auth").getImmediate());return(r=>new UT(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),et(Ex,wx,PG(n)),et(Ex,wx,"esm2017")}var MG=300,xG=Rw("authIdTokenMaxAge")||MG,Tx=null,OG=n=>async e=>{let t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>xG)return;let i=t?.token;Tx!==i&&(Tx=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function rb(n=ta()){let e=Zc(n,"auth");if(e.isInitialized())return e.getImmediate();let t=QT(n,{popupRedirectResolver:Qx,persistence:[Gx,$x,eb]}),r=Rw("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=OG(s.toString());XT(t,o,()=>o(t.currentUser)),JT(t,a=>o(a))}}let i=Dw("auth");return i&&YT(t,`http://${i}`),t}function LG(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}v3({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=lr("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",LG().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});kG("Browser");var Yx="auth",uh=class{constructor(e){return e}},lh=class{constructor(){return tu(Yx)}};var ib=new J("angularfire2.auth-instances");function D5(n,e){let t=Gd(Yx,n,e);return t&&new uh(t)}function C5(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new uh(r)}}var R5={provide:lh,deps:[[new wn,ib]]},N5={provide:uh,useFactory:D5,deps:[[new wn,ib],_i]};function Jme(n,...e){return et("angularfire",xs.full,"auth"),Xn([N5,R5,{provide:ib,useFactory:C5(n),multi:!0,deps:[Ue,At,Os,ra,[new wn,nu],...e]}])}var Xme=on(ux,!0);var Zme=on(rb,!0);var eye=on(nb,!0,2);var tye=on(ZT,!0,2);var Jx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Xx={};var Si,sb;(function(){var n;function e(b,_){function I(){}I.prototype=_.prototype,b.F=_.prototype,b.prototype=new I,b.prototype.constructor=b,b.D=function(T,w,C){for(var v=Array(arguments.length-2),We=2;We<arguments.length;We++)v[We-2]=arguments[We];return _.prototype[w].apply(T,v)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(b,_,I){I||(I=0);let T=Array(16);if(typeof _=="string")for(var w=0;w<16;++w)T[w]=_.charCodeAt(I++)|_.charCodeAt(I++)<<8|_.charCodeAt(I++)<<16|_.charCodeAt(I++)<<24;else for(w=0;w<16;++w)T[w]=_[I++]|_[I++]<<8|_[I++]<<16|_[I++]<<24;_=b.g[0],I=b.g[1],w=b.g[2];let C=b.g[3],v;v=_+(C^I&(w^C))+T[0]+3614090360&4294967295,_=I+(v<<7&4294967295|v>>>25),v=C+(w^_&(I^w))+T[1]+3905402710&4294967295,C=_+(v<<12&4294967295|v>>>20),v=w+(I^C&(_^I))+T[2]+606105819&4294967295,w=C+(v<<17&4294967295|v>>>15),v=I+(_^w&(C^_))+T[3]+3250441966&4294967295,I=w+(v<<22&4294967295|v>>>10),v=_+(C^I&(w^C))+T[4]+4118548399&4294967295,_=I+(v<<7&4294967295|v>>>25),v=C+(w^_&(I^w))+T[5]+1200080426&4294967295,C=_+(v<<12&4294967295|v>>>20),v=w+(I^C&(_^I))+T[6]+2821735955&4294967295,w=C+(v<<17&4294967295|v>>>15),v=I+(_^w&(C^_))+T[7]+4249261313&4294967295,I=w+(v<<22&4294967295|v>>>10),v=_+(C^I&(w^C))+T[8]+1770035416&4294967295,_=I+(v<<7&4294967295|v>>>25),v=C+(w^_&(I^w))+T[9]+2336552879&4294967295,C=_+(v<<12&4294967295|v>>>20),v=w+(I^C&(_^I))+T[10]+4294925233&4294967295,w=C+(v<<17&4294967295|v>>>15),v=I+(_^w&(C^_))+T[11]+2304563134&4294967295,I=w+(v<<22&4294967295|v>>>10),v=_+(C^I&(w^C))+T[12]+1804603682&4294967295,_=I+(v<<7&4294967295|v>>>25),v=C+(w^_&(I^w))+T[13]+4254626195&4294967295,C=_+(v<<12&4294967295|v>>>20),v=w+(I^C&(_^I))+T[14]+2792965006&4294967295,w=C+(v<<17&4294967295|v>>>15),v=I+(_^w&(C^_))+T[15]+1236535329&4294967295,I=w+(v<<22&4294967295|v>>>10),v=_+(w^C&(I^w))+T[1]+4129170786&4294967295,_=I+(v<<5&4294967295|v>>>27),v=C+(I^w&(_^I))+T[6]+3225465664&4294967295,C=_+(v<<9&4294967295|v>>>23),v=w+(_^I&(C^_))+T[11]+643717713&4294967295,w=C+(v<<14&4294967295|v>>>18),v=I+(C^_&(w^C))+T[0]+3921069994&4294967295,I=w+(v<<20&4294967295|v>>>12),v=_+(w^C&(I^w))+T[5]+3593408605&4294967295,_=I+(v<<5&4294967295|v>>>27),v=C+(I^w&(_^I))+T[10]+38016083&4294967295,C=_+(v<<9&4294967295|v>>>23),v=w+(_^I&(C^_))+T[15]+3634488961&4294967295,w=C+(v<<14&4294967295|v>>>18),v=I+(C^_&(w^C))+T[4]+3889429448&4294967295,I=w+(v<<20&4294967295|v>>>12),v=_+(w^C&(I^w))+T[9]+568446438&4294967295,_=I+(v<<5&4294967295|v>>>27),v=C+(I^w&(_^I))+T[14]+3275163606&4294967295,C=_+(v<<9&4294967295|v>>>23),v=w+(_^I&(C^_))+T[3]+4107603335&4294967295,w=C+(v<<14&4294967295|v>>>18),v=I+(C^_&(w^C))+T[8]+1163531501&4294967295,I=w+(v<<20&4294967295|v>>>12),v=_+(w^C&(I^w))+T[13]+2850285829&4294967295,_=I+(v<<5&4294967295|v>>>27),v=C+(I^w&(_^I))+T[2]+4243563512&4294967295,C=_+(v<<9&4294967295|v>>>23),v=w+(_^I&(C^_))+T[7]+1735328473&4294967295,w=C+(v<<14&4294967295|v>>>18),v=I+(C^_&(w^C))+T[12]+2368359562&4294967295,I=w+(v<<20&4294967295|v>>>12),v=_+(I^w^C)+T[5]+4294588738&4294967295,_=I+(v<<4&4294967295|v>>>28),v=C+(_^I^w)+T[8]+2272392833&4294967295,C=_+(v<<11&4294967295|v>>>21),v=w+(C^_^I)+T[11]+1839030562&4294967295,w=C+(v<<16&4294967295|v>>>16),v=I+(w^C^_)+T[14]+4259657740&4294967295,I=w+(v<<23&4294967295|v>>>9),v=_+(I^w^C)+T[1]+2763975236&4294967295,_=I+(v<<4&4294967295|v>>>28),v=C+(_^I^w)+T[4]+1272893353&4294967295,C=_+(v<<11&4294967295|v>>>21),v=w+(C^_^I)+T[7]+4139469664&4294967295,w=C+(v<<16&4294967295|v>>>16),v=I+(w^C^_)+T[10]+3200236656&4294967295,I=w+(v<<23&4294967295|v>>>9),v=_+(I^w^C)+T[13]+681279174&4294967295,_=I+(v<<4&4294967295|v>>>28),v=C+(_^I^w)+T[0]+3936430074&4294967295,C=_+(v<<11&4294967295|v>>>21),v=w+(C^_^I)+T[3]+3572445317&4294967295,w=C+(v<<16&4294967295|v>>>16),v=I+(w^C^_)+T[6]+76029189&4294967295,I=w+(v<<23&4294967295|v>>>9),v=_+(I^w^C)+T[9]+3654602809&4294967295,_=I+(v<<4&4294967295|v>>>28),v=C+(_^I^w)+T[12]+3873151461&4294967295,C=_+(v<<11&4294967295|v>>>21),v=w+(C^_^I)+T[15]+530742520&4294967295,w=C+(v<<16&4294967295|v>>>16),v=I+(w^C^_)+T[2]+3299628645&4294967295,I=w+(v<<23&4294967295|v>>>9),v=_+(w^(I|~C))+T[0]+4096336452&4294967295,_=I+(v<<6&4294967295|v>>>26),v=C+(I^(_|~w))+T[7]+1126891415&4294967295,C=_+(v<<10&4294967295|v>>>22),v=w+(_^(C|~I))+T[14]+2878612391&4294967295,w=C+(v<<15&4294967295|v>>>17),v=I+(C^(w|~_))+T[5]+4237533241&4294967295,I=w+(v<<21&4294967295|v>>>11),v=_+(w^(I|~C))+T[12]+1700485571&4294967295,_=I+(v<<6&4294967295|v>>>26),v=C+(I^(_|~w))+T[3]+2399980690&4294967295,C=_+(v<<10&4294967295|v>>>22),v=w+(_^(C|~I))+T[10]+4293915773&4294967295,w=C+(v<<15&4294967295|v>>>17),v=I+(C^(w|~_))+T[1]+2240044497&4294967295,I=w+(v<<21&4294967295|v>>>11),v=_+(w^(I|~C))+T[8]+1873313359&4294967295,_=I+(v<<6&4294967295|v>>>26),v=C+(I^(_|~w))+T[15]+4264355552&4294967295,C=_+(v<<10&4294967295|v>>>22),v=w+(_^(C|~I))+T[6]+2734768916&4294967295,w=C+(v<<15&4294967295|v>>>17),v=I+(C^(w|~_))+T[13]+1309151649&4294967295,I=w+(v<<21&4294967295|v>>>11),v=_+(w^(I|~C))+T[4]+4149444226&4294967295,_=I+(v<<6&4294967295|v>>>26),v=C+(I^(_|~w))+T[11]+3174756917&4294967295,C=_+(v<<10&4294967295|v>>>22),v=w+(_^(C|~I))+T[2]+718787259&4294967295,w=C+(v<<15&4294967295|v>>>17),v=I+(C^(w|~_))+T[9]+3951481745&4294967295,b.g[0]=b.g[0]+_&4294967295,b.g[1]=b.g[1]+(w+(v<<21&4294967295|v>>>11))&4294967295,b.g[2]=b.g[2]+w&4294967295,b.g[3]=b.g[3]+C&4294967295}r.prototype.v=function(b,_){_===void 0&&(_=b.length);let I=_-this.blockSize,T=this.C,w=this.h,C=0;for(;C<_;){if(w==0)for(;C<=I;)i(this,b,C),C+=this.blockSize;if(typeof b=="string"){for(;C<_;)if(T[w++]=b.charCodeAt(C++),w==this.blockSize){i(this,T),w=0;break}}else for(;C<_;)if(T[w++]=b[C++],w==this.blockSize){i(this,T),w=0;break}}this.h=w,this.o+=_},r.prototype.A=function(){var b=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);b[0]=128;for(var _=1;_<b.length-8;++_)b[_]=0;_=this.o*8;for(var I=b.length-8;I<b.length;++I)b[I]=_&255,_/=256;for(this.v(b),b=Array(16),_=0,I=0;I<4;++I)for(let T=0;T<32;T+=8)b[_++]=this.g[I]>>>T&255;return b};function s(b,_){var I=a;return Object.prototype.hasOwnProperty.call(I,b)?I[b]:I[b]=_(b)}function o(b,_){this.h=_;let I=[],T=!0;for(let w=b.length-1;w>=0;w--){let C=b[w]|0;T&&C==_||(I[w]=C,T=!1)}this.g=I}var a={};function c(b){return-128<=b&&b<128?s(b,function(_){return new o([_|0],_<0?-1:0)}):new o([b|0],b<0?-1:0)}function d(b){if(isNaN(b)||!isFinite(b))return g;if(b<0)return k(d(-b));let _=[],I=1;for(let T=0;b>=I;T++)_[T]=b/I|0,I*=4294967296;return new o(_,0)}function h(b,_){if(b.length==0)throw Error("number format error: empty string");if(_=_||10,_<2||36<_)throw Error("radix out of range: "+_);if(b.charAt(0)=="-")return k(h(b.substring(1),_));if(b.indexOf("-")>=0)throw Error('number format error: interior "-" character');let I=d(Math.pow(_,8)),T=g;for(let C=0;C<b.length;C+=8){var w=Math.min(8,b.length-C);let v=parseInt(b.substring(C,C+w),_);w<8?(w=d(Math.pow(_,w)),T=T.j(w).add(d(v))):(T=T.j(I),T=T.add(d(v)))}return T}var g=c(0),E=c(1),S=c(16777216);n=o.prototype,n.m=function(){if(M(this))return-k(this).m();let b=0,_=1;for(let I=0;I<this.g.length;I++){let T=this.i(I);b+=(T>=0?T:4294967296+T)*_,_*=4294967296}return b},n.toString=function(b){if(b=b||10,b<2||36<b)throw Error("radix out of range: "+b);if(R(this))return"0";if(M(this))return"-"+k(this).toString(b);let _=d(Math.pow(b,6));var I=this;let T="";for(;;){let w=ye(I,_).g;I=V(I,w.j(_));let C=((I.g.length>0?I.g[0]:I.h)>>>0).toString(b);if(I=w,R(I))return C+T;for(;C.length<6;)C="0"+C;T=C+T}},n.i=function(b){return b<0?0:b<this.g.length?this.g[b]:this.h};function R(b){if(b.h!=0)return!1;for(let _=0;_<b.g.length;_++)if(b.g[_]!=0)return!1;return!0}function M(b){return b.h==-1}n.l=function(b){return b=V(this,b),M(b)?-1:R(b)?0:1};function k(b){let _=b.g.length,I=[];for(let T=0;T<_;T++)I[T]=~b.g[T];return new o(I,~b.h).add(E)}n.abs=function(){return M(this)?k(this):this},n.add=function(b){let _=Math.max(this.g.length,b.g.length),I=[],T=0;for(let w=0;w<=_;w++){let C=T+(this.i(w)&65535)+(b.i(w)&65535),v=(C>>>16)+(this.i(w)>>>16)+(b.i(w)>>>16);T=v>>>16,C&=65535,v&=65535,I[w]=v<<16|C}return new o(I,I[I.length-1]&-2147483648?-1:0)};function V(b,_){return b.add(k(_))}n.j=function(b){if(R(this)||R(b))return g;if(M(this))return M(b)?k(this).j(k(b)):k(k(this).j(b));if(M(b))return k(this.j(k(b)));if(this.l(S)<0&&b.l(S)<0)return d(this.m()*b.m());let _=this.g.length+b.g.length,I=[];for(var T=0;T<2*_;T++)I[T]=0;for(T=0;T<this.g.length;T++)for(let w=0;w<b.g.length;w++){let C=this.i(T)>>>16,v=this.i(T)&65535,We=b.i(w)>>>16,an=b.i(w)&65535;I[2*T+2*w]+=v*an,z(I,2*T+2*w),I[2*T+2*w+1]+=C*an,z(I,2*T+2*w+1),I[2*T+2*w+1]+=v*We,z(I,2*T+2*w+1),I[2*T+2*w+2]+=C*We,z(I,2*T+2*w+2)}for(b=0;b<_;b++)I[b]=I[2*b+1]<<16|I[2*b];for(b=_;b<2*_;b++)I[b]=0;return new o(I,0)};function z(b,_){for(;(b[_]&65535)!=b[_];)b[_+1]+=b[_]>>>16,b[_]&=65535,_++}function K(b,_){this.g=b,this.h=_}function ye(b,_){if(R(_))throw Error("division by zero");if(R(b))return new K(g,g);if(M(b))return _=ye(k(b),_),new K(k(_.g),k(_.h));if(M(_))return _=ye(b,k(_)),new K(k(_.g),_.h);if(b.g.length>30){if(M(b)||M(_))throw Error("slowDivide_ only works with positive integers.");for(var I=E,T=_;T.l(b)<=0;)I=ze(I),T=ze(T);var w=re(I,1),C=re(T,1);for(T=re(T,2),I=re(I,2);!R(T);){var v=C.add(T);v.l(b)<=0&&(w=w.add(I),C=v),T=re(T,1),I=re(I,1)}return _=V(b,w.j(_)),new K(w,_)}for(w=g;b.l(_)>=0;){for(I=Math.max(1,Math.floor(b.m()/_.m())),T=Math.ceil(Math.log(I)/Math.LN2),T=T<=48?1:Math.pow(2,T-48),C=d(I),v=C.j(_);M(v)||v.l(b)>0;)I-=T,C=d(I),v=C.j(_);R(C)&&(C=E),w=w.add(C),b=V(b,v)}return new K(w,b)}n.B=function(b){return ye(this,b).h},n.and=function(b){let _=Math.max(this.g.length,b.g.length),I=[];for(let T=0;T<_;T++)I[T]=this.i(T)&b.i(T);return new o(I,this.h&b.h)},n.or=function(b){let _=Math.max(this.g.length,b.g.length),I=[];for(let T=0;T<_;T++)I[T]=this.i(T)|b.i(T);return new o(I,this.h|b.h)},n.xor=function(b){let _=Math.max(this.g.length,b.g.length),I=[];for(let T=0;T<_;T++)I[T]=this.i(T)^b.i(T);return new o(I,this.h^b.h)};function ze(b){let _=b.g.length+1,I=[];for(let T=0;T<_;T++)I[T]=b.i(T)<<1|b.i(T-1)>>>31;return new o(I,b.h)}function re(b,_){let I=_>>5;_%=32;let T=b.g.length-I,w=[];for(let C=0;C<T;C++)w[C]=_>0?b.i(C+I)>>>_|b.i(C+I+1)<<32-_:b.i(C+I);return new o(w,b.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,sb=Xx.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=h,Si=Xx.Integer=o}).apply(typeof Jx<"u"?Jx:typeof self<"u"?self:typeof window<"u"?window:{});var iy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Di={};var ob,P5,ou,ab,dh,sy,cb,ub,lb;(function(){var n,e=Object.defineProperty;function t(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof iy=="object"&&iy];for(var p=0;p<l.length;++p){var y=l[p];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var r=t(this);function i(l,p){if(p)e:{var y=r;l=l.split(".");for(var D=0;D<l.length-1;D++){var N=l[D];if(!(N in y))break e;y=y[N]}l=l[l.length-1],D=y[l],p=p(D),p!=D&&p!=null&&e(y,l,{configurable:!0,writable:!0,value:p})}}i("Symbol.dispose",function(l){return l||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(l){return l||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(l){return l||function(p){var y=[],D;for(D in p)Object.prototype.hasOwnProperty.call(p,D)&&y.push([D,p[D]]);return y}});var s=s||{},o=this||self;function a(l){var p=typeof l;return p=="object"&&l!=null||p=="function"}function c(l,p,y){return l.call.apply(l.bind,arguments)}function d(l,p,y){return d=c,d.apply(null,arguments)}function h(l,p){var y=Array.prototype.slice.call(arguments,1);return function(){var D=y.slice();return D.push.apply(D,arguments),l.apply(this,D)}}function g(l,p){function y(){}y.prototype=p.prototype,l.Z=p.prototype,l.prototype=new y,l.prototype.constructor=l,l.Ob=function(D,N,x){for(var H=Array(arguments.length-2),ie=2;ie<arguments.length;ie++)H[ie-2]=arguments[ie];return p.prototype[N].apply(D,H)}}var E=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?l=>l&&AsyncContext.Snapshot.wrap(l):l=>l;function S(l){let p=l.length;if(p>0){let y=Array(p);for(let D=0;D<p;D++)y[D]=l[D];return y}return[]}function R(l,p){for(let D=1;D<arguments.length;D++){let N=arguments[D];var y=typeof N;if(y=y!="object"?y:N?Array.isArray(N)?"array":y:"null",y=="array"||y=="object"&&typeof N.length=="number"){y=l.length||0;let x=N.length||0;l.length=y+x;for(let H=0;H<x;H++)l[y+H]=N[H]}else l.push(N)}}class M{constructor(p,y){this.i=p,this.j=y,this.h=0,this.g=null}get(){let p;return this.h>0?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function k(l){o.setTimeout(()=>{throw l},0)}function V(){var l=b;let p=null;return l.g&&(p=l.g,l.g=l.g.next,l.g||(l.h=null),p.next=null),p}class z{constructor(){this.h=this.g=null}add(p,y){let D=K.get();D.set(p,y),this.h?this.h.next=D:this.g=D,this.h=D}}var K=new M(()=>new ye,l=>l.reset());class ye{constructor(){this.next=this.g=this.h=null}set(p,y){this.h=p,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let ze,re=!1,b=new z,_=()=>{let l=Promise.resolve(void 0);ze=()=>{l.then(I)}};function I(){for(var l;l=V();){try{l.h.call(l.g)}catch(y){k(y)}var p=K;p.j(l),p.h<100&&(p.h++,l.next=p.g,p.g=l)}re=!1}function T(){this.u=this.u,this.C=this.C}T.prototype.u=!1,T.prototype.dispose=function(){this.u||(this.u=!0,this.N())},T.prototype[Symbol.dispose]=function(){this.dispose()},T.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function w(l,p){this.type=l,this.g=this.target=p,this.defaultPrevented=!1}w.prototype.h=function(){this.defaultPrevented=!0};var C=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var l=!1,p=Object.defineProperty({},"passive",{get:function(){l=!0}});try{let y=()=>{};o.addEventListener("test",y,p),o.removeEventListener("test",y,p)}catch{}return l})();function v(l){return/^[\s\xa0]*$/.test(l)}function We(l,p){w.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l&&this.init(l,p)}g(We,w),We.prototype.init=function(l,p){let y=this.type=l.type,D=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;this.target=l.target||l.srcElement,this.g=p,p=l.relatedTarget,p||(y=="mouseover"?p=l.fromElement:y=="mouseout"&&(p=l.toElement)),this.relatedTarget=p,D?(this.clientX=D.clientX!==void 0?D.clientX:D.pageX,this.clientY=D.clientY!==void 0?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=l.pointerType,this.state=l.state,this.i=l,l.defaultPrevented&&We.Z.h.call(this)},We.prototype.h=function(){We.Z.h.call(this);let l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var an="closure_listenable_"+(Math.random()*1e6|0),z_=0;function no(l,p,y,D,N){this.listener=l,this.proxy=null,this.src=p,this.type=y,this.capture=!!D,this.ha=N,this.key=++z_,this.da=this.fa=!1}function gr(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Ui(l,p,y){for(let D in l)p.call(y,l[D],D,l)}function af(l,p){for(let y in l)p.call(void 0,l[y],y,l)}function cf(l){let p={};for(let y in l)p[y]=l[y];return p}let Hn="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _t(l,p){let y,D;for(let N=1;N<arguments.length;N++){D=arguments[N];for(y in D)l[y]=D[y];for(let x=0;x<Hn.length;x++)y=Hn[x],Object.prototype.hasOwnProperty.call(D,y)&&(l[y]=D[y])}}function La(l){this.src=l,this.g={},this.h=0}La.prototype.add=function(l,p,y,D,N){let x=l.toString();l=this.g[x],l||(l=this.g[x]=[],this.h++);let H=ol(l,p,D,N);return H>-1?(p=l[H],y||(p.fa=!1)):(p=new no(p,this.src,x,!!D,N),p.fa=y,l.push(p)),p};function Yr(l,p){let y=p.type;if(y in l.g){var D=l.g[y],N=Array.prototype.indexOf.call(D,p,void 0),x;(x=N>=0)&&Array.prototype.splice.call(D,N,1),x&&(gr(p),l.g[y].length==0&&(delete l.g[y],l.h--))}}function ol(l,p,y,D){for(let N=0;N<l.length;++N){let x=l[N];if(!x.da&&x.listener==p&&x.capture==!!y&&x.ha==D)return N}return-1}var Jr="closure_lm_"+(Math.random()*1e6|0),al={};function uf(l,p,y,D,N){if(D&&D.once)return Va(l,p,y,D,N);if(Array.isArray(p)){for(let x=0;x<p.length;x++)uf(l,p[x],y,D,N);return null}return y=$a(y),l&&l[an]?l.J(p,y,a(D)?!!D.capture:!!D,N):ro(l,p,y,!1,D,N)}function ro(l,p,y,D,N,x){if(!p)throw Error("Invalid event type");let H=a(N)?!!N.capture:!!N,ie=Ba(l);if(ie||(l[Jr]=ie=new La(l)),y=ie.add(p,y,D,H,x),y.proxy)return y;if(D=Fa(),y.proxy=D,D.src=l,D.listener=y,l.addEventListener)C||(N=H),N===void 0&&(N=!1),l.addEventListener(p.toString(),D,N);else if(l.attachEvent)l.attachEvent(ja(p.toString()),D);else if(l.addListener&&l.removeListener)l.addListener(D);else throw Error("addEventListener and attachEvent are unavailable.");return y}function Fa(){function l(y){return p.call(l.src,l.listener,y)}let p=lf;return l}function Va(l,p,y,D,N){if(Array.isArray(p)){for(let x=0;x<p.length;x++)Va(l,p[x],y,D,N);return null}return y=$a(y),l&&l[an]?l.K(p,y,a(D)?!!D.capture:!!D,N):ro(l,p,y,!0,D,N)}function Ua(l,p,y,D,N){if(Array.isArray(p))for(var x=0;x<p.length;x++)Ua(l,p[x],y,D,N);else D=a(D)?!!D.capture:!!D,y=$a(y),l&&l[an]?(l=l.i,x=String(p).toString(),x in l.g&&(p=l.g[x],y=ol(p,y,D,N),y>-1&&(gr(p[y]),Array.prototype.splice.call(p,y,1),p.length==0&&(delete l.g[x],l.h--)))):l&&(l=Ba(l))&&(p=l.g[p.toString()],l=-1,p&&(l=ol(p,y,D,N)),(y=l>-1?p[l]:null)&&io(y))}function io(l){if(typeof l!="number"&&l&&!l.da){var p=l.src;if(p&&p[an])Yr(p.i,l);else{var y=l.type,D=l.proxy;p.removeEventListener?p.removeEventListener(y,D,l.capture):p.detachEvent?p.detachEvent(ja(y),D):p.addListener&&p.removeListener&&p.removeListener(D),(y=Ba(p))?(Yr(y,l),y.h==0&&(y.src=null,p[Jr]=null)):gr(l)}}}function ja(l){return l in al?al[l]:al[l]="on"+l}function lf(l,p){if(l.da)l=!0;else{p=new We(p,this);let y=l.listener,D=l.ha||l.src;l.fa&&io(l),l=y.call(D,p)}return l}function Ba(l){return l=l[Jr],l instanceof La?l:null}var cl="__closure_events_fn_"+(Math.random()*1e9>>>0);function $a(l){return typeof l=="function"?l:(l[cl]||(l[cl]=function(p){return l.handleEvent(p)}),l[cl])}function vt(){T.call(this),this.i=new La(this),this.M=this,this.G=null}g(vt,T),vt.prototype[an]=!0,vt.prototype.removeEventListener=function(l,p,y,D){Ua(this,l,p,y,D)};function It(l,p){var y,D=l.G;if(D)for(y=[];D;D=D.G)y.push(D);if(l=l.M,D=p.type||p,typeof p=="string")p=new w(p,l);else if(p instanceof w)p.target=p.target||l;else{var N=p;p=new w(D,l),_t(p,N)}N=!0;let x,H;if(y)for(H=y.length-1;H>=0;H--)x=p.g=y[H],N=so(x,D,!0,p)&&N;if(x=p.g=l,N=so(x,D,!0,p)&&N,N=so(x,D,!1,p)&&N,y)for(H=0;H<y.length;H++)x=p.g=y[H],N=so(x,D,!1,p)&&N}vt.prototype.N=function(){if(vt.Z.N.call(this),this.i){var l=this.i;for(let p in l.g){let y=l.g[p];for(let D=0;D<y.length;D++)gr(y[D]);delete l.g[p],l.h--}}this.G=null},vt.prototype.J=function(l,p,y,D){return this.i.add(String(l),p,!1,y,D)},vt.prototype.K=function(l,p,y,D){return this.i.add(String(l),p,!0,y,D)};function so(l,p,y,D){if(p=l.i.g[String(p)],!p)return!0;p=p.concat();let N=!0;for(let x=0;x<p.length;++x){let H=p[x];if(H&&!H.da&&H.capture==y){let ie=H.listener,u=H.ha||H.src;H.fa&&Yr(l.i,H),N=ie.call(u,D)!==!1&&N}}return N&&!D.defaultPrevented}function G_(l,p){if(typeof l!="function")if(l&&typeof l.handleEvent=="function")l=d(l.handleEvent,l);else throw Error("Invalid listener argument");return Number(p)>2147483647?-1:o.setTimeout(l,p||0)}function Ha(l){l.g=G_(()=>{l.g=null,l.i&&(l.i=!1,Ha(l))},l.l);let p=l.h;l.h=null,l.m.apply(null,p)}class ul extends T{constructor(p,y){super(),this.m=p,this.l=y,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Ha(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Xr(l){T.call(this),this.h=l,this.g={}}g(Xr,T);var Et=[];function bt(l){Ui(l.g,function(p,y){this.g.hasOwnProperty(y)&&io(p)},l),l.g={}}Xr.prototype.N=function(){Xr.Z.N.call(this),bt(this)},Xr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ji=o.JSON.stringify,df=o.JSON.parse,hf=class{stringify(l){return o.JSON.stringify(l,void 0)}parse(l){return o.JSON.parse(l,void 0)}};function ff(){}function Bi(){}var $i={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function qa(){w.call(this,"d")}g(qa,w);function oo(){w.call(this,"c")}g(oo,w);var Zr={},pf=null;function Hi(){return pf=pf||new vt}Zr.Ia="serverreachability";function ll(l){w.call(this,Zr.Ia,l)}g(ll,w);function qi(l){let p=Hi();It(p,new ll(p))}Zr.STAT_EVENT="statevent";function zi(l,p){w.call(this,Zr.STAT_EVENT,l),this.stat=p}g(zi,w);function wt(l){let p=Hi();It(p,new zi(p,l))}Zr.Ja="timingevent";function za(l,p){w.call(this,Zr.Ja,l),this.size=p}g(za,w);function mn(l,p){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){l()},p)}function Gi(){this.g=!0}Gi.prototype.ua=function(){this.g=!1};function Ga(l,p,y,D,N,x){l.info(function(){if(l.g)if(x){var H="",ie=x.split("&");for(let f=0;f<ie.length;f++){var u=ie[f].split("=");if(u.length>1){let m=u[0];u=u[1];let A=m.split("_");H=A.length>=2&&A[1]=="type"?H+(m+"="+u+"&"):H+(m+"=redacted&")}}}else H=null;else H=x;return"XMLHTTP REQ ("+D+") [attempt "+N+"]: "+p+`
`+y+`
`+H})}function gf(l,p,y,D,N,x,H){l.info(function(){return"XMLHTTP RESP ("+D+") [ attempt "+N+"]: "+p+`
`+y+`
`+x+" "+H})}function Nn(l,p,y,D){l.info(function(){return"XMLHTTP TEXT ("+p+"): "+Mt(l,y)+(D?" "+D:"")})}function mf(l,p){l.info(function(){return"TIMEOUT: "+p})}Gi.prototype.info=function(){};function Mt(l,p){if(!l.g)return p;if(!p)return null;try{let x=JSON.parse(p);if(x){for(l=0;l<x.length;l++)if(Array.isArray(x[l])){var y=x[l];if(!(y.length<2)){var D=y[1];if(Array.isArray(D)&&!(D.length<1)){var N=D[0];if(N!="noop"&&N!="stop"&&N!="close")for(let H=1;H<D.length;H++)D[H]=""}}}}return ji(x)}catch{return p}}var ao={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Wi={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ki;function dl(){}g(dl,ff),dl.prototype.g=function(){return new XMLHttpRequest},Ki=new dl;function co(l){return encodeURIComponent(String(l))}function Qi(l){var p=1;l=l.split(":");let y=[];for(;p>0&&l.length;)y.push(l.shift()),p--;return l.length&&y.push(l.join(":")),y}function mr(l,p,y,D){this.j=l,this.i=p,this.l=y,this.S=D||1,this.V=new Xr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new yf}function yf(){this.i=null,this.g="",this.h=!1}var uo={},Wa={};function lo(l,p,y){l.M=1,l.A=go(yn(p)),l.u=y,l.R=!0,ho(l,null)}function ho(l,p){l.F=Date.now(),Yi(l),l.B=yn(l.A);var y=l.B,D=l.S;Array.isArray(D)||(D=[String(D)]),Tf(y.i,"t",D),l.C=0,y=l.j.L,l.h=new yf,l.g=oc(l.j,y?p:null,!l.u),l.P>0&&(l.O=new ul(d(l.Y,l,l.g),l.P)),p=l.V,y=l.g,D=l.ba;var N="readystatechange";Array.isArray(N)||(N&&(Et[0]=N.toString()),N=Et);for(let x=0;x<N.length;x++){let H=uf(y,N[x],D||p.handleEvent,!1,p.h||p);if(!H)break;p.g[H.key]=H}p=l.J?cf(l.J):{},l.u?(l.v||(l.v="POST"),p["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.B,l.v,l.u,p)):(l.v="GET",l.g.ea(l.B,l.v,null,p)),qi(),Ga(l.i,l.v,l.B,l.l,l.S,l.u)}mr.prototype.ba=function(l){l=l.target;let p=this.O;p&&ke(l)==3?p.j():this.Y(l)},mr.prototype.Y=function(l){try{if(l==this.g)e:{let ie=ke(this.g),u=this.g.ya(),f=this.g.ca();if(!(ie<3)&&(ie!=3||this.g&&(this.h.h||this.g.la()||Nf(this.g)))){this.K||ie!=4||u==7||(u==8||f<=0?qi(3):qi(2)),Qa(this);var p=this.g.ca();this.X=p;var y=yr(this);if(this.o=p==200,gf(this.i,this.v,this.B,this.l,this.S,ie,p),this.o){if(this.U&&!this.L){t:{if(this.g){var D,N=this.g;if((D=N.g?N.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(D)){var x=D;break t}}x=null}if(l=x)Nn(this.i,this.l,l,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Xi(this,l);else{this.o=!1,this.m=3,wt(12),ei(this),Ji(this);break e}}if(this.R){l=!0;let m;for(;!this.K&&this.C<y.length;)if(m=_f(this,y),m==Wa){ie==4&&(this.m=4,wt(14),l=!1),Nn(this.i,this.l,null,"[Incomplete Response]");break}else if(m==uo){this.m=4,wt(15),Nn(this.i,this.l,y,"[Invalid Chunk]"),l=!1;break}else Nn(this.i,this.l,m,null),Xi(this,m);if(hl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ie!=4||y.length!=0||this.h.h||(this.m=1,wt(16),l=!1),this.o=this.o&&l,!l)Nn(this.i,this.l,y,"[Invalid Chunked Response]"),ei(this),Ji(this);else if(y.length>0&&!this.W){this.W=!0;var H=this.j;H.g==this&&H.aa&&!H.P&&(H.j.info("Great, no buffering proxy detected. Bytes received: "+y.length),rc(H),H.P=!0,wt(11))}}else Nn(this.i,this.l,y,null),Xi(this,y);ie==4&&ei(this),this.o&&!this.K&&(ie==4?Al(this.j,this):(this.o=!1,Yi(this)))}else W_(this.g),p==400&&y.indexOf("Unknown SID")>0?(this.m=3,wt(12)):(this.m=0,wt(13)),ei(this),Ji(this)}}}catch{}};function yr(l){if(!hl(l))return l.g.la();let p=Nf(l.g);if(p==="")return"";let y="",D=p.length,N=ke(l.g)==4;if(!l.h.i){if(typeof TextDecoder>"u")return ei(l),Ji(l),"";l.h.i=new o.TextDecoder}for(let x=0;x<D;x++)l.h.h=!0,y+=l.h.i.decode(p[x],{stream:!(N&&x==D-1)});return p.length=0,l.h.g+=y,l.C=0,l.h.g}function hl(l){return l.g?l.v=="GET"&&l.M!=2&&l.j.Aa:!1}function _f(l,p){var y=l.C,D=p.indexOf(`
`,y);return D==-1?Wa:(y=Number(p.substring(y,D)),isNaN(y)?uo:(D+=1,D+y>p.length?Wa:(p=p.slice(D,D+y),l.C=D+y,p)))}mr.prototype.cancel=function(){this.K=!0,ei(this)};function Yi(l){l.T=Date.now()+l.H,Ka(l,l.H)}function Ka(l,p){if(l.D!=null)throw Error("WatchDog timer not null");l.D=mn(d(l.aa,l),p)}function Qa(l){l.D&&(o.clearTimeout(l.D),l.D=null)}mr.prototype.aa=function(){this.D=null;let l=Date.now();l-this.T>=0?(mf(this.i,this.B),this.M!=2&&(qi(),wt(17)),ei(this),this.m=2,Ji(this)):Ka(this,this.T-l)};function Ji(l){l.j.I==0||l.K||Al(l.j,l)}function ei(l){Qa(l);var p=l.O;p&&typeof p.dispose=="function"&&p.dispose(),l.O=null,bt(l.V),l.g&&(p=l.g,l.g=null,p.abort(),p.dispose())}function Xi(l,p){try{var y=l.j;if(y.I!=0&&(y.g==l||fo(y.h,l))){if(!l.L&&fo(y.h,l)&&y.I==3){try{var D=y.Ba.g.parse(p)}catch{D=null}if(Array.isArray(D)&&D.length==3){var N=D;if(N[0]==0){e:if(!y.v){if(y.g)if(y.g.F+3e3<l.F)ic(y),ti(y);else break e;os(y),wt(18)}}else y.xa=N[1],0<y.xa-y.K&&N[2]<37500&&y.F&&y.A==0&&!y.C&&(y.C=mn(d(y.Va,y),6e3));_r(y.h)<=1&&y.ta&&(y.ta=void 0)}else Ir(y,11)}else if((l.L||y.g==l)&&ic(y),!v(p))for(N=y.Ba.g.parse(p),p=0;p<N.length;p++){let f=N[p],m=f[0];if(!(m<=y.K))if(y.K=m,f=f[1],y.I==2)if(f[0]=="c"){y.M=f[1],y.ba=f[2];let A=f[3];A!=null&&(y.ka=A,y.j.info("VER="+y.ka));let P=f[4];P!=null&&(y.za=P,y.j.info("SVER="+y.za));let O=f[5];O!=null&&typeof O=="number"&&O>0&&(D=1.5*O,y.O=D,y.j.info("backChannelRequestTimeoutMs_="+D)),D=y;let B=l.g;if(B){let Ne=B.g?B.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ne){var x=D.h;x.g||Ne.indexOf("spdy")==-1&&Ne.indexOf("quic")==-1&&Ne.indexOf("h2")==-1||(x.j=x.l,x.g=new Set,x.h&&(fl(x,x.h),x.h=null))}if(D.G){let nt=B.g?B.g.getResponseHeader("X-HTTP-Session-Id"):null;nt&&(D.wa=nt,$e(D.J,D.G,nt))}}y.I=3,y.l&&y.l.ra(),y.aa&&(y.T=Date.now()-l.F,y.j.info("Handshake RTT: "+y.T+"ms")),D=y;var H=l;if(D.na=sc(D,D.L?D.ba:null,D.W),H.L){pl(D.h,H);var ie=H,u=D.O;u&&(ie.H=u),ie.D&&(Qa(ie),Yi(ie)),D.g=H}else nc(D);y.i.length>0&&un(y)}else f[0]!="stop"&&f[0]!="close"||Ir(y,7);else y.I==3&&(f[0]=="stop"||f[0]=="close"?f[0]=="stop"?Ir(y,7):tc(y):f[0]!="noop"&&y.l&&y.l.qa(f),y.A=0)}}qi(4)}catch{}}var vf=class{constructor(l,p){this.g=l,this.map=p}};function Ya(l){this.l=l||10,o.PerformanceNavigationTiming?(l=o.performance.getEntriesByType("navigation"),l=l.length>0&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Zi(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function _r(l){return l.h?1:l.g?l.g.size:0}function fo(l,p){return l.h?l.h==p:l.g?l.g.has(p):!1}function fl(l,p){l.g?l.g.add(p):l.h=p}function pl(l,p){l.h&&l.h==p?l.h=null:l.g&&l.g.has(p)&&l.g.delete(p)}Ya.prototype.cancel=function(){if(this.i=gl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let l of this.g.values())l.cancel();this.g.clear()}};function gl(l){if(l.h!=null)return l.i.concat(l.h.G);if(l.g!=null&&l.g.size!==0){let p=l.i;for(let y of l.g.values())p=p.concat(y.G);return p}return S(l.i)}var ml=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function yl(l,p){if(l){l=l.split("&");for(let y=0;y<l.length;y++){let D=l[y].indexOf("="),N,x=null;D>=0?(N=l[y].substring(0,D),x=l[y].substring(D+1)):N=l[y],p(N,x?decodeURIComponent(x.replace(/\+/g," ")):"")}}}function Pn(l){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let p;l instanceof Pn?(this.l=l.l,es(this,l.j),this.o=l.o,this.g=l.g,po(this,l.u),this.h=l.h,_l(this,bf(l.i)),this.m=l.m):l&&(p=String(l).match(ml))?(this.l=!1,es(this,p[1]||"",!0),this.o=mo(p[2]||""),this.g=mo(p[3]||"",!0),po(this,p[4]),this.h=mo(p[5]||"",!0),_l(this,p[6]||"",!0),this.m=mo(p[7]||"")):(this.l=!1,this.i=new zn(null,this.l))}Pn.prototype.toString=function(){let l=[];var p=this.j;p&&l.push(_n(p,yo,!0),":");var y=this.g;return(y||p=="file")&&(l.push("//"),(p=this.o)&&l.push(_n(p,yo,!0),"@"),l.push(co(y).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.u,y!=null&&l.push(":",String(y))),(y=this.h)&&(this.g&&y.charAt(0)!="/"&&l.push("/"),l.push(_n(y,y.charAt(0)=="/"?If:Ja,!0))),(y=this.i.toString())&&l.push("?",y),(y=this.m)&&l.push("#",_n(y,Xa)),l.join("")},Pn.prototype.resolve=function(l){let p=yn(this),y=!!l.j;y?es(p,l.j):y=!!l.o,y?p.o=l.o:y=!!l.g,y?p.g=l.g:y=l.u!=null;var D=l.h;if(y)po(p,l.u);else if(y=!!l.h){if(D.charAt(0)!="/")if(this.g&&!this.h)D="/"+D;else{var N=p.h.lastIndexOf("/");N!=-1&&(D=p.h.slice(0,N+1)+D)}if(N=D,N==".."||N==".")D="";else if(N.indexOf("./")!=-1||N.indexOf("/.")!=-1){D=N.lastIndexOf("/",0)==0,N=N.split("/");let x=[];for(let H=0;H<N.length;){let ie=N[H++];ie=="."?D&&H==N.length&&x.push(""):ie==".."?((x.length>1||x.length==1&&x[0]!="")&&x.pop(),D&&H==N.length&&x.push("")):(x.push(ie),D=!0)}D=x.join("/")}else D=N}return y?p.h=D:y=l.i.toString()!=="",y?_l(p,bf(l.i)):y=!!l.m,y&&(p.m=l.m),p};function yn(l){return new Pn(l)}function es(l,p,y){l.j=y?mo(p,!0):p,l.j&&(l.j=l.j.replace(/:$/,""))}function po(l,p){if(p){if(p=Number(p),isNaN(p)||p<0)throw Error("Bad port number "+p);l.u=p}else l.u=null}function _l(l,p,y){p instanceof zn?(l.i=p,_o(l.i,l.l)):(y||(p=_n(p,Ge)),l.i=new zn(p,l.l))}function $e(l,p,y){l.i.set(p,y)}function go(l){return $e(l,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),l}function mo(l,p){return l?p?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function _n(l,p,y){return typeof l=="string"?(l=encodeURI(l).replace(p,qn),y&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function qn(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var yo=/[#\/\?@]/g,Ja=/[#\?:]/g,If=/[#\?]/g,Ge=/[#\?@]/g,Xa=/#/g;function zn(l,p){this.h=this.g=null,this.i=l||null,this.j=!!p}function vn(l){l.g||(l.g=new Map,l.h=0,l.i&&yl(l.i,function(p,y){l.add(decodeURIComponent(p.replace(/\+/g," ")),y)}))}n=zn.prototype,n.add=function(l,p){vn(this),this.i=null,l=ts(this,l);let y=this.g.get(l);return y||this.g.set(l,y=[]),y.push(p),this.h+=1,this};function Ef(l,p){vn(l),p=ts(l,p),l.g.has(p)&&(l.i=null,l.h-=l.g.get(p).length,l.g.delete(p))}function vl(l,p){return vn(l),p=ts(l,p),l.g.has(p)}n.forEach=function(l,p){vn(this),this.g.forEach(function(y,D){y.forEach(function(N){l.call(p,N,D,this)},this)},this)};function wf(l,p){vn(l);let y=[];if(typeof p=="string")vl(l,p)&&(y=y.concat(l.g.get(ts(l,p))));else for(l=Array.from(l.g.values()),p=0;p<l.length;p++)y=y.concat(l[p]);return y}n.set=function(l,p){return vn(this),this.i=null,l=ts(this,l),vl(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[p]),this.h+=1,this},n.get=function(l,p){return l?(l=wf(this,l),l.length>0?String(l[0]):p):p};function Tf(l,p,y){Ef(l,p),y.length>0&&(l.i=null,l.g.set(ts(l,p),S(y)),l.h+=y.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let l=[],p=Array.from(this.g.keys());for(let D=0;D<p.length;D++){var y=p[D];let N=co(y);y=wf(this,y);for(let x=0;x<y.length;x++){let H=N;y[x]!==""&&(H+="="+co(y[x])),l.push(H)}}return this.i=l.join("&")};function bf(l){let p=new zn;return p.i=l.i,l.g&&(p.g=new Map(l.g),p.h=l.h),p}function ts(l,p){return p=String(p),l.j&&(p=p.toLowerCase()),p}function _o(l,p){p&&!l.j&&(vn(l),l.i=null,l.g.forEach(function(y,D){let N=D.toLowerCase();D!=N&&(Ef(this,D),Tf(this,N,y))},l)),l.j=p}function vr(l,p){let y=new Gi;if(o.Image){let D=new Image;D.onload=h(Gn,y,"TestLoadImage: loaded",!0,p,D),D.onerror=h(Gn,y,"TestLoadImage: error",!1,p,D),D.onabort=h(Gn,y,"TestLoadImage: abort",!1,p,D),D.ontimeout=h(Gn,y,"TestLoadImage: timeout",!1,p,D),o.setTimeout(function(){D.ontimeout&&D.ontimeout()},1e4),D.src=l}else p(!1)}function Af(l,p){let y=new Gi,D=new AbortController,N=setTimeout(()=>{D.abort(),Gn(y,"TestPingServer: timeout",!1,p)},1e4);fetch(l,{signal:D.signal}).then(x=>{clearTimeout(N),x.ok?Gn(y,"TestPingServer: ok",!0,p):Gn(y,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(N),Gn(y,"TestPingServer: error",!1,p)})}function Gn(l,p,y,D,N){try{N&&(N.onload=null,N.onerror=null,N.onabort=null,N.ontimeout=null),D(y)}catch{}}function Sf(){this.g=new hf}function Wn(l){this.i=l.Sb||null,this.h=l.ab||!1}g(Wn,ff),Wn.prototype.g=function(){return new Za(this.i,this.h)};function Za(l,p){vt.call(this),this.H=l,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}g(Za,vt),n=Za.prototype,n.open=function(l,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=l,this.D=p,this.readyState=1,cn(this)},n.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;let p={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};l&&(p.body=l),(this.H||o).fetch(new Request(this.D,p)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,vo(this)),this.readyState=0},n.Pa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,cn(this)),this.g&&(this.readyState=3,cn(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Df(this)}else l.text().then(this.Oa.bind(this),this.ga.bind(this))};function Df(l){l.j.read().then(l.Ma.bind(l)).catch(l.ga.bind(l))}n.Ma=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var p=l.value?l.value:new Uint8Array(0);(p=this.B.decode(p,{stream:!l.done}))&&(this.response=this.responseText+=p)}l.done?vo(this):cn(this),this.readyState==3&&Df(this)}},n.Oa=function(l){this.g&&(this.response=this.responseText=l,vo(this))},n.Na=function(l){this.g&&(this.response=l,vo(this))},n.ga=function(){this.g&&vo(this)};function vo(l){l.readyState=4,l.l=null,l.j=null,l.B=null,cn(l)}n.setRequestHeader=function(l,p){this.A.append(l,p)},n.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let l=[],p=this.h.entries();for(var y=p.next();!y.done;)y=y.value,l.push(y[0]+": "+y[1]),y=p.next();return l.join(`\r
`)};function cn(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Za.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Cf(l){let p="";return Ui(l,function(y,D){p+=D,p+=":",p+=y,p+=`\r
`}),p}function Il(l,p,y){e:{for(D in y){var D=!1;break e}D=!0}D||(y=Cf(y),typeof l=="string"?y!=null&&co(y):$e(l,p,y))}function He(l){vt.call(this),this.headers=new Map,this.L=l||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}g(He,vt);var ec=/^https?$/i,Rf=["POST","PUT"];n=He.prototype,n.Fa=function(l){this.H=l},n.ea=function(l,p,y,D){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);p=p?p.toUpperCase():"GET",this.D=l,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ki.g(),this.g.onreadystatechange=E(d(this.Ca,this));try{this.B=!0,this.g.open(p,String(l),!0),this.B=!1}catch(x){ns(this,x);return}if(l=y||"",y=new Map(this.headers),D)if(Object.getPrototypeOf(D)===Object.prototype)for(var N in D)y.set(N,D[N]);else if(typeof D.keys=="function"&&typeof D.get=="function")for(let x of D.keys())y.set(x,D.get(x));else throw Error("Unknown input type for opt_headers: "+String(D));D=Array.from(y.keys()).find(x=>x.toLowerCase()=="content-type"),N=o.FormData&&l instanceof o.FormData,!(Array.prototype.indexOf.call(Rf,p,void 0)>=0)||D||N||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[x,H]of y)this.g.setRequestHeader(x,H);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(l),this.v=!1}catch(x){ns(this,x)}};function ns(l,p){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=p,l.o=5,rs(l),is(l)}function rs(l){l.A||(l.A=!0,It(l,"complete"),It(l,"error"))}n.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=l||7,It(this,"complete"),It(this,"abort"),is(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),is(this,!0)),He.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?El(this):this.Xa())},n.Xa=function(){El(this)};function El(l){if(l.h&&typeof s<"u"){if(l.v&&ke(l)==4)setTimeout(l.Ca.bind(l),0);else if(It(l,"readystatechange"),ke(l)==4){l.h=!1;try{let x=l.ca();e:switch(x){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var y;if(!(y=p)){var D;if(D=x===0){let H=String(l.D).match(ml)[1]||null;!H&&o.self&&o.self.location&&(H=o.self.location.protocol.slice(0,-1)),D=!ec.test(H?H.toLowerCase():"")}y=D}if(y)It(l,"complete"),It(l,"success");else{l.o=6;try{var N=ke(l)>2?l.g.statusText:""}catch{N=""}l.l=N+" ["+l.ca()+"]",rs(l)}}finally{is(l)}}}}function is(l,p){if(l.g){l.m&&(clearTimeout(l.m),l.m=null);let y=l.g;l.g=null,p||It(l,"ready");try{y.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function ke(l){return l.g?l.g.readyState:0}n.ca=function(){try{return ke(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(l){if(this.g){var p=this.g.responseText;return l&&p.indexOf(l)==0&&(p=p.substring(l.length)),df(p)}};function Nf(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.F){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function W_(l){let p={};l=(l.g&&ke(l)>=2&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let D=0;D<l.length;D++){if(v(l[D]))continue;var y=Qi(l[D]);let N=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();let x=p[N]||[];p[N]=x,x.push(y)}af(p,function(D){return D.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ss(l,p,y){return y&&y.internalChannelParams&&y.internalChannelParams[l]||p}function wl(l){this.za=0,this.i=[],this.j=new Gi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ss("failFast",!1,l),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ss("baseRetryDelayMs",5e3,l),this.Za=ss("retryDelaySeedMs",1e4,l),this.Ta=ss("forwardChannelMaxRetries",2,l),this.va=ss("forwardChannelRequestTimeoutMs",2e4,l),this.ma=l&&l.xmlHttpFactory||void 0,this.Ua=l&&l.Rb||void 0,this.Aa=l&&l.useFetchStreams||!1,this.O=void 0,this.L=l&&l.supportsCrossDomainXhr||!1,this.M="",this.h=new Ya(l&&l.concurrentRequestLimit),this.Ba=new Sf,this.S=l&&l.fastHandshake||!1,this.R=l&&l.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=l&&l.Pb||!1,l&&l.ua&&this.j.ua(),l&&l.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&l&&l.detectBufferingProxy||!1,this.ia=void 0,l&&l.longPollingTimeout&&l.longPollingTimeout>0&&(this.ia=l.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=wl.prototype,n.ka=8,n.I=1,n.connect=function(l,p,y,D){wt(0),this.W=l,this.H=p||{},y&&D!==void 0&&(this.H.OSID=y,this.H.OAID=D),this.F=this.X,this.J=sc(this,null,this.W),un(this)};function tc(l){if(Tl(l),l.I==3){var p=l.V++,y=yn(l.J);if($e(y,"SID",l.M),$e(y,"RID",p),$e(y,"TYPE","terminate"),Kn(l,y),p=new mr(l,l.j,p),p.M=2,p.A=go(yn(y)),y=!1,o.navigator&&o.navigator.sendBeacon)try{y=o.navigator.sendBeacon(p.A.toString(),"")}catch{}!y&&o.Image&&(new Image().src=p.A,y=!0),y||(p.g=oc(p.j,null),p.g.ea(p.A)),p.F=Date.now(),Yi(p)}Sl(l)}function ti(l){l.g&&(rc(l),l.g.cancel(),l.g=null)}function Tl(l){ti(l),l.v&&(o.clearTimeout(l.v),l.v=null),ic(l),l.h.cancel(),l.m&&(typeof l.m=="number"&&o.clearTimeout(l.m),l.m=null)}function un(l){if(!Zi(l.h)&&!l.m){l.m=!0;var p=l.Ea;ze||_(),re||(ze(),re=!0),b.add(p,l),l.D=0}}function Pf(l,p){return _r(l.h)>=l.h.j-(l.m?1:0)?!1:l.m?(l.i=p.G.concat(l.i),!0):l.I==1||l.I==2||l.D>=(l.Sa?0:l.Ta)?!1:(l.m=mn(d(l.Ea,l,p),as(l,l.D)),l.D++,!0)}n.Ea=function(l){if(this.m)if(this.m=null,this.I==1){if(!l){this.V=Math.floor(Math.random()*1e5),l=this.V++;let N=new mr(this,this.j,l),x=this.o;if(this.U&&(x?(x=cf(x),_t(x,this.U)):x=this.U),this.u!==null||this.R||(N.J=x,x=null),this.S)e:{for(var p=0,y=0;y<this.i.length;y++){t:{var D=this.i[y];if("__data__"in D.map&&(D=D.map.__data__,typeof D=="string")){D=D.length;break t}D=void 0}if(D===void 0)break;if(p+=D,p>4096){p=y;break e}if(p===4096||y===this.i.length-1){p=y+1;break e}}p=1e3}else p=1e3;p=bl(this,N,p),y=yn(this.J),$e(y,"RID",l),$e(y,"CVER",22),this.G&&$e(y,"X-HTTP-Session-Id",this.G),Kn(this,y),x&&(this.R?p="headers="+co(Cf(x))+"&"+p:this.u&&Il(y,this.u,x)),fl(this.h,N),this.Ra&&$e(y,"TYPE","init"),this.S?($e(y,"$req",p),$e(y,"SID","null"),N.U=!0,lo(N,y,null)):lo(N,y,p),this.I=2}}else this.I==3&&(l?kf(this,l):this.i.length==0||Zi(this.h)||kf(this))};function kf(l,p){var y;p?y=p.l:y=l.V++;let D=yn(l.J);$e(D,"SID",l.M),$e(D,"RID",y),$e(D,"AID",l.K),Kn(l,D),l.u&&l.o&&Il(D,l.u,l.o),y=new mr(l,l.j,y,l.D+1),l.u===null&&(y.J=l.o),p&&(l.i=p.G.concat(l.i)),p=bl(l,y,1e3),y.H=Math.round(l.va*.5)+Math.round(l.va*.5*Math.random()),fl(l.h,y),lo(y,D,p)}function Kn(l,p){l.H&&Ui(l.H,function(y,D){$e(p,D,y)}),l.l&&Ui({},function(y,D){$e(p,D,y)})}function bl(l,p,y){y=Math.min(l.i.length,y);let D=l.l?d(l.l.Ka,l.l,l):null;e:{var N=l.i;let ie=-1;for(;;){let u=["count="+y];ie==-1?y>0?(ie=N[0].g,u.push("ofs="+ie)):ie=0:u.push("ofs="+ie);let f=!0;for(let m=0;m<y;m++){var x=N[m].g;let A=N[m].map;if(x-=ie,x<0)ie=Math.max(0,N[m].g-100),f=!1;else try{x="req"+x+"_"||"";try{var H=A instanceof Map?A:Object.entries(A);for(let[P,O]of H){let B=O;a(O)&&(B=ji(O)),u.push(x+P+"="+encodeURIComponent(B))}}catch(P){throw u.push(x+"type="+encodeURIComponent("_badmap")),P}}catch{D&&D(A)}}if(f){H=u.join("&");break e}}H=void 0}return l=l.i.splice(0,y),p.G=l,H}function nc(l){if(!l.g&&!l.v){l.Y=1;var p=l.Da;ze||_(),re||(ze(),re=!0),b.add(p,l),l.A=0}}function os(l){return l.g||l.v||l.A>=3?!1:(l.Y++,l.v=mn(d(l.Da,l),as(l,l.A)),l.A++,!0)}n.Da=function(){if(this.v=null,Io(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var l=4*this.T;this.j.info("BP detection timer enabled: "+l),this.B=mn(d(this.Wa,this),l)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,wt(10),ti(this),Io(this))};function rc(l){l.B!=null&&(o.clearTimeout(l.B),l.B=null)}function Io(l){l.g=new mr(l,l.j,"rpc",l.Y),l.u===null&&(l.g.J=l.o),l.g.P=0;var p=yn(l.na);$e(p,"RID","rpc"),$e(p,"SID",l.M),$e(p,"AID",l.K),$e(p,"CI",l.F?"0":"1"),!l.F&&l.ia&&$e(p,"TO",l.ia),$e(p,"TYPE","xmlhttp"),Kn(l,p),l.u&&l.o&&Il(p,l.u,l.o),l.O&&(l.g.H=l.O);var y=l.g;l=l.ba,y.M=1,y.A=go(yn(p)),y.u=null,y.R=!0,ho(y,l)}n.Va=function(){this.C!=null&&(this.C=null,ti(this),os(this),wt(19))};function ic(l){l.C!=null&&(o.clearTimeout(l.C),l.C=null)}function Al(l,p){var y=null;if(l.g==p){ic(l),rc(l),l.g=null;var D=2}else if(fo(l.h,p))y=p.G,pl(l.h,p),D=1;else return;if(l.I!=0){if(p.o)if(D==1){y=p.u?p.u.length:0,p=Date.now()-p.F;var N=l.D;D=Hi(),It(D,new za(D,y)),un(l)}else nc(l);else if(N=p.m,N==3||N==0&&p.X>0||!(D==1&&Pf(l,p)||D==2&&os(l)))switch(y&&y.length>0&&(p=l.h,p.i=p.i.concat(y)),N){case 1:Ir(l,5);break;case 4:Ir(l,10);break;case 3:Ir(l,6);break;default:Ir(l,2)}}}function as(l,p){let y=l.Qa+Math.floor(Math.random()*l.Za);return l.isActive()||(y*=2),y*p}function Ir(l,p){if(l.j.info("Error code "+p),p==2){var y=d(l.bb,l),D=l.Ua;let N=!D;D=new Pn(D||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||es(D,"https"),go(D),N?vr(D.toString(),y):Af(D.toString(),y)}else wt(2);l.I=0,l.l&&l.l.pa(p),Sl(l),Tl(l)}n.bb=function(l){l?(this.j.info("Successfully pinged google.com"),wt(2)):(this.j.info("Failed to ping google.com"),wt(1))};function Sl(l){if(l.I=0,l.ja=[],l.l){let p=gl(l.h);(p.length!=0||l.i.length!=0)&&(R(l.ja,p),R(l.ja,l.i),l.h.i.length=0,S(l.i),l.i.length=0),l.l.oa()}}function sc(l,p,y){var D=y instanceof Pn?yn(y):new Pn(y);if(D.g!="")p&&(D.g=p+"."+D.g),po(D,D.u);else{var N=o.location;D=N.protocol,p=p?p+"."+N.hostname:N.hostname,N=+N.port;let x=new Pn(null);D&&es(x,D),p&&(x.g=p),N&&po(x,N),y&&(x.h=y),D=x}return y=l.G,p=l.wa,y&&p&&$e(D,y,p),$e(D,"VER",l.ka),Kn(l,D),D}function oc(l,p,y){if(p&&!l.L)throw Error("Can't create secondary domain capable XhrIo object.");return p=l.Aa&&!l.ma?new He(new Wn({ab:y})):new He(l.ma),p.Fa(l.L),p}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Dl(){}n=Dl.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function ni(){}ni.prototype.g=function(l,p){return new $t(l,p)};function $t(l,p){vt.call(this),this.g=new wl(p),this.l=l,this.h=p&&p.messageUrlParams||null,l=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(l?l["X-WebChannel-Content-Type"]=p.messageContentType:l={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.sa&&(l?l["X-WebChannel-Client-Profile"]=p.sa:l={"X-WebChannel-Client-Profile":p.sa}),this.g.U=l,(l=p&&p.Qb)&&!v(l)&&(this.g.u=l),this.A=p&&p.supportsCrossDomainXhr||!1,this.v=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!v(p)&&(this.g.G=p,l=this.h,l!==null&&p in l&&(l=this.h,p in l&&delete l[p])),this.j=new ri(this)}g($t,vt),$t.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},$t.prototype.close=function(){tc(this.g)},$t.prototype.o=function(l){var p=this.g;if(typeof l=="string"){var y={};y.__data__=l,l=y}else this.v&&(y={},y.__data__=ji(l),l=y);p.i.push(new vf(p.Ya++,l)),p.I==3&&un(p)},$t.prototype.N=function(){this.g.l=null,delete this.j,tc(this.g),delete this.g,$t.Z.N.call(this)};function Cl(l){qa.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var p=l.__sm__;if(p){e:{for(let y in p){l=y;break e}l=void 0}(this.i=l)&&(l=this.i,p=p!==null&&l in p?p[l]:void 0),this.data=p}else this.data=l}g(Cl,qa);function Er(){oo.call(this),this.status=1}g(Er,oo);function ri(l){this.g=l}g(ri,Dl),ri.prototype.ra=function(){It(this.g,"a")},ri.prototype.qa=function(l){It(this.g,new Cl(l))},ri.prototype.pa=function(l){It(this.g,new Er)},ri.prototype.oa=function(){It(this.g,"b")},ni.prototype.createWebChannel=ni.prototype.g,$t.prototype.send=$t.prototype.o,$t.prototype.open=$t.prototype.m,$t.prototype.close=$t.prototype.close,lb=Di.createWebChannelTransport=function(){return new ni},ub=Di.getStatEventTarget=function(){return Hi()},cb=Di.Event=Zr,sy=Di.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ao.NO_ERROR=0,ao.TIMEOUT=8,ao.HTTP_ERROR=6,dh=Di.ErrorCode=ao,Wi.COMPLETE="complete",ab=Di.EventType=Wi,Bi.EventType=$i,$i.OPEN="a",$i.CLOSE="b",$i.ERROR="c",$i.MESSAGE="d",vt.prototype.listen=vt.prototype.J,ou=Di.WebChannel=Bi,P5=Di.FetchXmlHttpFactory=Wn,He.prototype.listenOnce=He.prototype.K,He.prototype.getLastError=He.prototype.Ha,He.prototype.getLastErrorCode=He.prototype.ya,He.prototype.getStatus=He.prototype.ca,He.prototype.getResponseJson=He.prototype.La,He.prototype.getResponseText=He.prototype.la,He.prototype.send=He.prototype.ea,He.prototype.setWithCredentials=He.prototype.Fa,ob=Di.XhrIo=He}).apply(typeof iy<"u"?iy:typeof self<"u"?self:typeof window<"u"?window:{});var Yt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Yt.UNAUTHENTICATED=new Yt(null),Yt.GOOGLE_CREDENTIALS=new Yt("google-credentials-uid"),Yt.FIRST_PARTY=new Yt("first-party-uid"),Yt.MOCK_USER=new Yt("mock-user");var Cu="12.8.0";function VO(n){Cu=n}var ga=new Fs("@firebase/firestore");function au(){return ga.logLevel}function W(n,...e){if(ga.logLevel<=Ee.DEBUG){let t=e.map(VA);ga.debug(`Firestore (${Cu}): ${n}`,...t)}}function Ci(n,...e){if(ga.logLevel<=Ee.ERROR){let t=e.map(VA);ga.error(`Firestore (${Cu}): ${n}`,...t)}}function ma(n,...e){if(ga.logLevel<=Ee.WARN){let t=e.map(VA);ga.warn(`Firestore (${Cu}): ${n}`,...t)}}function VA(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function ae(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,UO(n,r,t)}function UO(n,e,t){let r=`FIRESTORE (${Cu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Ci(r),new Error(r)}function Je(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||UO(e,i,r)}function Ce(n,e){return n}var q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},X=class extends Vn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var $s=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var yb=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},dy=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Yt.UNAUTHENTICATED))}shutdown(){}};var hy=class{constructor(e){this.t=e,this.currentUser=Yt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Je(this.o===void 0,42304);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),s=new $s;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new $s,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},a=c=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new $s)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Je(typeof r.accessToken=="string",31837,{l:r}),new yb(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Je(e===null||typeof e=="string",2055,{h:e}),new Yt(e)}},_b=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Yt.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);let e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}},vb=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new _b(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Yt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},fy=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},py=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,wi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Je(this.o===void 0,3512);let r=s=>{s.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.m;return this.m=s.token,W("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.V.getImmediate({optional:!0});s?i(s):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new fy(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Je(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new fy(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function k5(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var mu=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=k5(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}};function Ae(n,e){return n<e?-1:n>e?1:0}function Ib(n,e){let t=Math.min(n.length,e.length);for(let r=0;r<t;r++){let i=n.charAt(r),s=e.charAt(r);if(i!==s)return db(i)===db(s)?Ae(i,s):db(i)?1:-1}return Ae(n.length,e.length)}var M5=55296,x5=57343;function db(n){let e=n.charCodeAt(0);return e>=M5&&e<=x5}function yu(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var Zx="__name__",gy=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&ae(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&ae(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=n.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return Ae(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):Ib(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Si.fromString(e.substring(4,e.length-2))}},ht=class n extends gy{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new X(q.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},O5=/^[_a-zA-Z][_a-zA-Z0-9]*$/,jn=class n extends gy{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return O5.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Zx}static keyField(){return new n([Zx])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new X(q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new X(q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new X(q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new X(q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var ne=class n{constructor(e){this.path=e}static fromPath(e){return new n(ht.fromString(e))}static fromName(e){return new n(ht.fromString(e).popFirst(5))}static empty(){return new n(ht.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ht.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ht.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new ht(e.slice()))}};function jO(n,e,t,r){if(e===!0&&r===!0)throw new X(q.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function L5(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function BO(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ae(12329,{type:typeof n})}function Mh(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new X(q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=BO(n);throw new X(q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function it(n,e){let t={typeString:n};return e&&(t.value=e),t}function Ru(n,e){if(!L5(n))throw new X(q.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let o=n[r];if(i&&typeof o!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){t=`Expected '${r}' field to equal '${s.value}'`;break}}if(t)throw new X(q.INVALID_ARGUMENT,t);return!0}var eO=-62135596800,tO=1e6,Jt=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*tO);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new X(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new X(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<eO)throw new X(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new X(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/tO}_compareTo(e){return this.seconds===e.seconds?Ae(this.nanoseconds,e.nanoseconds):Ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ru(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-eO;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Jt._jsonSchemaVersion="firestore/timestamp/1.0",Jt._jsonSchema={type:it("string",Jt._jsonSchemaVersion),seconds:it("number"),nanoseconds:it("number")};var pe=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new Jt(0,0))}static max(){return new n(new Jt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var yh=-1,my=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};my.UNKNOWN_ID=-1;function F5(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=pe.fromTimestamp(r===1e9?new Jt(t+1,0):new Jt(t,r));return new ya(i,ne.empty(),e)}function V5(n){return new ya(n.readTime,n.key,yh)}var ya=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(pe.min(),ne.empty(),yh)}static max(){return new n(pe.max(),ne.empty(),yh)}};function U5(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ne.comparator(n.documentKey,e.documentKey),t!==0?t:Ae(n.largestBatchId,e.largestBatchId))}var j5="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Eb=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};async function By(n){if(n.code!==q.FAILED_PRECONDITION||n.message!==j5)throw n;W("LocalStore","Unexpectedly lost primary lease")}var j=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ae(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},c=>r(c))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let d=c;t(e[d]).next(h=>{o[d]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};function B5(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Nu(n){return n.name==="IndexedDbTransactionError"}var UA=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>r.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ue&&this.ue(t),t}}n.ce=-1;return n})(),$5=-1;function $y(n){return n==null}function yy(n){return n===0&&1/n==-1/0}var $O="";function H5(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=nO(e)),e=q5(n.get(t),e);return nO(e)}function q5(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let s=n.charAt(i);switch(s){case"\0":t+="";break;case $O:t+="";break;default:t+=s}}return t}function nO(n){return n+$O+""}var z5="remoteDocuments",HO="owner";var qO="mutationQueues";var zO="mutations";var GO="documentMutations",G5="remoteDocumentsV14";var WO="remoteDocumentGlobal";var KO="targets";var QO="targetDocuments";var YO="targetGlobal",JO="collectionParents";var XO="clientMetadata";var ZO="bundles";var e1="namedQueries";var W5="indexConfiguration";var K5="indexState";var Q5="indexEntries";var t1="documentOverlays";var Y5="globals";var J5=[qO,zO,GO,z5,KO,HO,YO,QO,XO,WO,JO,ZO,e1],yye=[...J5,t1],X5=[qO,zO,GO,G5,KO,HO,YO,QO,XO,WO,JO,ZO,e1,t1],Z5=X5,eW=[...Z5,W5,K5,Q5];var _ye=[...eW,Y5];function rO(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function xh(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function tW(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var st=class n{constructor(e,t){this.comparator=e,this.root=t||jr.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,jr.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,jr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new du(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new du(this.root,e,this.comparator,!1)}getReverseIterator(){return new du(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new du(this.root,e,this.comparator,!0)}},du=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},jr=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ae(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ae(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw ae(27949);return e+(this.isRed()?0:1)}};jr.EMPTY=null,jr.RED=!0,jr.BLACK=!1;jr.EMPTY=new class{constructor(){this.size=0}get key(){throw ae(57766)}get value(){throw ae(16141)}get color(){throw ae(16727)}get left(){throw ae(29726)}get right(){throw ae(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new jr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Nt=class n{constructor(e){this.comparator=e,this.data=new st(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new _y(this.data.getIterator())}getIteratorFrom(e){return new _y(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},_y=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var la=class n{constructor(e){this.fields=e,e.sort(jn.comparator)}static empty(){return new n([])}unionWith(e){let t=new Nt(jn.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return yu(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var vy=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Bt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new vy("Invalid base64 string: "+s):s}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Bt.EMPTY_BYTE_STRING=new Bt("");var nW=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ri(n){if(Je(!!n,39018),typeof n=="string"){let e=0,t=nW.exec(n);if(Je(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Qe(n.seconds),nanos:Qe(n.nanos)}}function Qe(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ni(n){return typeof n=="string"?Bt.fromBase64String(n):Bt.fromUint8Array(n)}var n1="server_timestamp",r1="__type__",i1="__previous_value__",s1="__local_write_time__";function Hy(n){return(n?.mapValue?.fields||{})[r1]?.stringValue===n1}function qy(n){let e=n.mapValue.fields[i1];return Hy(e)?qy(e):e}function _h(n){let e=Ri(n.mapValue.fields[s1].timestampValue);return new Jt(e.seconds,e.nanos)}var wb=class{constructor(e,t,r,i,s,o,a,c,d,h,g){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=d,this.isUsingEmulator=h,this.apiKey=g}},Tb="(default)",vh=class n{constructor(e,t){this.projectId=e,this.database=t||Tb}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===Tb}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};function o1(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new X(q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new vh(n.options.projectId,e)}var a1="__type__",c1="__max__",oy={mapValue:{fields:{__type__:{stringValue:c1}}}},u1="__vector__",Ih="value";function qs(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Hy(n)?4:d1(n)?9007199254740991:l1(n)?10:11:ae(28295,{value:n})}function $r(n,e){if(n===e)return!0;let t=qs(n);if(t!==qs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return _h(n).isEqual(_h(e));case 3:return(function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=Ri(i.timestampValue),a=Ri(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,s){return Ni(i.bytesValue).isEqual(Ni(s.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,s){return Qe(i.geoPointValue.latitude)===Qe(s.geoPointValue.latitude)&&Qe(i.geoPointValue.longitude)===Qe(s.geoPointValue.longitude)})(n,e);case 2:return(function(i,s){if("integerValue"in i&&"integerValue"in s)return Qe(i.integerValue)===Qe(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=Qe(i.doubleValue),a=Qe(s.doubleValue);return o===a?yy(o)===yy(a):isNaN(o)&&isNaN(a)}return!1})(n,e);case 9:return yu(n.arrayValue.values||[],e.arrayValue.values||[],$r);case 10:case 11:return(function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(rO(o)!==rO(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!$r(o[c],a[c])))return!1;return!0})(n,e);default:return ae(52216,{left:n})}}function Eh(n,e){return(n.values||[]).find(t=>$r(t,e))!==void 0}function _u(n,e){if(n===e)return 0;let t=qs(n),r=qs(e);if(t!==r)return Ae(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ae(n.booleanValue,e.booleanValue);case 2:return(function(s,o){let a=Qe(s.integerValue||s.doubleValue),c=Qe(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1})(n,e);case 3:return iO(n.timestampValue,e.timestampValue);case 4:return iO(_h(n),_h(e));case 5:return Ib(n.stringValue,e.stringValue);case 6:return(function(s,o){let a=Ni(s),c=Ni(o);return a.compareTo(c)})(n.bytesValue,e.bytesValue);case 7:return(function(s,o){let a=s.split("/"),c=o.split("/");for(let d=0;d<a.length&&d<c.length;d++){let h=Ae(a[d],c[d]);if(h!==0)return h}return Ae(a.length,c.length)})(n.referenceValue,e.referenceValue);case 8:return(function(s,o){let a=Ae(Qe(s.latitude),Qe(o.latitude));return a!==0?a:Ae(Qe(s.longitude),Qe(o.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return sO(n.arrayValue,e.arrayValue);case 10:return(function(s,o){let a=s.fields||{},c=o.fields||{},d=a[Ih]?.arrayValue,h=c[Ih]?.arrayValue,g=Ae(d?.values?.length||0,h?.values?.length||0);return g!==0?g:sO(d,h)})(n.mapValue,e.mapValue);case 11:return(function(s,o){if(s===oy.mapValue&&o===oy.mapValue)return 0;if(s===oy.mapValue)return 1;if(o===oy.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),d=o.fields||{},h=Object.keys(d);c.sort(),h.sort();for(let g=0;g<c.length&&g<h.length;++g){let E=Ib(c[g],h[g]);if(E!==0)return E;let S=_u(a[c[g]],d[h[g]]);if(S!==0)return S}return Ae(c.length,h.length)})(n.mapValue,e.mapValue);default:throw ae(23264,{he:t})}}function iO(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ae(n,e);let t=Ri(n),r=Ri(e),i=Ae(t.seconds,r.seconds);return i!==0?i:Ae(t.nanos,r.nanos)}function sO(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=_u(t[i],r[i]);if(s)return s}return Ae(t.length,r.length)}function vu(n){return bb(n)}function bb(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=Ri(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Ni(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return ne.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=bb(s);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${bb(t.fields[o])}`;return i+"}"})(n.mapValue):ae(61005,{value:n})}function uy(n){switch(qs(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=qy(n);return e?16+uy(e):16;case 5:return 2*n.stringValue.length;case 6:return Ni(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,s)=>i+uy(s),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return xh(r.fields,(s,o)=>{i+=s.length+uy(o)}),i})(n.mapValue);default:throw ae(13486,{value:n})}}function Ab(n){return!!n&&"integerValue"in n}function jA(n){return!!n&&"arrayValue"in n}function oO(n){return!!n&&"nullValue"in n}function aO(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function hb(n){return!!n&&"mapValue"in n}function l1(n){return(n?.mapValue?.fields||{})[a1]?.stringValue===u1}function ph(n){if(n.geoPointValue)return{geoPointValue:$({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:$({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return xh(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=ph(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ph(n.arrayValue.values[t]);return e}return $({},n)}function d1(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===c1}var Iye={mapValue:{fields:{[a1]:{stringValue:u1},[Ih]:{arrayValue:{}}}}};var Ur=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!hb(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ph(t)}setAll(e){let t=jn.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=ph(o):i.push(a.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());hb(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return $r(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];hb(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){xh(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(ph(this.value))}};var hr=class n{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,pe.min(),pe.min(),pe.min(),Ur.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,pe.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,pe.min(),pe.min(),Ur.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,pe.min(),pe.min(),Ur.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(pe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ur.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ur.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=pe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var _a=class{constructor(e,t){this.position=e,this.inclusive=t}};function cO(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField()?r=ne.comparator(ne.fromName(o.referenceValue),t.key):r=_u(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function uO(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!$r(n.position[t],e.position[t]))return!1;return!0}var va=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function rW(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Iy=class{},ft=class n extends Iy{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Db(e,t,r):t==="array-contains"?new Nb(e,r):t==="in"?new Pb(e,r):t==="not-in"?new kb(e,r):t==="array-contains-any"?new Mb(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Cb(e,r):new Rb(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(_u(t,this.value)):t!==null&&qs(this.value)===qs(t)&&this.matchesComparison(_u(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ae(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},fr=class n extends Iy{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new n(e,t)}matches(e){return h1(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function h1(n){return n.op==="and"}function f1(n){return iW(n)&&h1(n)}function iW(n){for(let e of n.filters)if(e instanceof fr)return!1;return!0}function Sb(n){if(n instanceof ft)return n.field.canonicalString()+n.op.toString()+vu(n.value);if(f1(n))return n.filters.map(e=>Sb(e)).join(",");{let e=n.filters.map(t=>Sb(t)).join(",");return`${n.op}(${e})`}}function p1(n,e){return n instanceof ft?(function(r,i){return i instanceof ft&&r.op===i.op&&r.field.isEqual(i.field)&&$r(r.value,i.value)})(n,e):n instanceof fr?(function(r,i){return i instanceof fr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&p1(o,i.filters[a]),!0):!1})(n,e):void ae(19439)}function g1(n){return n instanceof ft?(function(t){return`${t.field.canonicalString()} ${t.op} ${vu(t.value)}`})(n):n instanceof fr?(function(t){return t.op.toString()+" {"+t.getFilters().map(g1).join(" ,")+"}"})(n):"Filter"}var Db=class extends ft{constructor(e,t,r){super(e,t,r),this.key=ne.fromName(r.referenceValue)}matches(e){let t=ne.comparator(e.key,this.key);return this.matchesComparison(t)}},Cb=class extends ft{constructor(e,t){super(e,"in",t),this.keys=m1("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},Rb=class extends ft{constructor(e,t){super(e,"not-in",t),this.keys=m1("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function m1(n,e){return(e.arrayValue?.values||[]).map(t=>ne.fromName(t.referenceValue))}var Nb=class extends ft{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return jA(t)&&Eh(t.arrayValue,this.value)}},Pb=class extends ft{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Eh(this.value.arrayValue,t)}},kb=class extends ft{constructor(e,t){super(e,"not-in",t)}matches(e){if(Eh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Eh(this.value.arrayValue,t)}},Mb=class extends ft{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!jA(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Eh(this.value.arrayValue,r))}};var xb=class{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Te=null}};function lO(n,e=null,t=[],r=[],i=null,s=null,o=null){return new xb(n,e,t,r,i,s,o)}function BA(n){let e=Ce(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Sb(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(s){return s.field.canonicalString()+s.dir})(r)).join(","),$y(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>vu(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>vu(r)).join(",")),e.Te=t}return e.Te}function $A(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!rW(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!p1(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!uO(n.startAt,e.startAt)&&uO(n.endAt,e.endAt)}function Ob(n){return ne.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Iu=class{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}};function sW(n,e,t,r,i,s,o,a){return new Iu(n,e,t,r,i,s,o,a)}function zy(n){return new Iu(n)}function dO(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function oW(n){return ne.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function y1(n){return n.collectionGroup!==null}function hu(n){let e=Ce(n);if(e.Ie===null){e.Ie=[];let t=new Set;for(let s of e.explicitOrderBy)e.Ie.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Nt(jn.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(a=a.add(d.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new va(s,r))}),t.has(jn.keyField().canonicalString())||e.Ie.push(new va(jn.keyField(),r))}return e.Ie}function Br(n){let e=Ce(n);return e.Ee||(e.Ee=aW(e,hu(n))),e.Ee}function aW(n,e){if(n.limitType==="F")return lO(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new va(i.field,s)});let t=n.endAt?new _a(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new _a(n.startAt.position,n.startAt.inclusive):null;return lO(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Ey(n,e,t){return new Iu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Gy(n,e){return $A(Br(n),Br(e))&&n.limitType===e.limitType}function _1(n){return`${BA(Br(n))}|lt:${n.limitType}`}function cu(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>g1(i)).join(", ")}]`),$y(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>vu(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>vu(i)).join(",")),`Target(${r})`})(Br(n))}; limitType=${n.limitType})`}function Wy(n,e){return e.isFoundDocument()&&(function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ne.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)})(n,e)&&(function(r,i){for(let s of hu(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(o,a,c){let d=cO(o,a,c);return o.inclusive?d<=0:d<0})(r.startAt,hu(r),i)||r.endAt&&!(function(o,a,c){let d=cO(o,a,c);return o.inclusive?d>=0:d>0})(r.endAt,hu(r),i))})(n,e)}function cW(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function v1(n){return(e,t)=>{let r=!1;for(let i of hu(n)){let s=uW(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function uW(n,e,t){let r=n.field.isKeyField()?ne.comparator(e.key,t.key):(function(s,o,a){let c=o.data.field(s),d=a.data.field(s);return c!==null&&d!==null?_u(c,d):ae(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ae(19790,{direction:n.dir})}}var Pi=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){xh(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return tW(this.inner)}size(){return this.innerSize}};var lW=new st(ne.comparator);function zs(){return lW}var I1=new st(ne.comparator);function fh(...n){let e=I1;for(let t of n)e=e.insert(t.key,t);return e}function dW(n){let e=I1;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function da(){return gh()}function E1(){return gh()}function gh(){return new Pi(n=>n.toString(),(n,e)=>n.isEqual(e))}var Eye=new st(ne.comparator),hW=new Nt(ne.comparator);function De(...n){let e=hW;for(let t of n)e=e.add(t);return e}var fW=new Nt(Ae);function pW(){return fW}function gW(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:yy(e)?"-0":e}}function mW(n){return{integerValue:""+n}}var Eu=class{constructor(){this._=void 0}};function yW(n,e,t){return n instanceof wh?(function(i,s){let o={fields:{[r1]:{stringValue:n1},[s1]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Hy(s)&&(s=qy(s)),s&&(o.fields[i1]=s),{mapValue:o}})(t,e):n instanceof wu?w1(n,e):n instanceof Tu?T1(n,e):(function(i,s){let o=vW(i,s),a=hO(o)+hO(i.Ae);return Ab(o)&&Ab(i.Ae)?mW(a):gW(i.serializer,a)})(n,e)}function _W(n,e,t){return n instanceof wu?w1(n,e):n instanceof Tu?T1(n,e):t}function vW(n,e){return n instanceof Th?(function(r){return Ab(r)||(function(s){return!!s&&"doubleValue"in s})(r)})(e)?e:{integerValue:0}:null}var wh=class extends Eu{},wu=class extends Eu{constructor(e){super(),this.elements=e}};function w1(n,e){let t=b1(e);for(let r of n.elements)t.some(i=>$r(i,r))||t.push(r);return{arrayValue:{values:t}}}var Tu=class extends Eu{constructor(e){super(),this.elements=e}};function T1(n,e){let t=b1(e);for(let r of n.elements)t=t.filter(i=>!$r(i,r));return{arrayValue:{values:t}}}var Th=class extends Eu{constructor(e,t){super(),this.serializer=e,this.Ae=t}};function hO(n){return Qe(n.integerValue||n.doubleValue)}function b1(n){return jA(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function IW(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof wu&&i instanceof wu||r instanceof Tu&&i instanceof Tu?yu(r.elements,i.elements,$r):r instanceof Th&&i instanceof Th?$r(r.Ae,i.Ae):r instanceof wh&&i instanceof wh})(n.transform,e.transform)}var fu=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function ly(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var bh=class{};function A1(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new wy(n.key,fu.none()):new Ah(n.key,n.data,fu.none());{let t=n.data,r=Ur.empty(),i=new Nt(jn.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new bu(n.key,r,new la(i.toArray()),fu.none())}}function EW(n,e,t){n instanceof Ah?(function(i,s,o){let a=i.value.clone(),c=pO(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()})(n,e,t):n instanceof bu?(function(i,s,o){if(!ly(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=pO(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(S1(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(n,e,t):(function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,t)}function mh(n,e,t,r){return n instanceof Ah?(function(s,o,a,c){if(!ly(s.precondition,o))return a;let d=s.value.clone(),h=gO(s.fieldTransforms,c,o);return d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null})(n,e,t,r):n instanceof bu?(function(s,o,a,c){if(!ly(s.precondition,o))return a;let d=gO(s.fieldTransforms,c,o),h=o.data;return h.setAll(S1(s)),h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))})(n,e,t,r):(function(s,o,a){return ly(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a})(n,e,t)}function fO(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&yu(r,i,(s,o)=>IW(s,o))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Ah=class extends bh{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},bu=class extends bh{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function S1(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function pO(n,e,t){let r=new Map;Je(n.length===t.length,32656,{Ve:t.length,de:n.length});for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,_W(o,a,t[i]))}return r}function gO(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,yW(s,o,e))}return r}var wy=class extends bh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}};var Lb=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&EW(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=mh(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=mh(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=E1();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;let c=A1(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(pe.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),De())}isEqual(e){return this.batchId===e.batchId&&yu(this.mutations,e.mutations,(t,r)=>fO(t,r))&&yu(this.baseMutations,e.baseMutations,(t,r)=>fO(t,r))}};var Fb=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Vb=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var lt,Se;function D1(n){if(n===void 0)return Ci("GRPC error has no .code"),q.UNKNOWN;switch(n){case lt.OK:return q.OK;case lt.CANCELLED:return q.CANCELLED;case lt.UNKNOWN:return q.UNKNOWN;case lt.DEADLINE_EXCEEDED:return q.DEADLINE_EXCEEDED;case lt.RESOURCE_EXHAUSTED:return q.RESOURCE_EXHAUSTED;case lt.INTERNAL:return q.INTERNAL;case lt.UNAVAILABLE:return q.UNAVAILABLE;case lt.UNAUTHENTICATED:return q.UNAUTHENTICATED;case lt.INVALID_ARGUMENT:return q.INVALID_ARGUMENT;case lt.NOT_FOUND:return q.NOT_FOUND;case lt.ALREADY_EXISTS:return q.ALREADY_EXISTS;case lt.PERMISSION_DENIED:return q.PERMISSION_DENIED;case lt.FAILED_PRECONDITION:return q.FAILED_PRECONDITION;case lt.ABORTED:return q.ABORTED;case lt.OUT_OF_RANGE:return q.OUT_OF_RANGE;case lt.UNIMPLEMENTED:return q.UNIMPLEMENTED;case lt.DATA_LOSS:return q.DATA_LOSS;default:return ae(39323,{code:n})}}(Se=lt||(lt={}))[Se.OK=0]="OK",Se[Se.CANCELLED=1]="CANCELLED",Se[Se.UNKNOWN=2]="UNKNOWN",Se[Se.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Se[Se.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Se[Se.NOT_FOUND=5]="NOT_FOUND",Se[Se.ALREADY_EXISTS=6]="ALREADY_EXISTS",Se[Se.PERMISSION_DENIED=7]="PERMISSION_DENIED",Se[Se.UNAUTHENTICATED=16]="UNAUTHENTICATED",Se[Se.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Se[Se.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Se[Se.ABORTED=10]="ABORTED",Se[Se.OUT_OF_RANGE=11]="OUT_OF_RANGE",Se[Se.UNIMPLEMENTED=12]="UNIMPLEMENTED",Se[Se.INTERNAL=13]="INTERNAL",Se[Se.UNAVAILABLE=14]="UNAVAILABLE",Se[Se.DATA_LOSS=15]="DATA_LOSS";var wW=null;function TW(){return new TextEncoder}var bW=new Si([4294967295,4294967295],0);function mO(n){let e=TW().encode(n),t=new sb;return t.update(e),new Uint8Array(t.digest())}function yO(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Si([t,r],0),new Si([i,s],0)]}var Ub=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new ha(`Invalid padding: ${t}`);if(r<0)throw new ha(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ha(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new ha(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Si.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(Si.fromNumber(r)));return i.compare(bW)===1&&(i=new Si([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;let t=mO(e),[r,i]=yO(t);for(let s=0;s<this.hashCount;s++){let o=this.ye(r,i,s);if(!this.we(o))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;let t=mO(e),[r,i]=yO(t);for(let s=0;s<this.hashCount;s++){let o=this.ye(r,i,s);this.be(o)}}be(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},ha=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Ty=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Sh.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(pe.min(),i,new st(Ae),zs(),De())}},Sh=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,De(),De(),De())}};var pu=class{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.De=i}},by=class{constructor(e,t){this.targetId=e,this.Ce=t}},Ay=class{constructor(e,t,r=Bt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Sy=class{constructor(){this.ve=0,this.Fe=_O(),this.Me=Bt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=De(),t=De(),r=De();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ae(38017,{changeType:s})}}),new Sh(this.Me,this.xe,e,t,r)}Ke(){this.Oe=!1,this.Fe=_O()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Je(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}},jb=class{constructor(e){this.Ge=e,this.ze=new Map,this.je=zs(),this.He=ay(),this.Je=ay(),this.Ze=new st(Ae)}Xe(e){for(let t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(let t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{let r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:ae(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((r,i)=>{this.rt(i)&&t(i)})}st(e){let t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){let s=i.target;if(Ob(s))if(r===0){let o=new ne(s.path);this.et(t,o,hr.newNoDocument(o,pe.min()))}else Je(r===1,20013,{expectedCount:r});else{let o=this._t(t);if(o!==r){let a=this.ut(e),c=a?this.ct(a,e,o):1;if(c!==0){this.it(t);let d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,d)}wW?.lt((function(h,g,E,S,R){let M={localCacheCount:h,existenceFilterCount:g.count,databaseId:E.database,projectId:E.projectId},k=g.unchangedNames;return k&&(M.bloomFilter={applied:R===0,hashCount:k?.hashCount??0,bitmapLength:k?.bits?.bitmap?.length??0,padding:k?.bits?.padding??0,mightContain:V=>S?.mightContain(V)??!1}),M})(o,e.Ce,this.Ge.ht(),a,c))}}}}ut(e){let t=e.Ce.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,o,a;try{o=Ni(r).toUint8Array()}catch(c){if(c instanceof vy)return ma("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new Ub(o,i,s)}catch(c){return ma(c instanceof ha?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.ge===0?null:a}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){let r=this.Ge.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.et(t,s,null),i++)}),i}Tt(e){let t=new Map;this.ze.forEach((s,o)=>{let a=this.ot(o);if(a){if(s.current&&Ob(a.target)){let c=new ne(a.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,hr.newNoDocument(c,e))}s.Be&&(t.set(o,s.ke()),s.Ke())}});let r=De();this.Je.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let d=this.ot(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.je.forEach((s,o)=>o.setReadTime(e));let i=new Ty(e,t,this.Ze,this.je,r);return this.je=zs(),this.He=ay(),this.Je=ay(),this.Ze=new st(Ae),i}Ye(e,t){if(!this.rt(e))return;let r=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,r),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;let i=this.nt(e);this.Et(e,t)?i.qe(t,1):i.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){let t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new Sy,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new Nt(Ae),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new Nt(Ae),this.He=this.He.insert(e,t)),t}rt(e){let t=this.ot(e)!==null;return t||W("WatchChangeAggregator","Detected inactive target",e),t}ot(e){let t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Sy),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}};function ay(){return new st(ne.comparator)}function _O(){return new st(ne.comparator)}var AW={asc:"ASCENDING",desc:"DESCENDING"},SW={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},DW={and:"AND",or:"OR"},Bb=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function $b(n,e){return n.useProto3Json||$y(e)?e:{value:e}}function CW(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function RW(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function gu(n){return Je(!!n,49232),pe.fromTimestamp((function(t){let r=Ri(t);return new Jt(r.seconds,r.nanos)})(n))}function NW(n,e){return Hb(n,e).canonicalString()}function Hb(n,e){let t=(function(i){return new ht(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function C1(n){let e=ht.fromString(n);return Je(M1(e),10190,{key:e.toString()}),e}function fb(n,e){let t=C1(e);if(t.get(1)!==n.databaseId.projectId)throw new X(q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new X(q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ne(N1(t))}function R1(n,e){return NW(n.databaseId,e)}function PW(n){let e=C1(n);return e.length===4?ht.emptyPath():N1(e)}function vO(n){return new ht(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function N1(n){return Je(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function kW(n,e){let t;if("targetChange"in e){e.targetChange;let r=(function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:ae(39313,{state:d})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=(function(d,h){return d.useProto3Json?(Je(h===void 0||typeof h=="string",58123),Bt.fromBase64String(h||"")):(Je(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Bt.fromUint8Array(h||new Uint8Array))})(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&(function(d){let h=d.code===void 0?q.UNKNOWN:D1(d.code);return new X(h,d.message||"")})(o);t=new Ay(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=fb(n,r.document.name),s=gu(r.document.updateTime),o=r.document.createTime?gu(r.document.createTime):pe.min(),a=new Ur({mapValue:{fields:r.document.fields}}),c=hr.newFoundDocument(i,s,o,a),d=r.targetIds||[],h=r.removedTargetIds||[];t=new pu(d,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=fb(n,r.document),s=r.readTime?gu(r.readTime):pe.min(),o=hr.newNoDocument(i,s),a=r.removedTargetIds||[];t=new pu([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=fb(n,r.document),s=r.removedTargetIds||[];t=new pu([],s,i,null)}else{if(!("filter"in e))return ae(11601,{Vt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new Vb(i,s),a=r.targetId;t=new by(a,o)}}return t}function MW(n,e){return{documents:[R1(n,e.path)]}}function xW(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=R1(n,i);let s=(function(d){if(d.length!==0)return k1(fr.create(d,"and"))})(e.filters);s&&(t.structuredQuery.where=s);let o=(function(d){if(d.length!==0)return d.map(h=>(function(E){return{field:uu(E.field),direction:FW(E.dir)}})(h))})(e.orderBy);o&&(t.structuredQuery.orderBy=o);let a=$b(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(d){return{before:d.inclusive,values:d.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(d){return{before:!d.inclusive,values:d.position}})(e.endAt)),{ft:t,parent:i}}function OW(n){let e=PW(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Je(r===1,65062);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];t.where&&(s=(function(g){let E=P1(g);return E instanceof fr&&f1(E)?E.getFilters():[E]})(t.where));let o=[];t.orderBy&&(o=(function(g){return g.map(E=>(function(R){return new va(lu(R.field),(function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(R.direction))})(E))})(t.orderBy));let a=null;t.limit&&(a=(function(g){let E;return E=typeof g=="object"?g.value:g,$y(E)?null:E})(t.limit));let c=null;t.startAt&&(c=(function(g){let E=!!g.before,S=g.values||[];return new _a(S,E)})(t.startAt));let d=null;return t.endAt&&(d=(function(g){let E=!g.before,S=g.values||[];return new _a(S,E)})(t.endAt)),sW(e,i,o,s,a,"F",c,d)}function LW(n,e){let t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ae(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function P1(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=lu(t.unaryFilter.field);return ft.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=lu(t.unaryFilter.field);return ft.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=lu(t.unaryFilter.field);return ft.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=lu(t.unaryFilter.field);return ft.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ae(61313);default:return ae(60726)}})(n):n.fieldFilter!==void 0?(function(t){return ft.create(lu(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ae(58110);default:return ae(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return fr.create(t.compositeFilter.filters.map(r=>P1(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ae(1026)}})(t.compositeFilter.op))})(n):ae(30097,{filter:n})}function FW(n){return AW[n]}function VW(n){return SW[n]}function UW(n){return DW[n]}function uu(n){return{fieldPath:n.canonicalString()}}function lu(n){return jn.fromServerFormat(n.fieldPath)}function k1(n){return n instanceof ft?(function(t){if(t.op==="=="){if(aO(t.value))return{unaryFilter:{field:uu(t.field),op:"IS_NAN"}};if(oO(t.value))return{unaryFilter:{field:uu(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(aO(t.value))return{unaryFilter:{field:uu(t.field),op:"IS_NOT_NAN"}};if(oO(t.value))return{unaryFilter:{field:uu(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:uu(t.field),op:VW(t.op),value:t.value}}})(n):n instanceof fr?(function(t){let r=t.getFilters().map(i=>k1(i));return r.length===1?r[0]:{compositeFilter:{op:UW(t.op),filters:r}}})(n):ae(54877,{filter:n})}function M1(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Dh=class n{constructor(e,t,r,i,s=pe.min(),o=pe.min(),a=Bt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var qb=class{constructor(e){this.yt=e}};function x1(n){let e=OW({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Ey(e,e.limit,"L"):e}var Dy=class{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(Qe(e.integerValue));else if("doubleValue"in e){let r=Qe(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),yy(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=Ri(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Ni(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?d1(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):l1(e)?this.kt(e.mapValue,t):(this.Kt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Nt(t)):ae(19022,{Ut:e})}Ot(e,t){this.Ft(t,25),this.$t(e,t)}$t(e,t){t.xt(e)}Kt(e,t){let r=e.fields||{};this.Ft(t,55);for(let i of Object.keys(r))this.Ot(i,t),this.Ct(r[i],t)}kt(e,t){let r=e.fields||{};this.Ft(t,53);let i=Ih,s=r[i].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(Qe(s)),this.Ot(i,t),this.Ct(r[i],t)}qt(e,t){let r=e.values||[];this.Ft(t,50);for(let i of r)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),ne.fromName(e).path.forEach(r=>{this.Ft(t,60),this.$t(r,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}};Dy.Wt=new Dy;var zb=class{constructor(){this.Sn=new Gb}addToCollectionParentIndex(e,t){return this.Sn.add(t),j.resolve()}getCollectionParents(e,t){return j.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return j.resolve()}deleteFieldIndex(e,t){return j.resolve()}deleteAllFieldIndexes(e){return j.resolve()}createTargetIndexes(e,t){return j.resolve()}getDocumentsMatchingTarget(e,t){return j.resolve(null)}getIndexType(e,t){return j.resolve(0)}getFieldIndexes(e,t){return j.resolve([])}getNextCollectionGroupToUpdate(e){return j.resolve(null)}getMinOffset(e,t){return j.resolve(ya.min())}getMinOffsetFromCollectionGroup(e,t){return j.resolve(ya.min())}updateCollectionGroup(e,t,r){return j.resolve()}updateIndexEntries(e,t){return j.resolve()}},Gb=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Nt(ht.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Nt(ht.comparator)).toArray()}};var wye=new Uint8Array(0);var IO={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},O1=41943040,Un=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};Un.DEFAULT_COLLECTION_PERCENTILE=10,Un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Un.DEFAULT=new Un(O1,Un.DEFAULT_COLLECTION_PERCENTILE,Un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Un.DISABLED=new Un(-1,0,0);var Ch=class n{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new n(0)}static ar(){return new n(-1)}};var EO="LruGarbageCollector",jW=1048576;function wO([n,e],[t,r]){let i=Ae(n,t);return i===0?Ae(e,r):i}var Wb=class{constructor(e){this.Pr=e,this.buffer=new Nt(wO),this.Tr=0}Ir(){return++this.Tr}Er(e){let t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();wO(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},Kb=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){W(EO,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Nu(t)?W(EO,"Ignoring IndexedDB error during garbage collection: ",t):await By(t)}await this.Ar(3e5)})}},Qb=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return j.resolve(UA.ce);let r=new Wb(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.mr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(W("LruGarbageCollector","Garbage collection skipped; disabled"),j.resolve(IO)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(W("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),IO):this.gr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let r,i,s,o,a,c,d,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(W("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,o=Date.now(),this.nthSequenceNumber(e,i))).next(g=>(r=g,a=Date.now(),this.removeTargets(e,r,t))).next(g=>(s=g,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(g=>(d=Date.now(),au()<=Ee.DEBUG&&W("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(c-a)+`ms
	Removed ${g} documents in `+(d-c)+`ms
Total Duration: ${d-h}ms`),j.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:g})))}};function BW(n,e){return new Qb(n,e)}var Yb=class{constructor(){this.changes=new Pi(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,hr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?j.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Jb=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Xb=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&mh(r.mutation,i,la.empty(),Jt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,De()).next(()=>r))}getLocalViewOfDocuments(e,t,r=De()){let i=da();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=fh();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=da();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,De()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=zs(),o=gh(),a=(function(){return gh()})();return t.forEach((c,d)=>{let h=r.get(d.key);i.has(d.key)&&(h===void 0||h.mutation instanceof bu)?s=s.insert(d.key,d):h!==void 0?(o.set(d.key,h.mutation.getFieldMask()),mh(h.mutation,d,h.mutation.getFieldMask(),Jt.now())):o.set(d.key,la.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((d,h)=>o.set(d,h)),t.forEach((d,h)=>a.set(d,new Jb(h,o.get(d)??null))),a))}recalculateAndSaveOverlays(e,t){let r=gh(),i=new st((o,a)=>o-a),s=De();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let a of o)a.keys().forEach(c=>{let d=t.get(c);if(d===null)return;let h=r.get(c)||la.empty();h=a.applyToLocalView(d,h),r.set(c,h);let g=(i.get(a.batchId)||De()).add(c);i=i.insert(a.batchId,g)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),d=c.key,h=c.value,g=E1();h.forEach(E=>{if(!s.has(E)){let S=A1(t.get(E),r.get(E));S!==null&&g.set(E,S),s=s.add(E)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,g))}return j.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return oW(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):y1(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):j.resolve(da()),a=yh,c=s;return o.next(d=>j.forEach(d,(h,g)=>(a<g.largestBatchId&&(a=g.largestBatchId),s.get(h)?j.resolve():this.remoteDocumentCache.getEntry(e,h).next(E=>{c=c.insert(h,E)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,c,d,De())).next(h=>({batchId:a,changes:dW(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ne(t)).next(r=>{let i=fh();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=fh();return this.indexManager.getCollectionParents(e,s).next(a=>j.forEach(a,c=>{let d=(function(g,E){return new Iu(E,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)})(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(h=>{h.forEach((g,E)=>{o=o.insert(g,E)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((c,d)=>{let h=d.getKey();o.get(h)===null&&(o=o.insert(h,hr.newInvalidDocument(h)))});let a=fh();return o.forEach((c,d)=>{let h=s.get(c);h!==void 0&&mh(h.mutation,d,la.empty(),Jt.now()),Wy(t,d)&&(a=a.insert(c,d))}),a})}};var Zb=class{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return j.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:gu(i.createTime)}})(t)),j.resolve()}getNamedQuery(e,t){return j.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(i){return{name:i.name,query:x1(i.bundledQuery),readTime:gu(i.readTime)}})(t)),j.resolve()}};var eA=class{constructor(){this.overlays=new st(ne.comparator),this.Lr=new Map}getOverlay(e,t){return j.resolve(this.overlays.get(t))}getOverlays(e,t){let r=da();return j.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.bt(e,t,s)}),j.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Lr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Lr.delete(r)),j.resolve()}getOverlaysForCollection(e,t,r){let i=da(),s=t.length+1,o=new ne(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,d=c.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return j.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new st((d,h)=>d-h),o=this.overlays.getIterator();for(;o.hasNext();){let d=o.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>r){let h=s.get(d.largestBatchId);h===null&&(h=da(),s=s.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}let a=da(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,h)=>a.set(d,h)),!(a.size()>=i)););return j.resolve(a)}bt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.Lr.get(i.largestBatchId).delete(r.key);this.Lr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Fb(t,r));let s=this.Lr.get(t);s===void 0&&(s=De(),this.Lr.set(t,s)),this.Lr.set(t,s.add(r.key))}};var tA=class{constructor(){this.sessionToken=Bt.EMPTY_BYTE_STRING}getSessionToken(e){return j.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,j.resolve()}};var Rh=class{constructor(){this.kr=new Nt(dt.Kr),this.qr=new Nt(dt.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){let r=new dt(e,t);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new dt(e,t))}Qr(e,t){e.forEach(r=>this.removeReference(r,t))}Gr(e){let t=new ne(new ht([])),r=new dt(t,e),i=new dt(t,e+1),s=[];return this.qr.forEachInRange([r,i],o=>{this.Wr(o),s.push(o.key)}),s}zr(){this.kr.forEach(e=>this.Wr(e))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){let t=new ne(new ht([])),r=new dt(t,e),i=new dt(t,e+1),s=De();return this.qr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new dt(e,0),r=this.kr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},dt=class{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return ne.comparator(e.key,t.key)||Ae(e.Hr,t.Hr)}static Ur(e,t){return Ae(e.Hr,t.Hr)||ne.comparator(e.key,t.key)}};var nA=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new Nt(dt.Kr)}checkEmpty(e){return j.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new Lb(s,t,r,i);this.mutationQueue.push(o);for(let a of i)this.Jr=this.Jr.add(new dt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return j.resolve(o)}lookupMutationBatch(e,t){return j.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Xr(r),s=i<0?0:i;return j.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return j.resolve(this.mutationQueue.length===0?$5:this.Yn-1)}getAllMutationBatches(e){return j.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new dt(t,0),i=new dt(t,Number.POSITIVE_INFINITY),s=[];return this.Jr.forEachInRange([r,i],o=>{let a=this.Zr(o.Hr);s.push(a)}),j.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Nt(Ae);return t.forEach(i=>{let s=new dt(i,0),o=new dt(i,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([s,o],a=>{r=r.add(a.Hr)})}),j.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;ne.isDocumentKey(s)||(s=s.child(""));let o=new dt(new ne(s),0),a=new Nt(Ae);return this.Jr.forEachWhile(c=>{let d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(a=a.add(c.Hr)),!0)},o),j.resolve(this.Yr(a))}Yr(e){let t=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Je(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return j.forEach(t.mutations,i=>{let s=new dt(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Jr=r})}nr(e){}containsKey(e,t){let r=new dt(t,0),i=this.Jr.firstAfterOrEqual(r);return j.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,j.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var rA=class{constructor(e){this.ti=e,this.docs=(function(){return new st(ne.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.ti(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return j.resolve(r?r.document.mutableCopy():hr.newInvalidDocument(t))}getEntries(e,t){let r=zs();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():hr.newInvalidDocument(i))}),j.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=zs(),o=t.path,a=new ne(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:d,value:{document:h}}=c.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||U5(V5(h),r)<=0||(i.has(h.key)||Wy(t,h))&&(s=s.insert(h.key,h.mutableCopy()))}return j.resolve(s)}getAllFromCollectionGroup(e,t,r,i){ae(9500)}ni(e,t){return j.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new iA(this)}getSize(e){return j.resolve(this.size)}},iA=class extends Yb{constructor(e){super(),this.Mr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Mr.addEntry(e,i)):this.Mr.removeEntry(r)}),j.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}};var sA=class{constructor(e){this.persistence=e,this.ri=new Pi(t=>BA(t),$A),this.lastRemoteSnapshotVersion=pe.min(),this.highestTargetId=0,this.ii=0,this.si=new Rh,this.targetCount=0,this.oi=Ch._r()}forEachTarget(e,t){return this.ri.forEach((r,i)=>t(i)),j.resolve()}getLastRemoteSnapshotVersion(e){return j.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return j.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),j.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.ii&&(this.ii=t),j.resolve()}lr(e){this.ri.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.oi=new Ch(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,j.resolve()}updateTargetData(e,t){return this.lr(t),j.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,j.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.ri.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.ri.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),j.waitFor(s).next(()=>i)}getTargetCount(e){return j.resolve(this.targetCount)}getTargetData(e,t){let r=this.ri.get(t)||null;return j.resolve(r)}addMatchingKeys(e,t,r){return this.si.$r(t,r),j.resolve()}removeMatchingKeys(e,t,r){this.si.Qr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),j.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),j.resolve()}getMatchingKeysForTargetId(e,t){let r=this.si.jr(t);return j.resolve(r)}containsKey(e,t){return j.resolve(this.si.containsKey(t))}};var Cy=class{constructor(e,t){this._i={},this.overlays={},this.ai=new UA(0),this.ui=!1,this.ui=!0,this.ci=new tA,this.referenceDelegate=e(this),this.li=new sA(this),this.indexManager=new zb,this.remoteDocumentCache=(function(i){return new rA(i)})(r=>this.referenceDelegate.hi(r)),this.serializer=new qb(t),this.Pi=new Zb(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new eA,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this._i[e.toKey()];return r||(r=new nA(t,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,r){W("MemoryPersistence","Starting transaction:",e);let i=new oA(this.ai.next());return this.referenceDelegate.Ti(),r(i).next(s=>this.referenceDelegate.Ii(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ei(e,t){return j.or(Object.values(this._i).map(r=>()=>r.containsKey(e,t)))}},oA=class extends Eb{constructor(e){super(),this.currentSequenceNumber=e}},aA=class n{constructor(e){this.persistence=e,this.Ri=new Rh,this.Ai=null}static Vi(e){return new n(e)}get di(){if(this.Ai)return this.Ai;throw ae(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.di.delete(r.toString()),j.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.di.add(r.toString()),j.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),j.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach(i=>this.di.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.di.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Ti(){this.Ai=new Set}Ii(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return j.forEach(this.di,r=>{let i=ne.fromPath(r);return this.mi(e,i).next(s=>{s||t.removeEntry(i,pe.min())})}).next(()=>(this.Ai=null,t.apply(e)))}updateLimboDocument(e,t){return this.mi(e,t).next(r=>{r?this.di.delete(t.toString()):this.di.add(t.toString())})}hi(e){return 0}mi(e,t){return j.or([()=>j.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},Ry=class n{constructor(e,t){this.persistence=e,this.fi=new Pi(r=>H5(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=BW(this,t)}static Vi(e,t){return new n(e,t)}Ti(){}Ii(e){return j.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){let t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}pr(e){let t=0;return this.mr(e,r=>{t++}).next(()=>t)}mr(e,t){return j.forEach(this.fi,(r,i)=>this.wr(e,r,i).next(s=>s?j.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ni(e,o=>this.wr(e,o,t).next(a=>{a||(r++,s.removeEntry(o,pe.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),j.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),j.resolve()}removeReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),j.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),j.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=uy(e.data.value)),t}wr(e,t,r){return j.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.fi.get(t);return j.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var cA=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Ts=r,this.Is=i}static Es(e,t){let r=De(),i=De();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var uA=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var lA=class{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return MM()?8:B5(Dn())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.gs(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ps(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new uA;return this.ys(e,t,o).next(a=>{if(s.result=a,this.As)return this.ws(e,t,o,a.size)})}).next(()=>s.result)}ws(e,t,r,i){return r.documentReadCount<this.Vs?(au()<=Ee.DEBUG&&W("QueryEngine","SDK will not create cache indexes for query:",cu(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),j.resolve()):(au()<=Ee.DEBUG&&W("QueryEngine","Query:",cu(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ds*i?(au()<=Ee.DEBUG&&W("QueryEngine","The SDK decides to create cache indexes for query:",cu(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Br(t))):j.resolve())}gs(e,t){if(dO(t))return j.resolve(null);let r=Br(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Ey(t,null,"F"),r=Br(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=De(...s);return this.fs.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let d=this.bs(t,a);return this.Ss(t,d,o,c.readTime)?this.gs(e,Ey(t,null,"F")):this.Ds(e,d,t,c)}))})))}ps(e,t,r,i){return dO(t)||i.isEqual(pe.min())?j.resolve(null):this.fs.getDocuments(e,r).next(s=>{let o=this.bs(t,s);return this.Ss(t,o,r,i)?j.resolve(null):(au()<=Ee.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),cu(t)),this.Ds(e,o,t,F5(i,yh)).next(a=>a))})}bs(e,t){let r=new Nt(v1(e));return t.forEach((i,s)=>{Wy(e,s)&&(r=r.add(s))}),r}Ss(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ys(e,t,r){return au()<=Ee.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",cu(t)),this.fs.getDocumentsMatchingQuery(e,t,ya.min(),r)}Ds(e,t,r,i){return this.fs.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var HA="LocalStore",$W=3e8,dA=class{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.vs=new st(Ae),this.Fs=new Pi(s=>BA(s),$A),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Xb(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.vs))}};function HW(n,e,t,r){return new dA(n,e,t,r)}async function L1(n,e){let t=Ce(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.Os(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=De();for(let d of i){o.push(d.batchId);for(let h of d.mutations)c=c.add(h.key)}for(let d of s){a.push(d.batchId);for(let h of d.mutations)c=c.add(h.key)}return t.localDocuments.getDocuments(r,c).next(d=>({Ns:d,removedBatchIds:o,addedBatchIds:a}))})})}function F1(n){let e=Ce(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.li.getLastRemoteSnapshotVersion(t))}function qW(n,e){let t=Ce(n),r=e.snapshotVersion,i=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.xs.newChangeBuffer({trackRemovals:!0});i=t.vs;let a=[];e.targetChanges.forEach((h,g)=>{let E=i.get(g);if(!E)return;a.push(t.li.removeMatchingKeys(s,h.removedDocuments,g).next(()=>t.li.addMatchingKeys(s,h.addedDocuments,g)));let S=E.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(g)!==null?S=S.withResumeToken(Bt.EMPTY_BYTE_STRING,pe.min()).withLastLimboFreeSnapshotVersion(pe.min()):h.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(h.resumeToken,r)),i=i.insert(g,S),(function(M,k,V){return M.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=$W?!0:V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0})(E,S,h)&&a.push(t.li.updateTargetData(s,S))});let c=zs(),d=De();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(zW(s,o,e.documentUpdates).next(h=>{c=h.Bs,d=h.Ls})),!r.isEqual(pe.min())){let h=t.li.getLastRemoteSnapshotVersion(s).next(g=>t.li.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return j.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,d)).next(()=>c)}).then(s=>(t.vs=i,s))}function zW(n,e,t){let r=De(),i=De();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=zs();return t.forEach((a,c)=>{let d=s.get(a);c.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(pe.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):W(HA,"Ignoring outdated watch update for ",a,". Current version:",d.version," Watch version:",c.version)}),{Bs:o,Ls:i}})}function GW(n,e){let t=Ce(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.li.getTargetData(r,e).next(s=>s?(i=s,j.resolve(i)):t.li.allocateTargetId(r).next(o=>(i=new Dh(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.li.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.vs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.vs=t.vs.insert(r.targetId,r),t.Fs.set(e,r.targetId)),r})}async function hA(n,e,t){let r=Ce(n),i=r.vs.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Nu(o))throw o;W(HA,`Failed to update sequence numbers for target ${e}: ${o}`)}r.vs=r.vs.remove(e),r.Fs.delete(i.target)}function TO(n,e,t){let r=Ce(n),i=pe.min(),s=De();return r.persistence.runTransaction("Execute query","readwrite",o=>(function(c,d,h){let g=Ce(c),E=g.Fs.get(h);return E!==void 0?j.resolve(g.vs.get(E)):g.li.getTargetData(d,h)})(r,o,Br(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,e,t?i:pe.min(),t?s:De())).next(a=>(WW(r,cW(e),a),{documents:a,ks:s})))}function WW(n,e,t){let r=n.Ms.get(e)||pe.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.Ms.set(e,r)}var Ny=class{constructor(){this.activeTargetIds=pW()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var fA=class{constructor(){this.vo=new Ny,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,r){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Ny,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var pA=class{Mo(e){}shutdown(){}};var bO="ConnectivityMonitor",Py=class{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){W(bO,"Network connectivity changed: AVAILABLE");for(let e of this.Lo)e(0)}Bo(){W(bO,"Network connectivity changed: UNAVAILABLE");for(let e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var cy=null;function gA(){return cy===null?cy=(function(){return 268435456+Math.round(2147483648*Math.random())})():cy++,"0x"+cy.toString(16)}var pb="RestConnection",KW={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"},mA=class{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.$o=this.databaseId.database===Tb?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,s){let o=gA(),a=this.Qo(e,t.toUriEncodedString());W(pb,`Sending RPC '${e}' ${o}:`,a,r);let c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(c,i,s);let{host:d}=new URL(a),h=Qd(d);return this.zo(e,a,c,r,h).then(g=>(W(pb,`Received RPC '${e}' ${o}: `,g),g),g=>{throw ma(pb,`RPC '${e}' ${o} failed with error: `,g,"url: ",a,"request:",r),g})}jo(e,t,r,i,s,o){return this.Wo(e,t,r,i,s)}Go(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Cu})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}Qo(e,t){let r=KW[e],i=`${this.qo}/v1/${t}:${r}`;return this.databaseInfo.apiKey&&(i=`${i}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),i}terminate(){}};var yA=class{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}};var Qt="WebChannelConnection",hh=(n,e,t)=>{n.listen(e,r=>{try{t(r)}catch(i){setTimeout(()=>{throw i},0)}})},ky=class n extends mA{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!n.c_){let e=ub();hh(e,cb.STAT_EVENT,t=>{t.stat===sy.PROXY?W(Qt,"STAT_EVENT: detected buffering proxy"):t.stat===sy.NOPROXY&&W(Qt,"STAT_EVENT: detected no buffering proxy")}),n.c_=!0}}zo(e,t,r,i,s){let o=gA();return new Promise((a,c)=>{let d=new ob;d.setWithCredentials(!0),d.listenOnce(ab.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case dh.NO_ERROR:let g=d.getResponseJson();W(Qt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(g)),a(g);break;case dh.TIMEOUT:W(Qt,`RPC '${e}' ${o} timed out`),c(new X(q.DEADLINE_EXCEEDED,"Request time out"));break;case dh.HTTP_ERROR:let E=d.getStatus();if(W(Qt,`RPC '${e}' ${o} failed with status:`,E,"response text:",d.getResponseText()),E>0){let S=d.getResponseJson();Array.isArray(S)&&(S=S[0]);let R=S?.error;if(R&&R.status&&R.message){let M=(function(V){let z=V.toLowerCase().replace(/_/g,"-");return Object.values(q).indexOf(z)>=0?z:q.UNKNOWN})(R.status);c(new X(M,R.message))}else c(new X(q.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new X(q.UNAVAILABLE,"Connection failed."));break;default:ae(9055,{l_:e,streamId:o,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{W(Qt,`RPC '${e}' ${o} completed.`)}});let h=JSON.stringify(i);W(Qt,`RPC '${e}' ${o} sending request:`,i),d.send(t,"POST",h,r,15)})}T_(e,t,r){let i=gA(),s=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=this.createWebChannelTransport(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(a.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Go(a.initMessageHeaders,t,r),a.encodeInitMessageHeaders=!0;let d=s.join("");W(Qt,`Creating RPC '${e}' stream ${i}: ${d}`,a);let h=o.createWebChannel(d,a);this.I_(h);let g=!1,E=!1,S=new yA({Ho:R=>{E?W(Qt,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(g||(W(Qt,`Opening RPC '${e}' stream ${i} transport.`),h.open(),g=!0),W(Qt,`RPC '${e}' stream ${i} sending:`,R),h.send(R))},Jo:()=>h.close()});return hh(h,ou.EventType.OPEN,()=>{E||(W(Qt,`RPC '${e}' stream ${i} transport opened.`),S.i_())}),hh(h,ou.EventType.CLOSE,()=>{E||(E=!0,W(Qt,`RPC '${e}' stream ${i} transport closed`),S.o_(),this.E_(h))}),hh(h,ou.EventType.ERROR,R=>{E||(E=!0,ma(Qt,`RPC '${e}' stream ${i} transport errored. Name:`,R.name,"Message:",R.message),S.o_(new X(q.UNAVAILABLE,"The operation could not be completed")))}),hh(h,ou.EventType.MESSAGE,R=>{if(!E){let M=R.data[0];Je(!!M,16349);let k=M,V=k?.error||k[0]?.error;if(V){W(Qt,`RPC '${e}' stream ${i} received error:`,V);let z=V.status,K=(function(re){let b=lt[re];if(b!==void 0)return D1(b)})(z),ye=V.message;K===void 0&&(K=q.INTERNAL,ye="Unknown error status: "+z+" with message "+V.message),E=!0,S.o_(new X(K,ye)),h.close()}else W(Qt,`RPC '${e}' stream ${i} received:`,M),S.__(M)}}),n.u_(),setTimeout(()=>{S.s_()},0),S}terminate(){this.a_.forEach(e=>e.close()),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter(t=>t===e)}Go(e,t,r){super.Go(e,t,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return lb()}};function QW(n){return new ky(n)}function gb(){return typeof document<"u"?document:null}function qA(n){return new Bb(n,!0)}ky.c_=!1;var My=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Ci=e,this.timerId=t,this.R_=r,this.A_=i,this.V_=s,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();let t=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&W("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}};var AO="PersistentStream",_A=class{constructor(e,t,r,i,s,o,a,c){this.Ci=e,this.b_=r,this.S_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new My(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,()=>this.k_()))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===q.RESOURCE_EXHAUSTED?(Ci(t.toString()),Ci("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;let e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===t&&this.G_(r,i)},r=>{e(()=>{let i=new X(q.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,t){let r=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.Yo(()=>{r(()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.Yo()))}),this.stream.t_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.H_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return W(AO,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget(()=>this.D_===e?t():(W(AO,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},vA=class extends _A{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();let t=kW(this.serializer,e),r=(function(s){if(!("targetChange"in s))return pe.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?pe.min():o.readTime?gu(o.readTime):pe.min()})(e);return this.listener.J_(t,r)}Z_(e){let t={};t.database=vO(this.serializer),t.addTarget=(function(s,o){let a,c=o.target;if(a=Ob(c)?{documents:MW(s,c)}:{query:xW(s,c).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=RW(s,o.resumeToken);let d=$b(s,o.expectedCount);d!==null&&(a.expectedCount=d)}else if(o.snapshotVersion.compareTo(pe.min())>0){a.readTime=CW(s,o.snapshotVersion.toTimestamp());let d=$b(s,o.expectedCount);d!==null&&(a.expectedCount=d)}return a})(this.serializer,e);let r=LW(this.serializer,e);r&&(t.labels=r),this.K_(t)}X_(e){let t={};t.database=vO(this.serializer),t.removeTarget=e,this.K_(t)}};var IA=class{},EA=class extends IA{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new X(q.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Wo(e,Hb(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new X(q.UNKNOWN,s.toString())})}jo(e,t,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.jo(e,Hb(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new X(q.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}};function YW(n,e,t,r){return new EA(n,e,t,r)}var wA=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ci(t),this.aa=!1):W("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}};var Au="RemoteStore",TA=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=s,this.Aa.Mo(o=>{r.enqueueAndForget(async()=>{Lh(this)&&(W(Au,"Restarting streams for network reachability change."),await(async function(c){let d=Ce(c);d.Ea.add(4),await Oh(d),d.Va.set("Unknown"),d.Ea.delete(4),await Ky(d)})(this))})}),this.Va=new wA(r,i)}};async function Ky(n){if(Lh(n))for(let e of n.Ra)await e(!0)}async function Oh(n){for(let e of n.Ra)await e(!1)}function V1(n,e){let t=Ce(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),KA(t)?WA(t):Pu(t).O_()&&GA(t,e))}function zA(n,e){let t=Ce(n),r=Pu(t);t.Ia.delete(e),r.O_()&&U1(t,e),t.Ia.size===0&&(r.O_()?r.L_():Lh(t)&&t.Va.set("Unknown"))}function GA(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(pe.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Pu(n).Z_(e)}function U1(n,e){n.da.$e(e),Pu(n).X_(e)}function WA(n){n.da=new jb({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Pu(n).start(),n.Va.ua()}function KA(n){return Lh(n)&&!Pu(n).x_()&&n.Ia.size>0}function Lh(n){return Ce(n).Ea.size===0}function j1(n){n.da=void 0}async function JW(n){n.Va.set("Online")}async function XW(n){n.Ia.forEach((e,t)=>{GA(n,e)})}async function ZW(n,e){j1(n),KA(n)?(n.Va.ha(e),WA(n)):n.Va.set("Unknown")}async function e8(n,e,t){if(n.Va.set("Online"),e instanceof Ay&&e.state===2&&e.cause)try{await(async function(i,s){let o=s.cause;for(let a of s.targetIds)i.Ia.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ia.delete(a),i.da.removeTarget(a))})(n,e)}catch(r){W(Au,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await SO(n,r)}else if(e instanceof pu?n.da.Xe(e):e instanceof by?n.da.st(e):n.da.tt(e),!t.isEqual(pe.min()))try{let r=await F1(n.localStore);t.compareTo(r)>=0&&await(function(s,o){let a=s.da.Tt(o);return a.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){let h=s.Ia.get(d);h&&s.Ia.set(d,h.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,d)=>{let h=s.Ia.get(c);if(!h)return;s.Ia.set(c,h.withResumeToken(Bt.EMPTY_BYTE_STRING,h.snapshotVersion)),U1(s,c);let g=new Dh(h.target,c,d,h.sequenceNumber);GA(s,g)}),s.remoteSyncer.applyRemoteEvent(a)})(n,t)}catch(r){W(Au,"Failed to raise snapshot:",r),await SO(n,r)}}async function SO(n,e,t){if(!Nu(e))throw e;n.Ea.add(1),await Oh(n),n.Va.set("Offline"),t||(t=()=>F1(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{W(Au,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Ky(n)})}async function DO(n,e){let t=Ce(n);t.asyncQueue.verifyOperationInProgress(),W(Au,"RemoteStore received new credentials");let r=Lh(t);t.Ea.add(3),await Oh(t),r&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Ky(t)}async function t8(n,e){let t=Ce(n);e?(t.Ea.delete(2),await Ky(t)):e||(t.Ea.add(2),await Oh(t),t.Va.set("Unknown"))}function Pu(n){return n.ma||(n.ma=(function(t,r,i){let s=Ce(t);return s.sa(),new vA(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Zo:JW.bind(null,n),Yo:XW.bind(null,n),t_:ZW.bind(null,n),J_:e8.bind(null,n)}),n.Ra.push(async e=>{e?(n.ma.B_(),KA(n)?WA(n):n.Va.set("Unknown")):(await n.ma.stop(),j1(n))})),n.ma}var bA=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new $s,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,a=new n(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new X(q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function B1(n,e){if(Ci("AsyncQueue",`${e}: ${n}`),Nu(n))return new X(q.UNAVAILABLE,`${e}: ${n}`);throw n}var Nh=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ne.comparator(t.key,r.key):(t,r)=>ne.comparator(t.key,r.key),this.keyedMap=fh(),this.sortedSet=new st(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var xy=class{constructor(){this.ga=new st(ne.comparator)}track(e){let t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):ae(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){let e=[];return this.ga.inorderTraversal((t,r)=>{e.push(r)}),e}},Ia=class n{constructor(e,t,r,i,s,o,a,c,d){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,t,r,i,s){let o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new n(e,t,Nh.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Gy(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var AA=class{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some(e=>e.Da())}},SA=class{constructor(){this.queries=CO(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){let i=Ce(t),s=i.queries;i.queries=CO(),s.forEach((o,a)=>{for(let c of a.ba)c.onError(r)})})(this,new X(q.ABORTED,"Firestore shutting down"))}};function CO(){return new Pi(n=>_1(n),Gy)}async function n8(n,e){let t=Ce(n),r=3,i=e.query,s=t.queries.get(i);s?!s.Sa()&&e.Da()&&(r=2):(s=new AA,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await t.onListen(i,!0);break;case 1:s.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(o){let a=B1(o,`Initialization of query '${cu(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.ba.push(e),e.va(t.onlineState),s.wa&&e.Fa(s.wa)&&QA(t)}async function r8(n,e){let t=Ce(n),r=e.query,i=3,s=t.queries.get(r);if(s){let o=s.ba.indexOf(e);o>=0&&(s.ba.splice(o,1),s.ba.length===0?i=e.Da()?0:1:!s.Sa()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function i8(n,e){let t=Ce(n),r=!1;for(let i of e){let s=i.query,o=t.queries.get(s);if(o){for(let a of o.ba)a.Fa(i)&&(r=!0);o.wa=i}}r&&QA(t)}function s8(n,e,t){let r=Ce(n),i=r.queries.get(e);if(i)for(let s of i.ba)s.onError(t);r.queries.delete(e)}function QA(n){n.Ca.forEach(e=>{e.next()})}var DA,RO;(RO=DA||(DA={})).Ma="default",RO.Cache="cache";var CA=class{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Ia(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;let r=t!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;let t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Ia.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==DA.Cache}};var Oy=class{constructor(e){this.key=e}},Ly=class{constructor(e){this.key=e}},RA=class{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=De(),this.mutatedKeys=De(),this.eu=v1(e),this.tu=new Nh(this.eu)}get nu(){return this.Za}ru(e,t){let r=t?t.iu:new xy,i=t?t.tu:this.tu,s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,g)=>{let E=i.get(h),S=Wy(this.query,g)?g:null,R=!!E&&this.mutatedKeys.has(E.key),M=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations),k=!1;E&&S?E.data.isEqual(S.data)?R!==M&&(r.track({type:3,doc:S}),k=!0):this.su(E,S)||(r.track({type:2,doc:S}),k=!0,(c&&this.eu(S,c)>0||d&&this.eu(S,d)<0)&&(a=!0)):!E&&S?(r.track({type:0,doc:S}),k=!0):E&&!S&&(r.track({type:1,doc:E}),k=!0,(c||d)&&(a=!0)),k&&(S?(o=o.add(S),s=M?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Ss:a,mutatedKeys:s}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let o=e.iu.ya();o.sort((h,g)=>(function(S,R){let M=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ae(20277,{Vt:k})}};return M(S)-M(R)})(h.type,g.type)||this.eu(h.doc,g.doc)),this.ou(r),i=i??!1;let a=t&&!i?this._u():[],c=this.Ya.size===0&&this.current&&!i?1:0,d=c!==this.Xa;return this.Xa=c,o.length!==0||d?{snapshot:new Ia(this.query,e.tu,s,o,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new xy,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Za=this.Za.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Za=this.Za.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Ya;this.Ya=De(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))});let t=[];return e.forEach(r=>{this.Ya.has(r)||t.push(new Ly(r))}),this.Ya.forEach(r=>{e.has(r)||t.push(new Oy(r))}),t}cu(e){this.Za=e.ks,this.Ya=De();let t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Ia.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}},YA="SyncEngine",NA=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},PA=class{constructor(e){this.key=e,this.hu=!1}},kA=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Pi(a=>_1(a),Gy),this.Iu=new Map,this.Eu=new Set,this.Ru=new st(ne.comparator),this.Au=new Map,this.Vu=new Rh,this.du={},this.mu=new Map,this.fu=Ch.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}};async function o8(n,e,t=!0){let r=G1(n),i,s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await $1(r,e,t,!0),i}async function a8(n,e){let t=G1(n);await $1(t,e,!0,!1)}async function $1(n,e,t,r){let i=await GW(n.localStore,Br(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),a;return r&&(a=await c8(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&V1(n.remoteStore,i),a}async function c8(n,e,t,r,i){n.pu=(g,E,S)=>(async function(M,k,V,z){let K=k.view.ru(V);K.Ss&&(K=await TO(M.localStore,k.query,!1).then(({documents:b})=>k.view.ru(b,K)));let ye=z&&z.targetChanges.get(k.targetId),ze=z&&z.targetMismatches.get(k.targetId)!=null,re=k.view.applyChanges(K,M.isPrimaryClient,ye,ze);return PO(M,k.targetId,re.au),re.snapshot})(n,g,E,S);let s=await TO(n.localStore,e,!0),o=new RA(e,s.ks),a=o.ru(s.documents),c=Sh.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),d=o.applyChanges(a,n.isPrimaryClient,c);PO(n,t,d.au);let h=new NA(e,t,o);return n.Tu.set(e,h),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),d.snapshot}async function u8(n,e,t){let r=Ce(n),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(o=>!Gy(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await hA(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&zA(r.remoteStore,i.targetId),MA(r,i.targetId)}).catch(By)):(MA(r,i.targetId),await hA(r.localStore,i.targetId,!0))}async function l8(n,e){let t=Ce(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),zA(t.remoteStore,r.targetId))}async function H1(n,e){let t=Ce(n);try{let r=await qW(t.localStore,e);e.targetChanges.forEach((i,s)=>{let o=t.Au.get(s);o&&(Je(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?Je(o.hu,14607):i.removedDocuments.size>0&&(Je(o.hu,42227),o.hu=!1))}),await z1(t,r,e)}catch(r){await By(r)}}function NO(n,e,t){let r=Ce(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Tu.forEach((s,o)=>{let a=o.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(o,a){let c=Ce(o);c.onlineState=a;let d=!1;c.queries.forEach((h,g)=>{for(let E of g.ba)E.va(a)&&(d=!0)}),d&&QA(c)})(r.eventManager,e),i.length&&r.Pu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function d8(n,e,t){let r=Ce(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Au.get(e),s=i&&i.key;if(s){let o=new st(ne.comparator);o=o.insert(s,hr.newNoDocument(s,pe.min()));let a=De().add(s),c=new Ty(pe.min(),new Map,new st(Ae),o,a);await H1(r,c),r.Ru=r.Ru.remove(s),r.Au.delete(e),JA(r)}else await hA(r.localStore,e,!1).then(()=>MA(r,e,t)).catch(By)}function MA(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach(r=>{n.Vu.containsKey(r)||q1(n,r)})}function q1(n,e){n.Eu.delete(e.path.canonicalString());let t=n.Ru.get(e);t!==null&&(zA(n.remoteStore,t),n.Ru=n.Ru.remove(e),n.Au.delete(t),JA(n))}function PO(n,e,t){for(let r of t)r instanceof Oy?(n.Vu.addReference(r.key,e),h8(n,r)):r instanceof Ly?(W(YA,"Document no longer in limbo: "+r.key),n.Vu.removeReference(r.key,e),n.Vu.containsKey(r.key)||q1(n,r.key)):ae(19791,{wu:r})}function h8(n,e){let t=e.key,r=t.path.canonicalString();n.Ru.get(t)||n.Eu.has(r)||(W(YA,"New document in limbo: "+t),n.Eu.add(r),JA(n))}function JA(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){let e=n.Eu.values().next().value;n.Eu.delete(e);let t=new ne(ht.fromString(e)),r=n.fu.next();n.Au.set(r,new PA(t)),n.Ru=n.Ru.insert(t,r),V1(n.remoteStore,new Dh(Br(zy(t.path)),r,"TargetPurposeLimboResolution",UA.ce))}}async function z1(n,e,t){let r=Ce(n),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,c)=>{o.push(r.pu(c,e,t).then(d=>{if((d||t)&&r.isPrimaryClient){let h=d?!d.fromCache:t?.targetChanges.get(c.targetId)?.current;r.sharedClientState.updateQueryState(c.targetId,h?"current":"not-current")}if(d){i.push(d);let h=cA.Es(c.targetId,d);s.push(h)}}))}),await Promise.all(o),r.Pu.J_(i),await(async function(c,d){let h=Ce(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>j.forEach(d,E=>j.forEach(E.Ts,S=>h.persistence.referenceDelegate.addReference(g,E.targetId,S)).next(()=>j.forEach(E.Is,S=>h.persistence.referenceDelegate.removeReference(g,E.targetId,S)))))}catch(g){if(!Nu(g))throw g;W(HA,"Failed to update sequence numbers: "+g)}for(let g of d){let E=g.targetId;if(!g.fromCache){let S=h.vs.get(E),R=S.snapshotVersion,M=S.withLastLimboFreeSnapshotVersion(R);h.vs=h.vs.insert(E,M)}}})(r.localStore,s))}async function f8(n,e){let t=Ce(n);if(!t.currentUser.isEqual(e)){W(YA,"User change. New user:",e.toKey());let r=await L1(t.localStore,e);t.currentUser=e,(function(s,o){s.mu.forEach(a=>{a.forEach(c=>{c.reject(new X(q.CANCELLED,o))})}),s.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await z1(t,r.Ns)}}function p8(n,e){let t=Ce(n),r=t.Au.get(e);if(r&&r.hu)return De().add(r.key);{let i=De(),s=t.Iu.get(e);if(!s)return i;for(let o of s){let a=t.Tu.get(o);i=i.unionWith(a.view.nu)}return i}}function G1(n){let e=Ce(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=H1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=p8.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=d8.bind(null,e),e.Pu.J_=i8.bind(null,e.eventManager),e.Pu.yu=s8.bind(null,e.eventManager),e}var XA=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=qA(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,r){return null}Mu(t,r){return null}vu(t){return HW(this.persistence,new lA,t.initialUser,this.serializer)}Cu(t){return new Cy(aA.Vi,this.serializer)}Du(t){return new fA}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}return n.provider={build:()=>new n},n})(),Fy=class extends XA{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Je(this.persistence.referenceDelegate instanceof Ry,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new Kb(r,e.asyncQueue,t)}Cu(e){let t=this.cacheSizeBytes!==void 0?Un.withCacheSize(this.cacheSizeBytes):Un.DEFAULT;return new Cy(r=>Ry.Vi(r,t),this.serializer)}};var W1=(()=>{class n{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>NO(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=f8.bind(null,this.syncEngine),await t8(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new SA})()}createDatastore(t){let r=qA(t.databaseInfo.databaseId),i=QW(t.databaseInfo);return YW(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return(function(i,s,o,a,c){return new TA(i,s,o,a,c)})(this.localStore,this.datastore,t.asyncQueue,r=>NO(this.syncEngine,r,0),(function(){return Py.v()?new Py:new pA})())}createSyncEngine(t,r){return(function(s,o,a,c,d,h,g){let E=new kA(s,o,a,c,d,h);return g&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){await(async function(r){let i=Ce(r);W(Au,"RemoteStore shutting down."),i.Ea.add(5),await Oh(i),i.Aa.shutdown(),i.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}return n.provider={build:()=>new n},n})();var xA=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ci("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Gs="FirestoreClient",OA=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this._databaseInfo=i,this.user=Yt.UNAUTHENTICATED,this.clientId=mu.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{W(Gs,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(W(Gs,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new $s;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=B1(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}};async function mb(n,e){n.asyncQueue.verifyOperationInProgress(),W(Gs,"Initializing OfflineComponentProvider");let t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await L1(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function kO(n,e){n.asyncQueue.verifyOperationInProgress();let t=await g8(n);W(Gs,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>DO(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>DO(e.remoteStore,i)),n._onlineComponents=e}async function g8(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){W(Gs,"Using user provided OfflineComponentProvider");try{await mb(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===q.FAILED_PRECONDITION||i.code===q.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;ma("Error using user provided cache. Falling back to memory cache: "+t),await mb(n,new XA)}}else W(Gs,"Using default OfflineComponentProvider"),await mb(n,new Fy(void 0));return n._offlineComponents}async function m8(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(W(Gs,"Using user provided OnlineComponentProvider"),await kO(n,n._uninitializedComponentsProvider._online)):(W(Gs,"Using default OnlineComponentProvider"),await kO(n,new W1))),n._onlineComponents}async function MO(n){let e=await m8(n),t=e.eventManager;return t.onListen=o8.bind(null,e.syncEngine),t.onUnlisten=u8.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=a8.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=l8.bind(null,e.syncEngine),t}function K1(n,e,t,r){let i=new xA(r),s=new CA(e,i,t);return n.asyncQueue.enqueueAndForget(async()=>n8(await MO(n),s)),()=>{i.Nu(),n.asyncQueue.enqueueAndForget(async()=>r8(await MO(n),s))}}function Q1(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var y8="ComponentProvider",xO=new Map;function _8(n,e,t,r,i){return new wb(n,e,t,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,Q1(i.experimentalLongPollingOptions),i.useFetchStreams,i.isUsingEmulator,r)}var v8="firestore.googleapis.com",OO=!0,Vy=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new X(q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=v8,this.ssl=OO}else this.host=e.host,this.ssl=e.ssl??OO;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=O1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<jW)throw new X(q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}jO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Q1(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new X(q.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new X(q.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new X(q.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},LA=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Vy({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new X(q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new X(q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Vy(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new dy;switch(r.type){case"firstParty":return new vb(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new X(q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=xO.get(t);r&&(W(y8,"Removing Datastore"),xO.delete(t),r.terminate())})(this),Promise.resolve()}};var Su=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},dr=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Uy(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Ru(t,n._jsonSchema))return new n(e,r||null,new ne(ht.fromString(t.referencePath)))}};dr._jsonSchemaVersion="firestore/documentReference/1.0",dr._jsonSchema={type:it("string",dr._jsonSchemaVersion),referencePath:it("string")};var Uy=class n extends Su{constructor(e,t,r){super(e,t,zy(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new dr(this.firestore,null,new ne(e))}withConverter(e){return new n(this.firestore,e,this._path)}};var LO="AsyncQueue",jy=class{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new My(this,"async_queue_retry"),this._c=()=>{let r=gb();r&&W(LO,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;let t=gb();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let t=gb();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});let t=new $s;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Yu.push(e),this.lc()))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Nu(e))throw e;W(LO,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){let t=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Ci("INTERNAL UNHANDLED ERROR: ",FO(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);let i=bA.createAndSchedule(this,e,t,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&ae(47125,{Pc:FO(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(let t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}Rc(e){this.oc.push(e)}hc(e){let t=this.tc.indexOf(e);this.tc.splice(t,1)}};function FO(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}var Ea=class extends LA{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new jy,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new jy(e),this._firestoreClient=void 0,await e}}};function ZA(n){if(n._terminated)throw new X(q.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||I8(n),n._firestoreClient}function I8(n){let e=n._freezeSettings(),t=_8(n._databaseId,n._app?.options.appId||"",n._persistenceKey,n._app?.options.apiKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new OA(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(i){let s=i?._online.build();return{_offline:i?._offline.build(s),_online:s}})(n._componentsProvider))}var Hs=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Bt.fromBase64String(e))}catch(t){throw new X(q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Bt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ru(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};Hs._jsonSchemaVersion="firestore/bytes/1.0",Hs._jsonSchema={type:it("string",Hs._jsonSchemaVersion),bytes:it("string")};var Du=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new X(q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new jn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var fa=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new X(q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new X(q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ae(this._lat,e._lat)||Ae(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(Ru(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};fa._jsonSchemaVersion="firestore/geoPoint/1.0",fa._jsonSchema={type:it("string",fa._jsonSchemaVersion),latitude:it("number"),longitude:it("number")};var pa=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ru(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new X(q.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};pa._jsonSchemaVersion="firestore/vectorValue/1.0",pa._jsonSchema={type:it("string",pa._jsonSchemaVersion),vectorValues:it("object")};function eS(n,e,t){if((e=Lr(e))instanceof Du)return e._internalPath;if(typeof e=="string")return Y1(n,e);throw FA("Field path arguments must be of type string or ",n,!1,void 0,t)}var E8=new RegExp("[~\\*/\\[\\]]");function Y1(n,e,t){if(e.search(E8)>=0)throw FA(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Du(...e.split("."))._internalPath}catch{throw FA(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function FA(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new X(q.INVALID_ARGUMENT,a+n+c)}var Ph=class{convertValue(e,t="none"){switch(qs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Qe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ni(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ae(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return xh(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){let t=e.fields?.[Ih].arrayValue?.values?.map(r=>Qe(r.doubleValue));return new pa(t)}convertGeoPoint(e){return new fa(Qe(e.latitude),Qe(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=qy(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(_h(e));default:return null}}convertTimestamp(e){let t=Ri(e);return new Jt(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=ht.fromString(e);Je(M1(r),9688,{name:e});let i=new vh(r.get(1),r.get(3)),s=new ne(r.popFirst(5));return i.isEqual(t)||Ci(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};var kh=class extends Ph{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hs(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new dr(this.firestore,null,t)}};var J1="@firebase/firestore",X1="4.10.0";function Z1(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1})(n,["next","error","complete"])}var Qy=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new dr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new tS(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){let t=this._document.data.field(eS("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},tS=class extends Qy{data(){return super.data()}};function D8(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new X(q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var wa=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Ta=class n extends Qy{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new ku(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(eS("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new X(q.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};Ta._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ta._jsonSchema={type:it("string",Ta._jsonSchemaVersion),bundleSource:it("string","DocumentSnapshot"),bundleName:it("string"),bundle:it("string")};var ku=class extends Ta{data(e={}){return super.data(e)}},Mu=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new wa(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new ku(this._firestore,this._userDataWriter,r.key,r,new wa(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new X(q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new ku(i._firestore,i._userDataWriter,a.doc.key,a.doc,new wa(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new ku(i._firestore,i._userDataWriter,a.doc.key,a.doc,new wa(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),d=-1,h=-1;return a.type!==0&&(d=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:C8(a.type),doc:c,oldIndex:d,newIndex:h}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new X(q.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=mu.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(t.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function C8(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ae(61501,{type:n})}}Mu._jsonSchemaVersion="firestore/querySnapshot/1.0",Mu._jsonSchema={type:it("string",Mu._jsonSchemaVersion),bundleSource:it("string","QuerySnapshot"),bundleName:it("string"),bundle:it("string")};function eL(n,...e){n=Lr(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||Z1(e[r])||(t=e[r++]);let i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(Z1(e[r])){let d=e[r];e[r]=d.next?.bind(d),e[r+1]=d.error?.bind(d),e[r+2]=d.complete?.bind(d)}let s,o,a;if(n instanceof dr)o=Mh(n.firestore,Ea),a=zy(n._key.path),s={next:d=>{e[r]&&e[r](R8(o,n,d))},error:e[r+1],complete:e[r+2]};else{let d=Mh(n,Su);o=Mh(d.firestore,Ea),a=d._query;let h=new kh(o);s={next:g=>{e[r]&&e[r](new Mu(o,h,d,g))},error:e[r+1],complete:e[r+2]},D8(n._query)}let c=ZA(o);return K1(c,a,i,s)}function R8(n,e,t){let r=t.docs.get(e._key),i=new kh(n);return new Ta(n,i,e._key,r,new wa(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){VO(ru),Vs(new ur("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new Ea(new hy(r.getProvider("auth-internal")),new py(o,r.getProvider("app-check-internal")),o1(o,i),o);return s=$({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Ii(J1,X1,e),Ii(J1,X1,"esm2020")})();var Yy=function(){return Yy=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Yy.apply(this,arguments)};var N8={includeMetadataChanges:!1};function tL(n,e){return e===void 0&&(e=N8),new fe(function(t){var r=eL(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function nL(n){return tL(n,{includeMetadataChanges:!0})}function rL(n,e){return e===void 0&&(e={}),nL(n).pipe(Ke(function(t){return iL(t,e)}))}function iL(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:Yy(Yy({},r),(t={},t[e.idField]=n.id,t))}var sL=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},oL={};var ki,nS;(function(){var n;function e(b,_){function I(){}I.prototype=_.prototype,b.D=_.prototype,b.prototype=new I,b.prototype.constructor=b,b.C=function(T,w,C){for(var v=Array(arguments.length-2),We=2;We<arguments.length;We++)v[We-2]=arguments[We];return _.prototype[w].apply(T,v)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(b,_,I){I||(I=0);var T=Array(16);if(typeof _=="string")for(var w=0;16>w;++w)T[w]=_.charCodeAt(I++)|_.charCodeAt(I++)<<8|_.charCodeAt(I++)<<16|_.charCodeAt(I++)<<24;else for(w=0;16>w;++w)T[w]=_[I++]|_[I++]<<8|_[I++]<<16|_[I++]<<24;_=b.g[0],I=b.g[1],w=b.g[2];var C=b.g[3],v=_+(C^I&(w^C))+T[0]+3614090360&4294967295;_=I+(v<<7&4294967295|v>>>25),v=C+(w^_&(I^w))+T[1]+3905402710&4294967295,C=_+(v<<12&4294967295|v>>>20),v=w+(I^C&(_^I))+T[2]+606105819&4294967295,w=C+(v<<17&4294967295|v>>>15),v=I+(_^w&(C^_))+T[3]+3250441966&4294967295,I=w+(v<<22&4294967295|v>>>10),v=_+(C^I&(w^C))+T[4]+4118548399&4294967295,_=I+(v<<7&4294967295|v>>>25),v=C+(w^_&(I^w))+T[5]+1200080426&4294967295,C=_+(v<<12&4294967295|v>>>20),v=w+(I^C&(_^I))+T[6]+2821735955&4294967295,w=C+(v<<17&4294967295|v>>>15),v=I+(_^w&(C^_))+T[7]+4249261313&4294967295,I=w+(v<<22&4294967295|v>>>10),v=_+(C^I&(w^C))+T[8]+1770035416&4294967295,_=I+(v<<7&4294967295|v>>>25),v=C+(w^_&(I^w))+T[9]+2336552879&4294967295,C=_+(v<<12&4294967295|v>>>20),v=w+(I^C&(_^I))+T[10]+4294925233&4294967295,w=C+(v<<17&4294967295|v>>>15),v=I+(_^w&(C^_))+T[11]+2304563134&4294967295,I=w+(v<<22&4294967295|v>>>10),v=_+(C^I&(w^C))+T[12]+1804603682&4294967295,_=I+(v<<7&4294967295|v>>>25),v=C+(w^_&(I^w))+T[13]+4254626195&4294967295,C=_+(v<<12&4294967295|v>>>20),v=w+(I^C&(_^I))+T[14]+2792965006&4294967295,w=C+(v<<17&4294967295|v>>>15),v=I+(_^w&(C^_))+T[15]+1236535329&4294967295,I=w+(v<<22&4294967295|v>>>10),v=_+(w^C&(I^w))+T[1]+4129170786&4294967295,_=I+(v<<5&4294967295|v>>>27),v=C+(I^w&(_^I))+T[6]+3225465664&4294967295,C=_+(v<<9&4294967295|v>>>23),v=w+(_^I&(C^_))+T[11]+643717713&4294967295,w=C+(v<<14&4294967295|v>>>18),v=I+(C^_&(w^C))+T[0]+3921069994&4294967295,I=w+(v<<20&4294967295|v>>>12),v=_+(w^C&(I^w))+T[5]+3593408605&4294967295,_=I+(v<<5&4294967295|v>>>27),v=C+(I^w&(_^I))+T[10]+38016083&4294967295,C=_+(v<<9&4294967295|v>>>23),v=w+(_^I&(C^_))+T[15]+3634488961&4294967295,w=C+(v<<14&4294967295|v>>>18),v=I+(C^_&(w^C))+T[4]+3889429448&4294967295,I=w+(v<<20&4294967295|v>>>12),v=_+(w^C&(I^w))+T[9]+568446438&4294967295,_=I+(v<<5&4294967295|v>>>27),v=C+(I^w&(_^I))+T[14]+3275163606&4294967295,C=_+(v<<9&4294967295|v>>>23),v=w+(_^I&(C^_))+T[3]+4107603335&4294967295,w=C+(v<<14&4294967295|v>>>18),v=I+(C^_&(w^C))+T[8]+1163531501&4294967295,I=w+(v<<20&4294967295|v>>>12),v=_+(w^C&(I^w))+T[13]+2850285829&4294967295,_=I+(v<<5&4294967295|v>>>27),v=C+(I^w&(_^I))+T[2]+4243563512&4294967295,C=_+(v<<9&4294967295|v>>>23),v=w+(_^I&(C^_))+T[7]+1735328473&4294967295,w=C+(v<<14&4294967295|v>>>18),v=I+(C^_&(w^C))+T[12]+2368359562&4294967295,I=w+(v<<20&4294967295|v>>>12),v=_+(I^w^C)+T[5]+4294588738&4294967295,_=I+(v<<4&4294967295|v>>>28),v=C+(_^I^w)+T[8]+2272392833&4294967295,C=_+(v<<11&4294967295|v>>>21),v=w+(C^_^I)+T[11]+1839030562&4294967295,w=C+(v<<16&4294967295|v>>>16),v=I+(w^C^_)+T[14]+4259657740&4294967295,I=w+(v<<23&4294967295|v>>>9),v=_+(I^w^C)+T[1]+2763975236&4294967295,_=I+(v<<4&4294967295|v>>>28),v=C+(_^I^w)+T[4]+1272893353&4294967295,C=_+(v<<11&4294967295|v>>>21),v=w+(C^_^I)+T[7]+4139469664&4294967295,w=C+(v<<16&4294967295|v>>>16),v=I+(w^C^_)+T[10]+3200236656&4294967295,I=w+(v<<23&4294967295|v>>>9),v=_+(I^w^C)+T[13]+681279174&4294967295,_=I+(v<<4&4294967295|v>>>28),v=C+(_^I^w)+T[0]+3936430074&4294967295,C=_+(v<<11&4294967295|v>>>21),v=w+(C^_^I)+T[3]+3572445317&4294967295,w=C+(v<<16&4294967295|v>>>16),v=I+(w^C^_)+T[6]+76029189&4294967295,I=w+(v<<23&4294967295|v>>>9),v=_+(I^w^C)+T[9]+3654602809&4294967295,_=I+(v<<4&4294967295|v>>>28),v=C+(_^I^w)+T[12]+3873151461&4294967295,C=_+(v<<11&4294967295|v>>>21),v=w+(C^_^I)+T[15]+530742520&4294967295,w=C+(v<<16&4294967295|v>>>16),v=I+(w^C^_)+T[2]+3299628645&4294967295,I=w+(v<<23&4294967295|v>>>9),v=_+(w^(I|~C))+T[0]+4096336452&4294967295,_=I+(v<<6&4294967295|v>>>26),v=C+(I^(_|~w))+T[7]+1126891415&4294967295,C=_+(v<<10&4294967295|v>>>22),v=w+(_^(C|~I))+T[14]+2878612391&4294967295,w=C+(v<<15&4294967295|v>>>17),v=I+(C^(w|~_))+T[5]+4237533241&4294967295,I=w+(v<<21&4294967295|v>>>11),v=_+(w^(I|~C))+T[12]+1700485571&4294967295,_=I+(v<<6&4294967295|v>>>26),v=C+(I^(_|~w))+T[3]+2399980690&4294967295,C=_+(v<<10&4294967295|v>>>22),v=w+(_^(C|~I))+T[10]+4293915773&4294967295,w=C+(v<<15&4294967295|v>>>17),v=I+(C^(w|~_))+T[1]+2240044497&4294967295,I=w+(v<<21&4294967295|v>>>11),v=_+(w^(I|~C))+T[8]+1873313359&4294967295,_=I+(v<<6&4294967295|v>>>26),v=C+(I^(_|~w))+T[15]+4264355552&4294967295,C=_+(v<<10&4294967295|v>>>22),v=w+(_^(C|~I))+T[6]+2734768916&4294967295,w=C+(v<<15&4294967295|v>>>17),v=I+(C^(w|~_))+T[13]+1309151649&4294967295,I=w+(v<<21&4294967295|v>>>11),v=_+(w^(I|~C))+T[4]+4149444226&4294967295,_=I+(v<<6&4294967295|v>>>26),v=C+(I^(_|~w))+T[11]+3174756917&4294967295,C=_+(v<<10&4294967295|v>>>22),v=w+(_^(C|~I))+T[2]+718787259&4294967295,w=C+(v<<15&4294967295|v>>>17),v=I+(C^(w|~_))+T[9]+3951481745&4294967295,b.g[0]=b.g[0]+_&4294967295,b.g[1]=b.g[1]+(w+(v<<21&4294967295|v>>>11))&4294967295,b.g[2]=b.g[2]+w&4294967295,b.g[3]=b.g[3]+C&4294967295}r.prototype.u=function(b,_){_===void 0&&(_=b.length);for(var I=_-this.blockSize,T=this.B,w=this.h,C=0;C<_;){if(w==0)for(;C<=I;)i(this,b,C),C+=this.blockSize;if(typeof b=="string"){for(;C<_;)if(T[w++]=b.charCodeAt(C++),w==this.blockSize){i(this,T),w=0;break}}else for(;C<_;)if(T[w++]=b[C++],w==this.blockSize){i(this,T),w=0;break}}this.h=w,this.o+=_},r.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var _=1;_<b.length-8;++_)b[_]=0;var I=8*this.o;for(_=b.length-8;_<b.length;++_)b[_]=I&255,I/=256;for(this.u(b),b=Array(16),_=I=0;4>_;++_)for(var T=0;32>T;T+=8)b[I++]=this.g[_]>>>T&255;return b};function s(b,_){var I=a;return Object.prototype.hasOwnProperty.call(I,b)?I[b]:I[b]=_(b)}function o(b,_){this.h=_;for(var I=[],T=!0,w=b.length-1;0<=w;w--){var C=b[w]|0;T&&C==_||(I[w]=C,T=!1)}this.g=I}var a={};function c(b){return-128<=b&&128>b?s(b,function(_){return new o([_|0],0>_?-1:0)}):new o([b|0],0>b?-1:0)}function d(b){if(isNaN(b)||!isFinite(b))return g;if(0>b)return k(d(-b));for(var _=[],I=1,T=0;b>=I;T++)_[T]=b/I|0,I*=4294967296;return new o(_,0)}function h(b,_){if(b.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(b.charAt(0)=="-")return k(h(b.substring(1),_));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=d(Math.pow(_,8)),T=g,w=0;w<b.length;w+=8){var C=Math.min(8,b.length-w),v=parseInt(b.substring(w,w+C),_);8>C?(C=d(Math.pow(_,C)),T=T.j(C).add(d(v))):(T=T.j(I),T=T.add(d(v)))}return T}var g=c(0),E=c(1),S=c(16777216);n=o.prototype,n.m=function(){if(M(this))return-k(this).m();for(var b=0,_=1,I=0;I<this.g.length;I++){var T=this.i(I);b+=(0<=T?T:4294967296+T)*_,_*=4294967296}return b},n.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(R(this))return"0";if(M(this))return"-"+k(this).toString(b);for(var _=d(Math.pow(b,6)),I=this,T="";;){var w=ye(I,_).g;I=V(I,w.j(_));var C=((0<I.g.length?I.g[0]:I.h)>>>0).toString(b);if(I=w,R(I))return C+T;for(;6>C.length;)C="0"+C;T=C+T}},n.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function R(b){if(b.h!=0)return!1;for(var _=0;_<b.g.length;_++)if(b.g[_]!=0)return!1;return!0}function M(b){return b.h==-1}n.l=function(b){return b=V(this,b),M(b)?-1:R(b)?0:1};function k(b){for(var _=b.g.length,I=[],T=0;T<_;T++)I[T]=~b.g[T];return new o(I,~b.h).add(E)}n.abs=function(){return M(this)?k(this):this},n.add=function(b){for(var _=Math.max(this.g.length,b.g.length),I=[],T=0,w=0;w<=_;w++){var C=T+(this.i(w)&65535)+(b.i(w)&65535),v=(C>>>16)+(this.i(w)>>>16)+(b.i(w)>>>16);T=v>>>16,C&=65535,v&=65535,I[w]=v<<16|C}return new o(I,I[I.length-1]&-2147483648?-1:0)};function V(b,_){return b.add(k(_))}n.j=function(b){if(R(this)||R(b))return g;if(M(this))return M(b)?k(this).j(k(b)):k(k(this).j(b));if(M(b))return k(this.j(k(b)));if(0>this.l(S)&&0>b.l(S))return d(this.m()*b.m());for(var _=this.g.length+b.g.length,I=[],T=0;T<2*_;T++)I[T]=0;for(T=0;T<this.g.length;T++)for(var w=0;w<b.g.length;w++){var C=this.i(T)>>>16,v=this.i(T)&65535,We=b.i(w)>>>16,an=b.i(w)&65535;I[2*T+2*w]+=v*an,z(I,2*T+2*w),I[2*T+2*w+1]+=C*an,z(I,2*T+2*w+1),I[2*T+2*w+1]+=v*We,z(I,2*T+2*w+1),I[2*T+2*w+2]+=C*We,z(I,2*T+2*w+2)}for(T=0;T<_;T++)I[T]=I[2*T+1]<<16|I[2*T];for(T=_;T<2*_;T++)I[T]=0;return new o(I,0)};function z(b,_){for(;(b[_]&65535)!=b[_];)b[_+1]+=b[_]>>>16,b[_]&=65535,_++}function K(b,_){this.g=b,this.h=_}function ye(b,_){if(R(_))throw Error("division by zero");if(R(b))return new K(g,g);if(M(b))return _=ye(k(b),_),new K(k(_.g),k(_.h));if(M(_))return _=ye(b,k(_)),new K(k(_.g),_.h);if(30<b.g.length){if(M(b)||M(_))throw Error("slowDivide_ only works with positive integers.");for(var I=E,T=_;0>=T.l(b);)I=ze(I),T=ze(T);var w=re(I,1),C=re(T,1);for(T=re(T,2),I=re(I,2);!R(T);){var v=C.add(T);0>=v.l(b)&&(w=w.add(I),C=v),T=re(T,1),I=re(I,1)}return _=V(b,w.j(_)),new K(w,_)}for(w=g;0<=b.l(_);){for(I=Math.max(1,Math.floor(b.m()/_.m())),T=Math.ceil(Math.log(I)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),C=d(I),v=C.j(_);M(v)||0<v.l(b);)I-=T,C=d(I),v=C.j(_);R(C)&&(C=E),w=w.add(C),b=V(b,v)}return new K(w,b)}n.A=function(b){return ye(this,b).h},n.and=function(b){for(var _=Math.max(this.g.length,b.g.length),I=[],T=0;T<_;T++)I[T]=this.i(T)&b.i(T);return new o(I,this.h&b.h)},n.or=function(b){for(var _=Math.max(this.g.length,b.g.length),I=[],T=0;T<_;T++)I[T]=this.i(T)|b.i(T);return new o(I,this.h|b.h)},n.xor=function(b){for(var _=Math.max(this.g.length,b.g.length),I=[],T=0;T<_;T++)I[T]=this.i(T)^b.i(T);return new o(I,this.h^b.h)};function ze(b){for(var _=b.g.length+1,I=[],T=0;T<_;T++)I[T]=b.i(T)<<1|b.i(T-1)>>>31;return new o(I,b.h)}function re(b,_){var I=_>>5;_%=32;for(var T=b.g.length-I,w=[],C=0;C<T;C++)w[C]=0<_?b.i(C+I)>>>_|b.i(C+I+1)<<32-_:b.i(C+I);return new o(w,b.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,nS=oL.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=h,ki=oL.Integer=o}).apply(typeof sL<"u"?sL:typeof self<"u"?self:typeof window<"u"?window:{});var Jy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Mi={};var rS,P8,xu,iS,Fh,Xy,sS,oS,aS;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,f,m){return u==Array.prototype||u==Object.prototype||(u[f]=m.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Jy=="object"&&Jy];for(var f=0;f<u.length;++f){var m=u[f];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=t(this);function i(u,f){if(f)e:{var m=r;u=u.split(".");for(var A=0;A<u.length-1;A++){var P=u[A];if(!(P in m))break e;m=m[P]}u=u[u.length-1],A=m[u],f=f(A),f!=A&&f!=null&&e(m,u,{configurable:!0,writable:!0,value:f})}}function s(u,f){u instanceof String&&(u+="");var m=0,A=!1,P={next:function(){if(!A&&m<u.length){var O=m++;return{value:f(O,u[O]),done:!1}}return A=!0,{done:!0,value:void 0}}};return P[Symbol.iterator]=function(){return P},P}i("Array.prototype.values",function(u){return u||function(){return s(this,function(f,m){return m})}});var o=o||{},a=this||self;function c(u){var f=typeof u;return f=f!="object"?f:u?Array.isArray(u)?"array":f:"null",f=="array"||f=="object"&&typeof u.length=="number"}function d(u){var f=typeof u;return f=="object"&&u!=null||f=="function"}function h(u,f,m){return u.call.apply(u.bind,arguments)}function g(u,f,m){if(!u)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var P=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(P,A),u.apply(f,P)}}return function(){return u.apply(f,arguments)}}function E(u,f,m){return E=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:g,E.apply(null,arguments)}function S(u,f){var m=Array.prototype.slice.call(arguments,1);return function(){var A=m.slice();return A.push.apply(A,arguments),u.apply(this,A)}}function R(u,f){function m(){}m.prototype=f.prototype,u.aa=f.prototype,u.prototype=new m,u.prototype.constructor=u,u.Qb=function(A,P,O){for(var B=Array(arguments.length-2),Ne=2;Ne<arguments.length;Ne++)B[Ne-2]=arguments[Ne];return f.prototype[P].apply(A,B)}}function M(u){let f=u.length;if(0<f){let m=Array(f);for(let A=0;A<f;A++)m[A]=u[A];return m}return[]}function k(u,f){for(let m=1;m<arguments.length;m++){let A=arguments[m];if(c(A)){let P=u.length||0,O=A.length||0;u.length=P+O;for(let B=0;B<O;B++)u[P+B]=A[B]}else u.push(A)}}class V{constructor(f,m){this.i=f,this.j=m,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function z(u){return/^[\s\xa0]*$/.test(u)}function K(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function ye(u){return ye[" "](u),u}ye[" "]=function(){};var ze=K().indexOf("Gecko")!=-1&&!(K().toLowerCase().indexOf("webkit")!=-1&&K().indexOf("Edge")==-1)&&!(K().indexOf("Trident")!=-1||K().indexOf("MSIE")!=-1)&&K().indexOf("Edge")==-1;function re(u,f,m){for(let A in u)f.call(m,u[A],A,u)}function b(u,f){for(let m in u)f.call(void 0,u[m],m,u)}function _(u){let f={};for(let m in u)f[m]=u[m];return f}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(u,f){let m,A;for(let P=1;P<arguments.length;P++){A=arguments[P];for(m in A)u[m]=A[m];for(let O=0;O<I.length;O++)m=I[O],Object.prototype.hasOwnProperty.call(A,m)&&(u[m]=A[m])}}function w(u){var f=1;u=u.split(":");let m=[];for(;0<f&&u.length;)m.push(u.shift()),f--;return u.length&&m.push(u.join(":")),m}function C(u){a.setTimeout(()=>{throw u},0)}function v(){var u=Ui;let f=null;return u.g&&(f=u.g,u.g=u.g.next,u.g||(u.h=null),f.next=null),f}class We{constructor(){this.h=this.g=null}add(f,m){let A=an.get();A.set(f,m),this.h?this.h.next=A:this.g=A,this.h=A}}var an=new V(()=>new z_,u=>u.reset());class z_{constructor(){this.next=this.g=this.h=null}set(f,m){this.h=f,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let no,gr=!1,Ui=new We,af=()=>{let u=a.Promise.resolve(void 0);no=()=>{u.then(cf)}};var cf=()=>{for(var u;u=v();){try{u.h.call(u.g)}catch(m){C(m)}var f=an;f.j(u),100>f.h&&(f.h++,u.next=f.g,f.g=u)}gr=!1};function Hn(){this.s=this.s,this.C=this.C}Hn.prototype.s=!1,Hn.prototype.ma=function(){this.s||(this.s=!0,this.N())},Hn.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function _t(u,f){this.type=u,this.g=this.target=f,this.defaultPrevented=!1}_t.prototype.h=function(){this.defaultPrevented=!0};var La=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,f=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let m=()=>{};a.addEventListener("test",m,f),a.removeEventListener("test",m,f)}catch{}return u})();function Yr(u,f){if(_t.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var m=this.type=u.type,A=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=f,f=u.relatedTarget){if(ze){e:{try{ye(f.nodeName);var P=!0;break e}catch{}P=!1}P||(f=null)}}else m=="mouseover"?f=u.fromElement:m=="mouseout"&&(f=u.toElement);this.relatedTarget=f,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:ol[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Yr.aa.h.call(this)}}R(Yr,_t);var ol={2:"touch",3:"pen",4:"mouse"};Yr.prototype.h=function(){Yr.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Jr="closure_listenable_"+(1e6*Math.random()|0),al=0;function uf(u,f,m,A,P){this.listener=u,this.proxy=null,this.src=f,this.type=m,this.capture=!!A,this.ha=P,this.key=++al,this.da=this.fa=!1}function ro(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Fa(u){this.src=u,this.g={},this.h=0}Fa.prototype.add=function(u,f,m,A,P){var O=u.toString();u=this.g[O],u||(u=this.g[O]=[],this.h++);var B=Ua(u,f,A,P);return-1<B?(f=u[B],m||(f.fa=!1)):(f=new uf(f,this.src,O,!!A,P),f.fa=m,u.push(f)),f};function Va(u,f){var m=f.type;if(m in u.g){var A=u.g[m],P=Array.prototype.indexOf.call(A,f,void 0),O;(O=0<=P)&&Array.prototype.splice.call(A,P,1),O&&(ro(f),u.g[m].length==0&&(delete u.g[m],u.h--))}}function Ua(u,f,m,A){for(var P=0;P<u.length;++P){var O=u[P];if(!O.da&&O.listener==f&&O.capture==!!m&&O.ha==A)return P}return-1}var io="closure_lm_"+(1e6*Math.random()|0),ja={};function lf(u,f,m,A,P){if(A&&A.once)return $a(u,f,m,A,P);if(Array.isArray(f)){for(var O=0;O<f.length;O++)lf(u,f[O],m,A,P);return null}return m=Xr(m),u&&u[Jr]?u.K(f,m,d(A)?!!A.capture:!!A,P):Ba(u,f,m,!1,A,P)}function Ba(u,f,m,A,P,O){if(!f)throw Error("Invalid event type");var B=d(P)?!!P.capture:!!P,Ne=Ha(u);if(Ne||(u[io]=Ne=new Fa(u)),m=Ne.add(f,m,A,B,O),m.proxy)return m;if(A=cl(),m.proxy=A,A.src=u,A.listener=m,u.addEventListener)La||(P=B),P===void 0&&(P=!1),u.addEventListener(f.toString(),A,P);else if(u.attachEvent)u.attachEvent(so(f.toString()),A);else if(u.addListener&&u.removeListener)u.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return m}function cl(){function u(m){return f.call(u.src,u.listener,m)}let f=G_;return u}function $a(u,f,m,A,P){if(Array.isArray(f)){for(var O=0;O<f.length;O++)$a(u,f[O],m,A,P);return null}return m=Xr(m),u&&u[Jr]?u.L(f,m,d(A)?!!A.capture:!!A,P):Ba(u,f,m,!0,A,P)}function vt(u,f,m,A,P){if(Array.isArray(f))for(var O=0;O<f.length;O++)vt(u,f[O],m,A,P);else A=d(A)?!!A.capture:!!A,m=Xr(m),u&&u[Jr]?(u=u.i,f=String(f).toString(),f in u.g&&(O=u.g[f],m=Ua(O,m,A,P),-1<m&&(ro(O[m]),Array.prototype.splice.call(O,m,1),O.length==0&&(delete u.g[f],u.h--)))):u&&(u=Ha(u))&&(f=u.g[f.toString()],u=-1,f&&(u=Ua(f,m,A,P)),(m=-1<u?f[u]:null)&&It(m))}function It(u){if(typeof u!="number"&&u&&!u.da){var f=u.src;if(f&&f[Jr])Va(f.i,u);else{var m=u.type,A=u.proxy;f.removeEventListener?f.removeEventListener(m,A,u.capture):f.detachEvent?f.detachEvent(so(m),A):f.addListener&&f.removeListener&&f.removeListener(A),(m=Ha(f))?(Va(m,u),m.h==0&&(m.src=null,f[io]=null)):ro(u)}}}function so(u){return u in ja?ja[u]:ja[u]="on"+u}function G_(u,f){if(u.da)u=!0;else{f=new Yr(f,this);var m=u.listener,A=u.ha||u.src;u.fa&&It(u),u=m.call(A,f)}return u}function Ha(u){return u=u[io],u instanceof Fa?u:null}var ul="__closure_events_fn_"+(1e9*Math.random()>>>0);function Xr(u){return typeof u=="function"?u:(u[ul]||(u[ul]=function(f){return u.handleEvent(f)}),u[ul])}function Et(){Hn.call(this),this.i=new Fa(this),this.M=this,this.F=null}R(Et,Hn),Et.prototype[Jr]=!0,Et.prototype.removeEventListener=function(u,f,m,A){vt(this,u,f,m,A)};function bt(u,f){var m,A=u.F;if(A)for(m=[];A;A=A.F)m.push(A);if(u=u.M,A=f.type||f,typeof f=="string")f=new _t(f,u);else if(f instanceof _t)f.target=f.target||u;else{var P=f;f=new _t(A,u),T(f,P)}if(P=!0,m)for(var O=m.length-1;0<=O;O--){var B=f.g=m[O];P=ji(B,A,!0,f)&&P}if(B=f.g=u,P=ji(B,A,!0,f)&&P,P=ji(B,A,!1,f)&&P,m)for(O=0;O<m.length;O++)B=f.g=m[O],P=ji(B,A,!1,f)&&P}Et.prototype.N=function(){if(Et.aa.N.call(this),this.i){var u=this.i,f;for(f in u.g){for(var m=u.g[f],A=0;A<m.length;A++)ro(m[A]);delete u.g[f],u.h--}}this.F=null},Et.prototype.K=function(u,f,m,A){return this.i.add(String(u),f,!1,m,A)},Et.prototype.L=function(u,f,m,A){return this.i.add(String(u),f,!0,m,A)};function ji(u,f,m,A){if(f=u.i.g[String(f)],!f)return!0;f=f.concat();for(var P=!0,O=0;O<f.length;++O){var B=f[O];if(B&&!B.da&&B.capture==m){var Ne=B.listener,nt=B.ha||B.src;B.fa&&Va(u.i,B),P=Ne.call(nt,A)!==!1&&P}}return P&&!A.defaultPrevented}function df(u,f,m){if(typeof u=="function")m&&(u=E(u,m));else if(u&&typeof u.handleEvent=="function")u=E(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(u,f||0)}function hf(u){u.g=df(()=>{u.g=null,u.i&&(u.i=!1,hf(u))},u.l);let f=u.h;u.h=null,u.m.apply(null,f)}class ff extends Hn{constructor(f,m){super(),this.m=f,this.l=m,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:hf(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Bi(u){Hn.call(this),this.h=u,this.g={}}R(Bi,Hn);var $i=[];function qa(u){re(u.g,function(f,m){this.g.hasOwnProperty(m)&&It(f)},u),u.g={}}Bi.prototype.N=function(){Bi.aa.N.call(this),qa(this)},Bi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var oo=a.JSON.stringify,Zr=a.JSON.parse,pf=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function Hi(){}Hi.prototype.h=null;function ll(u){return u.h||(u.h=u.i())}function qi(){}var zi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function wt(){_t.call(this,"d")}R(wt,_t);function za(){_t.call(this,"c")}R(za,_t);var mn={},Gi=null;function Ga(){return Gi=Gi||new Et}mn.La="serverreachability";function gf(u){_t.call(this,mn.La,u)}R(gf,_t);function Nn(u){let f=Ga();bt(f,new gf(f))}mn.STAT_EVENT="statevent";function mf(u,f){_t.call(this,mn.STAT_EVENT,u),this.stat=f}R(mf,_t);function Mt(u){let f=Ga();bt(f,new mf(f,u))}mn.Ma="timingevent";function ao(u,f){_t.call(this,mn.Ma,u),this.size=f}R(ao,_t);function Wi(u,f){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},f)}function Ki(){this.g=!0}Ki.prototype.xa=function(){this.g=!1};function dl(u,f,m,A,P,O){u.info(function(){if(u.g)if(O)for(var B="",Ne=O.split("&"),nt=0;nt<Ne.length;nt++){var Pe=Ne[nt].split("=");if(1<Pe.length){var Ht=Pe[0];Pe=Pe[1];var qt=Ht.split("_");B=2<=qt.length&&qt[1]=="type"?B+(Ht+"="+Pe+"&"):B+(Ht+"=redacted&")}}else B=null;else B=O;return"XMLHTTP REQ ("+A+") [attempt "+P+"]: "+f+`
`+m+`
`+B})}function co(u,f,m,A,P,O,B){u.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+P+"]: "+f+`
`+m+`
`+O+" "+B})}function Qi(u,f,m,A){u.info(function(){return"XMLHTTP TEXT ("+f+"): "+yf(u,m)+(A?" "+A:"")})}function mr(u,f){u.info(function(){return"TIMEOUT: "+f})}Ki.prototype.info=function(){};function yf(u,f){if(!u.g)return f;if(!f)return null;try{var m=JSON.parse(f);if(m){for(u=0;u<m.length;u++)if(Array.isArray(m[u])){var A=m[u];if(!(2>A.length)){var P=A[1];if(Array.isArray(P)&&!(1>P.length)){var O=P[0];if(O!="noop"&&O!="stop"&&O!="close")for(var B=1;B<P.length;B++)P[B]=""}}}}return oo(m)}catch{return f}}var uo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Wa={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},lo;function ho(){}R(ho,Hi),ho.prototype.g=function(){return new XMLHttpRequest},ho.prototype.i=function(){return{}},lo=new ho;function yr(u,f,m,A){this.j=u,this.i=f,this.l=m,this.R=A||1,this.U=new Bi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new hl}function hl(){this.i=null,this.g="",this.h=!1}var _f={},Yi={};function Ka(u,f,m){u.L=1,u.v=Xa(qn(f)),u.m=m,u.P=!0,Qa(u,null)}function Qa(u,f){u.F=Date.now(),Xi(u),u.A=qn(u.v);var m=u.A,A=u.R;Array.isArray(A)||(A=[String(A)]),Sf(m.i,"t",A),u.C=0,m=u.j.J,u.h=new hl,u.g=p(u.j,m?f:null,!u.m),0<u.O&&(u.M=new ff(E(u.Y,u,u.g),u.O)),f=u.U,m=u.g,A=u.ca;var P="readystatechange";Array.isArray(P)||(P&&($i[0]=P.toString()),P=$i);for(var O=0;O<P.length;O++){var B=lf(m,P[O],A||f.handleEvent,!1,f.h||f);if(!B)break;f.g[B.key]=B}f=u.H?_(u.H):{},u.m?(u.u||(u.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,f)):(u.u="GET",u.g.ea(u.A,u.u,null,f)),Nn(),dl(u.i,u.u,u.A,u.l,u.R,u.m)}yr.prototype.ca=function(u){u=u.target;let f=this.M;f&&un(u)==3?f.j():this.Y(u)},yr.prototype.Y=function(u){try{if(u==this.g)e:{let qt=un(this.g);var f=this.g.Ba();let ac=this.g.Z();if(!(3>qt)&&(qt!=3||this.g&&(this.h.h||this.g.oa()||Pf(this.g)))){this.J||qt!=4||f==7||(f==8||0>=ac?Nn(3):Nn(2)),Ya(this);var m=this.g.Z();this.X=m;t:if(Ji(this)){var A=Pf(this.g);u="";var P=A.length,O=un(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){_r(this),Zi(this);var B="";break t}this.h.i=new a.TextDecoder}for(f=0;f<P;f++)this.h.h=!0,u+=this.h.i.decode(A[f],{stream:!(O&&f==P-1)});A.length=0,this.h.g+=u,this.C=0,B=this.h.g}else B=this.g.oa();if(this.o=m==200,co(this.i,this.u,this.A,this.l,this.R,qt,m),this.o){if(this.T&&!this.K){t:{if(this.g){var Ne,nt=this.g;if((Ne=nt.g?nt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!z(Ne)){var Pe=Ne;break t}}Pe=null}if(m=Pe)Qi(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,fo(this,m);else{this.o=!1,this.s=3,Mt(12),_r(this),Zi(this);break e}}if(this.P){m=!0;let Qn;for(;!this.J&&this.C<B.length;)if(Qn=ei(this,B),Qn==Yi){qt==4&&(this.s=4,Mt(14),m=!1),Qi(this.i,this.l,null,"[Incomplete Response]");break}else if(Qn==_f){this.s=4,Mt(15),Qi(this.i,this.l,B,"[Invalid Chunk]"),m=!1;break}else Qi(this.i,this.l,Qn,null),fo(this,Qn);if(Ji(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),qt!=4||B.length!=0||this.h.h||(this.s=1,Mt(16),m=!1),this.o=this.o&&m,!m)Qi(this.i,this.l,B,"[Invalid Chunked Response]"),_r(this),Zi(this);else if(0<B.length&&!this.W){this.W=!0;var Ht=this.j;Ht.g==this&&Ht.ba&&!Ht.M&&(Ht.j.info("Great, no buffering proxy detected. Bytes received: "+B.length),oc(Ht),Ht.M=!0,Mt(11))}}else Qi(this.i,this.l,B,null),fo(this,B);qt==4&&_r(this),this.o&&!this.J&&(qt==4?$t(this.j,this):(this.o=!1,Xi(this)))}else kf(this.g),m==400&&0<B.indexOf("Unknown SID")?(this.s=3,Mt(12)):(this.s=0,Mt(13)),_r(this),Zi(this)}}}catch{}};function Ji(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function ei(u,f){var m=u.C,A=f.indexOf(`
`,m);return A==-1?Yi:(m=Number(f.substring(m,A)),isNaN(m)?_f:(A+=1,A+m>f.length?Yi:(f=f.slice(A,A+m),u.C=A+m,f)))}yr.prototype.cancel=function(){this.J=!0,_r(this)};function Xi(u){u.S=Date.now()+u.I,vf(u,u.I)}function vf(u,f){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Wi(E(u.ba,u),f)}function Ya(u){u.B&&(a.clearTimeout(u.B),u.B=null)}yr.prototype.ba=function(){this.B=null;let u=Date.now();0<=u-this.S?(mr(this.i,this.A),this.L!=2&&(Nn(),Mt(17)),_r(this),this.s=2,Zi(this)):vf(this,this.S-u)};function Zi(u){u.j.G==0||u.J||$t(u.j,u)}function _r(u){Ya(u);var f=u.M;f&&typeof f.ma=="function"&&f.ma(),u.M=null,qa(u.U),u.g&&(f=u.g,u.g=null,f.abort(),f.ma())}function fo(u,f){try{var m=u.j;if(m.G!=0&&(m.g==u||yl(m.h,u))){if(!u.K&&yl(m.h,u)&&m.G==3){try{var A=m.Da.g.parse(f)}catch{A=null}if(Array.isArray(A)&&A.length==3){var P=A;if(P[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<u.F)ni(m),os(m);else break e;sc(m),Mt(18)}}else m.za=P[1],0<m.za-m.T&&37500>P[2]&&m.F&&m.v==0&&!m.C&&(m.C=Wi(E(m.Za,m),6e3));if(1>=ml(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else Er(m,11)}else if((u.K||m.g==u)&&ni(m),!z(f))for(P=m.Da.g.parse(f),f=0;f<P.length;f++){let Pe=P[f];if(m.T=Pe[0],Pe=Pe[1],m.G==2)if(Pe[0]=="c"){m.K=Pe[1],m.ia=Pe[2];let Ht=Pe[3];Ht!=null&&(m.la=Ht,m.j.info("VER="+m.la));let qt=Pe[4];qt!=null&&(m.Aa=qt,m.j.info("SVER="+m.Aa));let ac=Pe[5];ac!=null&&typeof ac=="number"&&0<ac&&(A=1.5*ac,m.L=A,m.j.info("backChannelRequestTimeoutMs_="+A)),A=m;let Qn=u.g;if(Qn){let Mf=Qn.g?Qn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Mf){var O=A.h;O.g||Mf.indexOf("spdy")==-1&&Mf.indexOf("quic")==-1&&Mf.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(Pn(O,O.h),O.h=null))}if(A.D){let K_=Qn.g?Qn.g.getResponseHeader("X-HTTP-Session-Id"):null;K_&&(A.ya=K_,Ge(A.I,A.D,K_))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-u.F,m.j.info("Handshake RTT: "+m.R+"ms")),A=m;var B=u;if(A.qa=l(A,A.J?A.ia:null,A.W),B.K){yn(A.h,B);var Ne=B,nt=A.L;nt&&(Ne.I=nt),Ne.B&&(Ya(Ne),Xi(Ne)),A.g=B}else Sl(A);0<m.i.length&&Io(m)}else Pe[0]!="stop"&&Pe[0]!="close"||Er(m,7);else m.G==3&&(Pe[0]=="stop"||Pe[0]=="close"?Pe[0]=="stop"?Er(m,7):nc(m):Pe[0]!="noop"&&m.l&&m.l.ta(Pe),m.v=0)}}Nn(4)}catch{}}var fl=class{constructor(u,f){this.g=u,this.map=f}};function pl(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function gl(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function ml(u){return u.h?1:u.g?u.g.size:0}function yl(u,f){return u.h?u.h==f:u.g?u.g.has(f):!1}function Pn(u,f){u.g?u.g.add(f):u.h=f}function yn(u,f){u.h&&u.h==f?u.h=null:u.g&&u.g.has(f)&&u.g.delete(f)}pl.prototype.cancel=function(){if(this.i=es(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function es(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let f=u.i;for(let m of u.g.values())f=f.concat(m.D);return f}return M(u.i)}function po(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var f=[],m=u.length,A=0;A<m;A++)f.push(u[A]);return f}f=[],m=0;for(A in u)f[m++]=u[A];return f}function _l(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var f=[];u=u.length;for(var m=0;m<u;m++)f.push(m);return f}f=[],m=0;for(let A in u)f[m++]=A;return f}}}function $e(u,f){if(u.forEach&&typeof u.forEach=="function")u.forEach(f,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,f,void 0);else for(var m=_l(u),A=po(u),P=A.length,O=0;O<P;O++)f.call(void 0,A[O],m&&m[O],u)}var go=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function mo(u,f){if(u){u=u.split("&");for(var m=0;m<u.length;m++){var A=u[m].indexOf("="),P=null;if(0<=A){var O=u[m].substring(0,A);P=u[m].substring(A+1)}else O=u[m];f(O,P?decodeURIComponent(P.replace(/\+/g," ")):"")}}}function _n(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof _n){this.h=u.h,yo(this,u.j),this.o=u.o,this.g=u.g,Ja(this,u.s),this.l=u.l;var f=u.i,m=new _o;m.i=f.i,f.g&&(m.g=new Map(f.g),m.h=f.h),If(this,m),this.m=u.m}else u&&(f=String(u).match(go))?(this.h=!1,yo(this,f[1]||"",!0),this.o=zn(f[2]||""),this.g=zn(f[3]||"",!0),Ja(this,f[4]),this.l=zn(f[5]||"",!0),If(this,f[6]||"",!0),this.m=zn(f[7]||"")):(this.h=!1,this.i=new _o(null,this.h))}_n.prototype.toString=function(){var u=[],f=this.j;f&&u.push(vn(f,vl,!0),":");var m=this.g;return(m||f=="file")&&(u.push("//"),(f=this.o)&&u.push(vn(f,vl,!0),"@"),u.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&u.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&u.push("/"),u.push(vn(m,m.charAt(0)=="/"?Tf:wf,!0))),(m=this.i.toString())&&u.push("?",m),(m=this.m)&&u.push("#",vn(m,ts)),u.join("")};function qn(u){return new _n(u)}function yo(u,f,m){u.j=m?zn(f,!0):f,u.j&&(u.j=u.j.replace(/:$/,""))}function Ja(u,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);u.s=f}else u.s=null}function If(u,f,m){f instanceof _o?(u.i=f,Za(u.i,u.h)):(m||(f=vn(f,bf)),u.i=new _o(f,u.h))}function Ge(u,f,m){u.i.set(f,m)}function Xa(u){return Ge(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function zn(u,f){return u?f?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function vn(u,f,m){return typeof u=="string"?(u=encodeURI(u).replace(f,Ef),m&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Ef(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var vl=/[#\/\?@]/g,wf=/[#\?:]/g,Tf=/[#\?]/g,bf=/[#\?@]/g,ts=/#/g;function _o(u,f){this.h=this.g=null,this.i=u||null,this.j=!!f}function vr(u){u.g||(u.g=new Map,u.h=0,u.i&&mo(u.i,function(f,m){u.add(decodeURIComponent(f.replace(/\+/g," ")),m)}))}n=_o.prototype,n.add=function(u,f){vr(this),this.i=null,u=Wn(this,u);var m=this.g.get(u);return m||this.g.set(u,m=[]),m.push(f),this.h+=1,this};function Af(u,f){vr(u),f=Wn(u,f),u.g.has(f)&&(u.i=null,u.h-=u.g.get(f).length,u.g.delete(f))}function Gn(u,f){return vr(u),f=Wn(u,f),u.g.has(f)}n.forEach=function(u,f){vr(this),this.g.forEach(function(m,A){m.forEach(function(P){u.call(f,P,A,this)},this)},this)},n.na=function(){vr(this);let u=Array.from(this.g.values()),f=Array.from(this.g.keys()),m=[];for(let A=0;A<f.length;A++){let P=u[A];for(let O=0;O<P.length;O++)m.push(f[A])}return m},n.V=function(u){vr(this);let f=[];if(typeof u=="string")Gn(this,u)&&(f=f.concat(this.g.get(Wn(this,u))));else{u=Array.from(this.g.values());for(let m=0;m<u.length;m++)f=f.concat(u[m])}return f},n.set=function(u,f){return vr(this),this.i=null,u=Wn(this,u),Gn(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[f]),this.h+=1,this},n.get=function(u,f){return u?(u=this.V(u),0<u.length?String(u[0]):f):f};function Sf(u,f,m){Af(u,f),0<m.length&&(u.i=null,u.g.set(Wn(u,f),M(m)),u.h+=m.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],f=Array.from(this.g.keys());for(var m=0;m<f.length;m++){var A=f[m];let O=encodeURIComponent(String(A)),B=this.V(A);for(A=0;A<B.length;A++){var P=O;B[A]!==""&&(P+="="+encodeURIComponent(String(B[A]))),u.push(P)}}return this.i=u.join("&")};function Wn(u,f){return f=String(f),u.j&&(f=f.toLowerCase()),f}function Za(u,f){f&&!u.j&&(vr(u),u.i=null,u.g.forEach(function(m,A){var P=A.toLowerCase();A!=P&&(Af(this,A),Sf(this,P,m))},u)),u.j=f}function Df(u,f){let m=new Ki;if(a.Image){let A=new Image;A.onload=S(cn,m,"TestLoadImage: loaded",!0,f,A),A.onerror=S(cn,m,"TestLoadImage: error",!1,f,A),A.onabort=S(cn,m,"TestLoadImage: abort",!1,f,A),A.ontimeout=S(cn,m,"TestLoadImage: timeout",!1,f,A),a.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=u}else f(!1)}function vo(u,f){let m=new Ki,A=new AbortController,P=setTimeout(()=>{A.abort(),cn(m,"TestPingServer: timeout",!1,f)},1e4);fetch(u,{signal:A.signal}).then(O=>{clearTimeout(P),O.ok?cn(m,"TestPingServer: ok",!0,f):cn(m,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(P),cn(m,"TestPingServer: error",!1,f)})}function cn(u,f,m,A,P){try{P&&(P.onload=null,P.onerror=null,P.onabort=null,P.ontimeout=null),A(m)}catch{}}function Cf(){this.g=new pf}function Il(u,f,m){let A=m||"";try{$e(u,function(P,O){let B=P;d(P)&&(B=oo(P)),f.push(A+O+"="+encodeURIComponent(B))})}catch(P){throw f.push(A+"type="+encodeURIComponent("_badmap")),P}}function He(u){this.l=u.Ub||null,this.j=u.eb||!1}R(He,Hi),He.prototype.g=function(){return new ec(this.l,this.j)},He.prototype.i=(function(u){return function(){return u}})({});function ec(u,f){Et.call(this),this.D=u,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}R(ec,Et),n=ec.prototype,n.open=function(u,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=f,this.readyState=1,rs(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(f.body=u),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ns(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,rs(this)),this.g&&(this.readyState=3,rs(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Rf(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Rf(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var f=u.value?u.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!u.done}))&&(this.response=this.responseText+=f)}u.done?ns(this):rs(this),this.readyState==3&&Rf(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,ns(this))},n.Qa=function(u){this.g&&(this.response=u,ns(this))},n.ga=function(){this.g&&ns(this)};function ns(u){u.readyState=4,u.l=null,u.j=null,u.v=null,rs(u)}n.setRequestHeader=function(u,f){this.u.append(u,f)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],f=this.h.entries();for(var m=f.next();!m.done;)m=m.value,u.push(m[0]+": "+m[1]),m=f.next();return u.join(`\r
`)};function rs(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(ec.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function El(u){let f="";return re(u,function(m,A){f+=A,f+=":",f+=m,f+=`\r
`}),f}function is(u,f,m){e:{for(A in m){var A=!1;break e}A=!0}A||(m=El(m),typeof u=="string"?m!=null&&encodeURIComponent(String(m)):Ge(u,f,m))}function ke(u){Et.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}R(ke,Et);var Nf=/^https?$/i,W_=["POST","PUT"];n=ke.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,f,m,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);f=f?f.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():lo.g(),this.v=this.o?ll(this.o):ll(lo),this.g.onreadystatechange=E(this.Ea,this);try{this.B=!0,this.g.open(f,String(u),!0),this.B=!1}catch(O){ss(this,O);return}if(u=m||"",m=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var P in A)m.set(P,A[P]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(let O of A.keys())m.set(O,A.get(O));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(m.keys()).find(O=>O.toLowerCase()=="content-type"),P=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(W_,f,void 0))||A||P||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[O,B]of m)this.g.setRequestHeader(O,B);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Tl(this),this.u=!0,this.g.send(u),this.u=!1}catch(O){ss(this,O)}};function ss(u,f){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=f,u.m=5,wl(u),ti(u)}function wl(u){u.A||(u.A=!0,bt(u,"complete"),bt(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,bt(this,"complete"),bt(this,"abort"),ti(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ti(this,!0)),ke.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?tc(this):this.bb())},n.bb=function(){tc(this)};function tc(u){if(u.h&&typeof o<"u"&&(!u.v[1]||un(u)!=4||u.Z()!=2)){if(u.u&&un(u)==4)df(u.Ea,0,u);else if(bt(u,"readystatechange"),un(u)==4){u.h=!1;try{let B=u.Z();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var m;if(!(m=f)){var A;if(A=B===0){var P=String(u.D).match(go)[1]||null;!P&&a.self&&a.self.location&&(P=a.self.location.protocol.slice(0,-1)),A=!Nf.test(P?P.toLowerCase():"")}m=A}if(m)bt(u,"complete"),bt(u,"success");else{u.m=6;try{var O=2<un(u)?u.g.statusText:""}catch{O=""}u.l=O+" ["+u.Z()+"]",wl(u)}}finally{ti(u)}}}}function ti(u,f){if(u.g){Tl(u);let m=u.g,A=u.v[0]?()=>{}:null;u.g=null,u.v=null,f||bt(u,"ready");try{m.onreadystatechange=A}catch{}}}function Tl(u){u.I&&(a.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function un(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<un(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var f=this.g.responseText;return u&&f.indexOf(u)==0&&(f=f.substring(u.length)),Zr(f)}};function Pf(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function kf(u){let f={};u=(u.g&&2<=un(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<u.length;A++){if(z(u[A]))continue;var m=w(u[A]);let P=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();let O=f[P]||[];f[P]=O,O.push(m)}b(f,function(A){return A.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Kn(u,f,m){return m&&m.internalChannelParams&&m.internalChannelParams[u]||f}function bl(u){this.Aa=0,this.i=[],this.j=new Ki,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Kn("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Kn("baseRetryDelayMs",5e3,u),this.cb=Kn("retryDelaySeedMs",1e4,u),this.Wa=Kn("forwardChannelMaxRetries",2,u),this.wa=Kn("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new pl(u&&u.concurrentRequestLimit),this.Da=new Cf,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=bl.prototype,n.la=8,n.G=1,n.connect=function(u,f,m,A){Mt(0),this.W=u,this.H=f||{},m&&A!==void 0&&(this.H.OSID=m,this.H.OAID=A),this.F=this.X,this.I=l(this,null,this.W),Io(this)};function nc(u){if(rc(u),u.G==3){var f=u.U++,m=qn(u.I);if(Ge(m,"SID",u.K),Ge(m,"RID",f),Ge(m,"TYPE","terminate"),as(u,m),f=new yr(u,u.j,f),f.L=2,f.v=Xa(qn(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!m&&a.Image&&(new Image().src=f.v,m=!0),m||(f.g=p(f.j,null),f.g.ea(f.v)),f.F=Date.now(),Xi(f)}ri(u)}function os(u){u.g&&(oc(u),u.g.cancel(),u.g=null)}function rc(u){os(u),u.u&&(a.clearTimeout(u.u),u.u=null),ni(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function Io(u){if(!gl(u.h)&&!u.s){u.s=!0;var f=u.Ga;no||af(),gr||(no(),gr=!0),Ui.add(f,u),u.B=0}}function ic(u,f){return ml(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=f.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Wi(E(u.Ga,u,f),Cl(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;let P=new yr(this,this.j,u),O=this.o;if(this.S&&(O?(O=_(O),T(O,this.S)):O=this.S),this.m!==null||this.O||(P.H=O,O=null),this.P)e:{for(var f=0,m=0;m<this.i.length;m++){t:{var A=this.i[m];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(f+=A,4096<f){f=m;break e}if(f===4096||m===this.i.length-1){f=m+1;break e}}f=1e3}else f=1e3;f=Ir(this,P,f),m=qn(this.I),Ge(m,"RID",u),Ge(m,"CVER",22),this.D&&Ge(m,"X-HTTP-Session-Id",this.D),as(this,m),O&&(this.O?f="headers="+encodeURIComponent(String(El(O)))+"&"+f:this.m&&is(m,this.m,O)),Pn(this.h,P),this.Ua&&Ge(m,"TYPE","init"),this.P?(Ge(m,"$req",f),Ge(m,"SID","null"),P.T=!0,Ka(P,m,null)):Ka(P,m,f),this.G=2}}else this.G==3&&(u?Al(this,u):this.i.length==0||gl(this.h)||Al(this))};function Al(u,f){var m;f?m=f.l:m=u.U++;let A=qn(u.I);Ge(A,"SID",u.K),Ge(A,"RID",m),Ge(A,"AID",u.T),as(u,A),u.m&&u.o&&is(A,u.m,u.o),m=new yr(u,u.j,m,u.B+1),u.m===null&&(m.H=u.o),f&&(u.i=f.D.concat(u.i)),f=Ir(u,m,1e3),m.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Pn(u.h,m),Ka(m,A,f)}function as(u,f){u.H&&re(u.H,function(m,A){Ge(f,A,m)}),u.l&&$e({},function(m,A){Ge(f,A,m)})}function Ir(u,f,m){m=Math.min(u.i.length,m);var A=u.l?E(u.l.Na,u.l,u):null;e:{var P=u.i;let O=-1;for(;;){let B=["count="+m];O==-1?0<m?(O=P[0].g,B.push("ofs="+O)):O=0:B.push("ofs="+O);let Ne=!0;for(let nt=0;nt<m;nt++){let Pe=P[nt].g,Ht=P[nt].map;if(Pe-=O,0>Pe)O=Math.max(0,P[nt].g-100),Ne=!1;else try{Il(Ht,B,"req"+Pe+"_")}catch{A&&A(Ht)}}if(Ne){A=B.join("&");break e}}}return u=u.i.splice(0,m),f.D=u,A}function Sl(u){if(!u.g&&!u.u){u.Y=1;var f=u.Fa;no||af(),gr||(no(),gr=!0),Ui.add(f,u),u.v=0}}function sc(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Wi(E(u.Fa,u),Cl(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,Dl(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Wi(E(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Mt(10),os(this),Dl(this))};function oc(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function Dl(u){u.g=new yr(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var f=qn(u.qa);Ge(f,"RID","rpc"),Ge(f,"SID",u.K),Ge(f,"AID",u.T),Ge(f,"CI",u.F?"0":"1"),!u.F&&u.ja&&Ge(f,"TO",u.ja),Ge(f,"TYPE","xmlhttp"),as(u,f),u.m&&u.o&&is(f,u.m,u.o),u.L&&(u.g.I=u.L);var m=u.g;u=u.ia,m.L=1,m.v=Xa(qn(f)),m.m=null,m.P=!0,Qa(m,u)}n.Za=function(){this.C!=null&&(this.C=null,os(this),sc(this),Mt(19))};function ni(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function $t(u,f){var m=null;if(u.g==f){ni(u),oc(u),u.g=null;var A=2}else if(yl(u.h,f))m=f.D,yn(u.h,f),A=1;else return;if(u.G!=0){if(f.o)if(A==1){m=f.m?f.m.length:0,f=Date.now()-f.F;var P=u.B;A=Ga(),bt(A,new ao(A,m)),Io(u)}else Sl(u);else if(P=f.s,P==3||P==0&&0<f.X||!(A==1&&ic(u,f)||A==2&&sc(u)))switch(m&&0<m.length&&(f=u.h,f.i=f.i.concat(m)),P){case 1:Er(u,5);break;case 4:Er(u,10);break;case 3:Er(u,6);break;default:Er(u,2)}}}function Cl(u,f){let m=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(m*=2),m*f}function Er(u,f){if(u.j.info("Error code "+f),f==2){var m=E(u.fb,u),A=u.Xa;let P=!A;A=new _n(A||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||yo(A,"https"),Xa(A),P?Df(A.toString(),m):vo(A.toString(),m)}else Mt(2);u.G=0,u.l&&u.l.sa(f),ri(u),rc(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Mt(2)):(this.j.info("Failed to ping google.com"),Mt(1))};function ri(u){if(u.G=0,u.ka=[],u.l){let f=es(u.h);(f.length!=0||u.i.length!=0)&&(k(u.ka,f),k(u.ka,u.i),u.h.i.length=0,M(u.i),u.i.length=0),u.l.ra()}}function l(u,f,m){var A=m instanceof _n?qn(m):new _n(m);if(A.g!="")f&&(A.g=f+"."+A.g),Ja(A,A.s);else{var P=a.location;A=P.protocol,f=f?f+"."+P.hostname:P.hostname,P=+P.port;var O=new _n(null);A&&yo(O,A),f&&(O.g=f),P&&Ja(O,P),m&&(O.l=m),A=O}return m=u.D,f=u.ya,m&&f&&Ge(A,m,f),Ge(A,"VER",u.la),as(u,A),A}function p(u,f,m){if(f&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=u.Ca&&!u.pa?new ke(new He({eb:m})):new ke(u.pa),f.Ha(u.J),f}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function y(){}n=y.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function D(){}D.prototype.g=function(u,f){return new N(u,f)};function N(u,f){Et.call(this),this.g=new bl(f),this.l=u,this.h=f&&f.messageUrlParams||null,u=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(u?u["X-WebChannel-Content-Type"]=f.messageContentType:u={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(u?u["X-WebChannel-Client-Profile"]=f.va:u={"X-WebChannel-Client-Profile":f.va}),this.g.S=u,(u=f&&f.Sb)&&!z(u)&&(this.g.m=u),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!z(f)&&(this.g.D=f,u=this.h,u!==null&&f in u&&(u=this.h,f in u&&delete u[f])),this.j=new ie(this)}R(N,Et),N.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},N.prototype.close=function(){nc(this.g)},N.prototype.o=function(u){var f=this.g;if(typeof u=="string"){var m={};m.__data__=u,u=m}else this.u&&(m={},m.__data__=oo(u),u=m);f.i.push(new fl(f.Ya++,u)),f.G==3&&Io(f)},N.prototype.N=function(){this.g.l=null,delete this.j,nc(this.g),delete this.g,N.aa.N.call(this)};function x(u){wt.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var f=u.__sm__;if(f){e:{for(let m in f){u=m;break e}u=void 0}(this.i=u)&&(u=this.i,f=f!==null&&u in f?f[u]:void 0),this.data=f}else this.data=u}R(x,wt);function H(){za.call(this),this.status=1}R(H,za);function ie(u){this.g=u}R(ie,y),ie.prototype.ua=function(){bt(this.g,"a")},ie.prototype.ta=function(u){bt(this.g,new x(u))},ie.prototype.sa=function(u){bt(this.g,new H)},ie.prototype.ra=function(){bt(this.g,"b")},D.prototype.createWebChannel=D.prototype.g,N.prototype.send=N.prototype.o,N.prototype.open=N.prototype.m,N.prototype.close=N.prototype.close,aS=Mi.createWebChannelTransport=function(){return new D},oS=Mi.getStatEventTarget=function(){return Ga()},sS=Mi.Event=mn,Xy=Mi.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},uo.NO_ERROR=0,uo.TIMEOUT=8,uo.HTTP_ERROR=6,Fh=Mi.ErrorCode=uo,Wa.COMPLETE="complete",iS=Mi.EventType=Wa,qi.EventType=zi,zi.OPEN="a",zi.CLOSE="b",zi.ERROR="c",zi.MESSAGE="d",Et.prototype.listen=Et.prototype.K,xu=Mi.WebChannel=qi,P8=Mi.FetchXmlHttpFactory=He,ke.prototype.listenOnce=ke.prototype.L,ke.prototype.getLastError=ke.prototype.Ka,ke.prototype.getLastErrorCode=ke.prototype.Ba,ke.prototype.getStatus=ke.prototype.Z,ke.prototype.getResponseJson=ke.prototype.Oa,ke.prototype.getResponseText=ke.prototype.oa,ke.prototype.send=ke.prototype.ea,ke.prototype.setWithCredentials=ke.prototype.Ha,rS=Mi.XhrIo=ke}).apply(typeof Jy<"u"?Jy:typeof self<"u"?self:typeof window<"u"?window:{});var aL="@firebase/firestore",cL="4.8.0";var Pt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Pt.UNAUTHENTICATED=new Pt(null),Pt.GOOGLE_CREDENTIALS=new Pt("google-credentials-uid"),Pt.FIRST_PARTY=new Pt("first-party-uid"),Pt.MOCK_USER=new Pt("mock-user");var nl="11.10.0";var Ca=new xr("@firebase/firestore");function Ou(){return Ca.logLevel}function G(n,...e){if(Ca.logLevel<=Ie.DEBUG){let t=e.map(YD);Ca.debug(`Firestore (${nl}): ${n}`,...t)}}function xi(n,...e){if(Ca.logLevel<=Ie.ERROR){let t=e.map(YD);Ca.error(`Firestore (${nl}): ${n}`,...t)}}function Js(n,...e){if(Ca.logLevel<=Ie.WARN){let t=e.map(YD);Ca.warn(`Firestore (${nl}): ${n}`,...t)}}function YD(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function ee(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,QL(n,r,t)}function QL(n,e,t){let r=`FIRESTORE (${nl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw xi(r),new Error(r)}function je(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||QL(e,i,r)}function ue(n,e){return n}var F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Q=class extends An{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Hr=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var s_=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},hS=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Pt.UNAUTHENTICATED))}shutdown(){}},fS=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},pS=class{constructor(e){this.t=e,this.currentUser=Pt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){je(this.o===void 0,42304);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),s=new Hr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Hr,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},a=c=>{G("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(G("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Hr)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(G("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(je(typeof r.accessToken=="string",31837,{l:r}),new s_(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return je(e===null||typeof e=="string",2055,{h:e}),new Pt(e)}},gS=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Pt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},mS=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new gS(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Pt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},o_=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},yS=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Sn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){je(this.o===void 0,3512);let r=s=>{s.error!=null&&G("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.m;return this.m=s.token,G("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{G("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.V.getImmediate({optional:!0});s?i(s):G("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new o_(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(je(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new o_(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function k8(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function YL(){return new TextEncoder}var qh=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=k8(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}};function _e(n,e){return n<e?-1:n>e?1:0}function _S(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return _e(r,i);{let s=YL(),o=M8(s.encode(uL(n,t)),s.encode(uL(e,t)));return o!==0?o:_e(r,i)}}t+=r>65535?2:1}return _e(n.length,e.length)}function uL(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function M8(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return _e(n[t],e[t]);return _e(n.length,e.length)}function $u(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var lL="__name__",a_=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&ee(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&ee(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=n.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return _e(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):_S(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ki.fromString(e.substring(4,e.length-2))}},ot=class n extends a_{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new Q(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},x8=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Rn=class n extends a_{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return x8.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===lL}static keyField(){return new n([lL])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new Q(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new Q(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Q(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Q(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var te=class n{constructor(e){this.path=e}static fromPath(e){return new n(ot.fromString(e))}static fromName(e){return new n(ot.fromString(e).popFirst(5))}static empty(){return new n(ot.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ot.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ot.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new ot(e.slice()))}};function O8(n,e,t){if(!t)throw new Q(F.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function L8(n,e,t,r){if(e===!0&&r===!0)throw new Q(F.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function dL(n){if(!te.isDocumentKey(n))throw new Q(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function JL(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function JD(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ee(12329,{type:typeof n})}function Ra(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Q(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=JD(n);throw new Q(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function mt(n,e){let t={typeString:n};return e&&(t.value=e),t}function nf(n,e){if(!JL(n))throw new Q(F.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let o=n[r];if(i&&typeof o!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){t=`Expected '${r}' field to equal '${s.value}'`;break}}if(t)throw new Q(F.INVALID_ARGUMENT,t);return!0}var hL=-62135596800,fL=1e6,yt=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*fL);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Q(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Q(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<hL)throw new Q(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Q(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/fL}_compareTo(e){return this.seconds===e.seconds?_e(this.nanoseconds,e.nanoseconds):_e(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(nf(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-hL;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};yt._jsonSchemaVersion="firestore/timestamp/1.0",yt._jsonSchema={type:mt("string",yt._jsonSchemaVersion),seconds:mt("number"),nanoseconds:mt("number")};var he=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new yt(0,0))}static max(){return new n(new yt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var zh=-1,vS=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};vS.UNKNOWN_ID=-1;function F8(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=he.fromTimestamp(r===1e9?new yt(t+1,0):new yt(t,r));return new Na(i,te.empty(),e)}function V8(n){return new Na(n.readTime,n.key,zh)}var Na=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(he.min(),te.empty(),zh)}static max(){return new n(he.max(),te.empty(),zh)}};function U8(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=te.comparator(n.documentKey,e.documentKey),t!==0?t:_e(n.largestBatchId,e.largestBatchId))}var j8="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",IS=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};async function rl(n){if(n.code!==F.FAILED_PRECONDITION||n.message!==j8)throw n;G("LocalStore","Unexpectedly lost primary lease")}var U=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ee(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},c=>r(c))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let d=c;t(e[d]).next(h=>{o[d]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};function B8(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function il(n){return n.name==="IndexedDbTransactionError"}var XD=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ae&&this.ae(t),t}}n.ue=-1;return n})(),ZD=-1;function F_(n){return n==null}function Gh(n){return n===0&&1/n==-1/0}function $8(n){return typeof n=="number"&&Number.isInteger(n)&&!Gh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var XL="";function H8(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=pL(e)),e=q8(n.get(t),e);return pL(e)}function q8(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let s=n.charAt(i);switch(s){case"\0":t+="";break;case XL:t+="";break;default:t+=s}}return t}function pL(n){return n+XL+""}var z8="remoteDocuments",ZL="owner";var eF="mutationQueues";var tF="mutations";var nF="documentMutations",G8="remoteDocumentsV14";var rF="remoteDocumentGlobal";var iF="targets";var sF="targetDocuments";var oF="targetGlobal",aF="collectionParents";var cF="clientMetadata";var uF="bundles";var lF="namedQueries";var W8="indexConfiguration";var K8="indexState";var Q8="indexEntries";var dF="documentOverlays";var Y8="globals";var J8=[eF,tF,nF,z8,iF,ZL,oF,sF,cF,rF,aF,uF,lF],uve=[...J8,dF],X8=[eF,tF,nF,G8,iF,ZL,oF,sF,cF,rF,aF,uF,lF,dF],Z8=X8,eK=[...Z8,W8,K8,Q8];var lve=[...eK,Y8];function gL(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function to(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function hF(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var tt=class n{constructor(e,t){this.comparator=e,this.root=t||qr.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,qr.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,qr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Uu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Uu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Uu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Uu(this.root,e,this.comparator,!0)}},Uu=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},qr=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ee(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ee(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw ee(27949);return e+(this.isRed()?0:1)}};qr.EMPTY=null,qr.RED=!0,qr.BLACK=!1;qr.EMPTY=new class{constructor(){this.size=0}get key(){throw ee(57766)}get value(){throw ee(16141)}get color(){throw ee(16727)}get left(){throw ee(29726)}get right(){throw ee(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new qr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var kt=class n{constructor(e){this.comparator=e,this.data=new tt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new c_(this.data.getIterator())}getIteratorFrom(e){return new c_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},c_=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var $n=class n{constructor(e){this.fields=e,e.sort(Rn.comparator)}static empty(){return new n([])}unionWith(e){let t=new kt(Rn.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return $u(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var u_=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var en=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new u_("Invalid base64 string: "+s):s}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return _e(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};en.EMPTY_BYTE_STRING=new en("");var tK=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Oi(n){if(je(!!n,39018),typeof n=="string"){let e=0,t=tK.exec(n);if(je(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ye(n.seconds),nanos:Ye(n.nanos)}}function Ye(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Li(n){return typeof n=="string"?en.fromBase64String(n):en.fromUint8Array(n)}var fF="server_timestamp",pF="__type__",gF="__previous_value__",mF="__local_write_time__";function eC(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[pF])===null||t===void 0?void 0:t.stringValue)===fF}function V_(n){let e=n.mapValue.fields[gF];return eC(e)?V_(e):e}function Wh(n){let e=Oi(n.mapValue.fields[mF].timestampValue);return new yt(e.seconds,e.nanos)}var ES=class{constructor(e,t,r,i,s,o,a,c,d,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=d,this.isUsingEmulator=h}},l_="(default)",d_=class n{constructor(e,t){this.projectId=e,this.database=t||l_}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===l_}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var tC="__type__",yF="__max__",Zy={mapValue:{fields:{__type__:{stringValue:yF}}}},nC="__vector__",Hu="value";function Xs(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?eC(n)?4:vF(n)?9007199254740991:_F(n)?10:11:ee(28295,{value:n})}function Wr(n,e){if(n===e)return!0;let t=Xs(n);if(t!==Xs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Wh(n).isEqual(Wh(e));case 3:return(function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=Oi(i.timestampValue),a=Oi(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,s){return Li(i.bytesValue).isEqual(Li(s.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,s){return Ye(i.geoPointValue.latitude)===Ye(s.geoPointValue.latitude)&&Ye(i.geoPointValue.longitude)===Ye(s.geoPointValue.longitude)})(n,e);case 2:return(function(i,s){if("integerValue"in i&&"integerValue"in s)return Ye(i.integerValue)===Ye(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=Ye(i.doubleValue),a=Ye(s.doubleValue);return o===a?Gh(o)===Gh(a):isNaN(o)&&isNaN(a)}return!1})(n,e);case 9:return $u(n.arrayValue.values||[],e.arrayValue.values||[],Wr);case 10:case 11:return(function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(gL(o)!==gL(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!Wr(o[c],a[c])))return!1;return!0})(n,e);default:return ee(52216,{left:n})}}function Kh(n,e){return(n.values||[]).find(t=>Wr(t,e))!==void 0}function qu(n,e){if(n===e)return 0;let t=Xs(n),r=Xs(e);if(t!==r)return _e(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return _e(n.booleanValue,e.booleanValue);case 2:return(function(s,o){let a=Ye(s.integerValue||s.doubleValue),c=Ye(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1})(n,e);case 3:return mL(n.timestampValue,e.timestampValue);case 4:return mL(Wh(n),Wh(e));case 5:return _S(n.stringValue,e.stringValue);case 6:return(function(s,o){let a=Li(s),c=Li(o);return a.compareTo(c)})(n.bytesValue,e.bytesValue);case 7:return(function(s,o){let a=s.split("/"),c=o.split("/");for(let d=0;d<a.length&&d<c.length;d++){let h=_e(a[d],c[d]);if(h!==0)return h}return _e(a.length,c.length)})(n.referenceValue,e.referenceValue);case 8:return(function(s,o){let a=_e(Ye(s.latitude),Ye(o.latitude));return a!==0?a:_e(Ye(s.longitude),Ye(o.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return yL(n.arrayValue,e.arrayValue);case 10:return(function(s,o){var a,c,d,h;let g=s.fields||{},E=o.fields||{},S=(a=g[Hu])===null||a===void 0?void 0:a.arrayValue,R=(c=E[Hu])===null||c===void 0?void 0:c.arrayValue,M=_e(((d=S?.values)===null||d===void 0?void 0:d.length)||0,((h=R?.values)===null||h===void 0?void 0:h.length)||0);return M!==0?M:yL(S,R)})(n.mapValue,e.mapValue);case 11:return(function(s,o){if(s===Zy.mapValue&&o===Zy.mapValue)return 0;if(s===Zy.mapValue)return 1;if(o===Zy.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),d=o.fields||{},h=Object.keys(d);c.sort(),h.sort();for(let g=0;g<c.length&&g<h.length;++g){let E=_S(c[g],h[g]);if(E!==0)return E;let S=qu(a[c[g]],d[h[g]]);if(S!==0)return S}return _e(c.length,h.length)})(n.mapValue,e.mapValue);default:throw ee(23264,{le:t})}}function mL(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return _e(n,e);let t=Oi(n),r=Oi(e),i=_e(t.seconds,r.seconds);return i!==0?i:_e(t.nanos,r.nanos)}function yL(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=qu(t[i],r[i]);if(s)return s}return _e(t.length,r.length)}function zu(n){return wS(n)}function wS(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=Oi(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Li(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return te.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=wS(s);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${wS(t.fields[o])}`;return i+"}"})(n.mapValue):ee(61005,{value:n})}function n_(n){switch(Xs(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=V_(n);return e?16+n_(e):16;case 5:return 2*n.stringValue.length;case 6:return Li(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,s)=>i+n_(s),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return to(r.fields,(s,o)=>{i+=s.length+n_(o)}),i})(n.mapValue);default:throw ee(13486,{value:n})}}function TS(n){return!!n&&"integerValue"in n}function rC(n){return!!n&&"arrayValue"in n}function _L(n){return!!n&&"nullValue"in n}function vL(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function r_(n){return!!n&&"mapValue"in n}function _F(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[tC])===null||t===void 0?void 0:t.stringValue)===nC}function Uh(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return to(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Uh(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Uh(n.arrayValue.values[t]);return e}return Object.assign({},n)}function vF(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===yF}var hve={mapValue:{fields:{[tC]:{stringValue:nC},[Hu]:{arrayValue:{}}}}};var Cn=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!r_(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Uh(t)}setAll(e){let t=Rn.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=Uh(o):i.push(a.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());r_(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Wr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];r_(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){to(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(Uh(this.value))}};function IF(n){let e=[];return to(n.fields,(t,r)=>{let i=new Rn([t]);if(r_(r)){let s=IF(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new $n(e)}var pr=class n{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,he.min(),he.min(),he.min(),Cn.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,he.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,he.min(),he.min(),Cn.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,he.min(),he.min(),Cn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(he.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Cn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Cn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=he.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Gu=class{constructor(e,t){this.position=e,this.inclusive=t}};function IL(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField()?r=te.comparator(te.fromName(o.referenceValue),t.key):r=qu(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function EL(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Wr(n.position[t],e.position[t]))return!1;return!0}var Wu=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function nK(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var h_=class{},Tt=class n extends h_{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new AS(e,t,r):t==="array-contains"?new CS(e,r):t==="in"?new RS(e,r):t==="not-in"?new NS(e,r):t==="array-contains-any"?new PS(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new SS(e,r):new DS(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(qu(t,this.value)):t!==null&&Xs(this.value)===Xs(t)&&this.matchesComparison(qu(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ee(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Kr=class n extends h_{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new n(e,t)}matches(e){return EF(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function EF(n){return n.op==="and"}function wF(n){return rK(n)&&EF(n)}function rK(n){for(let e of n.filters)if(e instanceof Kr)return!1;return!0}function bS(n){if(n instanceof Tt)return n.field.canonicalString()+n.op.toString()+zu(n.value);if(wF(n))return n.filters.map(e=>bS(e)).join(",");{let e=n.filters.map(t=>bS(t)).join(",");return`${n.op}(${e})`}}function TF(n,e){return n instanceof Tt?(function(r,i){return i instanceof Tt&&r.op===i.op&&r.field.isEqual(i.field)&&Wr(r.value,i.value)})(n,e):n instanceof Kr?(function(r,i){return i instanceof Kr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&TF(o,i.filters[a]),!0):!1})(n,e):void ee(19439)}function bF(n){return n instanceof Tt?(function(t){return`${t.field.canonicalString()} ${t.op} ${zu(t.value)}`})(n):n instanceof Kr?(function(t){return t.op.toString()+" {"+t.getFilters().map(bF).join(" ,")+"}"})(n):"Filter"}var AS=class extends Tt{constructor(e,t,r){super(e,t,r),this.key=te.fromName(r.referenceValue)}matches(e){let t=te.comparator(e.key,this.key);return this.matchesComparison(t)}},SS=class extends Tt{constructor(e,t){super(e,"in",t),this.keys=AF("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},DS=class extends Tt{constructor(e,t){super(e,"not-in",t),this.keys=AF("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function AF(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>te.fromName(r.referenceValue))}var CS=class extends Tt{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return rC(t)&&Kh(t.arrayValue,this.value)}},RS=class extends Tt{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Kh(this.value.arrayValue,t)}},NS=class extends Tt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Kh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Kh(this.value.arrayValue,t)}},PS=class extends Tt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!rC(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Kh(this.value.arrayValue,r))}};var kS=class{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Pe=null}};function wL(n,e=null,t=[],r=[],i=null,s=null,o=null){return new kS(n,e,t,r,i,s,o)}function iC(n){let e=ue(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>bS(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(s){return s.field.canonicalString()+s.dir})(r)).join(","),F_(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>zu(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>zu(r)).join(",")),e.Pe=t}return e.Pe}function sC(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!nK(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!TF(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!EL(n.startAt,e.startAt)&&EL(n.endAt,e.endAt)}function MS(n){return te.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Ku=class{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function iK(n,e,t,r,i,s,o,a){return new Ku(n,e,t,r,i,s,o,a)}function oC(n){return new Ku(n)}function TL(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function sK(n){return n.collectionGroup!==null}function jh(n){let e=ue(n);if(e.Te===null){e.Te=[];let t=new Set;for(let s of e.explicitOrderBy)e.Te.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new kt(Rn.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(a=a.add(d.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.Te.push(new Wu(s,r))}),t.has(Rn.keyField().canonicalString())||e.Te.push(new Wu(Rn.keyField(),r))}return e.Te}function zr(n){let e=ue(n);return e.Ie||(e.Ie=oK(e,jh(n))),e.Ie}function oK(n,e){if(n.limitType==="F")return wL(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new Wu(i.field,s)});let t=n.endAt?new Gu(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Gu(n.startAt.position,n.startAt.inclusive):null;return wL(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function xS(n,e,t){return new Ku(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function U_(n,e){return sC(zr(n),zr(e))&&n.limitType===e.limitType}function SF(n){return`${iC(zr(n))}|lt:${n.limitType}`}function Lu(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>bF(i)).join(", ")}]`),F_(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>zu(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>zu(i)).join(",")),`Target(${r})`})(zr(n))}; limitType=${n.limitType})`}function j_(n,e){return e.isFoundDocument()&&(function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):te.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)})(n,e)&&(function(r,i){for(let s of jh(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(o,a,c){let d=IL(o,a,c);return o.inclusive?d<=0:d<0})(r.startAt,jh(r),i)||r.endAt&&!(function(o,a,c){let d=IL(o,a,c);return o.inclusive?d>=0:d>0})(r.endAt,jh(r),i))})(n,e)}function aK(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function DF(n){return(e,t)=>{let r=!1;for(let i of jh(n)){let s=cK(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function cK(n,e,t){let r=n.field.isKeyField()?te.comparator(e.key,t.key):(function(s,o,a){let c=o.data.field(s),d=a.data.field(s);return c!==null&&d!==null?qu(c,d):ee(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ee(19790,{direction:n.dir})}}var Fi=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){to(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return hF(this.inner)}size(){return this.innerSize}};var uK=new tt(te.comparator);function Vi(){return uK}var CF=new tt(te.comparator);function Vh(...n){let e=CF;for(let t of n)e=e.insert(t.key,t);return e}function RF(n){let e=CF;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ba(){return Bh()}function NF(){return Bh()}function Bh(){return new Fi(n=>n.toString(),(n,e)=>n.isEqual(e))}var lK=new tt(te.comparator),dK=new kt(te.comparator);function we(...n){let e=dK;for(let t of n)e=e.add(t);return e}var hK=new kt(_e);function fK(){return hK}function aC(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Gh(e)?"-0":e}}function PF(n){return{integerValue:""+n}}function pK(n,e){return $8(e)?PF(e):aC(n,e)}var Qu=class{constructor(){this._=void 0}};function gK(n,e,t){return n instanceof Yu?(function(i,s){let o={fields:{[pF]:{stringValue:fF},[mF]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&eC(s)&&(s=V_(s)),s&&(o.fields[gF]=s),{mapValue:o}})(t,e):n instanceof Pa?MF(n,e):n instanceof ka?xF(n,e):(function(i,s){let o=kF(i,s),a=bL(o)+bL(i.Ee);return TS(o)&&TS(i.Ee)?PF(a):aC(i.serializer,a)})(n,e)}function mK(n,e,t){return n instanceof Pa?MF(n,e):n instanceof ka?xF(n,e):t}function kF(n,e){return n instanceof Ju?(function(r){return TS(r)||(function(s){return!!s&&"doubleValue"in s})(r)})(e)?e:{integerValue:0}:null}var Yu=class extends Qu{},Pa=class extends Qu{constructor(e){super(),this.elements=e}};function MF(n,e){let t=OF(e);for(let r of n.elements)t.some(i=>Wr(i,r))||t.push(r);return{arrayValue:{values:t}}}var ka=class extends Qu{constructor(e){super(),this.elements=e}};function xF(n,e){let t=OF(e);for(let r of n.elements)t=t.filter(i=>!Wr(i,r));return{arrayValue:{values:t}}}var Ju=class extends Qu{constructor(e,t){super(),this.serializer=e,this.Ee=t}};function bL(n){return Ye(n.integerValue||n.doubleValue)}function OF(n){return rC(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function yK(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof Pa&&i instanceof Pa||r instanceof ka&&i instanceof ka?$u(r.elements,i.elements,Wr):r instanceof Ju&&i instanceof Ju?Wr(r.Ee,i.Ee):r instanceof Yu&&i instanceof Yu})(n.transform,e.transform)}var OS=class{constructor(e,t){this.version=e,this.transformResults=t}},Ws=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function i_(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Xu=class{};function LF(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new f_(n.key,Ws.none()):new Ma(n.key,n.data,Ws.none());{let t=n.data,r=Cn.empty(),i=new kt(Rn.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Qr(n.key,r,new $n(i.toArray()),Ws.none())}}function _K(n,e,t){n instanceof Ma?(function(i,s,o){let a=i.value.clone(),c=SL(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()})(n,e,t):n instanceof Qr?(function(i,s,o){if(!i_(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=SL(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(FF(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(n,e,t):(function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,t)}function $h(n,e,t,r){return n instanceof Ma?(function(s,o,a,c){if(!i_(s.precondition,o))return a;let d=s.value.clone(),h=DL(s.fieldTransforms,c,o);return d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null})(n,e,t,r):n instanceof Qr?(function(s,o,a,c){if(!i_(s.precondition,o))return a;let d=DL(s.fieldTransforms,c,o),h=o.data;return h.setAll(FF(s)),h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))})(n,e,t,r):(function(s,o,a){return i_(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a})(n,e,t)}function vK(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),s=kF(r.transform,i||null);s!=null&&(t===null&&(t=Cn.empty()),t.set(r.field,s))}return t||null}function AL(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&$u(r,i,(s,o)=>yK(s,o))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Ma=class extends Xu{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Qr=class extends Xu{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function FF(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function SL(n,e,t){let r=new Map;je(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,mK(o,a,t[i]))}return r}function DL(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,gK(s,o,e))}return r}var f_=class extends Xu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},LS=class extends Xu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var FS=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&_K(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=$h(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=$h(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=NF();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;let c=LF(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(he.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),we())}isEqual(e){return this.batchId===e.batchId&&$u(this.mutations,e.mutations,(t,r)=>AL(t,r))&&$u(this.baseMutations,e.baseMutations,(t,r)=>AL(t,r))}},VS=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){je(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=(function(){return lK})(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new n(e,t,r,i)}};var US=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var jS=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var pt,Re;function IK(n){switch(n){case F.OK:return ee(64938);case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0;default:return ee(15467,{code:n})}}function VF(n){if(n===void 0)return xi("GRPC error has no .code"),F.UNKNOWN;switch(n){case pt.OK:return F.OK;case pt.CANCELLED:return F.CANCELLED;case pt.UNKNOWN:return F.UNKNOWN;case pt.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case pt.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case pt.INTERNAL:return F.INTERNAL;case pt.UNAVAILABLE:return F.UNAVAILABLE;case pt.UNAUTHENTICATED:return F.UNAUTHENTICATED;case pt.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case pt.NOT_FOUND:return F.NOT_FOUND;case pt.ALREADY_EXISTS:return F.ALREADY_EXISTS;case pt.PERMISSION_DENIED:return F.PERMISSION_DENIED;case pt.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case pt.ABORTED:return F.ABORTED;case pt.OUT_OF_RANGE:return F.OUT_OF_RANGE;case pt.UNIMPLEMENTED:return F.UNIMPLEMENTED;case pt.DATA_LOSS:return F.DATA_LOSS;default:return ee(39323,{code:n})}}(Re=pt||(pt={}))[Re.OK=0]="OK",Re[Re.CANCELLED=1]="CANCELLED",Re[Re.UNKNOWN=2]="UNKNOWN",Re[Re.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Re[Re.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Re[Re.NOT_FOUND=5]="NOT_FOUND",Re[Re.ALREADY_EXISTS=6]="ALREADY_EXISTS",Re[Re.PERMISSION_DENIED=7]="PERMISSION_DENIED",Re[Re.UNAUTHENTICATED=16]="UNAUTHENTICATED",Re[Re.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Re[Re.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Re[Re.ABORTED=10]="ABORTED",Re[Re.OUT_OF_RANGE=11]="OUT_OF_RANGE",Re[Re.UNIMPLEMENTED=12]="UNIMPLEMENTED",Re[Re.INTERNAL=13]="INTERNAL",Re[Re.UNAVAILABLE=14]="UNAVAILABLE",Re[Re.DATA_LOSS=15]="DATA_LOSS";var CL=null;var EK=new ki([4294967295,4294967295],0);function RL(n){let e=YL().encode(n),t=new nS;return t.update(e),new Uint8Array(t.digest())}function NL(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new ki([t,r],0),new ki([i,s],0)]}var BS=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Aa(`Invalid padding: ${t}`);if(r<0)throw new Aa(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Aa(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Aa(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=ki.fromNumber(this.fe)}pe(e,t,r){let i=e.add(t.multiply(ki.fromNumber(r)));return i.compare(EK)===1&&(i=new ki([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let t=RL(e),[r,i]=NL(t);for(let s=0;s<this.hashCount;s++){let o=this.pe(r,i,s);if(!this.ye(o))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.fe===0)return;let t=RL(e),[r,i]=NL(t);for(let s=0;s<this.hashCount;s++){let o=this.pe(r,i,s);this.we(o)}}we(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Aa=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var p_=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Qh.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(he.min(),i,new tt(_e),Vi(),we())}},Qh=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,we(),we(),we())}};var ju=class{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=i}},g_=class{constructor(e,t){this.targetId=e,this.De=t}},m_=class{constructor(e,t,r=en.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},y_=class{constructor(){this.ve=0,this.Ce=PL(),this.Fe=en.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=we(),t=we(),r=we();return this.Ce.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ee(38017,{changeType:s})}}),new Qh(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=PL()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,je(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},$S=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=Vi(),this.je=e_(),this.Je=e_(),this.He=new tt(_e)}Ye(e){for(let t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(let t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{let r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:ee(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,i)=>{this.nt(i)&&t(i)})}it(e){let t=e.targetId,r=e.De.count,i=this.st(t);if(i){let s=i.target;if(MS(s))if(r===0){let o=new te(s.path);this.Xe(t,o,pr.newNoDocument(o,he.min()))}else je(r===1,20013,{expectedCount:r});else{let o=this.ot(t);if(o!==r){let a=this._t(e),c=a?this.ut(a,e,o):1;if(c!==0){this.rt(t);let d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,d)}CL?.ct((function(h,g,E,S,R){var M,k,V,z,K,ye;let ze={localCacheCount:h,existenceFilterCount:g.count,databaseId:E.database,projectId:E.projectId},re=g.unchangedNames;return re&&(ze.bloomFilter={applied:R===0,hashCount:(M=re?.hashCount)!==null&&M!==void 0?M:0,bitmapLength:(z=(V=(k=re?.bits)===null||k===void 0?void 0:k.bitmap)===null||V===void 0?void 0:V.length)!==null&&z!==void 0?z:0,padding:(ye=(K=re?.bits)===null||K===void 0?void 0:K.padding)!==null&&ye!==void 0?ye:0,mightContain:b=>{var _;return(_=S?.mightContain(b))!==null&&_!==void 0&&_}}),ze})(o,e.De,this.We.lt(),a,c))}}}}_t(e){let t=e.De.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,o,a;try{o=Li(r).toUint8Array()}catch(c){if(c instanceof u_)return Js("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new BS(o,i,s)}catch(c){return Js(c instanceof Aa?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.fe===0?null:a}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){let r=this.We.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let o=this.We.lt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Xe(t,s,null),i++)}),i}Pt(e){let t=new Map;this.Ge.forEach((s,o)=>{let a=this.st(o);if(a){if(s.current&&MS(a.target)){let c=new te(a.target.path);this.Tt(c).has(o)||this.It(o,c)||this.Xe(o,c,pr.newNoDocument(c,e))}s.Ne&&(t.set(o,s.Le()),s.ke())}});let r=we();this.Je.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let d=this.st(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ze.forEach((s,o)=>o.setReadTime(e));let i=new p_(e,t,this.He,this.ze,r);return this.ze=Vi(),this.je=e_(),this.Je=e_(),this.He=new tt(_e),i}Ze(e,t){if(!this.nt(e))return;let r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,t)?i.qe(t,1):i.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new y_,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new kt(_e),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new kt(_e),this.je=this.je.insert(e,t)),t}nt(e){let t=this.st(e)!==null;return t||G("WatchChangeAggregator","Detected inactive target",e),t}st(e){let t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new y_),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}};function e_(){return new tt(te.comparator)}function PL(){return new tt(te.comparator)}var wK={asc:"ASCENDING",desc:"DESCENDING"},TK={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},bK={and:"AND",or:"OR"},HS=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function qS(n,e){return n.useProto3Json||F_(e)?e:{value:e}}function __(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function UF(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function AK(n,e){return __(n,e.toTimestamp())}function Gr(n){return je(!!n,49232),he.fromTimestamp((function(t){let r=Oi(t);return new yt(r.seconds,r.nanos)})(n))}function cC(n,e){return zS(n,e).canonicalString()}function zS(n,e){let t=(function(i){return new ot(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function jF(n){let e=ot.fromString(n);return je(zF(e),10190,{key:e.toString()}),e}function GS(n,e){return cC(n.databaseId,e.path)}function cS(n,e){let t=jF(e);if(t.get(1)!==n.databaseId.projectId)throw new Q(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Q(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new te($F(t))}function BF(n,e){return cC(n.databaseId,e)}function SK(n){let e=jF(n);return e.length===4?ot.emptyPath():$F(e)}function WS(n){return new ot(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function $F(n){return je(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function kL(n,e,t){return{name:GS(n,e),fields:t.value.mapValue.fields}}function DK(n,e){let t;if("targetChange"in e){e.targetChange;let r=(function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:ee(39313,{state:d})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=(function(d,h){return d.useProto3Json?(je(h===void 0||typeof h=="string",58123),en.fromBase64String(h||"")):(je(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),en.fromUint8Array(h||new Uint8Array))})(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&(function(d){let h=d.code===void 0?F.UNKNOWN:VF(d.code);return new Q(h,d.message||"")})(o);t=new m_(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=cS(n,r.document.name),s=Gr(r.document.updateTime),o=r.document.createTime?Gr(r.document.createTime):he.min(),a=new Cn({mapValue:{fields:r.document.fields}}),c=pr.newFoundDocument(i,s,o,a),d=r.targetIds||[],h=r.removedTargetIds||[];t=new ju(d,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=cS(n,r.document),s=r.readTime?Gr(r.readTime):he.min(),o=pr.newNoDocument(i,s),a=r.removedTargetIds||[];t=new ju([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=cS(n,r.document),s=r.removedTargetIds||[];t=new ju([],s,i,null)}else{if(!("filter"in e))return ee(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new jS(i,s),a=r.targetId;t=new g_(a,o)}}return t}function CK(n,e){let t;if(e instanceof Ma)t={update:kL(n,e.key,e.value)};else if(e instanceof f_)t={delete:GS(n,e.key)};else if(e instanceof Qr)t={update:kL(n,e.key,e.data),updateMask:FK(e.fieldMask)};else{if(!(e instanceof LS))return ee(16599,{Rt:e.type});t={verify:GS(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>(function(s,o){let a=o.transform;if(a instanceof Yu)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Pa)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ka)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ju)return{fieldPath:o.field.canonicalString(),increment:a.Ee};throw ee(20930,{transform:o.transform})})(0,r))),e.precondition.isNone||(t.currentDocument=(function(i,s){return s.updateTime!==void 0?{updateTime:AK(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ee(27497)})(n,e.precondition)),t}function RK(n,e){return n&&n.length>0?(je(e!==void 0,14353),n.map(t=>(function(i,s){let o=i.updateTime?Gr(i.updateTime):Gr(s);return o.isEqual(he.min())&&(o=Gr(s)),new OS(o,i.transformResults||[])})(t,e))):[]}function NK(n,e){return{documents:[BF(n,e.path)]}}function PK(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=BF(n,i);let s=(function(d){if(d.length!==0)return qF(Kr.create(d,"and"))})(e.filters);s&&(t.structuredQuery.where=s);let o=(function(d){if(d.length!==0)return d.map(h=>(function(E){return{field:Fu(E.field),direction:xK(E.dir)}})(h))})(e.orderBy);o&&(t.structuredQuery.orderBy=o);let a=qS(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(d){return{before:d.inclusive,values:d.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(d){return{before:!d.inclusive,values:d.position}})(e.endAt)),{Vt:t,parent:i}}function kK(n){let e=SK(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){je(r===1,65062);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];t.where&&(s=(function(g){let E=HF(g);return E instanceof Kr&&wF(E)?E.getFilters():[E]})(t.where));let o=[];t.orderBy&&(o=(function(g){return g.map(E=>(function(R){return new Wu(Vu(R.field),(function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(R.direction))})(E))})(t.orderBy));let a=null;t.limit&&(a=(function(g){let E;return E=typeof g=="object"?g.value:g,F_(E)?null:E})(t.limit));let c=null;t.startAt&&(c=(function(g){let E=!!g.before,S=g.values||[];return new Gu(S,E)})(t.startAt));let d=null;return t.endAt&&(d=(function(g){let E=!g.before,S=g.values||[];return new Gu(S,E)})(t.endAt)),iK(e,i,o,s,a,"F",c,d)}function MK(n,e){let t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ee(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function HF(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Vu(t.unaryFilter.field);return Tt.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Vu(t.unaryFilter.field);return Tt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Vu(t.unaryFilter.field);return Tt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Vu(t.unaryFilter.field);return Tt.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ee(61313);default:return ee(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Tt.create(Vu(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ee(58110);default:return ee(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Kr.create(t.compositeFilter.filters.map(r=>HF(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ee(1026)}})(t.compositeFilter.op))})(n):ee(30097,{filter:n})}function xK(n){return wK[n]}function OK(n){return TK[n]}function LK(n){return bK[n]}function Fu(n){return{fieldPath:n.canonicalString()}}function Vu(n){return Rn.fromServerFormat(n.fieldPath)}function qF(n){return n instanceof Tt?(function(t){if(t.op==="=="){if(vL(t.value))return{unaryFilter:{field:Fu(t.field),op:"IS_NAN"}};if(_L(t.value))return{unaryFilter:{field:Fu(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(vL(t.value))return{unaryFilter:{field:Fu(t.field),op:"IS_NOT_NAN"}};if(_L(t.value))return{unaryFilter:{field:Fu(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Fu(t.field),op:OK(t.op),value:t.value}}})(n):n instanceof Kr?(function(t){let r=t.getFilters().map(i=>qF(i));return r.length===1?r[0]:{compositeFilter:{op:LK(t.op),filters:r}}})(n):ee(54877,{filter:n})}function FK(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function zF(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Yh=class n{constructor(e,t,r,i,s=he.min(),o=he.min(),a=en.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var KS=class{constructor(e){this.gt=e}};function VK(n){let e=kK({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?xS(e,e.limit,"L"):e}var v_=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(Ye(e.integerValue));else if("doubleValue"in e){let r=Ye(e.doubleValue);isNaN(r)?this.Ct(t,13):(this.Ct(t,15),Gh(r)?t.Ft(0):t.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(t,20),typeof r=="string"&&(r=Oi(r)),t.Mt(`${r.seconds||""}`),t.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(Li(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(t,45),t.Ft(r.latitude||0),t.Ft(r.longitude||0)}else"mapValue"in e?vF(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):_F(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):ee(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let r=e.fields||{};this.Ct(t,55);for(let i of Object.keys(r))this.xt(i,t),this.Dt(r[i],t)}Lt(e,t){var r,i;let s=e.fields||{};this.Ct(t,53);let o=Hu,a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(t,15),t.Ft(Ye(a)),this.xt(o,t),this.Dt(s[o],t)}qt(e,t){let r=e.values||[];this.Ct(t,50);for(let i of r)this.Dt(i,t)}Bt(e,t){this.Ct(t,37),te.fromName(e).path.forEach(r=>{this.Ct(t,60),this.$t(r,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};v_.Ut=new v_;var QS=class{constructor(){this.Dn=new YS}addToCollectionParentIndex(e,t){return this.Dn.add(t),U.resolve()}getCollectionParents(e,t){return U.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return U.resolve()}deleteFieldIndex(e,t){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,t){return U.resolve()}getDocumentsMatchingTarget(e,t){return U.resolve(null)}getIndexType(e,t){return U.resolve(0)}getFieldIndexes(e,t){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,t){return U.resolve(Na.min())}getMinOffsetFromCollectionGroup(e,t){return U.resolve(Na.min())}updateCollectionGroup(e,t,r){return U.resolve()}updateIndexEntries(e,t){return U.resolve()}},YS=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new kt(ot.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new kt(ot.comparator)).toArray()}};var fve=new Uint8Array(0);var ML={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},GF=41943040,Bn=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};Bn.DEFAULT_COLLECTION_PERCENTILE=10,Bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Bn.DEFAULT=new Bn(GF,Bn.DEFAULT_COLLECTION_PERCENTILE,Bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Bn.DISABLED=new Bn(-1,0,0);var Jh=class n{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new n(0)}static ur(){return new n(-1)}};var xL="LruGarbageCollector",UK=1048576;function OL([n,e],[t,r]){let i=_e(n,t);return i===0?_e(e,r):i}var JS=class{constructor(e){this.Tr=e,this.buffer=new kt(OL),this.Ir=0}dr(){return++this.Ir}Er(e){let t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();OL(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},XS=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){G(xL,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){il(t)?G(xL,"Ignoring IndexedDB error during garbage collection: ",t):await rl(t)}await this.Rr(3e5)})}},ZS=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return U.resolve(XD.ue);let r=new JS(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(G("LruGarbageCollector","Garbage collection skipped; disabled"),U.resolve(ML)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(G("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ML):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,i,s,o,a,c,d,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(G("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,o=Date.now(),this.nthSequenceNumber(e,i))).next(g=>(r=g,a=Date.now(),this.removeTargets(e,r,t))).next(g=>(s=g,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(g=>(d=Date.now(),Ou()<=Ie.DEBUG&&G("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(c-a)+`ms
	Removed ${g} documents in `+(d-c)+`ms
Total Duration: ${d-h}ms`),U.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:g})))}};function jK(n,e){return new ZS(n,e)}var eD=class{constructor(){this.changes=new Fi(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,pr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?U.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var tD=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var nD=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&$h(r.mutation,i,$n.empty(),yt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,we()).next(()=>r))}getLocalViewOfDocuments(e,t,r=we()){let i=ba();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=Vh();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=ba();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,we()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=Vi(),o=Bh(),a=(function(){return Bh()})();return t.forEach((c,d)=>{let h=r.get(d.key);i.has(d.key)&&(h===void 0||h.mutation instanceof Qr)?s=s.insert(d.key,d):h!==void 0?(o.set(d.key,h.mutation.getFieldMask()),$h(h.mutation,d,h.mutation.getFieldMask(),yt.now())):o.set(d.key,$n.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((d,h)=>o.set(d,h)),t.forEach((d,h)=>{var g;return a.set(d,new tD(h,(g=o.get(d))!==null&&g!==void 0?g:null))}),a))}recalculateAndSaveOverlays(e,t){let r=Bh(),i=new tt((o,a)=>o-a),s=we();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let a of o)a.keys().forEach(c=>{let d=t.get(c);if(d===null)return;let h=r.get(c)||$n.empty();h=a.applyToLocalView(d,h),r.set(c,h);let g=(i.get(a.batchId)||we()).add(c);i=i.insert(a.batchId,g)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),d=c.key,h=c.value,g=NF();h.forEach(E=>{if(!s.has(E)){let S=LF(t.get(E),r.get(E));S!==null&&g.set(E,S),s=s.add(E)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,g))}return U.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return(function(o){return te.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):sK(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):U.resolve(ba()),a=zh,c=s;return o.next(d=>U.forEach(d,(h,g)=>(a<g.largestBatchId&&(a=g.largestBatchId),s.get(h)?U.resolve():this.remoteDocumentCache.getEntry(e,h).next(E=>{c=c.insert(h,E)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,c,d,we())).next(h=>({batchId:a,changes:RF(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new te(t)).next(r=>{let i=Vh();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=Vh();return this.indexManager.getCollectionParents(e,s).next(a=>U.forEach(a,c=>{let d=(function(g,E){return new Ku(E,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)})(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(h=>{h.forEach((g,E)=>{o=o.insert(g,E)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((c,d)=>{let h=d.getKey();o.get(h)===null&&(o=o.insert(h,pr.newInvalidDocument(h)))});let a=Vh();return o.forEach((c,d)=>{let h=s.get(c);h!==void 0&&$h(h.mutation,d,$n.empty(),yt.now()),j_(t,d)&&(a=a.insert(c,d))}),a})}};var rD=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return U.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:Gr(i.createTime)}})(t)),U.resolve()}getNamedQuery(e,t){return U.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(i){return{name:i.name,query:VK(i.bundledQuery),readTime:Gr(i.readTime)}})(t)),U.resolve()}};var iD=class{constructor(){this.overlays=new tt(te.comparator),this.kr=new Map}getOverlay(e,t){return U.resolve(this.overlays.get(t))}getOverlays(e,t){let r=ba();return U.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.wt(e,t,s)}),U.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.kr.delete(r)),U.resolve()}getOverlaysForCollection(e,t,r){let i=ba(),s=t.length+1,o=new te(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,d=c.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return U.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new tt((d,h)=>d-h),o=this.overlays.getIterator();for(;o.hasNext();){let d=o.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>r){let h=s.get(d.largestBatchId);h===null&&(h=ba(),s=s.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}let a=ba(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,h)=>a.set(d,h)),!(a.size()>=i)););return U.resolve(a)}wt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new US(t,r));let s=this.kr.get(t);s===void 0&&(s=we(),this.kr.set(t,s)),this.kr.set(t,s.add(r.key))}};var sD=class{constructor(){this.sessionToken=en.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,U.resolve()}};var Xh=class{constructor(){this.qr=new kt(gt.Qr),this.$r=new kt(gt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){let r=new gt(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new gt(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){let t=new te(new ot([])),r=new gt(t,e),i=new gt(t,e+1),s=[];return this.$r.forEachInRange([r,i],o=>{this.Wr(o),s.push(o.key)}),s}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let t=new te(new ot([])),r=new gt(t,e),i=new gt(t,e+1),s=we();return this.$r.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new gt(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},gt=class{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return te.comparator(e.key,t.key)||_e(e.Hr,t.Hr)}static Ur(e,t){return _e(e.Hr,t.Hr)||te.comparator(e.key,t.key)}};var oD=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new kt(gt.Qr)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new FS(s,t,r,i);this.mutationQueue.push(o);for(let a of i)this.Yr=this.Yr.add(new gt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return U.resolve(o)}lookupMutationBatch(e,t){return U.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Xr(r),s=i<0?0:i;return U.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?ZD:this.er-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new gt(t,0),i=new gt(t,Number.POSITIVE_INFINITY),s=[];return this.Yr.forEachInRange([r,i],o=>{let a=this.Zr(o.Hr);s.push(a)}),U.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new kt(_e);return t.forEach(i=>{let s=new gt(i,0),o=new gt(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([s,o],a=>{r=r.add(a.Hr)})}),U.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;te.isDocumentKey(s)||(s=s.child(""));let o=new gt(new te(s),0),a=new kt(_e);return this.Yr.forEachWhile(c=>{let d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(a=a.add(c.Hr)),!0)},o),U.resolve(this.ei(a))}ei(e){let t=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){je(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return U.forEach(t.mutations,i=>{let s=new gt(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){let r=new gt(t,0),i=this.Yr.firstAfterOrEqual(r);return U.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var aD=class{constructor(e){this.ni=e,this.docs=(function(){return new tt(te.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return U.resolve(r?r.document.mutableCopy():pr.newInvalidDocument(t))}getEntries(e,t){let r=Vi();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():pr.newInvalidDocument(i))}),U.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Vi(),o=t.path,a=new te(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:d,value:{document:h}}=c.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||U8(V8(h),r)<=0||(i.has(h.key)||j_(t,h))&&(s=s.insert(h.key,h.mutableCopy()))}return U.resolve(s)}getAllFromCollectionGroup(e,t,r,i){ee(9500)}ri(e,t){return U.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new cD(this)}getSize(e){return U.resolve(this.size)}},cD=class extends eD{constructor(e){super(),this.Or=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),U.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}};var uD=class{constructor(e){this.persistence=e,this.ii=new Fi(t=>iC(t),sC),this.lastRemoteSnapshotVersion=he.min(),this.highestTargetId=0,this.si=0,this.oi=new Xh,this.targetCount=0,this._i=Jh.ar()}forEachTarget(e,t){return this.ii.forEach((r,i)=>t(i)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),U.resolve()}hr(e){this.ii.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this._i=new Jh(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,U.resolve()}updateTargetData(e,t){return this.hr(t),U.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.ii.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.ii.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),U.waitFor(s).next(()=>i)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,t){let r=this.ii.get(t)||null;return U.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),U.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),U.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),U.resolve()}getMatchingKeysForTargetId(e,t){let r=this.oi.Jr(t);return U.resolve(r)}containsKey(e,t){return U.resolve(this.oi.containsKey(t))}};var I_=class{constructor(e,t){this.ai={},this.overlays={},this.ui=new XD(0),this.ci=!1,this.ci=!0,this.li=new sD,this.referenceDelegate=e(this),this.hi=new uD(this),this.indexManager=new QS,this.remoteDocumentCache=(function(i){return new aD(i)})(r=>this.referenceDelegate.Pi(r)),this.serializer=new KS(t),this.Ti=new rD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new iD,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new oD(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){G("MemoryPersistence","Starting transaction:",e);let i=new lD(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ei(e,t){return U.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}},lD=class extends IS{constructor(e){super(),this.currentSequenceNumber=e}},dD=class n{constructor(e){this.persistence=e,this.Ai=new Xh,this.Ri=null}static Vi(e){return new n(e)}get mi(){if(this.Ri)return this.Ri;throw ee(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),U.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),U.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.mi.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.mi,r=>{let i=te.fromPath(r);return this.fi(e,i).next(s=>{s||t.removeEntry(i,he.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return U.or([()=>U.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},E_=class n{constructor(e,t){this.persistence=e,this.gi=new Fi(r=>H8(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=jK(this,t)}static Vi(e,t){return new n(e,t)}Ii(){}di(e){return U.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){let t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return U.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(s=>s?U.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ri(e,o=>this.Sr(e,o,t).next(a=>{a||(r++,s.removeEntry(o,he.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),U.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),U.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),U.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),U.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=n_(e.data.value)),t}Sr(e,t,r){return U.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.gi.get(t);return U.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var hD=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=i}static Es(e,t){let r=we(),i=we();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var fD=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var pD=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return Wk()?8:B8(Rt())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.ps(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ys(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new fD;return this.ws(e,t,o).next(a=>{if(s.result=a,this.Rs)return this.Ss(e,t,o,a.size)})}).next(()=>s.result)}Ss(e,t,r,i){return r.documentReadCount<this.Vs?(Ou()<=Ie.DEBUG&&G("QueryEngine","SDK will not create cache indexes for query:",Lu(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),U.resolve()):(Ou()<=Ie.DEBUG&&G("QueryEngine","Query:",Lu(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(Ou()<=Ie.DEBUG&&G("QueryEngine","The SDK decides to create cache indexes for query:",Lu(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,zr(t))):U.resolve())}ps(e,t){if(TL(t))return U.resolve(null);let r=zr(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=xS(t,null,"F"),r=zr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=we(...s);return this.gs.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let d=this.bs(t,a);return this.Ds(t,d,o,c.readTime)?this.ps(e,xS(t,null,"F")):this.vs(e,d,t,c)}))})))}ys(e,t,r,i){return TL(t)||i.isEqual(he.min())?U.resolve(null):this.gs.getDocuments(e,r).next(s=>{let o=this.bs(t,s);return this.Ds(t,o,r,i)?U.resolve(null):(Ou()<=Ie.DEBUG&&G("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Lu(t)),this.vs(e,o,t,F8(i,zh)).next(a=>a))})}bs(e,t){let r=new kt(DF(e));return t.forEach((i,s)=>{j_(e,s)&&(r=r.add(s))}),r}Ds(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ws(e,t,r){return Ou()<=Ie.DEBUG&&G("QueryEngine","Using full collection scan to execute query:",Lu(t)),this.gs.getDocumentsMatchingQuery(e,t,Na.min(),r)}vs(e,t,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var uC="LocalStore",BK=3e8,gD=class{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.Fs=new tt(_e),this.Ms=new Fi(s=>iC(s),sC),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new nD(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}};function $K(n,e,t,r){return new gD(n,e,t,r)}async function WF(n,e){let t=ue(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=we();for(let d of i){o.push(d.batchId);for(let h of d.mutations)c=c.add(h.key)}for(let d of s){a.push(d.batchId);for(let h of d.mutations)c=c.add(h.key)}return t.localDocuments.getDocuments(r,c).next(d=>({Bs:d,removedBatchIds:o,addedBatchIds:a}))})})}function HK(n,e){let t=ue(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=t.Os.newChangeBuffer({trackRemovals:!0});return(function(a,c,d,h){let g=d.batch,E=g.keys(),S=U.resolve();return E.forEach(R=>{S=S.next(()=>h.getEntry(c,R)).next(M=>{let k=d.docVersions.get(R);je(k!==null,48541),M.version.compareTo(k)<0&&(g.applyToRemoteDocument(M,d),M.isValidDocument()&&(M.setReadTime(d.commitVersion),h.addEntry(M)))})}),S.next(()=>a.mutationQueue.removeMutationBatch(c,g))})(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let c=we();for(let d=0;d<a.mutationResults.length;++d)a.mutationResults[d].transformResults.length>0&&(c=c.add(a.batch.mutations[d].key));return c})(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function KF(n){let e=ue(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function qK(n,e){let t=ue(n),r=e.snapshotVersion,i=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.Os.newChangeBuffer({trackRemovals:!0});i=t.Fs;let a=[];e.targetChanges.forEach((h,g)=>{let E=i.get(g);if(!E)return;a.push(t.hi.removeMatchingKeys(s,h.removedDocuments,g).next(()=>t.hi.addMatchingKeys(s,h.addedDocuments,g)));let S=E.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(g)!==null?S=S.withResumeToken(en.EMPTY_BYTE_STRING,he.min()).withLastLimboFreeSnapshotVersion(he.min()):h.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(h.resumeToken,r)),i=i.insert(g,S),(function(M,k,V){return M.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=BK?!0:V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0})(E,S,h)&&a.push(t.hi.updateTargetData(s,S))});let c=Vi(),d=we();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(zK(s,o,e.documentUpdates).next(h=>{c=h.Ls,d=h.ks})),!r.isEqual(he.min())){let h=t.hi.getLastRemoteSnapshotVersion(s).next(g=>t.hi.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return U.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,d)).next(()=>c)}).then(s=>(t.Fs=i,s))}function zK(n,e,t){let r=we(),i=we();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=Vi();return t.forEach((a,c)=>{let d=s.get(a);c.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(he.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):G(uC,"Ignoring outdated watch update for ",a,". Current version:",d.version," Watch version:",c.version)}),{Ls:o,ks:i}})}function GK(n,e){let t=ue(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=ZD),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function WK(n,e){let t=ue(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.hi.getTargetData(r,e).next(s=>s?(i=s,U.resolve(i)):t.hi.allocateTargetId(r).next(o=>(i=new Yh(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}async function mD(n,e,t){let r=ue(n),i=r.Fs.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!il(o))throw o;G(uC,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)}function LL(n,e,t){let r=ue(n),i=he.min(),s=we();return r.persistence.runTransaction("Execute query","readwrite",o=>(function(c,d,h){let g=ue(c),E=g.Ms.get(h);return E!==void 0?U.resolve(g.Fs.get(E)):g.hi.getTargetData(d,h)})(r,o,zr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,e,t?i:he.min(),t?s:we())).next(a=>(KK(r,aK(e),a),{documents:a,qs:s})))}function KK(n,e,t){let r=n.xs.get(e)||he.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.xs.set(e,r)}var w_=class{constructor(){this.activeTargetIds=fK()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var yD=class{constructor(){this.Fo=new w_,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new w_,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var _D=class{xo(e){}shutdown(){}};var FL="ConnectivityMonitor",T_=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){G(FL,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){G(FL,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var t_=null;function vD(){return t_===null?t_=(function(){return 268435456+Math.round(2147483648*Math.random())})():t_++,"0x"+t_.toString(16)}var uS="RestConnection",QK={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},ID=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===l_?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,s){let o=vD(),a=this.Go(e,t.toUriEncodedString());G(uS,`Sending RPC '${e}' ${o}:`,a,r);let c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,i,s);let{host:d}=new URL(a),h=Ps(d);return this.jo(e,a,c,r,h).then(g=>(G(uS,`Received RPC '${e}' ${o}: `,g),g),g=>{throw Js(uS,`RPC '${e}' ${o} failed with error: `,g,"url: ",a,"request:",r),g})}Jo(e,t,r,i,s,o){return this.Wo(e,t,r,i,s)}zo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+nl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}Go(e,t){let r=QK[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}};var ED=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var Xt="WebChannelConnection",wD=class extends ID{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,i,s){let o=vD();return new Promise((a,c)=>{let d=new rS;d.setWithCredentials(!0),d.listenOnce(iS.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Fh.NO_ERROR:let g=d.getResponseJson();G(Xt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(g)),a(g);break;case Fh.TIMEOUT:G(Xt,`RPC '${e}' ${o} timed out`),c(new Q(F.DEADLINE_EXCEEDED,"Request time out"));break;case Fh.HTTP_ERROR:let E=d.getStatus();if(G(Xt,`RPC '${e}' ${o} failed with status:`,E,"response text:",d.getResponseText()),E>0){let S=d.getResponseJson();Array.isArray(S)&&(S=S[0]);let R=S?.error;if(R&&R.status&&R.message){let M=(function(V){let z=V.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(z)>=0?z:F.UNKNOWN})(R.status);c(new Q(M,R.message))}else c(new Q(F.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new Q(F.UNAVAILABLE,"Connection failed."));break;default:ee(9055,{c_:e,streamId:o,l_:d.getLastErrorCode(),h_:d.getLastError()})}}finally{G(Xt,`RPC '${e}' ${o} completed.`)}});let h=JSON.stringify(i);G(Xt,`RPC '${e}' ${o} sending request:`,i),d.send(t,"POST",h,r,15)})}P_(e,t,r){let i=vD(),s=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=aS(),a=oS(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let h=s.join("");G(Xt,`Creating RPC '${e}' stream ${i}: ${h}`,c);let g=o.createWebChannel(h,c);this.T_(g);let E=!1,S=!1,R=new ED({Ho:k=>{S?G(Xt,`Not sending because RPC '${e}' stream ${i} is closed:`,k):(E||(G(Xt,`Opening RPC '${e}' stream ${i} transport.`),g.open(),E=!0),G(Xt,`RPC '${e}' stream ${i} sending:`,k),g.send(k))},Yo:()=>g.close()}),M=(k,V,z)=>{k.listen(V,K=>{try{z(K)}catch(ye){setTimeout(()=>{throw ye},0)}})};return M(g,xu.EventType.OPEN,()=>{S||(G(Xt,`RPC '${e}' stream ${i} transport opened.`),R.s_())}),M(g,xu.EventType.CLOSE,()=>{S||(S=!0,G(Xt,`RPC '${e}' stream ${i} transport closed`),R.__(),this.I_(g))}),M(g,xu.EventType.ERROR,k=>{S||(S=!0,Js(Xt,`RPC '${e}' stream ${i} transport errored. Name:`,k.name,"Message:",k.message),R.__(new Q(F.UNAVAILABLE,"The operation could not be completed")))}),M(g,xu.EventType.MESSAGE,k=>{var V;if(!S){let z=k.data[0];je(!!z,16349);let K=z,ye=K?.error||((V=K[0])===null||V===void 0?void 0:V.error);if(ye){G(Xt,`RPC '${e}' stream ${i} received error:`,ye);let ze=ye.status,re=(function(I){let T=pt[I];if(T!==void 0)return VF(T)})(ze),b=ye.message;re===void 0&&(re=F.INTERNAL,b="Unknown error status: "+ze+" with message "+ye.message),S=!0,R.__(new Q(re,b)),g.close()}else G(Xt,`RPC '${e}' stream ${i} received:`,z),R.a_(z)}}),M(a,sS.STAT_EVENT,k=>{k.stat===Xy.PROXY?G(Xt,`RPC '${e}' stream ${i} detected buffering proxy`):k.stat===Xy.NOPROXY&&G(Xt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{R.o_()},0),R}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}};function lS(){return typeof document<"u"?document:null}function B_(n){return new HS(n,!0)}var b_=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=s,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&G("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var VL="PersistentStream",A_=class{constructor(e,t,r,i,s,o,a,c){this.Fi=e,this.w_=r,this.S_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new b_(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===F.RESOURCE_EXHAUSTED?(xi(t.toString()),xi("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;let e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===t&&this.W_(r,i)},r=>{e(()=>{let i=new Q(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,t){let r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return G(VL,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(G(VL,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},TD=class extends A_{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let t=DK(this.serializer,e),r=(function(s){if(!("targetChange"in s))return he.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?he.min():o.readTime?Gr(o.readTime):he.min()})(e);return this.listener.J_(t,r)}H_(e){let t={};t.database=WS(this.serializer),t.addTarget=(function(s,o){let a,c=o.target;if(a=MS(c)?{documents:NK(s,c)}:{query:PK(s,c).Vt},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=UF(s,o.resumeToken);let d=qS(s,o.expectedCount);d!==null&&(a.expectedCount=d)}else if(o.snapshotVersion.compareTo(he.min())>0){a.readTime=__(s,o.snapshotVersion.toTimestamp());let d=qS(s,o.expectedCount);d!==null&&(a.expectedCount=d)}return a})(this.serializer,e);let r=MK(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){let t={};t.database=WS(this.serializer),t.removeTarget=e,this.k_(t)}},bD=class extends A_{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return je(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,je(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){je(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let t=RK(e.writeResults,e.commitTime),r=Gr(e.commitTime);return this.listener.ta(r,t)}na(){let e={};e.database=WS(this.serializer),this.k_(e)}X_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>CK(this.serializer,r))};this.k_(t)}};var AD=class{},SD=class extends AD{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new Q(F.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Wo(e,zS(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Q(F.UNKNOWN,s.toString())})}Jo(e,t,r,i,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Jo(e,zS(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Q(F.UNKNOWN,o.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},DD=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(xi(t),this._a=!1):G("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var xa="RemoteStore",CD=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=s,this.Ea.xo(o=>{r.enqueueAndForget(async()=>{Oa(this)&&(G(xa,"Restarting streams for network reachability change."),await(async function(c){let d=ue(c);d.Ia.add(4),await rf(d),d.Aa.set("Unknown"),d.Ia.delete(4),await $_(d)})(this))})}),this.Aa=new DD(r,i)}};async function $_(n){if(Oa(n))for(let e of n.da)await e(!0)}async function rf(n){for(let e of n.da)await e(!1)}function QF(n,e){let t=ue(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),fC(t)?hC(t):sl(t).x_()&&dC(t,e))}function lC(n,e){let t=ue(n),r=sl(t);t.Ta.delete(e),r.x_()&&YF(t,e),t.Ta.size===0&&(r.x_()?r.B_():Oa(t)&&t.Aa.set("Unknown"))}function dC(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(he.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}sl(n).H_(e)}function YF(n,e){n.Ra.$e(e),sl(n).Y_(e)}function hC(n){n.Ra=new $S({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),sl(n).start(),n.Aa.aa()}function fC(n){return Oa(n)&&!sl(n).M_()&&n.Ta.size>0}function Oa(n){return ue(n).Ia.size===0}function JF(n){n.Ra=void 0}async function YK(n){n.Aa.set("Online")}async function JK(n){n.Ta.forEach((e,t)=>{dC(n,e)})}async function XK(n,e){JF(n),fC(n)?(n.Aa.la(e),hC(n)):n.Aa.set("Unknown")}async function ZK(n,e,t){if(n.Aa.set("Online"),e instanceof m_&&e.state===2&&e.cause)try{await(async function(i,s){let o=s.cause;for(let a of s.targetIds)i.Ta.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ta.delete(a),i.Ra.removeTarget(a))})(n,e)}catch(r){G(xa,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await S_(n,r)}else if(e instanceof ju?n.Ra.Ye(e):e instanceof g_?n.Ra.it(e):n.Ra.et(e),!t.isEqual(he.min()))try{let r=await KF(n.localStore);t.compareTo(r)>=0&&await(function(s,o){let a=s.Ra.Pt(o);return a.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){let h=s.Ta.get(d);h&&s.Ta.set(d,h.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,d)=>{let h=s.Ta.get(c);if(!h)return;s.Ta.set(c,h.withResumeToken(en.EMPTY_BYTE_STRING,h.snapshotVersion)),YF(s,c);let g=new Yh(h.target,c,d,h.sequenceNumber);dC(s,g)}),s.remoteSyncer.applyRemoteEvent(a)})(n,t)}catch(r){G(xa,"Failed to raise snapshot:",r),await S_(n,r)}}async function S_(n,e,t){if(!il(e))throw e;n.Ia.add(1),await rf(n),n.Aa.set("Offline"),t||(t=()=>KF(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{G(xa,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await $_(n)})}function XF(n,e){return e().catch(t=>S_(n,t,e))}async function H_(n){let e=ue(n),t=Zs(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:ZD;for(;e7(e);)try{let i=await GK(e.localStore,r);if(i===null){e.Pa.length===0&&t.B_();break}r=i.batchId,t7(e,i)}catch(i){await S_(e,i)}ZF(e)&&eV(e)}function e7(n){return Oa(n)&&n.Pa.length<10}function t7(n,e){n.Pa.push(e);let t=Zs(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function ZF(n){return Oa(n)&&!Zs(n).M_()&&n.Pa.length>0}function eV(n){Zs(n).start()}async function n7(n){Zs(n).na()}async function r7(n){let e=Zs(n);for(let t of n.Pa)e.X_(t.mutations)}async function i7(n,e,t){let r=n.Pa.shift(),i=VS.from(r,e,t);await XF(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await H_(n)}async function s7(n,e){e&&Zs(n).Z_&&await(async function(r,i){if((function(o){return IK(o)&&o!==F.ABORTED})(i.code)){let s=r.Pa.shift();Zs(r).N_(),await XF(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await H_(r)}})(n,e),ZF(n)&&eV(n)}async function UL(n,e){let t=ue(n);t.asyncQueue.verifyOperationInProgress(),G(xa,"RemoteStore received new credentials");let r=Oa(t);t.Ia.add(3),await rf(t),r&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await $_(t)}async function o7(n,e){let t=ue(n);e?(t.Ia.delete(2),await $_(t)):e||(t.Ia.add(2),await rf(t),t.Aa.set("Unknown"))}function sl(n){return n.Va||(n.Va=(function(t,r,i){let s=ue(t);return s.ia(),new TD(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Zo:YK.bind(null,n),e_:JK.bind(null,n),n_:XK.bind(null,n),J_:ZK.bind(null,n)}),n.da.push(async e=>{e?(n.Va.N_(),fC(n)?hC(n):n.Aa.set("Unknown")):(await n.Va.stop(),JF(n))})),n.Va}function Zs(n){return n.ma||(n.ma=(function(t,r,i){let s=ue(t);return s.ia(),new bD(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:n7.bind(null,n),n_:s7.bind(null,n),ea:r7.bind(null,n),ta:i7.bind(null,n)}),n.da.push(async e=>{e?(n.ma.N_(),await H_(n)):(await n.ma.stop(),n.Pa.length>0&&(G(xa,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))})),n.ma}var RD=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Hr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,a=new n(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Q(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function pC(n,e){if(xi("AsyncQueue",`${e}: ${n}`),il(n))return new Q(F.UNAVAILABLE,`${e}: ${n}`);throw n}var D_=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||te.comparator(t.key,r.key):(t,r)=>te.comparator(t.key,r.key),this.keyedMap=Vh(),this.sortedSet=new tt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var C_=class{constructor(){this.fa=new tt(te.comparator)}track(e){let t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):ee(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){let e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}},Zu=class n{constructor(e,t,r,i,s,o,a,c,d){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,t,r,i,s){let o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new n(e,t,D_.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&U_(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var ND=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},PD=class{constructor(){this.queries=jL(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){let i=ue(t),s=i.queries;i.queries=jL(),s.forEach((o,a)=>{for(let c of a.wa)c.onError(r)})})(this,new Q(F.ABORTED,"Firestore shutting down"))}};function jL(){return new Fi(n=>SF(n),U_)}async function a7(n,e){let t=ue(n),r=3,i=e.query,s=t.queries.get(i);s?!s.Sa()&&e.ba()&&(r=2):(s=new ND,r=e.ba()?0:1);try{switch(r){case 0:s.ya=await t.onListen(i,!0);break;case 1:s.ya=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(o){let a=pC(o,`Initialization of query '${Lu(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.wa.push(e),e.va(t.onlineState),s.ya&&e.Ca(s.ya)&&gC(t)}async function c7(n,e){let t=ue(n),r=e.query,i=3,s=t.queries.get(r);if(s){let o=s.wa.indexOf(e);o>=0&&(s.wa.splice(o,1),s.wa.length===0?i=e.ba()?0:1:!s.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function u7(n,e){let t=ue(n),r=!1;for(let i of e){let s=i.query,o=t.queries.get(s);if(o){for(let a of o.wa)a.Ca(i)&&(r=!0);o.ya=i}}r&&gC(t)}function l7(n,e,t){let r=ue(n),i=r.queries.get(e);if(i)for(let s of i.wa)s.onError(t);r.queries.delete(e)}function gC(n){n.Da.forEach(e=>{e.next()})}var kD,BL;(BL=kD||(kD={})).Fa="default",BL.Cache="cache";var MD=class{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Zu(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;let r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=Zu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==kD.Cache}};var R_=class{constructor(e){this.key=e}},N_=class{constructor(e){this.key=e}},xD=class{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=we(),this.mutatedKeys=we(),this.Xa=DF(e),this.eu=new D_(this.Xa)}get tu(){return this.Ha}nu(e,t){let r=t?t.ru:new C_,i=t?t.eu:this.eu,s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,g)=>{let E=i.get(h),S=j_(this.query,g)?g:null,R=!!E&&this.mutatedKeys.has(E.key),M=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations),k=!1;E&&S?E.data.isEqual(S.data)?R!==M&&(r.track({type:3,doc:S}),k=!0):this.iu(E,S)||(r.track({type:2,doc:S}),k=!0,(c&&this.Xa(S,c)>0||d&&this.Xa(S,d)<0)&&(a=!0)):!E&&S?(r.track({type:0,doc:S}),k=!0):E&&!S&&(r.track({type:1,doc:E}),k=!0,(c||d)&&(a=!0)),k&&(S?(o=o.add(S),s=M?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{eu:o,ru:r,Ds:a,mutatedKeys:s}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let o=e.ru.pa();o.sort((h,g)=>(function(S,R){let M=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ee(20277,{At:k})}};return M(S)-M(R)})(h.type,g.type)||this.Xa(h.doc,g.doc)),this.su(r),i=i!=null&&i;let a=t&&!i?this.ou():[],c=this.Za.size===0&&this.current&&!i?1:0,d=c!==this.Ya;return this.Ya=c,o.length!==0||d?{snapshot:new Zu(this.query,e.eu,s,o,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new C_,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=we(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new N_(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new R_(r))}),t}uu(e){this.Ha=e.qs,this.Za=we();let t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Zu.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},mC="SyncEngine",OD=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},LD=class{constructor(e){this.key=e,this.lu=!1}},FD=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.hu={},this.Pu=new Fi(a=>SF(a),U_),this.Tu=new Map,this.Iu=new Set,this.du=new tt(te.comparator),this.Eu=new Map,this.Au=new Xh,this.Ru={},this.Vu=new Map,this.mu=Jh.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};async function d7(n,e,t=!0){let r=oV(n),i,s=r.Pu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.cu()):i=await tV(r,e,t,!0),i}async function h7(n,e){let t=oV(n);await tV(t,e,!0,!1)}async function tV(n,e,t,r){let i=await WK(n.localStore,zr(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),a;return r&&(a=await f7(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&QF(n.remoteStore,i),a}async function f7(n,e,t,r,i){n.gu=(g,E,S)=>(async function(M,k,V,z){let K=k.view.nu(V);K.Ds&&(K=await LL(M.localStore,k.query,!1).then(({documents:b})=>k.view.nu(b,K)));let ye=z&&z.targetChanges.get(k.targetId),ze=z&&z.targetMismatches.get(k.targetId)!=null,re=k.view.applyChanges(K,M.isPrimaryClient,ye,ze);return HL(M,k.targetId,re._u),re.snapshot})(n,g,E,S);let s=await LL(n.localStore,e,!0),o=new xD(e,s.qs),a=o.nu(s.documents),c=Qh.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),d=o.applyChanges(a,n.isPrimaryClient,c);HL(n,t,d._u);let h=new OD(e,t,o);return n.Pu.set(e,h),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),d.snapshot}async function p7(n,e,t){let r=ue(n),i=r.Pu.get(e),s=r.Tu.get(i.targetId);if(s.length>1)return r.Tu.set(i.targetId,s.filter(o=>!U_(o,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await mD(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&lC(r.remoteStore,i.targetId),VD(r,i.targetId)}).catch(rl)):(VD(r,i.targetId),await mD(r.localStore,i.targetId,!0))}async function g7(n,e){let t=ue(n),r=t.Pu.get(e),i=t.Tu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),lC(t.remoteStore,r.targetId))}async function m7(n,e,t){let r=T7(n);try{let i=await(function(o,a){let c=ue(o),d=yt.now(),h=a.reduce((S,R)=>S.add(R.key),we()),g,E;return c.persistence.runTransaction("Locally write mutations","readwrite",S=>{let R=Vi(),M=we();return c.Os.getEntries(S,h).next(k=>{R=k,R.forEach((V,z)=>{z.isValidDocument()||(M=M.add(V))})}).next(()=>c.localDocuments.getOverlayedDocuments(S,R)).next(k=>{g=k;let V=[];for(let z of a){let K=vK(z,g.get(z.key).overlayedDocument);K!=null&&V.push(new Qr(z.key,K,IF(K.value.mapValue),Ws.exists(!0)))}return c.mutationQueue.addMutationBatch(S,d,V,a)}).next(k=>{E=k;let V=k.applyToLocalDocumentSet(g,M);return c.documentOverlayCache.saveOverlays(S,k.batchId,V)})}).then(()=>({batchId:E.batchId,changes:RF(g)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(o,a,c){let d=o.Ru[o.currentUser.toKey()];d||(d=new tt(_e)),d=d.insert(a,c),o.Ru[o.currentUser.toKey()]=d})(r,i.batchId,t),await sf(r,i.changes),await H_(r.remoteStore)}catch(i){let s=pC(i,"Failed to persist write");t.reject(s)}}async function nV(n,e){let t=ue(n);try{let r=await qK(t.localStore,e);e.targetChanges.forEach((i,s)=>{let o=t.Eu.get(s);o&&(je(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.lu=!0:i.modifiedDocuments.size>0?je(o.lu,14607):i.removedDocuments.size>0&&(je(o.lu,42227),o.lu=!1))}),await sf(t,r,e)}catch(r){await rl(r)}}function $L(n,e,t){let r=ue(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Pu.forEach((s,o)=>{let a=o.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(o,a){let c=ue(o);c.onlineState=a;let d=!1;c.queries.forEach((h,g)=>{for(let E of g.wa)E.va(a)&&(d=!0)}),d&&gC(c)})(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function y7(n,e,t){let r=ue(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Eu.get(e),s=i&&i.key;if(s){let o=new tt(te.comparator);o=o.insert(s,pr.newNoDocument(s,he.min()));let a=we().add(s),c=new p_(he.min(),new Map,new tt(_e),o,a);await nV(r,c),r.du=r.du.remove(s),r.Eu.delete(e),yC(r)}else await mD(r.localStore,e,!1).then(()=>VD(r,e,t)).catch(rl)}async function _7(n,e){let t=ue(n),r=e.batch.batchId;try{let i=await HK(t.localStore,e);iV(t,r,null),rV(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await sf(t,i)}catch(i){await rl(i)}}async function v7(n,e,t){let r=ue(n);try{let i=await(function(o,a){let c=ue(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return c.mutationQueue.lookupMutationBatch(d,a).next(g=>(je(g!==null,37113),h=g.keys(),c.mutationQueue.removeMutationBatch(d,g))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,h,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>c.localDocuments.getDocuments(d,h))})})(r.localStore,e);iV(r,e,t),rV(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await sf(r,i)}catch(i){await rl(i)}}function rV(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function iV(n,e,t){let r=ue(n),i=r.Ru[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function VD(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||sV(n,r)})}function sV(n,e){n.Iu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(lC(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),yC(n))}function HL(n,e,t){for(let r of t)r instanceof R_?(n.Au.addReference(r.key,e),I7(n,r)):r instanceof N_?(G(mC,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||sV(n,r.key)):ee(19791,{yu:r})}function I7(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(G(mC,"New document in limbo: "+t),n.Iu.add(r),yC(n))}function yC(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Iu.values().next().value;n.Iu.delete(e);let t=new te(ot.fromString(e)),r=n.mu.next();n.Eu.set(r,new LD(t)),n.du=n.du.insert(t,r),QF(n.remoteStore,new Yh(zr(oC(t.path)),r,"TargetPurposeLimboResolution",XD.ue))}}async function sf(n,e,t){let r=ue(n),i=[],s=[],o=[];r.Pu.isEmpty()||(r.Pu.forEach((a,c)=>{o.push(r.gu(c,e,t).then(d=>{var h;if((d||t)&&r.isPrimaryClient){let g=d?!d.fromCache:(h=t?.targetChanges.get(c.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,g?"current":"not-current")}if(d){i.push(d);let g=hD.Es(c.targetId,d);s.push(g)}}))}),await Promise.all(o),r.hu.J_(i),await(async function(c,d){let h=ue(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>U.forEach(d,E=>U.forEach(E.Is,S=>h.persistence.referenceDelegate.addReference(g,E.targetId,S)).next(()=>U.forEach(E.ds,S=>h.persistence.referenceDelegate.removeReference(g,E.targetId,S)))))}catch(g){if(!il(g))throw g;G(uC,"Failed to update sequence numbers: "+g)}for(let g of d){let E=g.targetId;if(!g.fromCache){let S=h.Fs.get(E),R=S.snapshotVersion,M=S.withLastLimboFreeSnapshotVersion(R);h.Fs=h.Fs.insert(E,M)}}})(r.localStore,s))}async function E7(n,e){let t=ue(n);if(!t.currentUser.isEqual(e)){G(mC,"User change. New user:",e.toKey());let r=await WF(t.localStore,e);t.currentUser=e,(function(s,o){s.Vu.forEach(a=>{a.forEach(c=>{c.reject(new Q(F.CANCELLED,o))})}),s.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await sf(t,r.Bs)}}function w7(n,e){let t=ue(n),r=t.Eu.get(e);if(r&&r.lu)return we().add(r.key);{let i=we(),s=t.Tu.get(e);if(!s)return i;for(let o of s){let a=t.Pu.get(o);i=i.unionWith(a.view.tu)}return i}}function oV(n){let e=ue(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=nV.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=w7.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=y7.bind(null,e),e.hu.J_=u7.bind(null,e.eventManager),e.hu.pu=l7.bind(null,e.eventManager),e}function T7(n){let e=ue(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=_7.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=v7.bind(null,e),e}var aV=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=B_(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)}Cu(t,r){return null}Fu(t,r){return null}vu(t){return $K(this.persistence,new pD,t.initialUser,this.serializer)}Du(t){return new I_(dD.Vi,this.serializer)}bu(t){return new yD}async terminate(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}return n.provider={build:()=>new n},n})(),UD=class extends aV{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){je(this.persistence.referenceDelegate instanceof E_,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new XS(r,e.asyncQueue,t)}Du(e){let t=this.cacheSizeBytes!==void 0?Bn.withCacheSize(this.cacheSizeBytes):Bn.DEFAULT;return new I_(r=>E_.Vi(r,t),this.serializer)}};var b7=(()=>{class n{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>$L(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=E7.bind(null,this.syncEngine),await o7(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new PD})()}createDatastore(t){let r=B_(t.databaseInfo.databaseId),i=(function(o){return new wD(o)})(t.databaseInfo);return(function(o,a,c,d){return new SD(o,a,c,d)})(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return(function(i,s,o,a,c){return new CD(i,s,o,a,c)})(this.localStore,this.datastore,t.asyncQueue,r=>$L(this.syncEngine,r,0),(function(){return T_.C()?new T_:new _D})())}createSyncEngine(t,r){return(function(s,o,a,c,d,h,g){let E=new FD(s,o,a,c,d,h);return g&&(E.fu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){var t,r;await(async function(s){let o=ue(s);G(xa,"RemoteStore shutting down."),o.Ia.add(5),await rf(o),o.Ea.shutdown(),o.Aa.set("Unknown")})(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}return n.provider={build:()=>new n},n})();var jD=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):xi("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var eo="FirestoreClient",BD=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Pt.UNAUTHENTICATED,this.clientId=qh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{G(eo,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(G(eo,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Hr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=pC(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}};async function dS(n,e){n.asyncQueue.verifyOperationInProgress(),G(eo,"Initializing OfflineComponentProvider");let t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await WF(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>{Js("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{G("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{Js("Terminating Firestore due to IndexedDb database deletion failed",i)})}),n._offlineComponents=e}async function qL(n,e){n.asyncQueue.verifyOperationInProgress();let t=await A7(n);G(eo,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>UL(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>UL(e.remoteStore,i)),n._onlineComponents=e}async function A7(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){G(eo,"Using user provided OfflineComponentProvider");try{await dS(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===F.FAILED_PRECONDITION||i.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;Js("Error using user provided cache. Falling back to memory cache: "+t),await dS(n,new aV)}}else G(eo,"Using default OfflineComponentProvider"),await dS(n,new UD(void 0));return n._offlineComponents}async function cV(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(G(eo,"Using user provided OnlineComponentProvider"),await qL(n,n._uninitializedComponentsProvider._online)):(G(eo,"Using default OnlineComponentProvider"),await qL(n,new b7))),n._onlineComponents}function S7(n){return cV(n).then(e=>e.syncEngine)}async function D7(n){let e=await cV(n),t=e.eventManager;return t.onListen=d7.bind(null,e.syncEngine),t.onUnlisten=p7.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=h7.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=g7.bind(null,e.syncEngine),t}function C7(n,e,t={}){let r=new Hr;return n.asyncQueue.enqueueAndForget(async()=>(function(s,o,a,c,d){let h=new jD({next:E=>{h.Ou(),o.enqueueAndForget(()=>c7(s,g));let S=E.docs.has(a);!S&&E.fromCache?d.reject(new Q(F.UNAVAILABLE,"Failed to get document because the client is offline.")):S&&E.fromCache&&c&&c.source==="server"?d.reject(new Q(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(E)},error:E=>d.reject(E)}),g=new MD(oC(a.path),h,{includeMetadataChanges:!0,ka:!0});return a7(s,g)})(await D7(n),n.asyncQueue,e,t,r)),r.promise}function uV(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var zL=new Map;var lV="firestore.googleapis.com",GL=!0,P_=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Q(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=lV,this.ssl=GL}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:GL;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=GF;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<UK)throw new Q(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}L8("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=uV((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Zh=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new P_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Q(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Q(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new P_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new hS;switch(r.type){case"firstParty":return new mS(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Q(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=zL.get(t);r&&(G("ComponentProvider","Removing Datastore"),zL.delete(t),r.terminate())})(this),Promise.resolve()}};function dV(n,e,t,r={}){var i;n=Ra(n,Zh);let s=Ps(e),o=n._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:n._getEmulatorOptions()}),c=`${e}:${t}`;s&&(_m(`https://${c}`),vm("Firestore",!0)),o.host!==lV&&o.host!==c&&Js("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let d=Object.assign(Object.assign({},o),{host:c,ssl:s,emulatorOptions:r});if(!Mr(d,a)&&(n._setSettings(d),r.mockUserToken)){let h,g;if(typeof r.mockUserToken=="string")h=r.mockUserToken,g=Pt.MOCK_USER;else{h=Bk(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let E=r.mockUserToken.sub||r.mockUserToken.user_id;if(!E)throw new Q(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Pt(E)}n._authCredentials=new fS(new s_(h,g))}}var $D=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Zt=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ef(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(nf(t,n._jsonSchema))return new n(e,r||null,new te(ot.fromString(t.referencePath)))}};Zt._jsonSchemaVersion="firestore/documentReference/1.0",Zt._jsonSchema={type:mt("string",Zt._jsonSchemaVersion),referencePath:mt("string")};var ef=class n extends $D{constructor(e,t,r){super(e,t,oC(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Zt(this.firestore,null,new te(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function hV(n,e,...t){if(n=jt(n),arguments.length===1&&(e=qh.newId()),O8("doc","path",e),n instanceof Zh){let r=ot.fromString(e,...t);return dL(r),new Zt(n,null,new te(r))}{if(!(n instanceof Zt||n instanceof ef))throw new Q(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ot.fromString(e,...t));return dL(r),new Zt(n.firestore,n instanceof ef?n.converter:null,new te(r))}}var WL="AsyncQueue",k_=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new b_(this,"async_queue_retry"),this.oc=()=>{let r=lS();r&&G(WL,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let t=lS();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=lS();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new Hr;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!il(e))throw e;G(WL,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,xi("INTERNAL UNHANDLED ERROR: ",KL(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let i=RD.createAndSchedule(this,e,t,r,s=>this.lc(s));return this.ec.push(i),i}ac(){this.tc&&ee(47125,{hc:KL(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function KL(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}var el=class extends Zh{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new k_,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new k_(e),this._firestoreClient=void 0,await e}}};function fV(n,e){let t=typeof n=="object"?n:ta(),r=typeof n=="string"?n:e||l_,i=Zc(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=jk("firestore");s&&dV(i,...s)}return i}function pV(n){if(n._terminated)throw new Q(F.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||R7(n),n._firestoreClient}function R7(n){var e,t,r;let i=n._freezeSettings(),s=(function(a,c,d,h){return new ES(a,c,d,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,uV(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new BD(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&(function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}})(n._componentsProvider))}var Ks=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(en.fromBase64String(e))}catch(t){throw new Q(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(en.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(nf(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};Ks._jsonSchemaVersion="firestore/bytes/1.0",Ks._jsonSchema={type:mt("string",Ks._jsonSchemaVersion),bytes:mt("string")};var tl=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Q(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Rn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var tf=class{constructor(e){this._methodName=e}};var Qs=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Q(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Q(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return _e(this._lat,e._lat)||_e(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(nf(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};Qs._jsonSchemaVersion="firestore/geoPoint/1.0",Qs._jsonSchema={type:mt("string",Qs._jsonSchemaVersion),latitude:mt("number"),longitude:mt("number")};var Ys=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(nf(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new Q(F.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Ys._jsonSchemaVersion="firestore/vectorValue/1.0",Ys._jsonSchema={type:mt("string",Ys._jsonSchemaVersion),vectorValues:mt("object")};var N7=/^__.*__$/,HD=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Qr(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ma(e,this.data,t,this.fieldTransforms)}},M_=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Qr(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function gV(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ee(40011,{Ec:n})}}var qD=class n{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Ac(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return O_(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(gV(this.Ec)&&N7.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},zD=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||B_(e)}Dc(e,t,r,i=!1){return new qD({Ec:e,methodName:t,bc:r,path:Rn.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function mV(n){let e=n._freezeSettings(),t=B_(n._databaseId);return new zD(n._databaseId,!!e.ignoreUndefinedProperties,t)}function P7(n,e,t,r,i,s={}){let o=n.Dc(s.merge||s.mergeFields?2:0,e,t,i);_C("Data must be an object, but it was:",o,r);let a=yV(r,o),c,d;if(s.merge)c=new $n(o.fieldMask),d=o.fieldTransforms;else if(s.mergeFields){let h=[];for(let g of s.mergeFields){let E=GD(e,g,t);if(!o.contains(E))throw new Q(F.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);vV(h,E)||h.push(E)}c=new $n(h),d=o.fieldTransforms.filter(g=>c.covers(g.field))}else c=null,d=o.fieldTransforms;return new HD(new Cn(a),c,d)}var x_=class n extends tf{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function k7(n,e,t,r){let i=n.Dc(1,e,t);_C("Data must be an object, but it was:",i,r);let s=[],o=Cn.empty();to(r,(c,d)=>{let h=vC(e,c,t);d=jt(d);let g=i.gc(h);if(d instanceof x_)s.push(h);else{let E=q_(d,g);E!=null&&(s.push(h),o.set(h,E))}});let a=new $n(s);return new M_(o,a,i.fieldTransforms)}function M7(n,e,t,r,i,s){let o=n.Dc(1,e,t),a=[GD(e,r,t)],c=[i];if(s.length%2!=0)throw new Q(F.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<s.length;E+=2)a.push(GD(e,s[E])),c.push(s[E+1]);let d=[],h=Cn.empty();for(let E=a.length-1;E>=0;--E)if(!vV(d,a[E])){let S=a[E],R=c[E];R=jt(R);let M=o.gc(S);if(R instanceof x_)d.push(S);else{let k=q_(R,M);k!=null&&(d.push(S),h.set(S,k))}}let g=new $n(d);return new M_(h,g,o.fieldTransforms)}function q_(n,e){if(_V(n=jt(n)))return _C("Unsupported field value:",e,n),yV(n,e);if(n instanceof tf)return(function(r,i){if(!gV(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,i){let s=[],o=0;for(let a of r){let c=q_(a,i.yc(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}})(n,e)}return(function(r,i){if((r=jt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return pK(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=yt.fromDate(r);return{timestampValue:__(i.serializer,s)}}if(r instanceof yt){let s=new yt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:__(i.serializer,s)}}if(r instanceof Qs)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ks)return{bytesValue:UF(i.serializer,r._byteString)};if(r instanceof Zt){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.wc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:cC(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ys)return(function(o,a){return{mapValue:{fields:{[tC]:{stringValue:nC},[Hu]:{arrayValue:{values:o.toArray().map(d=>{if(typeof d!="number")throw a.wc("VectorValues must only contain numeric values.");return aC(a.serializer,d)})}}}}}})(r,i);throw i.wc(`Unsupported field value: ${JD(r)}`)})(n,e)}function yV(n,e){let t={};return hF(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):to(n,(r,i)=>{let s=q_(i,e.Vc(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function _V(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof yt||n instanceof Qs||n instanceof Ks||n instanceof Zt||n instanceof tf||n instanceof Ys)}function _C(n,e,t){if(!_V(t)||!JL(t)){let r=JD(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function GD(n,e,t){if((e=jt(e))instanceof tl)return e._internalPath;if(typeof e=="string")return vC(n,e);throw O_("Field path arguments must be of type string or ",n,!1,void 0,t)}var x7=new RegExp("[~\\*/\\[\\]]");function vC(n,e,t){if(e.search(x7)>=0)throw O_(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new tl(...e.split("."))._internalPath}catch{throw O_(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function O_(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new Q(F.INVALID_ARGUMENT,a+n+c)}function vV(n,e){return n.some(t=>t.isEqual(e))}var L_=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Zt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new WD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(IV("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},WD=class extends L_{data(){return super.data()}};function IV(n,e){return typeof e=="string"?vC(n,e):e instanceof tl?e._internalPath:e._delegate._internalPath}var KD=class{convertValue(e,t="none"){switch(Xs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ye(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Li(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ee(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return to(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;let s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[Hu].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Ye(o.doubleValue));return new Ys(s)}convertGeoPoint(e){return new Qs(Ye(e.latitude),Ye(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=V_(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Wh(e));default:return null}}convertTimestamp(e){let t=Oi(e);return new yt(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=ot.fromString(e);je(zF(r),9688,{name:e});let i=new d_(r.get(1),r.get(3)),s=new te(r.popFirst(5));return i.isEqual(t)||xi(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function O7(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Sa=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Da=class n extends L_{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Bu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(IV("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Q(F.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};Da._jsonSchemaVersion="firestore/documentSnapshot/1.0",Da._jsonSchema={type:mt("string",Da._jsonSchemaVersion),bundleSource:mt("string","DocumentSnapshot"),bundleName:mt("string"),bundle:mt("string")};var Bu=class extends Da{data(e={}){return super.data(e)}},Hh=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Sa(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Bu(this._firestore,this._userDataWriter,r.key,r,new Sa(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Q(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new Bu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Sa(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new Bu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Sa(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),d=-1,h=-1;return a.type!==0&&(d=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:L7(a.type),doc:c,oldIndex:d,newIndex:h}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Q(F.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=qh.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(t.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function L7(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ee(61501,{type:n})}}function EV(n){n=Ra(n,Zt);let e=Ra(n.firestore,el);return C7(pV(e),n._key).then(t=>F7(e,n,t))}Hh._jsonSchemaVersion="firestore/querySnapshot/1.0",Hh._jsonSchema={type:mt("string",Hh._jsonSchemaVersion),bundleSource:mt("string","QuerySnapshot"),bundleName:mt("string"),bundle:mt("string")};var QD=class extends KD{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ks(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Zt(this.firestore,null,t)}};function wV(n,e,t){n=Ra(n,Zt);let r=Ra(n.firestore,el),i=O7(n.converter,e,t);return bV(r,[P7(mV(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Ws.none())])}function TV(n,e,t,...r){n=Ra(n,Zt);let i=Ra(n.firestore,el),s=mV(i),o;return o=typeof(e=jt(e))=="string"||e instanceof tl?M7(s,"updateDoc",n._key,e,t,r):k7(s,"updateDoc",n._key,e),bV(i,[o.toMutation(n._key,Ws.exists(!0))])}function bV(n,e){return(function(r,i){let s=new Hr;return r.asyncQueue.enqueueAndForget(async()=>m7(await S7(r),i,s)),s.promise})(pV(n),e)}function F7(n,e,t){let r=t.docs.get(e._key),i=new QD(n);return new Da(n,i,e._key,r,new Sa(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){nl=i})(Ms),ar(new sn("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new el(new pS(r.getProvider("auth-internal")),new yS(o,r.getProvider("app-check-internal")),(function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Q(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new d_(d.options.projectId,h)})(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),et(aL,cL,e),et(aL,cL,"esm2017")})();var of=class{constructor(e){return e}},AV="firestore",IC=class{constructor(){return tu(AV)}};var EC=new J("angularfire2.firestore-instances");function V7(n,e){let t=Gd(AV,n,e);return t&&new of(t)}function U7(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new of(r)}}var j7={provide:IC,deps:[[new wn,EC]]},B7={provide:of,useFactory:V7,deps:[[new wn,EC],_i]};function PIe(n,...e){return et("angularfire",xs.full,"fst"),Xn([B7,j7,{provide:EC,useFactory:U7(n),multi:!0,deps:[Ue,At,Os,ra,[new wn,lh],[new wn,nu],...e]}])}var kIe=on(rL,!0);var MIe=on(hV,!0,2);var xIe=on(EV,!0);var OIe=on(fV,!0);var LIe=on(wV,!0,2);var FIe=on(TV,!0,2);export{$ as a,Te as b,xt as c,ct as d,be as e,QV as f,Ke as g,i2 as h,ai as i,Y as j,wp as k,Z as l,Ro as m,J as n,L as o,LR as p,FR as q,rn as r,bs as s,gn as t,Fc as u,cg as v,ld as w,YU as x,wg as y,Dt as z,TE as A,Vc as B,Ss as C,zN as D,GN as E,zo as F,YN as G,CE as H,RE as I,Dg as J,NE as K,PE as L,JN as M,ZN as N,eP as O,zB as P,Cg as Q,nP as R,KB as S,rP as T,d$ as U,iP as V,kE as W,_$ as X,E$ as Y,T$ as Z,uP as _,Qce as $,fi as aa,SP as ba,p4 as ca,_4 as da,DP as ea,k4 as fa,yw as ga,jd as ha,Ok as ia,pq as ja,afe as ka,cfe as la,S3 as ma,uh as na,Jme as oa,Xme as pa,Zme as qa,eye as ra,tye as sa,of as ta,PIe as ua,kIe as va,MIe as wa,xIe as xa,OIe as ya,LIe as za,FIe as Aa};

var LV=Object.defineProperty,FV=Object.defineProperties;var VV=Object.getOwnPropertyDescriptors;var xf=Object.getOwnPropertySymbols;var AC=Object.prototype.hasOwnProperty,DC=Object.prototype.propertyIsEnumerable;var bC=(n,e,t)=>e in n?LV(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,$=(n,e)=>{for(var t in e||={})AC.call(e,t)&&bC(n,t,e[t]);if(xf)for(var t of xf(e))DC.call(e,t)&&bC(n,t,e[t]);return n},ve=(n,e)=>FV(n,VV(e));var Y_=(n,e)=>{var t={};for(var r in n)AC.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&xf)for(var r of xf(n))e.indexOf(r)<0&&DC.call(n,r)&&(t[r]=n[r]);return t};var zt=null,Of=!1,ev=1,UV=null,ln=Symbol("SIGNAL");function ge(n){let e=zt;return zt=n,e}function Ff(){return zt}var Pl={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function kl(n){if(Of)throw new Error("");if(zt===null)return;zt.consumerOnSignalRead(n);let e=zt.producersTail;if(e!==void 0&&e.producer===n)return;let t,r=zt.recomputing;if(r&&(t=e!==void 0?e.nextProducer:zt.producers,t!==void 0&&t.producer===n)){zt.producersTail=t,t.lastReadVersion=n.version;return}let i=n.consumersTail;if(i!==void 0&&i.consumer===zt&&(!r||BV(i,zt)))return;let s=lc(zt),o={producer:n,consumer:zt,nextProducer:t,prevConsumer:i,lastReadVersion:n.version,nextConsumer:void 0};zt.producersTail=o,e!==void 0?e.nextProducer=o:zt.producers=o,s&&NC(n,o)}function SC(){ev++}function tv(n){if(!(lc(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===ev)){if(!n.producerMustRecompute(n)&&!Uf(n)){Z_(n);return}n.producerRecomputeValue(n),Z_(n)}}function nv(n){if(n.consumers===void 0)return;let e=Of;Of=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let r=t.consumer;r.dirty||jV(r)}}finally{Of=e}}function rv(){return zt?.consumerAllowSignalWrites!==!1}function jV(n){n.dirty=!0,nv(n),n.consumerMarkedDirty?.(n)}function Z_(n){n.dirty=!1,n.lastCleanEpoch=ev}function Ml(n){return n&&CC(n),ge(n)}function CC(n){n.producersTail=void 0,n.recomputing=!0}function Vf(n,e){ge(e),n&&RC(n)}function RC(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(lc(n))do t=iv(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function Uf(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,r=e.lastReadVersion;if(r!==t.version||(tv(t),r!==t.version))return!0}return!1}function xl(n){if(lc(n)){let e=n.producers;for(;e!==void 0;)e=iv(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function NC(n,e){let t=n.consumersTail,r=lc(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!r)for(let i=n.producers;i!==void 0;i=i.nextProducer)NC(i.producer,i)}function iv(n){let e=n.producer,t=n.nextProducer,r=n.nextConsumer,i=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!lc(e)){let s=e.producers;for(;s!==void 0;)s=iv(s)}return t}function lc(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function sv(n){UV?.(n)}function BV(n,e){let t=e.producersTail;if(t!==void 0){let r=e.producers;do{if(r===n)return!0;if(r===t)break;r=r.nextProducer}while(r!==void 0)}return!1}function ov(n,e){return Object.is(n,e)}function jf(n,e){let t=Object.create($V);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(tv(t),kl(t),t.value===Lf)throw t.error;return t.value};return r[ln]=t,sv(t),r}var J_=Symbol("UNSET"),X_=Symbol("COMPUTING"),Lf=Symbol("ERRORED"),$V=ve($({},Pl),{value:J_,dirty:!0,error:null,equal:ov,kind:"computed",producerMustRecompute(n){return n.value===J_||n.value===X_},producerRecomputeValue(n){if(n.value===X_)throw new Error("");let e=n.value;n.value=X_;let t=Ml(n),r,i=!1;try{r=n.computation(),ge(null),i=e!==J_&&e!==Lf&&r!==Lf&&n.equal(e,r)}catch(s){r=Lf,n.error=s}finally{Vf(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function HV(){throw new Error}var PC=HV;function kC(n){PC(n)}function av(n){PC=n}var qV=null;function cv(n,e){let t=Object.create(Bf);t.value=n,e!==void 0&&(t.equal=e);let r=()=>MC(t);return r[ln]=t,sv(t),[r,o=>Ol(t,o),o=>xC(t,o)]}function MC(n){return kl(n),n.value}function Ol(n,e){rv()||kC(n),n.equal(n.value,e)||(n.value=e,zV(n))}function xC(n,e){rv()||kC(n),Ol(n,e(n.value))}var Bf=ve($({},Pl),{equal:ov,value:void 0,kind:"signal"});function zV(n){n.version++,SC(),nv(n),qV?.(n)}function uv(n){let e=ge(null);try{return n()}finally{ge(e)}}function le(n){return typeof n=="function"}function dc(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var $f=dc(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Eo(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var rt=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(le(r))try{r()}catch(s){e=s instanceof $f?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{OC(s)}catch(o){e=e??[],o instanceof $f?e=[...e,...o.errors]:e.push(o)}}if(e)throw new $f(e)}}add(e){var t;if(e&&e!==this)if(this.closed)OC(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Eo(t,e)}remove(e){let{_finalizers:t}=this;t&&Eo(t,e),e instanceof n&&e._removeParent(this)}};rt.EMPTY=(()=>{let n=new rt;return n.closed=!0,n})();var lv=rt.EMPTY;function Hf(n){return n instanceof rt||n&&"closed"in n&&le(n.remove)&&le(n.add)&&le(n.unsubscribe)}function OC(n){le(n)?n():n.unsubscribe()}var Yn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var hc={setTimeout(n,e,...t){let{delegate:r}=hc;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=hc;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function qf(n){hc.setTimeout(()=>{let{onUnhandledError:e}=Yn;if(e)e(n);else throw n})}function Ll(){}var LC=dv("C",void 0,void 0);function FC(n){return dv("E",void 0,n)}function VC(n){return dv("N",n,void 0)}function dv(n,e,t){return{kind:n,value:e,error:t}}var wo=null;function fc(n){if(Yn.useDeprecatedSynchronousErrorHandling){let e=!wo;if(e&&(wo={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=wo;if(wo=null,t)throw r}}else n()}function UC(n){Yn.useDeprecatedSynchronousErrorHandling&&wo&&(wo.errorThrown=!0,wo.error=n)}var To=class extends rt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Hf(e)&&e.add(this)):this.destination=KV}static create(e,t,r){return new cs(e,t,r)}next(e){this.isStopped?fv(VC(e),this):this._next(e)}error(e){this.isStopped?fv(FC(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?fv(LC,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},GV=Function.prototype.bind;function hv(n,e){return GV.call(n,e)}var pv=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){zf(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){zf(r)}else zf(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){zf(t)}}},cs=class extends To{constructor(e,t,r){super();let i;if(le(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&Yn.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&hv(e.next,s),error:e.error&&hv(e.error,s),complete:e.complete&&hv(e.complete,s)}):i=e}this.destination=new pv(i)}};function zf(n){Yn.useDeprecatedSynchronousErrorHandling?UC(n):qf(n)}function WV(n){throw n}function fv(n,e){let{onStoppedNotification:t}=Yn;t&&hc.setTimeout(()=>t(n,e))}var KV={closed:!0,next:Ll,error:WV,complete:Ll};var pc=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Jn(n){return n}function Gf(...n){return gv(n)}function gv(n){return n.length===0?Jn:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var fe=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let s=YV(t)?t:new cs(t,r,i);return fc(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=jC(r),new r((i,s)=>{let o=new cs({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[pc](){return this}pipe(...t){return gv(t)(this)}toPromise(t){return t=jC(t),new t((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function jC(n){var e;return(e=n??Yn.Promise)!==null&&e!==void 0?e:Promise}function QV(n){return n&&le(n.next)&&le(n.error)&&le(n.complete)}function YV(n){return n&&n instanceof To||QV(n)&&Hf(n)}function JV(n){return le(n?.lift)}function Le(n){return e=>{if(JV(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Fe(n,e,t,r,i){return new mv(n,e,t,r,i)}var mv=class extends To{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var BC=dc(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var xt=(()=>{class n extends fe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Wf(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new BC}next(t){fc(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){fc(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){fc(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:s}=this;return r||i?lv:(this.currentObservers=null,s.push(t),new rt(()=>{this.currentObservers=null,Eo(s,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){let t=new fe;return t.source=this,t}}return n.create=(e,t)=>new Wf(e,t),n})(),Wf=class extends xt{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:lv}};var Ot=class extends xt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var yv={now(){return(yv.delegate||Date).now()},delegate:void 0};var Kf=class extends rt{constructor(e,t){super()}schedule(e,t=0){return this}};var Fl={setInterval(n,e,...t){let{delegate:r}=Fl;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Fl;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var gc=class extends Kf{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return Fl.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Fl.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Eo(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var mc=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};mc.now=yv.now;var yc=class extends mc{constructor(e,t=mc.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var _v=new yc(gc);var Qf=class extends gc{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Yf=class extends yc{};var vv=new Yf(Qf);var Lt=new fe(n=>n.complete());function $C(n){return n&&le(n.schedule)}function HC(n){return n[n.length-1]}function Jf(n){return le(HC(n))?n.pop():void 0}function us(n){return $C(HC(n))?n.pop():void 0}function Xf(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function zC(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(r.next(h))}catch(g){o(g)}}function c(h){try{d(r.throw(h))}catch(g){o(g)}}function d(h){h.done?s(h.value):i(h.value).then(a,c)}d((r=r.apply(n,e||[])).next())})}function qC(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function bo(n){return this instanceof bo?(this.v=n,this):new bo(n)}function GC(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(D){return function(R){return Promise.resolve(R).then(D,g)}}function a(D,R){r[D]&&(i[D]=function(M){return new Promise(function(k,V){s.push([D,M,k,V])>1||c(D,M)})},R&&(i[D]=R(i[D])))}function c(D,R){try{d(r[D](R))}catch(M){E(s[0][3],M)}}function d(D){D.value instanceof bo?Promise.resolve(D.value.v).then(h,g):E(s[0][2],D)}function h(D){c("next",D)}function g(D){c("throw",D)}function E(D,R){D(R),s.shift(),s.length&&c(s[0][0],s[0][1])}}function WC(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof qC=="function"?qC(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,c){o=n[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(d){s({value:d,done:a})},o)}}var Zf=n=>n&&typeof n.length=="number"&&typeof n!="function";function ep(n){return le(n?.then)}function tp(n){return le(n[pc])}function np(n){return Symbol.asyncIterator&&le(n?.[Symbol.asyncIterator])}function rp(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function XV(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var ip=XV();function sp(n){return le(n?.[ip])}function op(n){return GC(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield bo(t.read());if(i)return yield bo(void 0);yield yield bo(r)}}finally{t.releaseLock()}})}function ap(n){return le(n?.getReader)}function at(n){if(n instanceof fe)return n;if(n!=null){if(tp(n))return ZV(n);if(Zf(n))return e2(n);if(ep(n))return t2(n);if(np(n))return KC(n);if(sp(n))return n2(n);if(ap(n))return r2(n)}throw rp(n)}function ZV(n){return new fe(e=>{let t=n[pc]();if(le(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function e2(n){return new fe(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function t2(n){return new fe(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,qf)})}function n2(n){return new fe(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function KC(n){return new fe(e=>{i2(n,e).catch(t=>e.error(t))})}function r2(n){return KC(op(n))}function i2(n,e){var t,r,i,s;return zC(this,void 0,void 0,function*(){try{for(t=WC(n);r=yield t.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})}function dn(n,e,t,r=0,i=!1){let s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function ls(n,e=0){return Le((t,r)=>{t.subscribe(Fe(r,i=>dn(r,n,()=>r.next(i),e),()=>dn(r,n,()=>r.complete(),e),i=>dn(r,n,()=>r.error(i),e)))})}function ds(n,e=0){return Le((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function QC(n,e){return at(n).pipe(ds(e),ls(e))}function YC(n,e){return at(n).pipe(ds(e),ls(e))}function JC(n,e){return new fe(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function XC(n,e){return new fe(t=>{let r;return dn(t,e,()=>{r=n[ip](),dn(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){t.error(o);return}s?t.complete():t.next(i)},0,!0)}),()=>le(r?.return)&&r.return()})}function cp(n,e){if(!n)throw new Error("Iterable cannot be null");return new fe(t=>{dn(t,e,()=>{let r=n[Symbol.asyncIterator]();dn(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function ZC(n,e){return cp(op(n),e)}function eR(n,e){if(n!=null){if(tp(n))return QC(n,e);if(Zf(n))return JC(n,e);if(ep(n))return YC(n,e);if(np(n))return cp(n,e);if(sp(n))return XC(n,e);if(ap(n))return ZC(n,e)}throw rp(n)}function ct(n,e){return e?eR(n,e):at(n)}function Ie(...n){let e=us(n);return ct(n,e)}function Iv(n,e){let t=le(n)?n:()=>n,r=i=>i.error(t());return new fe(e?i=>e.schedule(r,0,i):r)}function up(n){return!!n&&(n instanceof fe||le(n.lift)&&le(n.subscribe))}var oi=dc(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function s2(n,e){let t=typeof e=="object";return new Promise((r,i)=>{let s=new cs({next:o=>{r(o),s.unsubscribe()},error:i,complete:()=>{t?r(e.defaultValue):i(new oi)}});n.subscribe(s)})}function Ke(n,e){return Le((t,r)=>{let i=0;t.subscribe(Fe(r,s=>{r.next(n.call(e,s,i++))}))})}var{isArray:o2}=Array;function a2(n,e){return o2(e)?n(...e):n(e)}function lp(n){return Ke(e=>a2(n,e))}var{isArray:c2}=Array,{getPrototypeOf:u2,prototype:l2,keys:d2}=Object;function dp(n){if(n.length===1){let e=n[0];if(c2(e))return{args:e,keys:null};if(h2(e)){let t=d2(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function h2(n){return n&&typeof n=="object"&&u2(n)===l2}function hp(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Ev(...n){let e=us(n),t=Jf(n),{args:r,keys:i}=dp(n);if(r.length===0)return ct([],e);let s=new fe(f2(r,e,i?o=>hp(i,o):Jn));return t?s.pipe(lp(t)):s}function f2(n,e,t=Jn){return r=>{tR(e,()=>{let{length:i}=n,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)tR(e,()=>{let d=ct(n[c],e),h=!1;d.subscribe(Fe(r,g=>{s[c]=g,h||(h=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function tR(n,e,t){n?dn(t,n,e):e()}function nR(n,e,t,r,i,s,o,a){let c=[],d=0,h=0,g=!1,E=()=>{g&&!c.length&&!d&&e.complete()},D=M=>d<r?R(M):c.push(M),R=M=>{s&&e.next(M),d++;let k=!1;at(t(M,h++)).subscribe(Fe(e,V=>{i?.(V),s?D(V):e.next(V)},()=>{k=!0},void 0,()=>{if(k)try{for(d--;c.length&&d<r;){let V=c.shift();o?dn(e,o,()=>R(V)):R(V)}E()}catch(V){e.error(V)}}))};return n.subscribe(Fe(e,D,()=>{g=!0,E()})),()=>{a?.()}}function tn(n,e,t=1/0){return le(e)?tn((r,i)=>Ke((s,o)=>e(r,s,i,o))(at(n(r,i))),t):(typeof e=="number"&&(t=e),Le((r,i)=>nR(r,i,n,t)))}function rR(n=1/0){return tn(Jn,n)}function iR(){return rR(1)}function _c(...n){return iR()(ct(n,us(n)))}function Vl(n){return new fe(e=>{at(n()).subscribe(e)})}function p2(...n){let e=Jf(n),{args:t,keys:r}=dp(n),i=new fe(s=>{let{length:o}=t;if(!o){s.complete();return}let a=new Array(o),c=o,d=o;for(let h=0;h<o;h++){let g=!1;at(t[h]).subscribe(Fe(s,E=>{g||(g=!0,d--),a[h]=E},()=>c--,void 0,()=>{(!c||!g)&&(d||s.next(r?hp(r,a):a),s.complete())}))}});return e?i.pipe(lp(e)):i}function Tr(n,e){return Le((t,r)=>{let i=0;t.subscribe(Fe(r,s=>n.call(e,s,i++)&&r.next(s)))})}function Ul(n){return Le((e,t)=>{let r=null,i=!1,s;r=e.subscribe(Fe(t,void 0,void 0,o=>{s=at(n(o,Ul(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function fp(n,e){return le(e)?tn(n,e,1):tn(n,1)}function sR(n){return Le((e,t)=>{let r=!1;e.subscribe(Fe(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function ai(n){return n<=0?()=>Lt:Le((e,t)=>{let r=0;e.subscribe(Fe(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function oR(n=g2){return Le((e,t)=>{let r=!1;e.subscribe(Fe(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function g2(){return new oi}function wv(n){return Le((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function ci(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Tr((i,s)=>n(i,s,r)):Jn,ai(1),t?sR(e):oR(()=>new oi))}function pp(n){return n<=0?()=>Lt:Le((e,t)=>{let r=[];e.subscribe(Fe(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function gp(...n){let e=us(n);return Le((t,r)=>{(e?_c(n,t,e):_c(n,t)).subscribe(r)})}function Xn(n,e){return Le((t,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();t.subscribe(Fe(r,c=>{i?.unsubscribe();let d=0,h=s++;at(n(c,h)).subscribe(i=Fe(r,g=>r.next(e?e(c,g,h,d++):g),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function jl(n){return Le((e,t)=>{at(n).subscribe(Fe(t,()=>t.complete(),Ll)),!t.closed&&e.subscribe(t)})}function br(n,e,t){let r=le(n)||e||t?{next:n,error:e,complete:t}:n;return r?Le((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(Fe(s,c=>{var d;(d=r.next)===null||d===void 0||d.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var d;a=!1,(d=r.error)===null||d===void 0||d.call(r,c),s.error(c)},()=>{var c,d;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(d=r.finalize)===null||d===void 0||d.call(r)}))}):Jn}var Tv;function mp(){return Tv}function Ar(n){let e=Tv;return Tv=n,e}var aR=Symbol("NotFound");function vc(n){return n===aR||n?.name==="\u0275NotFound"}var Ec=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},Uv=new Ec("21.1.0");var Ep="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",Y=class extends Error{code;constructor(e,t){super(wc(e,t)),this.code=e}};function _2(n){return`NG0${Math.abs(n)}`}function wc(n,e){return`${_2(n)}${e?": "+e:""}`}var Gl=globalThis;function Ve(n){for(let e in n)if(n[e]===Ve)return e;throw Error("")}function hR(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function li(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(li).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function jv(n,e){return n?e?`${n} ${e}`:n:e||""}var v2=Ve({__forward_ref__:Ve});function wp(n){return n.__forward_ref__=wp,n.toString=function(){return li(this())},n}function Ft(n){return Bv(n)?n():n}function Bv(n){return typeof n=="function"&&n.hasOwnProperty(v2)&&n.__forward_ref__===wp}function X(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Ro(n){return{providers:n.providers||[],imports:n.imports||[]}}function Wl(n){return I2(n,Tp)}function $v(n){return Wl(n)!==null}function I2(n,e){return n.hasOwnProperty(e)&&n[e]||null}function E2(n){let e=n?.[Tp]??null;return e||null}function Av(n){return n&&n.hasOwnProperty(_p)?n[_p]:null}var Tp=Ve({\u0275prov:Ve}),_p=Ve({\u0275inj:Ve}),J=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=X({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Hv(n){return n&&!!n.\u0275providers}var qv=Ve({\u0275cmp:Ve}),zv=Ve({\u0275dir:Ve}),Gv=Ve({\u0275pipe:Ve}),Wv=Ve({\u0275mod:Ve}),$l=Ve({\u0275fac:Ve}),No=Ve({__NG_ELEMENT_ID__:Ve}),cR=Ve({__NG_ENV_ID__:Ve});function Kv(n){return bp(n,"@NgModule"),n[Wv]||null}function gs(n){return bp(n,"@Component"),n[qv]||null}function Qv(n){return bp(n,"@Directive"),n[zv]||null}function fR(n){return bp(n,"@Pipe"),n[Gv]||null}function bp(n,e){if(n==null)throw new Y(-919,!1)}function Kl(n){return typeof n=="string"?n:n==null?"":String(n)}function pR(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Kl(n)}var gR=Ve({ngErrorCode:Ve}),w2=Ve({ngErrorMessage:Ve}),T2=Ve({ngTokenPath:Ve});function Yv(n,e){return mR("",-200,e)}function Ap(n,e){throw new Y(-201,!1)}function mR(n,e,t){let r=new Y(e,n);return r[gR]=e,r[w2]=n,t&&(r[T2]=t),r}function b2(n){return n[gR]}var Dv;function yR(){return Dv}function nn(n){let e=Dv;return Dv=n,e}function Jv(n,e,t){let r=Wl(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;Ap(n,"")}var A2={},Ao=A2,Sv="__NG_DI_FLAG__",Cv=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=Do(t)||0;try{return this.injector.get(e,r&8?null:Ao,r)}catch(i){if(vc(i))return i;throw i}}};function D2(n,e=0){let t=mp();if(t===void 0)throw new Y(-203,!1);if(t===null)return Jv(n,void 0,e);{let r=S2(e),i=t.retrieve(n,r);if(vc(i)){if(r.optional)return null;throw i}return i}}function me(n,e=0){return(yR()||D2)(Ft(n),e)}function L(n,e){return me(n,Do(e))}function Do(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function S2(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function Rv(n){let e=[];for(let t=0;t<n.length;t++){let r=Ft(n[t]);if(Array.isArray(r)){if(r.length===0)throw new Y(900,!1);let i,s=0;for(let o=0;o<r.length;o++){let a=r[o],c=C2(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(me(i,s))}else e.push(me(r))}return e}function _R(n,e){return n[Sv]=e,n.prototype[Sv]=e,n}function C2(n){return n[Sv]}function hs(n,e){let t=n.hasOwnProperty($l);return t?n[$l]:null}function Dp(n,e){n.forEach(t=>Array.isArray(t)?Dp(t,e):e(t))}function Xv(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Ql(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function vR(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let s=i-2;n[i]=n[s],i--}n[e]=t,n[e+1]=r}}function IR(n,e,t){let r=Tc(n,e);return r>=0?n[r|1]=t:(r=~r,vR(n,r,e,t)),r}function Sp(n,e){let t=Tc(n,e);if(t>=0)return n[t|1]}function Tc(n,e){return R2(n,e,1)}function R2(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}var ms={},In=[],ys=new J(""),Zv=new J("",-1),eI=new J(""),Hl=class{get(e,t=Ao){if(t===Ao){let i=mR("",-201);throw i.name="\u0275NotFound",i}return t}};function Zn(n){return{\u0275providers:n}}function ER(...n){return{\u0275providers:tI(!0,n),\u0275fromNgModule:!0}}function tI(n,...e){let t=[],r=new Set,i,s=o=>{t.push(o)};return Dp(e,o=>{let a=o;vp(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&wR(i,s),t}function wR(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];nI(i,s=>{e(s,r)})}}function vp(n,e,t,r){if(n=Ft(n),!n)return!1;let i=null,s=Av(n),o=!s&&gs(n);if(!s&&!o){let c=n.ngModule;if(s=Av(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=n}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let d of c)vp(d,e,t,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let d;Dp(s.imports,h=>{vp(h,e,t,r)&&(d||=[],d.push(h))}),d!==void 0&&wR(d,e)}if(!a){let d=hs(i)||(()=>new i);e({provide:i,useFactory:d,deps:In},i),e({provide:eI,useValue:i,multi:!0},i),e({provide:ys,useValue:()=>me(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let d=n;nI(c,h=>{e(h,d)})}}else return!1;return i!==n&&n.providers!==void 0}function nI(n,e){for(let t of n)Hv(t)&&(t=t.\u0275providers),Array.isArray(t)?nI(t,e):e(t)}var N2=Ve({provide:String,useValue:Ve});function TR(n){return n!==null&&typeof n=="object"&&N2 in n}function P2(n){return!!(n&&n.useExisting)}function k2(n){return!!(n&&n.useFactory)}function So(n){return typeof n=="function"}function bR(n){return!!n.useClass}var Yl=new J(""),yp={},uR={},bv;function Jl(){return bv===void 0&&(bv=new Hl),bv}var Xe=class{},Co=class extends Xe{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,Pv(e,o=>this.processProvider(o)),this.records.set(Zv,Ic(void 0,this)),i.has("environment")&&this.records.set(Xe,Ic(void 0,this));let s=this.records.get(Yl);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(eI,In,{self:!0}))}retrieve(e,t){let r=Do(t)||0;try{return this.get(e,Ao,r)}catch(i){if(vc(i))return i;throw i}}destroy(){Bl(this),this._destroyed=!0;let e=ge(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ge(e)}}onDestroy(e){return Bl(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Bl(this);let t=Ar(this),r=nn(void 0),i;try{return e()}finally{Ar(t),nn(r)}}get(e,t=Ao,r){if(Bl(this),e.hasOwnProperty(cR))return e[cR](this);let i=Do(r),s,o=Ar(this),a=nn(void 0);try{if(!(i&4)){let d=this.records.get(e);if(d===void 0){let h=F2(e)&&Wl(e);h&&this.injectableDefInScope(h)?d=Ic(Nv(e),yp):d=null,this.records.set(e,d)}if(d!=null)return this.hydrate(e,d,i)}let c=i&2?Jl():this.parent;return t=i&8&&t===Ao?null:t,c.get(e,t)}catch(c){let d=b2(c);throw d===-200||d===-201?new Y(d,null):c}finally{nn(a),Ar(o)}}resolveInjectorInitializers(){let e=ge(null),t=Ar(this),r=nn(void 0),i;try{let s=this.get(ys,In,{self:!0});for(let o of s)o()}finally{Ar(t),nn(r),ge(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(li(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Ft(e);let t=So(e)?e:Ft(e&&e.provide),r=x2(e);if(!So(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Ic(void 0,yp,!0),i.factory=()=>Rv(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=ge(null);try{if(t.value===uR)throw Yv(li(e));return t.value===yp&&(t.value=uR,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&L2(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{ge(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Ft(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Nv(n){let e=Wl(n),t=e!==null?e.factory:hs(n);if(t!==null)return t;if(n instanceof J)throw new Y(204,!1);if(n instanceof Function)return M2(n);throw new Y(204,!1)}function M2(n){if(n.length>0)throw new Y(204,!1);let t=E2(n);return t!==null?()=>t.factory(n):()=>new n}function x2(n){if(TR(n))return Ic(void 0,n.useValue);{let e=rI(n);return Ic(e,yp)}}function rI(n,e,t){let r;if(So(n)){let i=Ft(n);return hs(i)||Nv(i)}else if(TR(n))r=()=>Ft(n.useValue);else if(k2(n))r=()=>n.useFactory(...Rv(n.deps||[]));else if(P2(n))r=(i,s)=>me(Ft(n.useExisting),s!==void 0&&s&8?8:void 0);else{let i=Ft(n&&(n.useClass||n.provide));if(O2(n))r=()=>new i(...Rv(n.deps));else return hs(i)||Nv(i)}return r}function Bl(n){if(n.destroyed)throw new Y(205,!1)}function Ic(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function O2(n){return!!n.deps}function L2(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function F2(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function Pv(n,e){for(let t of n)Array.isArray(t)?Pv(t,e):t&&Hv(t)?Pv(t.\u0275providers,e):e(t)}function ut(n,e){let t;n instanceof Co?(Bl(n),t=n):t=new Cv(n);let r,i=Ar(t),s=nn(void 0);try{return e()}finally{Ar(i),nn(s)}}function AR(){return yR()!==void 0||mp()!=null}var er=0,oe=1,de=2,Vt=3,kn=4,Mn=5,Xl=6,bc=7,Gt=8,_s=9,Dr=10,Ze=11,Ac=12,iI=13,Po=14,xn=15,ko=16,Mo=17,xo=18,vs=19,sI=20,ui=21,Cp=22,Zl=23,En=24,Rp=25,ed=26,Ut=27,DR=1;var Is=7,td=8,nd=9,hn=10;function Sr(n){return Array.isArray(n)&&typeof n[DR]=="object"}function tr(n){return Array.isArray(n)&&n[DR]===!0}function oI(n){return(n.flags&4)!==0}function Es(n){return n.componentOffset>-1}function Dc(n){return(n.flags&1)===1}function Cr(n){return!!n.template}function Sc(n){return(n[de]&512)!==0}function Oo(n){return(n[de]&256)===256}var SR="svg",CR="math";function On(n){for(;Array.isArray(n);)n=n[er];return n}function aI(n,e){return On(e[n])}function nr(n,e){return On(e[n.index])}function Np(n,e){return n.data[e]}function RR(n,e){return n[e]}function cI(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function Ln(n,e){let t=e[n];return Sr(t)?t:t[er]}function Pp(n){return(n[de]&128)===128}function NR(n){return tr(n[Vt])}function Lo(n,e){return e==null?null:n[e]}function uI(n){n[Mo]=0}function lI(n){n[de]&1024||(n[de]|=1024,Pp(n)&&id(n))}function PR(n,e){for(;n>0;)e=e[Po],n--;return e}function rd(n){return!!(n[de]&9216||n[En]?.dirty)}function kp(n){n[Dr].changeDetectionScheduler?.notify(8),n[de]&64&&(n[de]|=1024),rd(n)&&id(n)}function id(n){n[Dr].changeDetectionScheduler?.notify(0);let e=fs(n);for(;e!==null&&!(e[de]&8192||(e[de]|=8192,!Pp(e)));)e=fs(e)}function dI(n,e){if(Oo(n))throw new Y(911,!1);n[ui]===null&&(n[ui]=[]),n[ui].push(e)}function kR(n,e){if(n[ui]===null)return;let t=n[ui].indexOf(e);t!==-1&&n[ui].splice(t,1)}function fs(n){let e=n[Vt];return tr(e)?e[Vt]:e}function MR(n){return n[bc]??=[]}function xR(n){return n.cleanup??=[]}var Ee={lFrame:YR(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var kv=!1;function OR(){return Ee.lFrame.elementDepthCount}function LR(){Ee.lFrame.elementDepthCount++}function hI(){Ee.lFrame.elementDepthCount--}function Mp(){return Ee.bindingsEnabled}function FR(){return Ee.skipHydrationRootTNode!==null}function fI(n){return Ee.skipHydrationRootTNode===n}function pI(){Ee.skipHydrationRootTNode=null}function Be(){return Ee.lFrame.lView}function fn(){return Ee.lFrame.tView}function VR(n){return Ee.lFrame.contextLView=n,n[Gt]}function UR(n){return Ee.lFrame.contextLView=null,n}function Wt(){let n=gI();for(;n!==null&&n.type===64;)n=n.parent;return n}function gI(){return Ee.lFrame.currentTNode}function jR(){let n=Ee.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Cc(n,e){let t=Ee.lFrame;t.currentTNode=n,t.isParent=e}function mI(){return Ee.lFrame.isParent}function BR(){Ee.lFrame.isParent=!1}function yI(){return kv}function _I(n){let e=kv;return kv=n,e}function $R(){let n=Ee.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function HR(n){return Ee.lFrame.bindingIndex=n}function xp(){return Ee.lFrame.bindingIndex++}function qR(n){let e=Ee.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function zR(){return Ee.lFrame.inI18n}function GR(n,e){let t=Ee.lFrame;t.bindingIndex=t.bindingRootIndex=n,Op(e)}function WR(){return Ee.lFrame.currentDirectiveIndex}function Op(n){Ee.lFrame.currentDirectiveIndex=n}function KR(n){let e=Ee.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function vI(n){Ee.lFrame.currentQueryIndex=n}function V2(n){let e=n[oe];return e.type===2?e.declTNode:e.type===1?n[Mn]:null}function II(n,e,t){if(t&4){let i=e,s=n;for(;i=i.parent,i===null&&!(t&1);)if(i=V2(s),i===null||(s=s[Po],i.type&10))break;if(i===null)return!1;e=i,n=s}let r=Ee.lFrame=QR();return r.currentTNode=e,r.lView=n,!0}function Lp(n){let e=QR(),t=n[oe];Ee.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function QR(){let n=Ee.lFrame,e=n===null?null:n.child;return e===null?YR(n):e}function YR(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function JR(){let n=Ee.lFrame;return Ee.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var EI=JR;function Fp(){let n=JR();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function XR(n){return(Ee.lFrame.contextLView=PR(n,Ee.lFrame.contextLView))[Gt]}function Fo(){return Ee.lFrame.selectedIndex}function ws(n){Ee.lFrame.selectedIndex=n}function wI(){let n=Ee.lFrame;return Np(n.tView,n.selectedIndex)}function ZR(){return Ee.lFrame.currentNamespace}var e0=!0;function Vp(){return e0}function sd(n){e0=n}function Mv(n,e=null,t=null,r){let i=TI(n,e,t,r);return i.resolveInjectorInitializers(),i}function TI(n,e=null,t=null,r,i=new Set){let s=[t||In,ER(n)];return r=r||(typeof n=="object"?void 0:li(n)),new Co(s,e||Jl(),r||null,i)}var At=class n{static THROW_IF_NOT_FOUND=Ao;static NULL=new Hl;static create(e,t){if(Array.isArray(e))return Mv({name:""},t,e,"");{let r=e.name??"";return Mv({name:r},e.parent,e.providers,r)}}static \u0275prov=X({token:n,providedIn:"any",factory:()=>me(Zv)});static __NG_ELEMENT_ID__=-1},Dt=new J(""),Ts=(()=>{class n{static __NG_ELEMENT_ID__=U2;static __NG_ENV_ID__=t=>t}return n})(),xv=class extends Ts{_lView;constructor(e){super(),this._lView=e}get destroyed(){return Oo(this._lView)}onDestroy(e){let t=this._lView;return dI(t,e),()=>kR(t,e)}};function U2(){return new xv(Be())}var bI=!1,t0=new J(""),Rr=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Ot(!1);debugTaskTracker=L(t0,{optional:!0});get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new fe(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),this.debugTaskTracker?.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.debugTaskTracker?.remove(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=X({token:n,providedIn:"root",factory:()=>new n})}return n})(),Ov=class extends xt{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,AR()&&(this.destroyRef=L(Ts,{optional:!0})??void 0,this.pendingTasks=L(Rr,{optional:!0})??void 0)}emit(e){let t=ge(null);try{super.next(e)}finally{ge(t)}}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof rt&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},rn=Ov;function Ip(...n){}function AI(n){let e,t;function r(){n=Ip;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function n0(n){return queueMicrotask(()=>n()),()=>{n=Ip}}var DI="isAngularZone",ql=DI+"_ID",j2=0,Ue=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new rn(!1);onMicrotaskEmpty=new rn(!1);onStable=new rn(!1);onError=new rn(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=bI}=e;if(typeof Zone>"u")throw new Y(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,H2(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(DI)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new Y(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new Y(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,B2,Ip,Ip);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},B2={};function SI(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function $2(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){AI(()=>{n.callbackScheduled=!1,Lv(n),n.isCheckStableRunning=!0,SI(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Lv(n)}function H2(n){let e=()=>{$2(n)},t=j2++;n._inner=n._inner.fork({name:"angular",properties:{[DI]:!0,[ql]:t,[ql+t]:!0},onInvokeTask:(r,i,s,o,a,c)=>{if(q2(c))return r.invokeTask(s,o,a,c);try{return lR(n),r.invokeTask(s,o,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),dR(n)}},onInvoke:(r,i,s,o,a,c,d)=>{try{return lR(n),r.invoke(s,o,a,c,d)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!z2(c)&&e(),dR(n)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,Lv(n),SI(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function Lv(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function lR(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function dR(n){n._nesting--,SI(n)}var zl=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new rn;onMicrotaskEmpty=new rn;onStable=new rn;onError=new rn;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function q2(n){return r0(n,"__ignore_ng_zone__")}function z2(n){return r0(n,"__scheduler_tick__")}function r0(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var di=class{_console=console;handleError(e){this._console.error("ERROR",e)}},pn=new J("",{factory:()=>{let n=L(Ue),e=L(Xe),t;return r=>{n.runOutsideAngular(()=>{e.destroyed&&!t?setTimeout(()=>{throw r}):(t??=e.get(di),t.handleError(r))})}}}),i0={provide:ys,useValue:()=>{let n=L(di,{optional:!0})},multi:!0};function bs(n,e){let[t,r,i]=cv(n,e?.equal),s=t,o=s[ln];return s.set=r,s.update=i,s.asReadonly=s0.bind(s),s}function s0(){let n=this[ln];if(n.readonlyFn===void 0){let e=()=>this();e[ln]=n,n.readonlyFn=e}return n.readonlyFn}var ps=class{},Rc=new J("",{factory:()=>!0});var Up=new J(""),Nc=(()=>{class n{internalPendingTasks=L(Rr);scheduler=L(ps);errorHandler=L(pn);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=X({token:n,providedIn:"root",factory:()=>new n})}return n})(),CI=(()=>{class n{static \u0275prov=X({token:n,providedIn:"root",factory:()=>new Fv})}return n})(),Fv=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}},Vv=class{[ln];constructor(e){this[ln]=e}destroy(){this[ln].destroy()}};function gn(n){return uv(n)}function Vc(n){return{toString:n}.toString()}var jp="__parameters__";function eU(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function tU(n,e,t){return Vc(()=>{let r=eU(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,d,h){let g=c.hasOwnProperty(jp)?c[jp]:Object.defineProperty(c,jp,{value:[]})[jp];for(;g.length<=h;)g.push(null);return(g[h]=g[h]||[]).push(o),c}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var wn=_R(tU("Optional"),8);function nU(n){return typeof n=="function"}function x0(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var Wp=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}},Uc=(()=>{let n=()=>O0;return n.ngInherit=!0,n})();function O0(n){return n.type.prototype.ngOnChanges&&(n.setInput=iU),rU}function rU(){let n=F0(this),e=n?.current;if(e){let t=n.previous;if(t===ms)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function iU(n,e,t,r,i){let s=this.declaredInputs[r],o=F0(n)||sU(n,{previous:ms,current:null}),a=o.current||(o.current={}),c=o.previous,d=c[s];a[s]=new Wp(d&&d.currentValue,t,c===ms),x0(n,e,i,t)}var L0="__ngSimpleChanges__";function F0(n){return n[L0]||null}function sU(n,e){return n[L0]=e}var o0=[];var qe=function(n,e=null,t){for(let r=0;r<o0.length;r++){let i=o0[r];i(n,e,t)}},Me=(function(n){return n[n.TemplateCreateStart=0]="TemplateCreateStart",n[n.TemplateCreateEnd=1]="TemplateCreateEnd",n[n.TemplateUpdateStart=2]="TemplateUpdateStart",n[n.TemplateUpdateEnd=3]="TemplateUpdateEnd",n[n.LifecycleHookStart=4]="LifecycleHookStart",n[n.LifecycleHookEnd=5]="LifecycleHookEnd",n[n.OutputStart=6]="OutputStart",n[n.OutputEnd=7]="OutputEnd",n[n.BootstrapApplicationStart=8]="BootstrapApplicationStart",n[n.BootstrapApplicationEnd=9]="BootstrapApplicationEnd",n[n.BootstrapComponentStart=10]="BootstrapComponentStart",n[n.BootstrapComponentEnd=11]="BootstrapComponentEnd",n[n.ChangeDetectionStart=12]="ChangeDetectionStart",n[n.ChangeDetectionEnd=13]="ChangeDetectionEnd",n[n.ChangeDetectionSyncStart=14]="ChangeDetectionSyncStart",n[n.ChangeDetectionSyncEnd=15]="ChangeDetectionSyncEnd",n[n.AfterRenderHooksStart=16]="AfterRenderHooksStart",n[n.AfterRenderHooksEnd=17]="AfterRenderHooksEnd",n[n.ComponentStart=18]="ComponentStart",n[n.ComponentEnd=19]="ComponentEnd",n[n.DeferBlockStateStart=20]="DeferBlockStateStart",n[n.DeferBlockStateEnd=21]="DeferBlockStateEnd",n[n.DynamicComponentStart=22]="DynamicComponentStart",n[n.DynamicComponentEnd=23]="DynamicComponentEnd",n[n.HostBindingsUpdateStart=24]="HostBindingsUpdateStart",n[n.HostBindingsUpdateEnd=25]="HostBindingsUpdateEnd",n})(Me||{});function oU(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=O0(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}function V0(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:d,ngOnDestroy:h}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),d&&((n.viewHooks??=[]).push(t,d),(n.viewCheckHooks??=[]).push(t,d)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function Hp(n,e,t){U0(n,e,3,t)}function qp(n,e,t,r){(n[de]&3)===t&&U0(n,e,t,r)}function RI(n,e){let t=n[de];(t&3)===e&&(t&=16383,t+=1,n[de]=t)}function U0(n,e,t,r){let i=r!==void 0?n[Mo]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[Mo]+=65536),(a<s||s==-1)&&(aU(n,t,e,c),n[Mo]=(n[Mo]&4294901760)+c+2),c++}function a0(n,e){qe(Me.LifecycleHookStart,n,e);let t=ge(null);try{e.call(n)}finally{ge(t),qe(Me.LifecycleHookEnd,n,e)}}function aU(n,e,t,r){let i=t[r]<0,s=t[r+1],o=i?-t[r]:t[r],a=n[o];i?n[de]>>14<n[Mo]>>16&&(n[de]&3)===e&&(n[de]+=16384,a0(a,s)):a0(a,s)}var kc=-1,Uo=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}};function cU(n){return(n.flags&8)!==0}function uU(n){return(n.flags&16)!==0}function lU(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{let s=i,o=t[++r];dU(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function j0(n){return n===3||n===4||n===6}function dU(n){return n.charCodeAt(0)===64}function Mc(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?c0(n,t,i,null,e[++r]):c0(n,t,i,null,null))}}return n}function c0(n,e,t,r,i){let s=0,o=n.length;if(e===-1)o=-1;else for(;s<n.length;){let a=n[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<n.length;){let a=n[s];if(typeof a=="number")break;if(a===t){i!==null&&(n[s+1]=i);return}s++,i!==null&&s++}o!==-1&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),i!==null&&n.splice(s++,0,i)}function B0(n){return n!==kc}function Kp(n){return n&32767}function hU(n){return n>>16}function Qp(n,e){let t=hU(n),r=e;for(;t>0;)r=r[Po],t--;return r}var VI=!0;function Yp(n){let e=VI;return VI=n,e}var fU=256,$0=fU-1,H0=5,pU=0,Nr={};function gU(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(No)&&(r=t[No]),r==null&&(r=t[No]=pU++);let i=r&$0,s=1<<i;e.data[n+(i>>H0)]|=s}function Jp(n,e){let t=q0(n,e);if(t!==-1)return t;let r=e[oe];r.firstCreatePass&&(n.injectorIndex=e.length,NI(r.data,n),NI(e,null),NI(r.blueprint,null));let i=ZI(n,e),s=n.injectorIndex;if(B0(i)){let o=Kp(i),a=Qp(i,e),c=a[oe].data;for(let d=0;d<8;d++)e[s+d]=a[o+d]|c[o+d]}return e[s+8]=i,s}function NI(n,e){n.push(0,0,0,0,0,0,0,0,e)}function q0(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function ZI(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=Q0(i),r===null)return kc;if(t++,i=i[Po],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return kc}function UI(n,e,t){gU(n,e,t)}function mU(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let s=t[i];if(j0(s))break;if(s===0)i=i+2;else if(typeof s=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(s===e)return t[i+1];i=i+2}}}return null}function z0(n,e,t){if(t&8||n!==void 0)return n;Ap(e,"NodeInjector")}function G0(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[_s],s=nn(void 0);try{return i?i.get(e,r,t&8):Jv(e,r,t&8)}finally{nn(s)}}return z0(r,e,t)}function W0(n,e,t,r=0,i){if(n!==null){if(e[de]&2048&&!(r&2)){let o=EU(n,e,t,r,Nr);if(o!==Nr)return o}let s=K0(n,e,t,r,Nr);if(s!==Nr)return s}return G0(e,t,r,i)}function K0(n,e,t,r,i){let s=vU(t);if(typeof s=="function"){if(!II(e,n,r))return r&1?z0(i,t,r):G0(e,t,r,i);try{let o;if(o=s(r),o==null&&!(r&8))Ap(t);else return o}finally{EI()}}else if(typeof s=="number"){let o=null,a=q0(n,e),c=kc,d=r&1?e[xn][Mn]:null;for((a===-1||r&4)&&(c=a===-1?ZI(n,e):e[a+8],c===kc||!l0(r,!1)?a=-1:(o=e[oe],a=Kp(c),e=Qp(c,e)));a!==-1;){let h=e[oe];if(u0(s,a,h.data)){let g=yU(a,e,t,o,r,d);if(g!==Nr)return g}c=e[a+8],c!==kc&&l0(r,e[oe].data[a+8]===d)&&u0(s,a,e)?(o=h,a=Kp(c),e=Qp(c,e)):a=-1}}return i}function yU(n,e,t,r,i,s){let o=e[oe],a=o.data[n+8],c=r==null?Es(a)&&VI:r!=o&&(a.type&3)!==0,d=i&1&&s===a,h=_U(a,o,t,c,d);return h!==null?Xp(e,o,h,a,i):Nr}function _U(n,e,t,r,i){let s=n.providerIndexes,o=e.data,a=s&1048575,c=n.directiveStart,d=n.directiveEnd,h=s>>20,g=r?a:a+h,E=i?a+h:d;for(let D=g;D<E;D++){let R=o[D];if(D<c&&t===R||D>=c&&R.type===t)return D}if(i){let D=o[c];if(D&&Cr(D)&&D.type===t)return c}return null}function Xp(n,e,t,r,i){let s=n[t],o=e.data;if(s instanceof Uo){let a=s;if(a.resolving){let D=pR(o[t]);throw Yv(D)}let c=Yp(a.canSeeViewProviders);a.resolving=!0;let d=o[t].type||o[t],h,g=a.injectImpl?nn(a.injectImpl):null,E=II(n,r,0);try{s=n[t]=a.factory(void 0,i,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&oU(t,o[t],e)}finally{g!==null&&nn(g),Yp(c),a.resolving=!1,EI()}}return s}function vU(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(No)?n[No]:void 0;return typeof e=="number"?e>=0?e&$0:IU:e}function u0(n,e,t){let r=1<<n;return!!(t[e+(n>>H0)]&r)}function l0(n,e){return!(n&2)&&!(n&1&&e)}var Vo=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return W0(this._tNode,this._lView,e,Do(r),t)}};function IU(){return new Vo(Wt(),Be())}function cg(n){return Vc(()=>{let e=n.prototype.constructor,t=e[$l]||jI(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let s=i[$l]||jI(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function jI(n){return Bv(n)?()=>{let e=jI(Ft(n));return e&&e()}:hs(n)}function EU(n,e,t,r,i){let s=n,o=e;for(;s!==null&&o!==null&&o[de]&2048&&!Sc(o);){let a=K0(s,o,t,r|2,Nr);if(a!==Nr)return a;let c=s.parent;if(!c){let d=o[sI];if(d){let h=d.get(t,Nr,r);if(h!==Nr)return h}c=Q0(o),o=o[Po]}s=c}return i}function Q0(n){let e=n[oe],t=e.type;return t===2?e.declTNode:t===1?n[Mn]:null}function dd(n){return mU(Wt(),n)}function wU(){return ug(Wt(),Be())}function ug(n,e){return new hd(nr(n,e))}var hd=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=wU}return n})();function Y0(n){return(n.flags&128)===128}var eE=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(eE||{}),J0=new Map,TU=0;function bU(){return TU++}function AU(n){J0.set(n[vs],n)}function BI(n){J0.delete(n[vs])}var d0="__ngContext__";function xc(n,e){Sr(e)?(n[d0]=e[vs],AU(e)):n[d0]=e}function X0(n){return eN(n[Ac])}function Z0(n){return eN(n[kn])}function eN(n){for(;n!==null&&!tr(n);)n=n[kn];return n}var DU;function tE(n){DU=n}var lg=new J("",{factory:()=>SU}),SU="ng";var dg=new J(""),Ho=new J("",{providedIn:"platform",factory:()=>"unknown"});var hg=new J("",{factory:()=>L(Dt).body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var tN=!1,nN=new J("",{factory:()=>tN});var CU=(n,e,t,r)=>{};function RU(n,e,t,r){CU(n,e,t,r)}function nE(n){return(n.flags&32)===32}var NU=()=>null;function rN(n,e,t=!1){return NU(n,e,t)}function iN(n,e){let t=n.contentQueries;if(t!==null){let r=ge(null);try{for(let i=0;i<t.length;i+=2){let s=t[i],o=t[i+1];if(o!==-1){let a=n.data[o];vI(s),a.contentQueries(2,e[o],o)}}}finally{ge(r)}}}function $I(n,e,t){vI(0);let r=ge(null);try{e(n,t)}finally{ge(r)}}function rE(n,e,t){if(oI(e)){let r=ge(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=n.data[o];if(a.contentQueries){let c=t[o];a.contentQueries(1,c,o)}}}finally{ge(r)}}}var ir=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n[n.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",n})(ir||{});var Bp;function PU(){if(Bp===void 0&&(Bp=null,Gl.trustedTypes))try{Bp=Gl.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Bp}function h0(n){return PU()?.createScriptURL(n)||n}var Zp=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Ep})`}};function fg(n){return n instanceof Zp?n.changingThisBreaksApplicationSecurity:n}function iE(n,e){let t=sN(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${Ep})`)}return t===e}function sN(n){return n instanceof Zp&&n.getTypeName()||null}var kU=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function oN(n){return n=String(n),n.match(kU)?n:"unsafe:"+n}var MU=/^>|^->|<!--|-->|--!>|<!-$/g,xU=/(<|>)/g,OU="\u200B$1\u200B";function LU(n){return n.replace(MU,e=>e.replace(xU,OU))}function FU(n,e){return n.createText(e)}function VU(n,e,t){n.setValue(e,t)}function UU(n,e){return n.createComment(LU(e))}function aN(n,e,t){return n.createElement(e,t)}function eg(n,e,t,r,i){n.insertBefore(e,t,r,i)}function cN(n,e,t){n.appendChild(e,t)}function f0(n,e,t,r,i){r!==null?eg(n,e,t,r,i):cN(n,e,t)}function jU(n,e,t,r){n.removeChild(null,e,t,r)}function BU(n,e,t){n.setAttribute(e,"style",t)}function $U(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function uN(n,e,t){let{mergedAttrs:r,classes:i,styles:s}=t;r!==null&&lU(n,e,r),i!==null&&$U(n,e,i),s!==null&&BU(n,e,s)}var pg=(function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n})(pg||{});function lN(n){let e=hN();return e?e.sanitize(pg.URL,n)||"":iE(n,"URL")?fg(n):oN(Kl(n))}function dN(n){let e=hN();if(e)return h0(e.sanitize(pg.RESOURCE_URL,n)||"");if(iE(n,"ResourceURL"))return h0(fg(n));throw new Y(904,!1)}var HU=new Set(["embed","frame","iframe","media","script"]),qU=new Set(["base","link","script"]);function zU(n,e){return e==="src"&&HU.has(n)||e==="href"&&qU.has(n)||e==="xlink:href"&&n==="script"?dN:lN}function sE(n,e,t){return zU(e,t)(n)}function hN(){let n=Be();return n&&n[Dr].sanitizer}function fN(n){return n instanceof Function?n():n}function GU(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}var pN="ng-template";function WU(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&GU(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(oE(n))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===t)return!0}return!1}function oE(n){return n.type===4&&n.value!==pN}function KU(n,e,t){let r=n.type===4&&!t?pN:n.value;return e===r}function QU(n,e,t){let r=4,i=n.attrs,s=i!==null?XU(i):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!rr(r)&&!rr(c))return!1;if(o&&rr(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!KU(n,c,t)||c===""&&e.length===1){if(rr(r))return!1;o=!0}}else if(r&8){if(i===null||!WU(n,i,c,t)){if(rr(r))return!1;o=!0}}else{let d=e[++a],h=YU(c,i,oE(n),t);if(h===-1){if(rr(r))return!1;o=!0;continue}if(d!==""){let g;if(h>s?g="":g=i[h+1].toLowerCase(),r&2&&d!==g){if(rr(r))return!1;o=!0}}}}return rr(r)||o}function rr(n){return(n&1)===0}function YU(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){let o=e[i];if(o===n)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return ZU(e,n)}function JU(n,e,t=!1){for(let r=0;r<e.length;r++)if(QU(n,e[r],t))return!0;return!1}function XU(n){for(let e=0;e<n.length;e++){let t=n[e];if(j0(t))return e}return n.length}function ZU(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function p0(n,e){return n?":not("+e.trim()+")":e}function ej(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if(typeof o=="string")if(r&2){let a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!rr(o)&&(e+=p0(s,i),i=""),r=o,s=s||!rr(r);t++}return i!==""&&(e+=p0(s,i)),e}function tj(n){return n.map(ej).join(",")}function nj(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let s=n[r];if(typeof s=="string")i===2?s!==""&&e.push(s,n[++r]):i===8&&t.push(s);else{if(!rr(i))break;i=s}r++}return t.length&&e.push(1,...t),e}var hi={};function aE(n,e,t,r,i,s,o,a,c,d,h){let g=Ut+r,E=g+i,D=rj(g,E),R=typeof d=="function"?d():d;return D[oe]={type:n,blueprint:D,template:t,queries:null,viewQuery:a,declTNode:e,data:D.slice().fill(null,g),bindingStartIndex:g,expandoStartIndex:E,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:R,incompleteFirstPass:!1,ssrId:h}}function rj(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:hi);return t}function ij(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=aE(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function cE(n,e,t,r,i,s,o,a,c,d,h){let g=e.blueprint.slice();return g[er]=i,g[de]=r|4|128|8|64|1024,(d!==null||n&&n[de]&2048)&&(g[de]|=2048),uI(g),g[Vt]=g[Po]=n,g[Gt]=t,g[Dr]=o||n&&n[Dr],g[Ze]=a||n&&n[Ze],g[_s]=c||n&&n[_s]||null,g[Mn]=s,g[vs]=bU(),g[Xl]=h,g[sI]=d,g[xn]=e.type==2?n[xn]:g,g}function sj(n,e,t){let r=nr(e,n),i=ij(t),s=n[Dr].rendererFactory,o=uE(n,cE(n,i,null,gN(t),r,e,null,s.createRenderer(r,t),null,null,null));return n[e.index]=o}function gN(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function mN(n,e,t,r){if(t===0)return-1;let i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function uE(n,e){return n[Ac]?n[iI][kn]=e:n[Ac]=e,n[iI]=e,e}function oj(n=1){yN(fn(),Be(),Fo()+n,!1)}function yN(n,e,t,r){if(!r)if((e[de]&3)===3){let s=n.preOrderCheckHooks;s!==null&&Hp(e,s,t)}else{let s=n.preOrderHooks;s!==null&&qp(e,s,0,t)}ws(t)}var gg=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(gg||{});function HI(n,e,t,r){let i=ge(null);try{let[s,o,a]=n.inputs[t],c=null;(o&gg.SignalBased)!==0&&(c=e[s][ln]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,c,r,t,s):x0(e,c,s,r)}finally{ge(i)}}var Pr=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(Pr||{}),aj;function lE(n,e){return aj(n,e)}var Oc=new Set,dE=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(dE||{}),fd=new J(""),g0=new Set;function mg(n){g0.has(n)||(g0.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var _N=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=X({token:n,providedIn:"root",factory:()=>new n})}return n})();var cj=new J("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null,injector:L(Xe)})});function vN(n,e,t){let r=n.get(cj);if(Array.isArray(e))for(let i of e)r.queue.add(i),t?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),t?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(n)}function uj(n,e){for(let[t,r]of e)vN(n,r.animateFns)}function m0(n,e,t,r){let i=n?.[ed]?.enter;e!==null&&i&&i.has(t.index)&&uj(r,i)}function Pc(n,e,t,r,i,s,o,a){if(i!=null){let c,d=!1;tr(i)?c=i:Sr(i)&&(d=!0,i=i[er]);let h=On(i);n===0&&r!==null?(m0(a,r,s,t),o==null?cN(e,r,h):eg(e,r,h,o||null,!0)):n===1&&r!==null?(m0(a,r,s,t),eg(e,r,h,o||null,!0)):n===2?y0(a,s,t,g=>{jU(e,h,d,g)}):n===3&&y0(a,s,t,()=>{e.destroyNode(h)}),c!=null&&wj(e,n,t,c,s,r,o)}}function lj(n,e){IN(n,e),e[er]=null,e[Mn]=null}function dj(n,e,t,r,i,s){r[er]=i,r[Mn]=e,yg(n,r,t,1,i,s)}function IN(n,e){e[Dr].changeDetectionScheduler?.notify(9),yg(n,e,e[Ze],2,null,null)}function hj(n){let e=n[Ac];if(!e)return PI(n[oe],n);for(;e;){let t=null;if(Sr(e))t=e[Ac];else{let r=e[hn];r&&(t=r)}if(!t){for(;e&&!e[kn]&&e!==n;)Sr(e)&&PI(e[oe],e),e=e[Vt];e===null&&(e=n),Sr(e)&&PI(e[oe],e),t=e&&e[kn]}e=t}}function hE(n,e){let t=n[nd],r=t.indexOf(e);t.splice(r,1)}function EN(n,e){if(Oo(e))return;let t=e[Ze];t.destroyNode&&yg(n,e,t,3,null,null),hj(e)}function PI(n,e){if(Oo(e))return;let t=ge(null);try{e[de]&=-129,e[de]|=256,e[En]&&xl(e[En]),gj(n,e),pj(n,e),e[oe].type===1&&e[Ze].destroy();let r=e[ko];if(r!==null&&tr(e[Vt])){r!==e[Vt]&&hE(r,e);let i=e[xo];i!==null&&i.detachView(n)}BI(e)}finally{ge(t)}}function y0(n,e,t,r){let i=n?.[ed];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);n&&Oc.add(n[vs]),vN(t,()=>{if(i.leave&&i.leave.has(e.index)){let o=i.leave.get(e.index),a=[];if(o){for(let c=0;c<o.animateFns.length;c++){let d=o.animateFns[c],{promise:h}=d();a.push(h)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),fj(n,r)}else n&&Oc.delete(n[vs]),r(!1)},i)}function fj(n,e){let t=n[ed]?.running;if(t){t.then(()=>{n[ed].running=void 0,Oc.delete(n[vs]),e(!0)});return}e(!1)}function pj(n,e){let t=n.cleanup,r=e[bc];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let a=t[o+3];a>=0?r[a]():r[-a].unsubscribe(),o+=2}else{let a=r[t[o+1]];t[o].call(a)}r!==null&&(e[bc]=null);let i=e[ui];if(i!==null){e[ui]=null;for(let o=0;o<i.length;o++){let a=i[o];a()}}let s=e[Zl];if(s!==null){e[Zl]=null;for(let o of s)o.destroy()}}function gj(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Uo)){let s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];qe(Me.LifecycleHookStart,a,c);try{c.call(a)}finally{qe(Me.LifecycleHookEnd,a,c)}}else{qe(Me.LifecycleHookStart,i,s);try{s.call(i)}finally{qe(Me.LifecycleHookEnd,i,s)}}}}}function mj(n,e,t){return yj(n,e.parent,t)}function yj(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[er];if(Es(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===ir.None||i===ir.Emulated)return null}return nr(r,t)}function _j(n,e,t){return Ij(n,e,t)}function vj(n,e,t){return n.type&40?nr(n,t):null}var Ij=vj,_0;function fE(n,e,t,r){let i=mj(n,r,e),s=e[Ze],o=r.parent||e[Mn],a=_j(o,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)f0(s,i,t[c],a,!1);else f0(s,i,t,a,!1);_0!==void 0&&_0(s,r,e,t,i)}function od(n,e){if(e!==null){let t=e.type;if(t&3)return nr(e,n);if(t&4)return qI(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return od(n,r);{let i=n[e.index];return tr(i)?qI(-1,i):On(i)}}else{if(t&128)return od(n,e.next);if(t&32)return lE(e,n)()||On(n[e.index]);{let r=wN(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=fs(n[xn]);return od(i,r)}else return od(n,e.next)}}}return null}function wN(n,e){if(e!==null){let r=n[xn][Mn],i=e.projection;return r.projection[i]}return null}function qI(n,e){let t=hn+n+1;if(t<e.length){let r=e[t],i=r[oe].firstChild;if(i!==null)return od(r,i)}return e[Is]}function pE(n,e,t,r,i,s,o){for(;t!=null;){let a=r[_s];if(t.type===128){t=t.next;continue}let c=r[t.index],d=t.type;if(o&&e===0&&(c&&xc(On(c),r),t.flags|=2),!nE(t))if(d&8)pE(n,e,t.child,r,i,s,!1),Pc(e,n,a,i,c,t,s,r);else if(d&32){let h=lE(t,r),g;for(;g=h();)Pc(e,n,a,i,g,t,s,r);Pc(e,n,a,i,c,t,s,r)}else d&16?Ej(n,e,r,t,i,s):Pc(e,n,a,i,c,t,s,r);t=o?t.projectionNext:t.next}}function yg(n,e,t,r,i,s){pE(t,r,n.firstChild,e,i,s,!1)}function Ej(n,e,t,r,i,s){let o=t[xn],c=o[Mn].projection[r.projection];if(Array.isArray(c))for(let d=0;d<c.length;d++){let h=c[d];Pc(e,n,t[_s],i,h,r,s,t)}else{let d=c,h=o[Vt];Y0(r)&&(d.flags|=128),pE(n,e,d,h,i,s,!0)}}function wj(n,e,t,r,i,s,o){let a=r[Is],c=On(r);a!==c&&Pc(e,n,t,s,a,i,o);for(let d=hn;d<r.length;d++){let h=r[d];yg(h[oe],h,n,e,s,a)}}function Tj(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=r.indexOf("-")===-1?void 0:Pr.DashCase;i==null?n.removeStyle(t,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Pr.Important),n.setStyle(t,r,i,s))}}function TN(n,e,t,r,i){let s=Fo(),o=r&2;try{ws(-1),o&&e.length>Ut&&yN(n,e,Ut,!1);let a=o?Me.TemplateUpdateStart:Me.TemplateCreateStart;qe(a,i,t),t(r,i)}finally{ws(s);let a=o?Me.TemplateUpdateEnd:Me.TemplateCreateEnd;qe(a,i,t)}}function _g(n,e,t){Pj(n,e,t),(t.flags&64)===64&&kj(n,e,t)}function vg(n,e,t=nr){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?t(e,n):n[o];n[i++]=a}}}function bj(n,e,t,r){let s=r.get(nN,tN)||t===ir.ShadowDom||t===ir.ExperimentalIsolatedShadowDom,o=n.selectRootElement(e,s);return Aj(o),o}function Aj(n){Dj(n)}var Dj=()=>null;function Sj(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function Cj(n,e,t,r,i,s){let o=e[oe];if(_E(n,o,e,t,r)){Es(n)&&Nj(e,n.index);return}n.type&3&&(t=Sj(t)),Rj(n,e,t,r,i,s)}function Rj(n,e,t,r,i,s){if(n.type&3){let o=nr(n,e);r=s!=null?s(r,n.value||"",t):r,i.setProperty(o,t,r)}else n.type&12}function Nj(n,e){let t=Ln(e,n);t[de]&16||(t[de]|=64)}function Pj(n,e,t){let r=t.directiveStart,i=t.directiveEnd;Es(t)&&sj(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||Jp(t,e);let s=t.initialInputs;for(let o=r;o<i;o++){let a=n.data[o],c=Xp(e,n,o,t);if(xc(c,e),s!==null&&Lj(e,o-r,c,a,t,s),Cr(a)){let d=Ln(t.index,e);d[Gt]=Xp(e,n,o,t)}}}function kj(n,e,t){let r=t.directiveStart,i=t.directiveEnd,s=t.index,o=WR();try{ws(s);for(let a=r;a<i;a++){let c=n.data[a],d=e[a];Op(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&Mj(c,d)}}finally{ws(-1),Op(o)}}function Mj(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function gE(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let s=t[i];JU(e,s.selectors,!1)&&(r??=[],Cr(s)?r.unshift(s):r.push(s))}return r}function xj(n,e,t,r,i,s){let o=nr(n,e);Oj(e[Ze],o,s,n.value,t,r,i)}function Oj(n,e,t,r,i,s,o){if(s==null)n.removeAttribute(e,i,t);else{let a=o==null?Kl(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}function Lj(n,e,t,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;a+=2){let c=o[a],d=o[a+1];HI(r,t,c,d)}}function mE(n,e,t,r,i){let s=Ut+t,o=e[oe],a=i(o,e,n,r,t);e[s]=a,Cc(n,!0);let c=n.type===2;return c?(uN(e[Ze],a,n),(OR()===0||Dc(n))&&xc(a,e),LR()):xc(a,e),Vp()&&(!c||!nE(n))&&fE(o,e,a,n),n}function yE(n){let e=n;return mI()?BR():(e=e.parent,Cc(e,!1)),e}function Fj(n,e){let t=n[_s];if(!t)return;let r;try{r=t.get(pn,null)}catch{r=null}r?.(e)}function _E(n,e,t,r,i){let s=n.inputs?.[r],o=n.hostDirectiveInputs?.[r],a=!1;if(o)for(let c=0;c<o.length;c+=2){let d=o[c],h=o[c+1],g=e.data[d];HI(g,t[d],h,i),a=!0}if(s)for(let c of s){let d=t[c],h=e.data[c];HI(h,d,r,i),a=!0}return a}function Vj(n,e){let t=Ln(e,n),r=t[oe];Uj(r,t);let i=t[er];i!==null&&t[Xl]===null&&(t[Xl]=rN(i,t[_s])),qe(Me.ComponentStart);try{vE(r,t,t[Gt])}finally{qe(Me.ComponentEnd,t[Gt])}}function Uj(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function vE(n,e,t){Lp(e);try{let r=n.viewQuery;r!==null&&$I(1,r,t);let i=n.template;i!==null&&TN(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[xo]?.finishViewCreation(n),n.staticContentQueries&&iN(n,e),n.staticViewQueries&&$I(2,n.viewQuery,t);let s=n.components;s!==null&&jj(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[de]&=-5,Fp()}}function jj(n,e){for(let t=0;t<e.length;t++)Vj(n,e[t])}function Bj(n,e,t,r){let i=ge(null);try{let s=e.tView,a=n[de]&4096?4096:16,c=cE(n,s,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),d=n[e.index];c[ko]=d;let h=n[xo];return h!==null&&(c[xo]=h.createEmbeddedView(s)),vE(s,c,t),c}finally{ge(i)}}function v0(n,e){return!e||e.firstChild===null||Y0(n)}function cd(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let s=e[t.index];s!==null&&r.push(On(s)),tr(s)&&bN(s,r);let o=t.type;if(o&8)cd(n,e,t.child,r);else if(o&32){let a=lE(t,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=wN(e,t);if(Array.isArray(a))r.push(...a);else{let c=fs(e[xn]);cd(c[oe],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function bN(n,e){for(let t=hn;t<n.length;t++){let r=n[t],i=r[oe].firstChild;i!==null&&cd(r[oe],r,i,e)}n[Is]!==n[er]&&e.push(n[Is])}function AN(n){if(n[Rp]!==null){for(let e of n[Rp])e.impl.addSequence(e);n[Rp].length=0}}var DN=[];function $j(n){return n[En]??Hj(n)}function Hj(n){let e=DN.pop()??Object.create(zj);return e.lView=n,e}function qj(n){n.lView[En]!==n&&(n.lView=null,DN.push(n))}var zj=ve($({},Pl),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{id(n.lView)},consumerOnSignalRead(){this.lView[En]=this}});function Gj(n){let e=n[En]??Object.create(Wj);return e.lView=n,e}var Wj=ve($({},Pl),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=fs(n.lView);for(;e&&!SN(e[oe]);)e=fs(e);e&&lI(e)},consumerOnSignalRead(){this.lView[En]=this}});function SN(n){return n.type!==2}function CN(n){if(n[Zl]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[Zl])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[de]&8192)}}var Kj=100;function RN(n,e=0){let r=n[Dr].rendererFactory,i=!1;i||r.begin?.();try{Qj(n,e)}finally{i||r.end?.()}}function Qj(n,e){let t=yI();try{_I(!0),zI(n,e);let r=0;for(;rd(n);){if(r===Kj)throw new Y(103,!1);r++,zI(n,1)}}finally{_I(t)}}function Yj(n,e,t,r){if(Oo(e))return;let i=e[de],s=!1,o=!1;Lp(e);let a=!0,c=null,d=null;s||(SN(n)?(d=$j(e),c=Ml(d)):Ff()===null?(a=!1,d=Gj(e),c=Ml(d)):e[En]&&(xl(e[En]),e[En]=null));try{uI(e),HR(n.bindingStartIndex),t!==null&&TN(n,e,t,2,r);let h=(i&3)===3;if(!s)if(h){let D=n.preOrderCheckHooks;D!==null&&Hp(e,D,null)}else{let D=n.preOrderHooks;D!==null&&qp(e,D,0,null),RI(e,0)}if(o||Jj(e),CN(e),NN(e,0),n.contentQueries!==null&&iN(n,e),!s)if(h){let D=n.contentCheckHooks;D!==null&&Hp(e,D)}else{let D=n.contentHooks;D!==null&&qp(e,D,1),RI(e,1)}Zj(n,e);let g=n.components;g!==null&&kN(e,g,0);let E=n.viewQuery;if(E!==null&&$I(2,E,r),!s)if(h){let D=n.viewCheckHooks;D!==null&&Hp(e,D)}else{let D=n.viewHooks;D!==null&&qp(e,D,2),RI(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Cp]){for(let D of e[Cp])D();e[Cp]=null}s||(AN(e),e[de]&=-73)}catch(h){throw s||id(e),h}finally{d!==null&&(Vf(d,c),a&&qj(d)),Fp()}}function NN(n,e){for(let t=X0(n);t!==null;t=Z0(t))for(let r=hn;r<t.length;r++){let i=t[r];PN(i,e)}}function Jj(n){for(let e=X0(n);e!==null;e=Z0(e)){if(!(e[de]&2))continue;let t=e[nd];for(let r=0;r<t.length;r++){let i=t[r];lI(i)}}}function Xj(n,e,t){qe(Me.ComponentStart);let r=Ln(e,n);try{PN(r,t)}finally{qe(Me.ComponentEnd,r[Gt])}}function PN(n,e){Pp(n)&&zI(n,e)}function zI(n,e){let r=n[oe],i=n[de],s=n[En],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&Uf(s)),o||=!1,s&&(s.dirty=!1),n[de]&=-9217,o)Yj(r,n,r.template,n[Gt]);else if(i&8192){let a=ge(null);try{CN(n),NN(n,1);let c=r.components;c!==null&&kN(n,c,1),AN(n)}finally{ge(a)}}}function kN(n,e,t){for(let r=0;r<e.length;r++)Xj(n,e[r],t)}function Zj(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)ws(~i);else{let s=i,o=t[++r],a=t[++r];GR(o,s);let c=e[s];qe(Me.HostBindingsUpdateStart,c);try{a(2,c)}finally{qe(Me.HostBindingsUpdateEnd,c)}}}}finally{ws(-1)}}function IE(n,e){let t=yI()?64:1088;for(n[Dr].changeDetectionScheduler?.notify(e);n;){n[de]|=t;let r=fs(n);if(Sc(n)&&!r)return n;n=r}return null}function MN(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function eB(n,e,t,r=!0){let i=e[oe];if(tB(i,e,n,t),r){let o=qI(t,n),a=e[Ze],c=a.parentNode(n[Is]);c!==null&&dj(i,n[Mn],a,e,c,o)}let s=e[Xl];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function GI(n,e){if(n.length<=hn)return;let t=hn+e,r=n[t];if(r){let i=r[ko];i!==null&&i!==n&&hE(i,r),e>0&&(n[t-1][kn]=r[kn]);let s=Ql(n,hn+e);lj(r[oe],r);let o=s[xo];o!==null&&o.detachView(s[oe]),r[Vt]=null,r[kn]=null,r[de]&=-129}return r}function tB(n,e,t,r){let i=hn+r,s=t.length;r>0&&(t[i-1][kn]=e),r<s-hn?(e[kn]=t[i],Xv(t,hn+r,e)):(t.push(e),e[kn]=null),e[Vt]=t;let o=e[ko];o!==null&&t!==o&&xN(o,e);let a=e[xo];a!==null&&a.insertView(n),kp(e),e[de]|=128}function xN(n,e){let t=n[nd],r=e[Vt];if(Sr(r))n[de]|=2;else{let i=r[Vt][xn];e[xn]!==i&&(n[de]|=2)}t===null?n[nd]=[e]:t.push(e)}var As=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[oe];return cd(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[Gt]}set context(e){this._lView[Gt]=e}get destroyed(){return Oo(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Vt];if(tr(e)){let t=e[td],r=t?t.indexOf(this):-1;r>-1&&(GI(e,r),Ql(t,r))}this._attachedToViewContainer=!1}EN(this._lView[oe],this._lView)}onDestroy(e){dI(this._lView,e)}markForCheck(){IE(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[de]&=-129}reattach(){kp(this._lView),this._lView[de]|=128}detectChanges(){this._lView[de]|=1024,RN(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Y(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Sc(this._lView),t=this._lView[ko];t!==null&&!e&&hE(t,this._lView),IN(this._lView[oe],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Y(902,!1);this._appRef=e;let t=Sc(this._lView),r=this._lView[ko];r!==null&&!t&&xN(r,this._lView),kp(this._lView)}};var pd=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=nB;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let s=Bj(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new As(s)}}return n})();function nB(){return rB(Wt(),Be())}function rB(n,e){return n.type&4?new pd(e,n,ug(n,e)):null}function Ig(n,e,t,r,i){let s=n.data[e];if(s===null)s=iB(n,e,t,r,i),zR()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=r,s.attrs=i;let o=jR();s.injectorIndex=o===null?-1:o.injectorIndex}return Cc(s,!0),s}function iB(n,e,t,r,i){let s=gI(),o=mI(),a=o?s:s&&s.parent,c=n.data[e]=oB(n,a,t,e,r,i);return sB(n,c,s,o),c}function sB(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function oB(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return FR()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,fieldIndex:-1,customControlIndex:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var aB=()=>null;function I0(n,e){return aB(n,e)}var ON=class{},Eg=class{},WI=class{resolveComponentFactory(e){throw new Y(917,!1)}},gd=class{static NULL=new WI},jo=class{},wg=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>cB()}return n})();function cB(){let n=Be(),e=Wt(),t=Ln(e.index,n);return(Sr(t)?t:n)[Ze]}var LN=(()=>{class n{static \u0275prov=X({token:n,providedIn:"root",factory:()=>null})}return n})();var zp={},KI=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,zp,r);return i!==zp||t===zp?i:this.parentInjector.get(e,t,r)}};function tg(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=jv(i,a);else if(s==2){let c=a,d=e[++o];r=jv(r,c+": "+d+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function St(n,e=0){let t=Be();if(t===null)return me(n,e);let r=Wt();return W0(r,t,Ft(n),e)}function FN(n,e,t,r,i){let s=r===null?null:{"":-1},o=i(n,t);if(o!==null){let a=o,c=null,d=null;for(let h of o)if(h.resolveHostDirectives!==null){[a,c,d]=h.resolveHostDirectives(o);break}dB(n,e,t,a,s,c,d)}s!==null&&r!==null&&uB(t,r,s)}function uB(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let s=t[e[i+1]];if(s==null)throw new Y(-301,!1);r.push(e[i],s)}}function lB(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function dB(n,e,t,r,i,s,o){let a=r.length,c=null;for(let E=0;E<a;E++){let D=r[E];c===null&&Cr(D)&&(c=D,lB(n,t,E)),UI(Jp(t,e),n,D.type)}yB(t,n.data.length,a),c?.viewProvidersResolver&&c.viewProvidersResolver(c);for(let E=0;E<a;E++){let D=r[E];D.providersResolver&&D.providersResolver(D)}let d=!1,h=!1,g=mN(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let E=0;E<a;E++){let D=r[E];if(t.mergedAttrs=Mc(t.mergedAttrs,D.hostAttrs),fB(n,t,e,g,D),mB(g,D,i),o!==null&&o.has(D)){let[M,k]=o.get(D);t.directiveToIndex.set(D.type,[g,M+t.directiveStart,k+t.directiveStart])}else(s===null||!s.has(D))&&t.directiveToIndex.set(D.type,g);D.contentQueries!==null&&(t.flags|=4),(D.hostBindings!==null||D.hostAttrs!==null||D.hostVars!==0)&&(t.flags|=64);let R=D.type.prototype;!d&&(R.ngOnChanges||R.ngOnInit||R.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),d=!0),!h&&(R.ngOnChanges||R.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),h=!0),g++}hB(n,t,s)}function hB(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))E0(0,e,i,r),E0(1,e,i,r),T0(e,r,!1);else{let s=t.get(i);w0(0,e,s,r),w0(1,e,s,r),T0(e,r,!0)}}}function E0(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let s in i)if(i.hasOwnProperty(s)){let o;n===0?o=e.inputs??={}:o=e.outputs??={},o[s]??=[],o[s].push(r),VN(e,s)}}function w0(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let s in i)if(i.hasOwnProperty(s)){let o=i[s],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[o]??=[],a[o].push(r,s),VN(e,o)}}function VN(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function T0(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:s}=n;if(r===null||!t&&i===null||t&&s===null||oE(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let o=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!t&&i.hasOwnProperty(c)){let d=i[c];for(let h of d)if(h===e){o??=[],o.push(c,r[a+1]);break}}else if(t&&s.hasOwnProperty(c)){let d=s[c];for(let h=0;h<d.length;h+=2)if(d[h]===e){o??=[],o.push(d[h+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(o)}function fB(n,e,t,r,i){n.data[r]=i;let s=i.factory||(i.factory=hs(i.type,!0)),o=new Uo(s,Cr(i),St,null);n.blueprint[r]=o,t[r]=o,pB(n,e,r,mN(n,t,i.hostVars,hi),i)}function pB(n,e,t,r,i){let s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let a=~e.index;gB(o)!=a&&o.push(a),o.push(t,r,s)}}function gB(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function mB(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Cr(e)&&(t[""]=n)}}function yB(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function EE(n,e,t,r,i,s,o,a){let c=e[oe],d=c.consts,h=Lo(d,o),g=Ig(c,n,t,r,h);return s&&FN(c,e,g,Lo(d,a),i),g.mergedAttrs=Mc(g.mergedAttrs,g.attrs),g.attrs!==null&&tg(g,g.attrs,!1),g.mergedAttrs!==null&&tg(g,g.mergedAttrs,!0),c.queries!==null&&c.queries.elementStart(c,g),g}function wE(n,e){V0(n,e),oI(e)&&n.queries.elementEnd(e)}function _B(n,e,t,r,i,s){let o=e.consts,a=Lo(o,i),c=Ig(e,n,t,r,a);if(c.mergedAttrs=Mc(c.mergedAttrs,c.attrs),s!=null){let d=Lo(o,s);c.localNames=[];for(let h=0;h<d.length;h+=2)c.localNames.push(d[h],-1)}return c.attrs!==null&&tg(c,c.attrs,!1),c.mergedAttrs!==null&&tg(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function TE(n){return jN(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function UN(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function jN(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function vB(n,e,t){return n[e]=t}function md(n,e,t){if(t===hi)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function Gp(n,e,t){return function r(i){let s=Es(n)?Ln(n.index,e):e;IE(s,5);let o=e[Gt],a=b0(e,o,t,i),c=r.__ngNextListenerFn__;for(;c;)a=b0(e,o,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function b0(n,e,t,r){let i=ge(null);try{return qe(Me.OutputStart,e,t),t(r)!==!1}catch(s){return Fj(n,s),!1}finally{qe(Me.OutputEnd,e,t),ge(i)}}function BN(n,e,t,r,i,s,o,a){let c=Dc(n),d=!1,h=null;if(!r&&c&&(h=EB(e,t,s,n.index)),h!==null){let g=h.__ngLastListenerFn__||h;g.__ngNextListenerFn__=o,h.__ngLastListenerFn__=o,d=!0}else{let g=nr(n,t),E=r?r(g):g;RU(t,E,s,a);let D=i.listen(E,s,a);if(!IB(s)){let R=r?M=>r(On(M[n.index])):n.index;$N(R,e,t,s,a,D,!1)}}return d}function IB(n){return n.startsWith("animation")||n.startsWith("transition")}function EB(n,e,t,r){let i=n.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===t&&i[s+1]===r){let a=e[bc],c=i[s+2];return a&&a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function $N(n,e,t,r,i,s,o){let a=e.firstCreatePass?xR(e):null,c=MR(t),d=c.length;c.push(i,s),a&&a.push(r,n,d,(d+1)*(o?-1:1))}function A0(n,e,t,r,i,s){let o=e[t],a=e[oe],d=a.data[t].outputs[r],g=o[d].subscribe(s);$N(n.index,a,e,i,s,g,!0)}var QI=Symbol("BINDING");var ng=class extends gd{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=gs(e);return new Lc(t,this.ngModule)}};function wB(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],s={propName:t,templateName:e,isSignal:(r&gg.SignalBased)!==0};return i&&(s.transform=i),s})}function TB(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function bB(n,e,t){let r=e instanceof Xe?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new KI(t,r):t}function AB(n){let e=n.get(jo,null);if(e===null)throw new Y(407,!1);let t=n.get(LN,null),r=n.get(ps,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function DB(n,e){let t=HN(n);return aN(e,t,t==="svg"?SR:t==="math"?CR:null)}function HN(n){return(n.selectors[0][0]||"div").toLowerCase()}var Lc=class extends Eg{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=wB(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=TB(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=tj(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,s,o){qe(Me.DynamicComponentStart);let a=ge(null);try{let c=this.componentDef,d=SB(r,c,o,s),h=bB(c,i||this.ngModule,e),g=AB(h),E=g.rendererFactory.createRenderer(null,c),D=r?bj(E,r,c.encapsulation,h):DB(c,E),R=o?.some(D0)||s?.some(V=>typeof V!="function"&&V.bindings.some(D0)),M=cE(null,d,null,512|gN(c),null,null,g,E,h,null,rN(D,h,!0));M[Ut]=D,Lp(M);let k=null;try{let V=EE(Ut,M,2,"#host",()=>d.directiveRegistry,!0,0);uN(E,D,V),xc(D,M),_g(d,M,V),rE(d,V,M),wE(d,V),t!==void 0&&RB(V,this.ngContentSelectors,t),k=Ln(V.index,M),M[Gt]=k[Gt],vE(d,M,null)}catch(V){throw k!==null&&BI(k),BI(M),V}finally{qe(Me.DynamicComponentEnd),Fp()}return new rg(this.componentType,M,!!R)}finally{ge(a)}}};function SB(n,e,t,r){let i=n?["ng-version","21.1.0"]:nj(e.selectors[0]),s=null,o=null,a=0;if(t)for(let h of t)a+=h[QI].requiredVars,h.create&&(h.targetIdx=0,(s??=[]).push(h)),h.update&&(h.targetIdx=0,(o??=[]).push(h));if(r)for(let h=0;h<r.length;h++){let g=r[h];if(typeof g!="function")for(let E of g.bindings){a+=E[QI].requiredVars;let D=h+1;E.create&&(E.targetIdx=D,(s??=[]).push(E)),E.update&&(E.targetIdx=D,(o??=[]).push(E))}}let c=[e];if(r)for(let h of r){let g=typeof h=="function"?h:h.type,E=Qv(g);c.push(E)}return aE(0,null,CB(s,o),1,a,c,null,null,null,[i],null)}function CB(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function D0(n){let e=n[QI].kind;return e==="input"||e==="twoWay"}var rg=class extends ON{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=Np(t[oe],Ut),this.location=ug(this._tNode,t),this.instance=Ln(this._tNode.index,t)[Gt],this.hostView=this.changeDetectorRef=new As(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,s=_E(r,i[oe],i,e,t);this.previousInputValues.set(e,t);let o=Ln(r.index,i);IE(o,1)}get injector(){return new Vo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function RB(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let s=t[i];r.push(s!=null&&s.length?Array.from(s):null)}}var qo=(()=>{class n{static __NG_ELEMENT_ID__=NB}return n})();function NB(){let n=Wt();return kB(n,Be())}var PB=qo,qN=class extends PB{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return ug(this._hostTNode,this._hostLView)}get injector(){return new Vo(this._hostTNode,this._hostLView)}get parentInjector(){let e=ZI(this._hostTNode,this._hostLView);if(B0(e)){let t=Qp(e,this._hostLView),r=Kp(e),i=t[oe].data[r+8];return new Vo(i,t)}else return new Vo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=S0(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-hn}createEmbeddedView(e,t,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=I0(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,i,v0(this._hostTNode,o)),a}createComponent(e,t,r,i,s,o,a){let c=e&&!nU(e),d;if(c)d=t;else{let k=t||{};d=k.index,r=k.injector,i=k.projectableNodes,s=k.environmentInjector||k.ngModuleRef,o=k.directives,a=k.bindings}let h=c?e:new Lc(gs(e)),g=r||this.parentInjector;if(!s&&h.ngModule==null){let V=(c?g:this.parentInjector).get(Xe,null);V&&(s=V)}let E=gs(h.componentType??{}),D=I0(this._lContainer,E?.id??null),R=D?.firstChild??null,M=h.create(g,i,R,s,o,a);return this.insertImpl(M.hostView,d,v0(this._hostTNode,D)),M}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(NR(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[Vt],d=new qN(c,c[Mn],c[Vt]);d.detach(d.indexOf(e))}}let s=this._adjustIndex(t),o=this._lContainer;return eB(o,i,s,r),e.attachToViewContainerRef(),Xv(kI(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=S0(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=GI(this._lContainer,t);r&&(Ql(kI(this._lContainer),t),EN(r[oe],r))}detach(e){let t=this._adjustIndex(e,-1),r=GI(this._lContainer,t);return r&&Ql(kI(this._lContainer),t)!=null?new As(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function S0(n){return n[td]}function kI(n){return n[td]||(n[td]=[])}function kB(n,e){let t,r=e[n.index];return tr(r)?t=r:(t=MN(r,e,null,n),e[n.index]=t,uE(e,t)),xB(t,e,n,r),new qN(t,n,e)}function MB(n,e){let t=n[Ze],r=t.createComment(""),i=nr(e,n),s=t.parentNode(i);return eg(t,s,r,t.nextSibling(i),!1),r}var xB=FB,OB=()=>!1;function LB(n,e,t){return OB(n,e,t)}function FB(n,e,t,r){if(n[Is])return;let i;t.type&8?i=On(r):i=MB(e,t),n[Is]=i}var Bo=class{},Tg=class{};var ig=class extends Bo{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new ng(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let s=Kv(e);this._bootstrapComponents=fN(s.bootstrap),this._r3Injector=TI(e,t,[{provide:Bo,useValue:this},{provide:gd,useValue:this.componentFactoryResolver},...r],li(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},sg=class extends Tg{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new ig(this.moduleType,e,[])}};var ud=class extends Bo{injector;componentFactoryResolver=new ng(this);instance=null;constructor(e){super();let t=new Co([...e.providers,{provide:Bo,useValue:this},{provide:gd,useValue:this.componentFactoryResolver}],e.parent||Jl(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function yd(n,e,t=null){return new ud({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var VB=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=tI(!1,t.type),i=r.length>0?yd([r],this._injector,""):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=X({token:n,providedIn:"environment",factory:()=>new n(me(Xe))})}return n})();function bE(n){return Vc(()=>{let e=zN(n),t=ve($({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===eE.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(VB).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||ir.Emulated,styles:n.styles||In,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&mg("NgStandalone"),GN(t);let r=n.dependencies;return t.directiveDefs=C0(r,UB),t.pipeDefs=C0(r,fR),t.id=$B(t),t})}function UB(n){return gs(n)||Qv(n)}function jc(n){return Vc(()=>({type:n.type,bootstrap:n.bootstrap||In,declarations:n.declarations||In,imports:n.imports||In,exports:n.exports||In,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function jB(n,e){if(n==null)return ms;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],s,o,a,c;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s,c=i[3]||null):(s=i,o=i,a=gg.None,c=null),t[s]=[r,a,c],e[s]=o}return t}function BB(n){if(n==null)return ms;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function Ds(n){return Vc(()=>{let e=zN(n);return GN(e),e})}function AE(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function zN(n){let e={};return{type:n.type,providersResolver:null,viewProvidersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||ms,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||In,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:jB(n.inputs,e),outputs:BB(n.outputs),debugInfo:null}}function GN(n){n.features?.forEach(e=>e(n))}function C0(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let i of t){let s=e(i);s!==null&&r.push(s)}return r}:null}function $B(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let s of r.join("|"))e=Math.imul(31,e)+s.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function HB(n){return Object.getPrototypeOf(n.prototype).constructor}function WN(n){let e=HB(n.type),t=!0,r=[n];for(;e;){let i;if(Cr(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Y(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let o=n;o.inputs=MI(n.inputs),o.declaredInputs=MI(n.declaredInputs),o.outputs=MI(n.outputs);let a=i.hostBindings;a&&KB(n,a);let c=i.viewQuery,d=i.contentQueries;if(c&&GB(n,c),d&&WB(n,d),qB(n,i),hR(n.outputs,i.outputs),Cr(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(n),a===WN&&(t=!1)}}e=Object.getPrototypeOf(e)}zB(r)}function qB(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function zB(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Mc(i.hostAttrs,t=Mc(t,i.hostAttrs))}}function MI(n){return n===ms?{}:n===In?[]:n}function GB(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function WB(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,s)=>{e(r,i,s),t(r,i,s)}:n.contentQueries=e}function KB(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function QB(n,e,t,r,i,s,o,a){if(t.firstCreatePass){n.mergedAttrs=Mc(n.mergedAttrs,n.attrs);let h=n.tView=aE(2,n,i,s,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),h.queries=t.queries.embeddedTView(n))}a&&(n.flags|=a),Cc(n,!1);let c=JB(t,e,n,r);Vp()&&fE(t,e,c,n),xc(c,e);let d=MN(c,e,c,n);e[r+Ut]=d,uE(e,d),LB(d,n,e)}function YB(n,e,t,r,i,s,o,a,c,d,h){let g=t+Ut,E;return e.firstCreatePass?(E=Ig(e,g,4,o||null,a||null),Mp()&&FN(e,n,E,Lo(e.consts,d),gE),V0(e,E)):E=e.data[g],QB(E,n,e,t,r,i,s,c),Dc(E)&&_g(e,n,E),d!=null&&vg(n,E,h),E}function KN(n,e,t,r,i,s,o,a){let c=Be(),d=fn(),h=Lo(d.consts,s);return YB(c,d,n,e,t,r,i,h,void 0,o,a),KN}var JB=XB;function XB(n,e,t,r){return sd(!0),e[Ze].createComment("")}var DE=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var SE=new J("");function zo(n){return!!n&&typeof n.then=="function"}function bg(n){return!!n&&typeof n.subscribe=="function"}var QN=new J("");var CE=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=L(QN,{optional:!0})??[];injector=L(At);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let s=ut(this.injector,i);if(zo(s))t.push(s);else if(bg(s)){let o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});t.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ag=new J("");function YN(){av(()=>{let n="";throw new Y(600,n)})}function JN(n){return n.isBoundToModule}var ZB=10;var Go=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=L(pn);afterRenderManager=L(_N);zonelessEnabled=L(Rc);rootEffectScheduler=L(CI);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new xt;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=L(Rr);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(Ke(t=>!t))}constructor(){L(fd,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=L(Xe);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=At.NULL){return this._injector.get(Ue).run(()=>{qe(Me.BootstrapComponentStart);let o=t instanceof Eg;if(!this._injector.get(CE).done){let R="";throw new Y(405,R)}let c;o?c=t:c=this._injector.get(gd).resolveComponentFactory(t),this.componentTypes.push(c.componentType);let d=JN(c)?void 0:this._injector.get(Bo),h=r||c.selector,g=c.create(i,[],h,d),E=g.location.nativeElement,D=g.injector.get(SE,null);return D?.registerApplication(E),g.onDestroy(()=>{this.detachView(g.hostView),ad(this.components,g),D?.unregisterApplication(E)}),this._loadComponent(g),qe(Me.BootstrapComponentEnd,g),g})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){qe(Me.ChangeDetectionStart),this.tracingSnapshot!==null?this.tracingSnapshot.run(dE.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw qe(Me.ChangeDetectionEnd),new Y(101,!1);let t=ge(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,ge(t),this.afterTick.next(),qe(Me.ChangeDetectionEnd)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(jo,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<ZB;){qe(Me.ChangeDetectionSyncStart);try{this.synchronizeOnce()}finally{qe(Me.ChangeDetectionSyncEnd)}}}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!rd(i))continue;let s=r&&!this.zonelessEnabled?0:1;RN(i,s),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>rd(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;ad(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(Ag,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>ad(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new Y(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ad(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Dg(n,e,t,r){let i=Be(),s=xp();if(md(i,s,e)){let o=fn(),a=wI();xj(a,i,n,e,t,r)}return Dg}var Nne=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";function XN(n,e,t){let r=Be(),i=xp();if(md(r,i,e)){let s=fn(),o=wI();Cj(o,r,n,e,r[Ze],t)}return XN}function R0(n,e,t,r,i){_E(e,n,t,i?"class":"style",r)}function RE(n,e,t,r){let i=Be(),s=i[oe],o=n+Ut,a=s.firstCreatePass?EE(o,i,2,e,gE,Mp(),t,r):s.data[o];if(mE(a,i,n,e,eP),Dc(a)){let c=i[oe];_g(c,i,a),rE(c,a,i)}return r!=null&&vg(i,a),RE}function NE(){let n=fn(),e=Wt(),t=yE(e);return n.firstCreatePass&&wE(n,t),fI(t)&&pI(),hI(),t.classesWithoutHost!=null&&cU(t)&&R0(n,t,Be(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&uU(t)&&R0(n,t,Be(),t.stylesWithoutHost,!1),NE}function Sg(n,e,t,r){return RE(n,e,t,r),NE(),Sg}function PE(n,e,t,r){let i=Be(),s=i[oe],o=n+Ut,a=s.firstCreatePass?_B(o,s,2,e,t,r):s.data[o];return mE(a,i,n,e,eP),r!=null&&vg(i,a),PE}function kE(){let n=Wt(),e=yE(n);return fI(e)&&pI(),hI(),kE}function ZN(n,e,t,r){return PE(n,e,t,r),kE(),ZN}var eP=(n,e,t,r,i)=>(sd(!0),aN(e[Ze],r,ZR()));function tP(n,e,t){let r=Be(),i=r[oe],s=n+Ut,o=i.firstCreatePass?EE(s,r,8,"ng-container",gE,Mp(),e,t):i.data[s];if(mE(o,r,n,"ng-container",e$),Dc(o)){let a=r[oe];_g(a,r,o),rE(a,o,r)}return t!=null&&vg(r,o),tP}function nP(){let n=fn(),e=Wt(),t=yE(e);return n.firstCreatePass&&wE(n,t),nP}var e$=(n,e,t,r,i)=>(sd(!0),UU(e[Ze],""));function t$(){return Be()}var _d="en-US";var n$=_d;function rP(n){typeof n=="string"&&(n$=n.toLowerCase().replace(/_/g,"-"))}function Cg(n,e,t){let r=Be(),i=fn(),s=Wt();return r$(i,r,r[Ze],s,n,e,t),Cg}function iP(n,e,t){let r=Be(),i=fn(),s=Wt();return(s.type&3||t)&&BN(s,i,r,t,r[Ze],n,e,Gp(s,r,e)),iP}function r$(n,e,t,r,i,s,o){let a=!0,c=null;if((r.type&3||o)&&(c??=Gp(r,e,s),BN(r,n,e,o,t,i,s,c)&&(a=!1)),a){let d=r.outputs?.[i],h=r.hostDirectiveOutputs?.[i];if(h&&h.length)for(let g=0;g<h.length;g+=2){let E=h[g],D=h[g+1];c??=Gp(r,e,s),A0(r,e,E,D,i,c)}if(d&&d.length)for(let g of d)c??=Gp(r,e,s),A0(r,e,g,i,i,c)}}function i$(n=1){return XR(n)}function $p(n,e){return n<<17|e<<2}function $o(n){return n>>17&32767}function s$(n){return(n&2)==2}function o$(n,e){return n&131071|e<<17}function YI(n){return n|2}function Fc(n){return(n&131068)>>2}function xI(n,e){return n&-131069|e<<2}function a$(n){return(n&1)===1}function JI(n){return n|1}function c$(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=$o(o),c=Fc(o);n[r]=t;let d=!1,h;if(Array.isArray(t)){let g=t;h=g[1],(h===null||Tc(g,h)>0)&&(d=!0)}else h=t;if(i)if(c!==0){let E=$o(n[a+1]);n[r+1]=$p(E,a),E!==0&&(n[E+1]=xI(n[E+1],r)),n[a+1]=o$(n[a+1],r)}else n[r+1]=$p(a,0),a!==0&&(n[a+1]=xI(n[a+1],r)),a=r;else n[r+1]=$p(c,0),a===0?a=r:n[c+1]=xI(n[c+1],r),c=r;d&&(n[r+1]=YI(n[r+1])),N0(n,h,r,!0),N0(n,h,r,!1),u$(e,h,n,r,s),o=$p(a,c),s?e.classBindings=o:e.styleBindings=o}function u$(n,e,t,r,i){let s=i?n.residualClasses:n.residualStyles;s!=null&&typeof e=="string"&&Tc(s,e)>=0&&(t[r+1]=JI(t[r+1]))}function N0(n,e,t,r){let i=n[t+1],s=e===null,o=r?$o(i):Fc(i),a=!1;for(;o!==0&&(a===!1||s);){let c=n[o],d=n[o+1];l$(c,e)&&(a=!0,n[o+1]=r?JI(d):YI(d)),o=r?$o(d):Fc(d)}a&&(n[t+1]=r?YI(i):JI(i))}function l$(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Tc(n,e)>=0:!1}function sP(n,e){return d$(n,e,null,!0),sP}function d$(n,e,t,r){let i=Be(),s=fn(),o=qR(2);if(s.firstUpdatePass&&f$(s,n,o,r),e!==hi&&md(i,o,e)){let a=s.data[Fo()];_$(s,a,i,i[Ze],n,i[o+1]=v$(e,t),r,o)}}function h$(n,e){return e>=n.expandoStartIndex}function f$(n,e,t,r){let i=n.data;if(i[t+1]===null){let s=i[Fo()],o=h$(n,t);I$(s,r)&&e===null&&!o&&(e=!1),e=p$(i,s,e,r),c$(i,s,e,t,o,r)}}function p$(n,e,t,r){let i=KR(n),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=OI(null,n,e,t,r),t=ld(t,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||n[o]!==i)if(t=OI(i,n,e,t,r),s===null){let c=g$(n,e,r);c!==void 0&&Array.isArray(c)&&(c=OI(null,n,e,c[1],r),c=ld(c,e.attrs,r),m$(n,e,r,c))}else s=y$(n,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),t}function g$(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Fc(r)!==0)return n[$o(r)]}function m$(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[$o(i)]=r}function y$(n,e,t){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=n[s].hostAttrs;r=ld(r,o,t)}return ld(r,e.attrs,t)}function OI(n,e,t,r,i){let s=null,o=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<o&&(s=e[a],r=ld(r,s.hostAttrs,i),s!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function ld(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),IR(n,o,t?!0:e[++s]))}return n===void 0?null:n}function _$(n,e,t,r,i,s,o,a){if(!(e.type&3))return;let c=n.data,d=c[a+1],h=a$(d)?P0(c,e,t,i,Fc(d),o):void 0;if(!og(h)){og(s)||s$(d)&&(s=P0(c,null,t,i,a,o));let g=aI(Fo(),t);Tj(r,o,g,i,s)}}function P0(n,e,t,r,i,s){let o=e===null,a;for(;i>0;){let c=n[i],d=Array.isArray(c),h=d?c[1]:c,g=h===null,E=t[i+1];E===hi&&(E=g?In:void 0);let D=g?Sp(E,r):h===r?E:void 0;if(d&&!og(D)&&(D=Sp(c,r)),og(D)&&(a=D,o))return a;let R=n[i+1];i=o?$o(R):Fc(R)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=Sp(c,r))}return a}function og(n){return n!==void 0}function v$(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=li(fg(n)))),n}function I$(n,e){return(n.flags&(e?8:16))!==0}function E$(n,e=""){let t=Be(),r=fn(),i=n+Ut,s=r.firstCreatePass?Ig(r,i,1,e,null):r.data[i],o=w$(r,t,s,e,n);t[i]=o,Vp()&&fE(r,t,o,s),Cc(s,!1)}var w$=(n,e,t,r,i)=>(sd(!0),FU(e[Ze],r));function T$(n,e,t,r=""){return md(n,xp(),t)?e+Kl(t)+r:hi}function oP(n){return ME("",n),oP}function ME(n,e,t){let r=Be(),i=T$(r,n,e,t);return i!==hi&&b$(r,Fo(),i),ME}function b$(n,e,t){let r=aI(e,n);VU(n[Ze],r,t)}function k0(n,e,t){let r=fn();r.firstCreatePass&&aP(e,r.data,r.blueprint,Cr(n),t)}function aP(n,e,t,r,i){if(n=Ft(n),Array.isArray(n))for(let s=0;s<n.length;s++)aP(n[s],e,t,r,i);else{let s=fn(),o=Be(),a=Wt(),c=So(n)?n:Ft(n.provide),d=rI(n),h=a.providerIndexes&1048575,g=a.directiveStart,E=a.providerIndexes>>20;if(So(n)||!n.multi){let D=new Uo(d,i,St,null),R=FI(c,e,i?h:h+E,g);R===-1?(UI(Jp(a,o),s,c),LI(s,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(D),o.push(D)):(t[R]=D,o[R]=D)}else{let D=FI(c,e,h+E,g),R=FI(c,e,h,h+E),M=D>=0&&t[D],k=R>=0&&t[R];if(i&&!k||!i&&!M){UI(Jp(a,o),s,c);let V=S$(i?D$:A$,t.length,i,r,d,n);!i&&k&&(t[R].providerFactory=V),LI(s,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(V),o.push(V)}else{let V=cP(t[i?R:D],d,!i&&r);LI(s,n,D>-1?D:R,V)}!i&&r&&k&&t[R].componentProviders++}}}function LI(n,e,t,r){let i=So(e),s=bR(e);if(i||s){let c=(s?Ft(e.useClass):e).prototype.ngOnDestroy;if(c){let d=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=d.indexOf(t);h===-1?d.push(t,[r,c]):d[h+1].push(r,c)}else d.push(t,c)}}}function cP(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function FI(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function A$(n,e,t,r,i){return XI(this.multi,[])}function D$(n,e,t,r,i){let s=this.multi,o;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=Xp(r,r[oe],this.providerFactory.index,i);o=c.slice(0,a),XI(s,o);for(let d=a;d<c.length;d++)o.push(c[d])}else o=[],XI(s,o);return o}function XI(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function S$(n,e,t,r,i,s){let o=new Uo(n,t,St,null);return o.multi=[],o.index=e,o.componentProviders=0,cP(o,i,r&&!t),o}function C$(n,e){return t=>{t.providersResolver=(r,i)=>k0(r,i?i(n):n,!1),e&&(t.viewProvidersResolver=(r,i)=>k0(r,i?i(e):e,!0))}}function R$(n,e){let t=n[e];return t===hi?void 0:t}function N$(n,e,t,r,i,s){let o=e+t;return md(n,o,i)?vB(n,o+1,s?r.call(s,i):r(i)):R$(n,o+1)}function P$(n,e){let t=fn(),r,i=n+Ut;t.firstCreatePass?(r=k$(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let s=r.factory||(r.factory=hs(r.type,!0)),o,a=nn(St);try{let c=Yp(!1),d=s();return Yp(c),cI(t,Be(),i,d),d}finally{nn(a)}}function k$(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function M$(n,e,t){let r=n+Ut,i=Be(),s=RR(i,r);return x$(i,r)?N$(i,$R(),e,s.transform,t,s):s.transform(t)}function x$(n,e){return n[oe].data[e].pure}var ag=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},xE=(()=>{class n{compileModuleSync(t){return new sg(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=Kv(t),s=fN(i.declarations).reduce((o,a)=>{let c=gs(a);return c&&o.push(new Lc(c)),o},[]);return new ag(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var uP=(()=>{class n{applicationErrorHandler=L(pn);appRef=L(Go);taskService=L(Rr);ngZone=L(Ue);zonelessEnabled=L(Rc);tracing=L(fd,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new rt;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(ql):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(L(Up,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{let t=this.taskService.add();if(!this.runningTick&&(this.cleanup(),!this.zonelessEnabled||this.appRef.includeAllTestViews)){this.taskService.remove(t);return}this.switchToMicrotaskScheduler(),this.taskService.remove(t)})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}switchToMicrotaskScheduler(){this.ngZone.runOutsideAngular(()=>{let t=this.taskService.add();this.useMicrotaskScheduler=!0,queueMicrotask(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})})}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?n0:AI;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(ql+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.applicationErrorHandler(r)}finally{this.taskService.remove(t),this.cleanup()}}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function lP(){return[{provide:ps,useExisting:uP},{provide:Ue,useClass:zl},{provide:Rc,useValue:!0}]}function O$(){return typeof $localize<"u"&&$localize.locale||_d}var Rg=new J("",{factory:()=>L(Rg,{optional:!0,skipSelf:!0})||O$()});function dP(n,e){return jf(n,e?.equal)}var mP=Symbol("InputSignalNode#UNSET"),n4=ve($({},Bf),{transformFn:void 0,applyValueToInputSignal(n,e){Ol(n,e)}});function yP(n,e){let t=Object.create(n4);t.value=n,t.transformFn=e?.transform;function r(){if(kl(t),t.value===mP){let i=null;throw new Y(-950,i)}return t.value}return r[ln]=t,r}var Pg=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>dd(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}};function hP(n,e){return yP(n,e)}function r4(n){return yP(mP,n)}var _P=(hP.required=r4,hP);var i4=(()=>{class n{zone=L(Ue);changeDetectionScheduler=L(ps);applicationRef=L(Go);applicationErrorHandler=L(pn);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(t){this.applicationErrorHandler(t)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),s4=new J("",{factory:()=>!1});function o4({ngZoneFactory:n,scheduleInRootZone:e}){return n??=()=>new Ue(ve($({},vP()),{scheduleInRootZone:e})),[{provide:Rc,useValue:!1},{provide:Ue,useFactory:n},{provide:ys,multi:!0,useFactory:()=>{let t=L(i4,{optional:!0});return()=>t.initialize()}},{provide:ys,multi:!0,useFactory:()=>{let t=L(a4);return()=>{t.initialize()}}},{provide:Up,useValue:e??bI}]}function iue(n){let e=n?.scheduleInRootZone,t=o4({ngZoneFactory:()=>{let r=vP(n);return r.scheduleInRootZone=e,r.shouldCoalesceEventChangeDetection&&mg("NgZone_CoalesceEvent"),new Ue(r)},scheduleInRootZone:e});return Zn([{provide:s4,useValue:!0},t])}function vP(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var a4=(()=>{class n{subscription=new rt;initialized=!1;zone=L(Ue);pendingTasks=L(Rr);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ue.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ue.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var OE=new J(""),c4=new J("");function vd(n){return!n.moduleRef}function u4(n){let e=vd(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Ue);return t.run(()=>{vd(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(pn),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),vd(n)){let s=()=>e.destroy(),o=n.platformInjector.get(OE);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{let s=()=>n.moduleRef.destroy(),o=n.platformInjector.get(OE);o.add(s),n.moduleRef.onDestroy(()=>{ad(n.allPlatformModules,n.moduleRef),i.unsubscribe(),o.delete(s)})}return d4(r,t,()=>{let s=e.get(Rr),o=s.add(),a=e.get(CE);return a.runInitializers(),a.donePromise.then(()=>{let c=e.get(Rg,_d);if(rP(c||_d),!e.get(c4,!0))return vd(n)?e.get(Go):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(vd(n)){let h=e.get(Go);return n.rootComponent!==void 0&&h.bootstrap(n.rootComponent),h}else return l4?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>{s.remove(o)})})})}var l4;function d4(n,e,t){try{let r=t();return zo(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var Ng=null;function h4(n=[],e){return At.create({name:e,providers:[{provide:Yl,useValue:"platform"},{provide:OE,useValue:new Set([()=>Ng=null])},...n]})}function f4(n=[]){if(Ng)return Ng;let e=h4(n);return Ng=e,YN(),p4(e),e}function p4(n){let e=n.get(dg,null);ut(n,()=>{e?.forEach(t=>t())})}function jE(){return!1}var g4=1e4;var sue=g4-1e3;var Id=(()=>{class n{static __NG_ELEMENT_ID__=m4}return n})();function m4(n){return y4(Wt(),Be(),(n&16)===16)}function y4(n,e,t){if(Es(n)&&!t){let r=Ln(n.index,e);return new As(r,r)}else if(n.type&175){let r=e[xn];return new As(r,e)}return null}var LE=class{constructor(){}supports(e){return TE(e)}create(e){return new FE(e)}},_4=(n,e)=>e,FE=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||_4}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){let o=!r||t&&t.currentIndex<fP(r,i,s)?t:r,a=fP(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,o.previousIndex==null)i++;else{s||(s=[]);let d=a-i,h=c-i;if(d!=h){for(let E=0;E<d;E++){let D=E<s.length?s[E]:s[E]=0,R=D+E;h<=R&&R<d&&(s[E]=D+1)}let g=o.previousIndex;s[g]=h-d}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!TE(e))throw new Y(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,s,o,a),r=!0):(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)),t=t._next}else i=0,UN(e,a=>{o=this._trackByFn(i,a),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,a,o,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new VE(t,r),s,i)),e}_verifyReinsertion(e,t,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new kg),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new kg),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},VE=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},UE=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},kg=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new UE,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function fP(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function pP(){return new BE([new LE])}var BE=(()=>{class n{factories;static \u0275prov=X({token:n,providedIn:"root",factory:pP});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:()=>{let r=L(n,{optional:!0,skipSelf:!0});return n.create(t,r||pP())}}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new Y(901,!1)}}return n})();function IP(n){let{rootComponent:e,appProviders:t,platformProviders:r,platformRef:i}=n;qe(Me.BootstrapApplicationStart);try{let s=i?.injector??f4(r),o=[lP(),i0,...t||[]],a=new ud({providers:o,parent:s,debugName:"",runEnvironmentInitializers:!1});return u4({r3Injector:a.injector,platformInjector:s,rootComponent:e})}catch(s){return Promise.reject(s)}finally{qe(Me.BootstrapApplicationEnd)}}function Mg(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}var EP=null;function fi(){return EP}function $E(n){EP??=n}var Ed=class{},xg=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:()=>L(wP),providedIn:"platform"})}return n})();var wP=(()=>{class n extends xg{_location;_history;_doc=L(Dt);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return fi().getBaseHref(this._doc)}onPopState(t){let r=fi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=fi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function AP(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function TP(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function Ss(n){return n&&n[0]!=="?"?`?${n}`:n}var Bc=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:()=>L(I4),providedIn:"root"})}return n})(),v4=new J(""),I4=(()=>{class n extends Bc{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??L(Dt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return AP(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Ss(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+Ss(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+Ss(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(me(xg),me(v4,8))};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),$c=(()=>{class n{_subject=new xt;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=T4(TP(bP(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ss(r))}normalize(t){return n.stripTrailingSlash(w4(this._basePath,bP(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ss(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ss(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Ss;static joinWithSlash=AP;static stripTrailingSlash=TP;static \u0275fac=function(r){return new(r||n)(me(Bc))};static \u0275prov=X({token:n,factory:()=>E4(),providedIn:"root"})}return n})();function E4(){return new $c(me(Bc))}function w4(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function bP(n){return n.replace(/\/index.html$/,"")}function T4(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var Og=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},CP=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Og(i.item,this._ngForOf,-1,-1),o===null?void 0:o);else if(o==null)r.remove(s===null?void 0:s);else if(s!==null){let a=r.get(s);r.move(a,o),DP(a,i)}});for(let i=0,s=r.length;i<s;i++){let a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let s=r.get(i.currentIndex);DP(s,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(St(qo),St(pd),St(BE))};static \u0275dir=Ds({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function DP(n,e){n.context.$implicit=e.item}var b4=(()=>{class n{_viewContainer;_context=new Lg;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){SP(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){SP(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(St(qo),St(pd))};static \u0275dir=Ds({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),Lg=class{$implicit=null;ngIf=null};function SP(n,e){if(n&&!n.createEmbeddedView)throw new Y(2020,!1)}function A4(n,e){return new Y(2100,!1)}var HE=class{createSubscription(e,t,r){return gn(()=>e.subscribe({next:t,error:r}))}dispose(e){gn(()=>e.unsubscribe())}},qE=class{createSubscription(e,t,r){return e.then(i=>t?.(i),i=>r?.(i)),{unsubscribe:()=>{t=null,r=null}}}dispose(e){e.unsubscribe()}},D4=new qE,S4=new HE,C4=(()=>{class n{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;applicationErrorHandler=L(pn);constructor(t){this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r),r=>this.applicationErrorHandler(r))}_selectStrategy(t){if(zo(t))return D4;if(bg(t))return S4;throw A4(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(r){return new(r||n)(St(Id,16))};static \u0275pipe=AE({name:"async",type:n,pure:!1})}return n})();var RP=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=jc({type:n});static \u0275inj=Ro({})}return n})();function zE(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,s]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var wd=class{};var NP="browser";var Td=class{_doc;constructor(e){this._doc=e}manager},Fg=(()=>{class n extends Td{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,s){return t.addEventListener(r,i,s),()=>this.removeEventListener(t,r,i,s)}removeEventListener(t,r,i,s){return t.removeEventListener(r,i,s)}static \u0275fac=function(r){return new(r||n)(me(Dt))};static \u0275prov=X({token:n,factory:n.\u0275fac})}return n})(),jg=new J(""),QE=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(o=>{o.manager=this});let i=t.filter(o=>!(o instanceof Fg));this._plugins=i.slice().reverse();let s=t.find(o=>o instanceof Fg);s&&this._plugins.push(s)}addEventListener(t,r,i,s){return this._findPluginFor(r).addEventListener(t,r,i,s)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new Y(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(me(jg),me(Ue))};static \u0275prov=X({token:n,factory:n.\u0275fac})}return n})(),GE="ng-app-id";function PP(n){for(let e of n)e.remove()}function kP(n,e){let t=e.createElement("style");return t.textContent=n,t}function N4(n,e,t,r){let i=n.head?.querySelectorAll(`style[${GE}="${e}"],link[${GE}="${e}"]`);if(i)for(let s of i)s.removeAttribute(GE),s instanceof HTMLLinkElement?r.set(s.href.slice(s.href.lastIndexOf("/")+1),{usage:0,elements:[s]}):s.textContent&&t.set(s.textContent,{usage:0,elements:[s]})}function KE(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var YE=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,N4(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,kP);r?.forEach(i=>this.addUsage(i,this.external,KE))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let s=r.get(t);s?s.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(o=>this.addElement(o,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(PP(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])PP(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,kP(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,KE(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(me(Dt),me(lg),me(hg,8),me(Ho))};static \u0275prov=X({token:n,factory:n.\u0275fac})}return n})(),WE={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},JE=/%COMP%/g;var xP="%COMP%",P4=`_nghost-${xP}`,k4=`_ngcontent-${xP}`,M4=!0,x4=new J("",{factory:()=>M4});function O4(n){return k4.replace(JE,n)}function L4(n){return P4.replace(JE,n)}function OP(n,e){return e.map(t=>t.replace(JE,n))}var XE=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;constructor(t,r,i,s,o,a,c=null,d=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.ngZone=a,this.nonce=c,this.tracingService=d,this.defaultRenderer=new bd(t,o,a,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof Ug?i.applyToHost(t):i instanceof Ad&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,a=this.ngZone,c=this.eventManager,d=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,g=this.tracingService;switch(r.encapsulation){case ir.Emulated:s=new Ug(c,d,r,this.appId,h,o,a,g);break;case ir.ShadowDom:return new Vg(c,t,r,o,a,this.nonce,g,d);case ir.ExperimentalIsolatedShadowDom:return new Vg(c,t,r,o,a,this.nonce,g);default:s=new Ad(c,d,r,h,o,a,g);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(me(QE),me(YE),me(lg),me(x4),me(Dt),me(Ue),me(hg),me(fd,8))};static \u0275prov=X({token:n,factory:n.\u0275fac})}return n})(),bd=class{eventManager;doc;ngZone;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.tracingService=i}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(WE[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(MP(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(MP(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new Y(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=WE[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=WE[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Pr.DashCase|Pr.Important)?e.style.setProperty(t,r,i&Pr.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Pr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=fi().getGlobalEventTarget(this.doc,e),!e))throw new Y(5102,!1);let s=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(s=this.tracingService.wrapEventListener(e,t,s)),this.eventManager.addEventListener(e,t,s,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function MP(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Vg=class extends bd{hostEl;sharedStylesHost;shadowRoot;constructor(e,t,r,i,s,o,a,c){super(e,i,s,a),this.hostEl=t,this.sharedStylesHost=c,this.shadowRoot=t.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let d=r.styles;d=OP(r.id,d);for(let g of d){let E=document.createElement("style");o&&E.setAttribute("nonce",o),E.textContent=g,this.shadowRoot.appendChild(E)}let h=r.getExternalStyles?.();if(h)for(let g of h){let E=KE(g,i);o&&E.setAttribute("nonce",o),this.shadowRoot.appendChild(E)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},Ad=class extends bd{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let d=r.styles;this.styles=c?OP(c,d):d,this.styleUrls=r.getExternalStyles?.(c)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&Oc.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Ug=class extends Ad{contentAttr;hostAttr;constructor(e,t,r,i,s,o,a,c){let d=i+"-"+r.id;super(e,t,r,s,o,a,c,d),this.contentAttr=O4(d),this.hostAttr=L4(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var Bg=class n extends Ed{supportsDOMEvents=!0;static makeCurrent(){$E(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=F4();return t==null?null:V4(t)}resetBaseElement(){Dd=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return zE(document.cookie,e)}},Dd=null;function F4(){return Dd=Dd||document.head.querySelector("base"),Dd?Dd.getAttribute("href"):null}function V4(n){return new URL(n,document.baseURI).pathname}var U4=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac})}return n})(),LP=["alt","control","meta","shift"],j4={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},B4={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},FP=(()=>{class n extends Td{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,s){let o=n.parseEventName(r),a=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>fi().onAndCancel(t,o.domEventName,a,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=n._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),LP.forEach(d=>{let h=r.indexOf(d);h>-1&&(r.splice(h,1),o+=d+".")}),o+=s,r.length!=0||s.length===0)return null;let c={};return c.domEventName=i,c.fullKey=o,c}static matchEventFullKeyCode(t,r){let i=j4[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),LP.forEach(o=>{if(o!==i){let a=B4[o];a(t)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(me(Dt))};static \u0275prov=X({token:n,factory:n.\u0275fac})}return n})();async function $4(n,e,t){let r=$({rootComponent:n},H4(e,t));return IP(r)}function H4(n,e){return{platformRef:e?.platformRef,appProviders:[...K4,...n?.providers??[]],platformProviders:W4}}function q4(){Bg.makeCurrent()}function z4(){return new di}function G4(){return tE(document),document}var W4=[{provide:Ho,useValue:NP},{provide:dg,useValue:q4,multi:!0},{provide:Dt,useFactory:G4}];var K4=[{provide:Yl,useValue:"root"},{provide:di,useFactory:z4},{provide:jg,useClass:Fg,multi:!0},{provide:jg,useClass:FP,multi:!0},XE,YE,QE,{provide:jo,useExisting:XE},{provide:wd,useClass:U4},[]];var VP=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(me(Dt))};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var ce="primary",Vd=Symbol("RouteTitle"),rw=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Qo(n){return new rw(n)}function ZE(n,e,t){for(let r=0;r<n.length;r++){let i=n[r],s=e[r];if(i[0]===":")t[i.substring(1)]=s;else if(i!==s.path)return!1}return!0}function KP(n,e,t){let r=t.path.split("/"),i=r.indexOf("**");if(i===-1){if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let c={},d=n.slice(0,r.length);return ZE(r,d,c)?{consumed:d,posParams:c}:null}if(i!==r.lastIndexOf("**"))return null;let s=r.slice(0,i),o=r.slice(i+1);if(s.length+o.length>n.length||t.pathMatch==="full"&&e.hasChildren()&&t.path!=="**")return null;let a={};return!ZE(s,n.slice(0,s.length),a)||!ZE(o,n.slice(n.length-o.length),a)?null:{consumed:n,posParams:a}}function Wg(n){return new Promise((e,t)=>{n.pipe(ci()).subscribe({next:r=>e(r),error:r=>t(r)})})}function Y4(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Mr(n[t],e[t]))return!1;return!0}function Mr(n,e){let t=n?iw(n):void 0,r=e?iw(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!QP(n[i],e[i]))return!1;return!0}function iw(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function QP(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}else return n===e}function J4(n){return n.length>0?n[n.length-1]:null}function Xo(n){return up(n)?n:zo(n)?ct(Promise.resolve(n)):Ie(n)}function YP(n){return up(n)?Wg(n):Promise.resolve(n)}var X4={exact:XP,subset:ZP},JP={exact:Z4,subset:eH,ignored:()=>!0};function UP(n,e,t){return X4[t.paths](n.root,e.root,t.matrixParams)&&JP[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function Z4(n,e){return Mr(n,e)}function XP(n,e,t){if(!Wo(n.segments,e.segments)||!qg(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!XP(n.children[r],e.children[r],t))return!1;return!0}function eH(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>QP(n[t],e[t]))}function ZP(n,e,t){return ek(n,e,e.segments,t)}function ek(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Wo(i,t)||e.hasChildren()||!qg(i,t,r))}else if(n.segments.length===t.length){if(!Wo(n.segments,t)||!qg(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!ZP(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!Wo(n.segments,i)||!qg(n.segments,i,r)||!n.children[ce]?!1:ek(n.children[ce],e,s,r)}}function qg(n,e,t){return e.every((r,i)=>JP[t](n[i].parameters,r.parameters))}var or=class{root;queryParams;fragment;_queryParamMap;constructor(e=new xe([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Qo(this.queryParams),this._queryParamMap}toString(){return rH.serialize(this)}},xe=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return zg(this)}},Cs=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Qo(this.parameters),this._parameterMap}toString(){return nk(this)}};function tH(n,e){return Wo(n,e)&&n.every((t,r)=>Mr(t.parameters,e[r].parameters))}function Wo(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function nH(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===ce&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==ce&&(t=t.concat(e(i,r)))}),t}var Ud=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:()=>new Rs,providedIn:"root"})}return n})(),Rs=class{parse(e){let t=new ow(e);return new or(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Sd(e.root,!0)}`,r=oH(e.queryParams),i=typeof e.fragment=="string"?`#${iH(e.fragment)}`:"";return`${t}${r}${i}`}},rH=new Rs;function zg(n){return n.segments.map(e=>nk(e)).join("/")}function Sd(n,e){if(!n.hasChildren())return zg(n);if(e){let t=n.children[ce]?Sd(n.children[ce],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==ce&&r.push(`${i}:${Sd(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=nH(n,(r,i)=>i===ce?[Sd(n.children[ce],!1)]:[`${i}:${Sd(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[ce]!=null?`${zg(n)}/${t[0]}`:`${zg(n)}/(${t.join("//")})`}}function tk(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function $g(n){return tk(n).replace(/%3B/gi,";")}function iH(n){return encodeURI(n)}function sw(n){return tk(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Gg(n){return decodeURIComponent(n)}function jP(n){return Gg(n.replace(/\+/g,"%20"))}function nk(n){return`${sw(n.path)}${sH(n.parameters)}`}function sH(n){return Object.entries(n).map(([e,t])=>`;${sw(e)}=${sw(t)}`).join("")}function oH(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${$g(t)}=${$g(i)}`).join("&"):`${$g(t)}=${$g(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var aH=/^[^\/()?;#]+/;function ew(n){let e=n.match(aH);return e?e[0]:""}var cH=/^[^\/()?;=#]+/;function uH(n){let e=n.match(cH);return e?e[0]:""}var lH=/^[^=?&#]+/;function dH(n){let e=n.match(lH);return e?e[0]:""}var hH=/^[^&#]+/;function fH(n){let e=n.match(hH);return e?e[0]:""}var ow=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new xe([],{}):new xe([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[ce]=new xe(e,t)),r}parseSegment(){let e=ew(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Y(4009,!1);return this.capture(e),new Cs(Gg(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=uH(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=ew(this.remaining);i&&(r=i,this.capture(r))}e[Gg(t)]=Gg(r)}parseQueryParam(e){let t=dH(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let o=fH(this.remaining);o&&(r=o,this.capture(r))}let i=jP(t),s=jP(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=ew(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new Y(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=ce);let o=this.parseChildren();t[s??ce]=Object.keys(o).length===1&&o[ce]?o[ce]:new xe([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Y(4011,!1)}};function rk(n){return n.segments.length>0?new xe([],{[ce]:n}):n}function ik(n){let e={};for(let[r,i]of Object.entries(n.children)){let s=ik(i);if(r===ce&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let t=new xe(n.segments,e);return pH(t)}function pH(n){if(n.numberOfChildren===1&&n.children[ce]){let e=n.children[ce];return new xe(n.segments.concat(e.segments),e.children)}return n}function Ns(n){return n instanceof or}function sk(n,e,t=null,r=null,i=new Rs){let s=ok(n);return ak(s,e,t,r,i)}function ok(n){let e;function t(s){let o={};for(let c of s.children){let d=t(c);o[c.outlet]=d}let a=new xe(s.url,o);return s===n&&(e=a),a}let r=t(n.root),i=rk(r);return e??i}function ak(n,e,t,r,i){let s=n;for(;s.parent;)s=s.parent;if(e.length===0)return tw(s,s,s,t,r,i);let o=gH(e);if(o.toRoot())return tw(s,s,new xe([],{}),t,r,i);let a=mH(o,s,n),c=a.processChildren?Rd(a.segmentGroup,a.index,o.commands):uk(a.segmentGroup,a.index,o.commands);return tw(s,a.segmentGroup,c,t,r,i)}function Kg(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function kd(n){return typeof n=="object"&&n!=null&&n.outlets}function BP(n,e,t){n||="\u0275";let r=new or;return r.queryParams={[n]:e},t.parse(t.serialize(r)).queryParams[n]}function tw(n,e,t,r,i,s){let o={};for(let[d,h]of Object.entries(r??{}))o[d]=Array.isArray(h)?h.map(g=>BP(d,g,s)):BP(d,h,s);let a;n===e?a=t:a=ck(n,e,t);let c=rk(ik(a));return new or(c,o,i)}function ck(n,e,t){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===e?r[i]=t:r[i]=ck(s,e,t)}),new xe(n.segments,r)}var Qg=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Kg(r[0]))throw new Y(4003,!1);let i=r.find(kd);if(i&&i!==J4(r))throw new Y(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function gH(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Qg(!0,0,n);let e=0,t=!1,r=n.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,d])=>{a[c]=typeof d=="string"?d.split("/"):d}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new Qg(t,e,r)}var qc=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function mH(n,e,t){if(n.isAbsolute)return new qc(e,!0,0);if(!t)return new qc(e,!1,NaN);if(t.parent===null)return new qc(t,!0,0);let r=Kg(n.commands[0])?0:1,i=t.segments.length-1+r;return yH(t,i,n.numberOfDoubleDots)}function yH(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new Y(4005,!1);i=r.segments.length}return new qc(r,!1,i-s)}function _H(n){return kd(n[0])?n[0].outlets:{[ce]:n}}function uk(n,e,t){if(n??=new xe([],{}),n.segments.length===0&&n.hasChildren())return Rd(n,e,t);let r=vH(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new xe(n.segments.slice(0,r.pathIndex),{});return s.children[ce]=new xe(n.segments.slice(r.pathIndex),n.children),Rd(s,0,i)}else return r.match&&i.length===0?new xe(n.segments,{}):r.match&&!n.hasChildren()?aw(n,e,t):r.match?Rd(n,0,i):aw(n,e,t)}function Rd(n,e,t){if(t.length===0)return new xe(n.segments,{});{let r=_H(t),i={};if(Object.keys(r).some(s=>s!==ce)&&n.children[ce]&&n.numberOfChildren===1&&n.children[ce].segments.length===0){let s=Rd(n.children[ce],e,t);return new xe(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=uk(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new xe(n.segments,i)}}function vH(n,e,t){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;let o=n.segments[i],a=t[r];if(kd(a))break;let c=`${a}`,d=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&d&&typeof d=="object"&&d.outlets===void 0){if(!HP(c,d,o))return s;r+=2}else{if(!HP(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function aw(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let s=t[i];if(kd(s)){let c=IH(s.outlets);return new xe(r,c)}if(i===0&&Kg(t[0])){let c=n.segments[e];r.push(new Cs(c.path,$P(t[0]))),i++;continue}let o=kd(s)?s.outlets[ce]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&Kg(a)?(r.push(new Cs(o,$P(a))),i+=2):(r.push(new Cs(o,{})),i++)}return new xe(r,{})}function IH(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=aw(new xe([],{}),0,r))}),e}function $P(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function HP(n,e,t){return n==t.path&&Mr(e,t.parameters)}var Nd="imperative",Ct=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(Ct||{}),bn=class{id;url;constructor(e,t){this.id=e,this.url=t}},Yo=class extends bn{type=Ct.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},xr=class extends bn{urlAfterRedirects;type=Ct.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Kt=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(Kt||{}),Md=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(Md||{}),Fn=class extends bn{reason;code;type=Ct.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}};function lk(n){return n instanceof Fn&&(n.code===Kt.Redirect||n.code===Kt.SupersededByNewNavigation)}var gi=class extends bn{reason;code;type=Ct.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},Jo=class extends bn{error;target;type=Ct.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Gc=class extends bn{urlAfterRedirects;state;type=Ct.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Yg=class extends bn{urlAfterRedirects;state;type=Ct.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Jg=class extends bn{urlAfterRedirects;state;shouldActivate;type=Ct.GuardsCheckEnd;constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Xg=class extends bn{urlAfterRedirects;state;type=Ct.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Zg=class extends bn{urlAfterRedirects;state;type=Ct.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},em=class{route;type=Ct.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},tm=class{route;type=Ct.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},nm=class{snapshot;type=Ct.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},rm=class{snapshot;type=Ct.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},im=class{snapshot;type=Ct.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},sm=class{snapshot;type=Ct.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Wc=class{},Kc=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function EH(n){return!(n instanceof Wc)&&!(n instanceof Kc)}var om=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return this.route?.snapshot._environmentInjector??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Jc(this.rootInjector)}},Jc=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new om(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(me(Xe))};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),am=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=cw(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=cw(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=uw(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return uw(e,this._root).map(t=>t.value)}};function cw(n,e){if(n===e.value)return e;for(let t of e.children){let r=cw(n,t);if(r)return r}return null}function uw(n,e){if(n===e.value)return[e];for(let t of e.children){let r=uw(n,t);if(r.length)return r.unshift(e),r}return[]}var Tn=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Hc(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var xd=class extends am{snapshot;constructor(e,t){super(e),this.snapshot=t,yw(this,e)}toString(){return this.snapshot.toString()}};function dk(n,e){let t=wH(n,e),r=new Ot([new Cs("",{})]),i=new Ot({}),s=new Ot({}),o=new Ot({}),a=new Ot(""),c=new mi(r,i,o,a,s,ce,n,t.root);return c.snapshot=t.root,new xd(new Tn(c,[]),t)}function wH(n,e){let t={},r={},i={},o=new Ko([],t,i,"",r,ce,n,null,{},e);return new Od("",new Tn(o,[]))}var mi=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(Ke(d=>d[Vd]))??Ie(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Ke(e=>Qo(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Ke(e=>Qo(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function cm(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:$($({},e.params),n.params),data:$($({},e.data),n.data),resolve:$($($($({},n.data),e.data),i?.data),n._resolvedData)}:r={params:$({},n.params),data:$({},n.data),resolve:$($({},n.data),n._resolvedData??{})},i&&fk(i)&&(r.resolve[Vd]=i.title),r}var Ko=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;_environmentInjector;get title(){return this.data?.[Vd]}constructor(e,t,r,i,s,o,a,c,d,h){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=d,this._environmentInjector=h}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Qo(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Qo(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Od=class extends am{url;constructor(e,t){super(t),this.url=e,yw(this,t)}toString(){return hk(this._root)}};function yw(n,e){e.value._routerState=n,e.children.forEach(t=>yw(n,t))}function hk(n){let e=n.children.length>0?` { ${n.children.map(hk).join(", ")} } `:"";return`${n.value}${e}`}function nw(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Mr(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Mr(e.params,t.params)||n.paramsSubject.next(t.params),Y4(e.url,t.url)||n.urlSubject.next(t.url),Mr(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function lw(n,e){let t=Mr(n.params,e.params)&&tH(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||lw(n.parent,e.parent))}function fk(n){return typeof n.title=="string"||n.title===null}var pk=new J(""),_w=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=ce;activateEvents=new rn;deactivateEvents=new rn;attachEvents=new rn;detachEvents=new rn;routerOutletData=_P();parentContexts=L(Jc);location=L(qo);changeDetector=L(Id);inputBinder=L(hm,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Y(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Y(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Y(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Y(4013,!1);this._activatedRoute=t;let i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new dw(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(o,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Ds({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Uc]})}return n})(),dw=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===mi?this.route:e===Jc?this.childContexts:e===pk?this.outletData:this.parent.get(e,t)}},hm=new J("");var vw=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=bE({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Sg(0,"router-outlet")},dependencies:[_w],encapsulation:2})}return n})();function Iw(n){let e=n.children&&n.children.map(Iw),t=e?ve($({},n),{children:e}):$({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ce&&(t.component=vw),t}function TH(n,e,t){let r=Ld(n,e._root,t?t._root:void 0);return new xd(r,e)}function Ld(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=bH(n,e,t);return new Tn(r,i)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Ld(n,a)),o}}let r=AH(e.value),i=e.children.map(s=>Ld(n,s));return new Tn(r,i)}}function bH(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Ld(n,r,i);return Ld(n,r)})}function AH(n){return new mi(new Ot(n.url),new Ot(n.params),new Ot(n.queryParams),new Ot(n.fragment),new Ot(n.data),n.outlet,n.component,n)}var Qc=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},gk="ngNavigationCancelingError";function um(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Ns(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=mk(!1,Kt.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function mk(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[gk]=!0,t.cancellationCode=e,t}function DH(n){return yk(n)&&Ns(n.url)}function yk(n){return!!n&&n[gk]}var hw=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),nw(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Hc(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Hc(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Hc(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Hc(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new sm(s.value.snapshot))}),e.children.length&&this.forwardEvent(new rm(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(nw(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),nw(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},lm=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},zc=class{component;route;constructor(e,t){this.component=e,this.route=t}};function SH(n,e,t){let r=n._root,i=e?e._root:null;return Cd(r,i,t,[r.value])}function CH(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Xc(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!$v(n)?n:e.get(n):r}function Cd(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Hc(e);return n.children.forEach(o=>{RH(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Pd(a,t.getContext(o),i)),i}function RH(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=NH(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new lm(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Cd(n,e,a?a.children:null,r,i):Cd(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new zc(a.outlet.component,o))}else o&&Pd(e,a,i),i.canActivateChecks.push(new lm(r)),s.component?Cd(n,null,a?a.children:null,r,i):Cd(n,null,t,r,i);return i}function NH(n,e,t){if(typeof t=="function")return ut(e._environmentInjector,()=>t(n,e));switch(t){case"pathParamsChange":return!Wo(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Wo(n.url,e.url)||!Mr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!lw(n,e)||!Mr(n.queryParams,e.queryParams);default:return!lw(n,e)}}function Pd(n,e,t){let r=Hc(n),i=n.value;Object.entries(r).forEach(([s,o])=>{i.component?e?Pd(o,e.children.getContext(s),t):Pd(o,null,t):Pd(o,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new zc(e.outlet.component,i)):t.canDeactivateChecks.push(new zc(null,i)):t.canDeactivateChecks.push(new zc(null,i))}function jd(n){return typeof n=="function"}function PH(n){return typeof n=="boolean"}function kH(n){return n&&jd(n.canLoad)}function MH(n){return n&&jd(n.canActivate)}function xH(n){return n&&jd(n.canActivateChild)}function OH(n){return n&&jd(n.canDeactivate)}function LH(n){return n&&jd(n.canMatch)}function _k(n){return n instanceof oi||n?.name==="EmptyError"}var Hg=Symbol("INITIAL_VALUE");function Yc(){return Xn(n=>Ev(n.map(e=>e.pipe(ai(1),gp(Hg)))).pipe(Ke(e=>{for(let t of e)if(t!==!0){if(t===Hg)return Hg;if(t===!1||FH(t))return t}return!0}),Tr(e=>e!==Hg),ai(1)))}function FH(n){return Ns(n)||n instanceof Qc}function vk(n){return n.aborted?Ie(void 0).pipe(ai(1)):new fe(e=>{let t=()=>{e.next(),e.complete()};return n.addEventListener("abort",t),()=>n.removeEventListener("abort",t)})}function Ik(n){return jl(vk(n))}function VH(n){return tn(e=>{let{targetSnapshot:t,currentSnapshot:r,guards:{canActivateChecks:i,canDeactivateChecks:s}}=e;return s.length===0&&i.length===0?Ie(ve($({},e),{guardsResult:!0})):UH(s,t,r).pipe(tn(o=>o&&PH(o)?jH(t,i,n):Ie(o)),Ke(o=>ve($({},e),{guardsResult:o})))})}function UH(n,e,t){return ct(n).pipe(tn(r=>zH(r.component,r.route,t,e)),ci(r=>r!==!0,!0))}function jH(n,e,t){return ct(e).pipe(fp(r=>_c($H(r.route.parent,t),BH(r.route,t),qH(n,r.path),HH(n,r.route))),ci(r=>r!==!0,!0))}function BH(n,e){return n!==null&&e&&e(new im(n)),Ie(!0)}function $H(n,e){return n!==null&&e&&e(new nm(n)),Ie(!0)}function HH(n,e){let t=e.routeConfig?e.routeConfig.canActivate:null;if(!t||t.length===0)return Ie(!0);let r=t.map(i=>Vl(()=>{let s=e._environmentInjector,o=Xc(i,s),a=MH(o)?o.canActivate(e,n):ut(s,()=>o(e,n));return Xo(a).pipe(ci())}));return Ie(r).pipe(Yc())}function qH(n,e){let t=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(s=>CH(s)).filter(s=>s!==null).map(s=>Vl(()=>{let o=s.guards.map(a=>{let c=s.node._environmentInjector,d=Xc(a,c),h=xH(d)?d.canActivateChild(t,n):ut(c,()=>d(t,n));return Xo(h).pipe(ci())});return Ie(o).pipe(Yc())}));return Ie(i).pipe(Yc())}function zH(n,e,t,r){let i=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!i||i.length===0)return Ie(!0);let s=i.map(o=>{let a=e._environmentInjector,c=Xc(o,a),d=OH(c)?c.canDeactivate(n,e,t,r):ut(a,()=>c(n,e,t,r));return Xo(d).pipe(ci())});return Ie(s).pipe(Yc())}function GH(n,e,t,r,i){let s=e.canLoad;if(s===void 0||s.length===0)return Ie(!0);let o=s.map(a=>{let c=Xc(a,n),d=kH(c)?c.canLoad(e,t):ut(n,()=>c(e,t)),h=Xo(d);return i?h.pipe(Ik(i)):h});return Ie(o).pipe(Yc(),Ek(r))}function Ek(n){return Gf(br(e=>{if(typeof e!="boolean")throw um(n,e)}),Ke(e=>e===!0))}function WH(n,e,t,r,i){let s=e.canMatch;if(!s||s.length===0)return Ie(!0);let o=s.map(a=>{let c=Xc(a,n),d=LH(c)?c.canMatch(e,t):ut(n,()=>c(e,t));return Xo(d).pipe(Ik(i))});return Ie(o).pipe(Yc(),Ek(r))}var pi=class n extends Error{segmentGroup;constructor(e){super(),this.segmentGroup=e||null,Object.setPrototypeOf(this,n.prototype)}},Fd=class n extends Error{urlTree;constructor(e){super(),this.urlTree=e,Object.setPrototypeOf(this,n.prototype)}};function KH(n){throw new Y(4e3,!1)}function QH(n){throw mk(!1,Kt.GuardRejected)}var fw=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}async lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return r;if(i.numberOfChildren>1||!i.children[ce])throw KH(`${e.redirectTo}`);i=i.children[ce]}}async applyRedirectCommands(e,t,r,i,s){let o=await YH(t,i,s);if(o instanceof or)throw new Fd(o);let a=this.applyRedirectCreateUrlTree(o,this.urlSerializer.parse(o),e,r);if(o[0]==="/")throw new Fd(a);return a}applyRedirectCreateUrlTree(e,t,r,i){let s=this.createSegmentGroup(e,t.root,r,i);return new or(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){let s=this.createSegments(e,t.segments,r,i),o={};return Object.entries(t.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new xe(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new Y(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function YH(n,e,t){if(typeof n=="string")return Promise.resolve(n);let r=n,{queryParams:i,fragment:s,routeConfig:o,url:a,outlet:c,params:d,data:h,title:g,paramMap:E,queryParamMap:D}=e;return Wg(Xo(ut(t,()=>r({params:d,data:h,queryParams:i,fragment:s,routeConfig:o,url:a,outlet:c,title:g,paramMap:E,queryParamMap:D}))))}function JH(n,e){return n.providers&&!n._injector&&(n._injector=yd(n.providers,e,`Route: ${n.path}`)),n._injector??e}function sr(n){return n.outlet||ce}function XH(n,e){let t=n.filter(r=>sr(r)===e);return t.push(...n.filter(r=>sr(r)!==e)),t}var pw={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ZH(n,e,t,r,i,s){let o=wk(n,e,t);return o.matched?(r=JH(e,r),WH(r,e,t,i,s).pipe(Ke(a=>a===!0?o:$({},pw)))):Ie(o)}function wk(n,e,t){if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?$({},pw):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||KP)(t,n,e);if(!i)return $({},pw);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?$($({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function qP(n,e,t,r){return t.length>0&&nq(n,t,r)?{segmentGroup:new xe(e,tq(r,new xe(t,n.children))),slicedSegments:[]}:t.length===0&&rq(n,t,r)?{segmentGroup:new xe(n.segments,eq(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new xe(n.segments,n.children),slicedSegments:t}}function eq(n,e,t,r){let i={};for(let s of t)if(fm(n,e,s)&&!r[sr(s)]){let o=new xe([],{});i[sr(s)]=o}return $($({},r),i)}function tq(n,e){let t={};t[ce]=e;for(let r of n)if(r.path===""&&sr(r)!==ce){let i=new xe([],{});t[sr(r)]=i}return t}function nq(n,e,t){return t.some(r=>fm(n,e,r)&&sr(r)!==ce)}function rq(n,e,t){return t.some(r=>fm(n,e,r))}function fm(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function iq(n,e,t){return e.length===0&&!n.children[t]}var gw=class{};async function sq(n,e,t,r,i,s,o="emptyOnly",a){return new mw(n,e,t,r,i,o,s,a).recognize()}var oq=31,mw=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;abortSignal;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,s,o,a,c){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.abortSignal=c,this.applyRedirects=new fw(this.urlSerializer,this.urlTree)}noMatchError(e){return new Y(4002,`'${e.segmentGroup}'`)}async recognize(){let e=qP(this.urlTree.root,[],[],this.config).segmentGroup,{children:t,rootSnapshot:r}=await this.match(e),i=new Tn(r,t),s=new Od("",i),o=sk(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}async match(e){let t=new Ko([],Object.freeze({}),Object.freeze($({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ce,this.rootComponentType,null,{},this.injector);try{return{children:await this.processSegmentGroup(this.injector,this.config,e,ce,t),rootSnapshot:t}}catch(r){if(r instanceof Fd)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof pi?this.noMatchError(r):r}}async processSegmentGroup(e,t,r,i,s){if(r.segments.length===0&&r.hasChildren())return this.processChildren(e,t,r,s);let o=await this.processSegment(e,t,r,r.segments,i,!0,s);return o instanceof Tn?[o]:[]}async processChildren(e,t,r,i){let s=[];for(let c of Object.keys(r.children))c==="primary"?s.unshift(c):s.push(c);let o=[];for(let c of s){let d=r.children[c],h=XH(t,c),g=await this.processSegmentGroup(e,h,d,c,i);o.push(...g)}let a=Tk(o);return aq(a),a}async processSegment(e,t,r,i,s,o,a){for(let c of t)try{return await this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,s,o,a)}catch(d){if(d instanceof pi||_k(d))continue;throw d}if(iq(r,i,s))return new gw;throw new pi(r)}async processSegmentAgainstRoute(e,t,r,i,s,o,a,c){if(sr(r)!==o&&(o===ce||!fm(i,s,r)))throw new pi(i);if(r.redirectTo===void 0)return this.matchSegmentAgainstRoute(e,i,r,s,o,c);if(this.allowRedirects&&a)return this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o,c);throw new pi(i)}async expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o,a){let{matched:c,parameters:d,consumedSegments:h,positionalParamSegments:g,remainingSegments:E}=wk(t,i,s);if(!c)throw new pi(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>oq&&(this.allowRedirects=!1));let D=new Ko(s,d,Object.freeze($({},this.urlTree.queryParams)),this.urlTree.fragment,zP(i),sr(i),i.component??i._loadedComponent??null,i,GP(i),e),R=cm(D,a,this.paramsInheritanceStrategy);if(D.params=Object.freeze(R.params),D.data=Object.freeze(R.data),this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let M=await this.applyRedirects.applyRedirectCommands(h,i.redirectTo,g,D,e),k=await this.applyRedirects.lineralizeSegments(i,M);return this.processSegment(e,r,t,k.concat(E),o,!1,a)}async matchSegmentAgainstRoute(e,t,r,i,s,o){if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let a=await Wg(ZH(t,r,i,e,this.urlSerializer,this.abortSignal));if(r.path==="**"&&(t.children={}),!a?.matched)throw new pi(t);e=r._injector??e;let{routes:c}=await this.getChildConfig(e,r,i),d=r._loadedInjector??e,{parameters:h,consumedSegments:g,remainingSegments:E}=a,D=new Ko(g,h,Object.freeze($({},this.urlTree.queryParams)),this.urlTree.fragment,zP(r),sr(r),r.component??r._loadedComponent??null,r,GP(r),e),R=cm(D,o,this.paramsInheritanceStrategy);D.params=Object.freeze(R.params),D.data=Object.freeze(R.data);let{segmentGroup:M,slicedSegments:k}=qP(t,g,E,c);if(k.length===0&&M.hasChildren()){let K=await this.processChildren(d,c,M,D);return new Tn(D,K)}if(c.length===0&&k.length===0)return new Tn(D,[]);let V=sr(r)===s,z=await this.processSegment(d,c,M,k,V?ce:s,!0,D);return new Tn(D,z instanceof Tn?[z]:[])}async getChildConfig(e,t,r){if(t.children)return{routes:t.children,injector:e};if(t.loadChildren){if(t._loadedRoutes!==void 0){let s=t._loadedNgModuleFactory;return s&&!t._loadedInjector&&(t._loadedInjector=s.create(e).injector),{routes:t._loadedRoutes,injector:t._loadedInjector}}if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);if(await Wg(GH(e,t,r,this.urlSerializer,this.abortSignal))){let s=await this.configLoader.loadChildren(e,t);return t._loadedRoutes=s.routes,t._loadedInjector=s.injector,t._loadedNgModuleFactory=s.factory,s}throw QH(t)}return{routes:[],injector:e}}};function aq(n){n.sort((e,t)=>e.value.outlet===ce?-1:t.value.outlet===ce?1:e.value.outlet.localeCompare(t.value.outlet))}function cq(n){let e=n.value.routeConfig;return e&&e.path===""}function Tk(n){let e=[],t=new Set;for(let r of n){if(!cq(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=Tk(r.children);e.push(new Tn(r.value,i))}return e.filter(r=>!t.has(r))}function zP(n){return n.data||{}}function GP(n){return n.resolve||{}}function uq(n,e,t,r,i,s,o){return tn(async a=>{let{state:c,tree:d}=await sq(n,e,t,r,a.extractedUrl,i,s,o);return ve($({},a),{targetSnapshot:c,urlAfterRedirects:d})})}function lq(n){return tn(e=>{let{targetSnapshot:t,guards:{canActivateChecks:r}}=e;if(!r.length)return Ie(e);let i=new Set(r.map(a=>a.route)),s=new Set;for(let a of i)if(!s.has(a))for(let c of bk(a))s.add(c);let o=0;return ct(s).pipe(fp(a=>i.has(a)?dq(a,t,n):(a.data=cm(a,a.parent,n).resolve,Ie(void 0))),br(()=>o++),pp(1),tn(a=>o===s.size?Ie(e):Lt))})}function bk(n){let e=n.children.map(t=>bk(t)).flat();return[n,...e]}function dq(n,e,t){let r=n.routeConfig,i=n._resolve;return r?.title!==void 0&&!fk(r)&&(i[Vd]=r.title),Vl(()=>(n.data=cm(n,n.parent,t).resolve,hq(i,n,e).pipe(Ke(s=>(n._resolvedData=s,n.data=$($({},n.data),s),null)))))}function hq(n,e,t){let r=iw(n);if(r.length===0)return Ie({});let i={};return ct(r).pipe(tn(s=>fq(n[s],e,t).pipe(ci(),br(o=>{if(o instanceof Qc)throw um(new Rs,o);i[s]=o}))),pp(1),Ke(()=>i),Ul(s=>_k(s)?Lt:Iv(s)))}function fq(n,e,t){let r=e._environmentInjector,i=Xc(n,r),s=i.resolve?i.resolve(e,t):ut(r,()=>i(e,t));return Xo(s)}function WP(n){return Xn(e=>{let t=n(e);return t?ct(t).pipe(Ke(()=>e)):Ie(e)})}var Ew=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===ce);return r}getResolvedTitleForRoute(t){return t.data[Vd]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:()=>L(Ak),providedIn:"root"})}return n})(),Ak=(()=>{class n extends Ew{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(me(VP))};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Zc=new J("",{factory:()=>({})}),Bd=new J(""),Dk=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=L(xE);async loadComponent(t,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Promise.resolve(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let s=await YP(ut(t,()=>r.loadComponent())),o=await Rk(Ck(s));return this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o,o}finally{this.componentLoaders.delete(r)}})();return this.componentLoaders.set(r,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Promise.resolve({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let s=await Sk(r,this.compiler,t,this.onLoadEndListener);return r._loadedRoutes=s.routes,r._loadedInjector=s.injector,r._loadedNgModuleFactory=s.factory,s}finally{this.childrenLoaders.delete(r)}})();return this.childrenLoaders.set(r,i),i}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();async function Sk(n,e,t,r){let i=await YP(ut(t,()=>n.loadChildren())),s=await Rk(Ck(i)),o;s instanceof Tg||Array.isArray(s)?o=s:o=await e.compileModuleAsync(s),r&&r(n);let a,c,d=!1,h;return Array.isArray(o)?(c=o,d=!0):(a=o.create(t).injector,h=o,c=a.get(Bd,[],{optional:!0,self:!0}).flat()),{routes:c.map(Iw),injector:a,factory:h}}function pq(n){return n&&typeof n=="object"&&"default"in n}function Ck(n){return pq(n)?n.default:n}async function Rk(n){return n}var pm=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:()=>L(gq),providedIn:"root"})}return n})(),gq=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Nk=new J("");var mq=()=>{},Pk=new J(""),kk=(()=>{class n{currentNavigation=bs(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=bs(null);events=new xt;transitionAbortWithErrorSubject=new xt;configLoader=L(Dk);environmentInjector=L(Xe);destroyRef=L(Ts);urlSerializer=L(Ud);rootContexts=L(Jc);location=L($c);inputBindingEnabled=L(hm,{optional:!0})!==null;titleStrategy=L(Ew);options=L(Zc,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=L(pm);createViewTransition=L(Nk,{optional:!0});navigationErrorHandler=L(Pk,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>Ie(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new em(i)),r=i=>this.events.next(new tm(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;gn(()=>{this.transitions?.next(ve($({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))})}setupNavigations(t){return this.transitions=new Ot(null),this.transitions.pipe(Tr(r=>r!==null),Xn(r=>{let i=!1,s=new AbortController,o=()=>!i&&this.currentTransition?.id===r.id;return Ie(r).pipe(Xn(a=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Kt.SupersededByNewNavigation),Lt;this.currentTransition=r;let c=this.lastSuccessfulNavigation();this.currentNavigation.set({id:a.id,initialUrl:a.rawUrl,extractedUrl:a.extractedUrl,targetBrowserUrl:typeof a.extras.browserUrl=="string"?this.urlSerializer.parse(a.extras.browserUrl):a.extras.browserUrl,trigger:a.source,extras:a.extras,previousNavigation:c?ve($({},c),{previousNavigation:null}):null,abort:()=>s.abort()});let d=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=a.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!d&&h!=="reload")return this.events.next(new gi(a.id,this.urlSerializer.serialize(a.rawUrl),"",Md.IgnoredSameUrlNavigation)),a.resolve(!1),Lt;if(this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return Ie(a).pipe(Xn(g=>(this.events.next(new Yo(g.id,this.urlSerializer.serialize(g.extractedUrl),g.source,g.restoredState)),g.id!==this.navigationId?Lt:Promise.resolve(g))),uq(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy,s.signal),br(g=>{r.targetSnapshot=g.targetSnapshot,r.urlAfterRedirects=g.urlAfterRedirects,this.currentNavigation.update(D=>(D.finalUrl=g.urlAfterRedirects,D));let E=new Gc(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(E)}));if(d&&this.urlHandlingStrategy.shouldProcessUrl(a.currentRawUrl)){let{id:g,extractedUrl:E,source:D,restoredState:R,extras:M}=a,k=new Yo(g,this.urlSerializer.serialize(E),D,R);this.events.next(k);let V=dk(this.rootComponentType,this.environmentInjector).snapshot;return this.currentTransition=r=ve($({},a),{targetSnapshot:V,urlAfterRedirects:E,extras:ve($({},M),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(z=>(z.finalUrl=E,z)),Ie(r)}else return this.events.next(new gi(a.id,this.urlSerializer.serialize(a.extractedUrl),"",Md.IgnoredByUrlHandlingStrategy)),a.resolve(!1),Lt}),Ke(a=>{let c=new Yg(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);return this.events.next(c),this.currentTransition=r=ve($({},a),{guards:SH(a.targetSnapshot,a.currentSnapshot,this.rootContexts)}),r}),VH(a=>this.events.next(a)),Xn(a=>{if(r.guardsResult=a.guardsResult,a.guardsResult&&typeof a.guardsResult!="boolean")throw um(this.urlSerializer,a.guardsResult);let c=new Jg(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);if(this.events.next(c),!o())return Lt;if(!a.guardsResult)return this.cancelNavigationTransition(a,"",Kt.GuardRejected),Lt;if(a.guards.canActivateChecks.length===0)return Ie(a);let d=new Xg(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);if(this.events.next(d),!o())return Lt;let h=!1;return Ie(a).pipe(lq(this.paramsInheritanceStrategy),br({next:()=>{h=!0;let g=new Zg(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(g)},complete:()=>{h||this.cancelNavigationTransition(a,"",Kt.NoDataFromResolver)}}))}),WP(a=>{let c=h=>{let g=[];if(h.routeConfig?._loadedComponent)h.component=h.routeConfig?._loadedComponent;else if(h.routeConfig?.loadComponent){let E=h._environmentInjector;g.push(this.configLoader.loadComponent(E,h.routeConfig).then(D=>{h.component=D}))}for(let E of h.children)g.push(...c(E));return g},d=c(a.targetSnapshot.root);return d.length===0?Ie(a):ct(Promise.all(d).then(()=>a))}),WP(()=>this.afterPreactivation()),Xn(()=>{let{currentSnapshot:a,targetSnapshot:c}=r,d=this.createViewTransition?.(this.environmentInjector,a.root,c.root);return d?ct(d).pipe(Ke(()=>r)):Ie(r)}),ai(1),Ke(a=>{let c=TH(t.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);this.currentTransition=r=a=ve($({},a),{targetRouterState:c}),this.currentNavigation.update(d=>(d.targetRouterState=c,d)),this.events.next(new Wc),o()&&(new hw(t.routeReuseStrategy,r.targetRouterState,r.currentRouterState,d=>this.events.next(d),this.inputBindingEnabled).activate(this.rootContexts),o()&&(i=!0,this.currentNavigation.update(d=>(d.abort=mq,d)),this.lastSuccessfulNavigation.set(gn(this.currentNavigation)),this.events.next(new xr(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects))),this.titleStrategy?.updateTitle(a.targetRouterState.snapshot),a.resolve(!0)))}),jl(vk(s.signal).pipe(Tr(()=>!i&&!r.targetRouterState),br(()=>{this.cancelNavigationTransition(r,s.signal.reason+"",Kt.Aborted)}))),br({complete:()=>{i=!0}}),jl(this.transitionAbortWithErrorSubject.pipe(br(a=>{throw a}))),wv(()=>{s.abort(),i||this.cancelNavigationTransition(r,"",Kt.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),Ul(a=>{if(i=!0,this.destroyed)return r.resolve(!1),Lt;if(yk(a))this.events.next(new Fn(r.id,this.urlSerializer.serialize(r.extractedUrl),a.message,a.cancellationCode)),DH(a)?this.events.next(new Kc(a.url,a.navigationBehaviorOptions)):r.resolve(!1);else{let c=new Jo(r.id,this.urlSerializer.serialize(r.extractedUrl),a,r.targetSnapshot??void 0);try{let d=ut(this.environmentInjector,()=>this.navigationErrorHandler?.(c));if(d instanceof Qc){let{message:h,cancellationCode:g}=um(this.urlSerializer,d);this.events.next(new Fn(r.id,this.urlSerializer.serialize(r.extractedUrl),h,g)),this.events.next(new Kc(d.redirectTo,d.navigationBehaviorOptions))}else throw this.events.next(c),a}catch(d){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(d)}}return Lt}))}))}cancelNavigationTransition(t,r,i){let s=new Fn(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=gn(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return t.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function yq(n){return n!==Nd}var Mk=new J("");var xk=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:()=>L(_q),providedIn:"root"})}return n})(),dm=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}shouldDestroyInjector(e){return!0}},_q=(()=>{class n extends dm{static \u0275fac=(()=>{let t;return function(i){return(t||(t=cg(n)))(i||n)}})();static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ww=(()=>{class n{urlSerializer=L(Ud);options=L(Zc,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=L($c);urlHandlingStrategy=L(pm);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new or;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let s=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,o=i??s;return o instanceof or?this.urlSerializer.serialize(o):o}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=dk(null,L(Xe));getRouterState(){return this.routerState}_stateMemento=this.createStateMemento();get stateMemento(){return this._stateMemento}updateStateMemento(){this._stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}restoredState(){return this.location.getState()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:()=>L(vq),providedIn:"root"})}return n})(),vq=(()=>{class n extends ww{currentPageId=0;lastSuccessfulId=-1;get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof Yo?this.updateStateMemento():t instanceof gi?this.commitTransition(r):t instanceof Gc?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Wc?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Fn&&!lk(t)?this.restoreHistory(r):t instanceof Jo?this.restoreHistory(r,!0):t instanceof xr&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:s,state:o}=r;if(this.location.isCurrentPathEqualTo(t)||s){let a=this.browserPageId,c=$($({},o),this.generateNgRouterState(i,a));this.location.replaceState(t,"",c)}else{let a=$($({},o),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.getCurrentUrlTree()===t.finalUrl&&s===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=cg(n)))(i||n)}})();static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Tw(n,e){n.events.pipe(Tr(t=>t instanceof xr||t instanceof Fn||t instanceof Jo||t instanceof gi),Ke(t=>t instanceof xr||t instanceof gi?0:(t instanceof Fn?t.code===Kt.Redirect||t.code===Kt.SupersededByNewNavigation:!1)?2:1),Tr(t=>t!==2),ai(1)).subscribe(()=>{e()})}var Ok={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Lk={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},$d=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=L(DE);stateManager=L(ww);options=L(Zc,{optional:!0})||{};pendingTasks=L(Rr);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=L(kk);urlSerializer=L(Ud);location=L($c);urlHandlingStrategy=L(pm);injector=L(Xe);_events=new xt;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=L(xk);injectorCleanup=L(Mk,{optional:!0});onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=L(Bd,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!L(hm,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{}}),this.subscribeToNavigationEvents()}eventsSubscription=new rt;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=gn(this.navigationTransitions.currentNavigation);if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof Fn&&r.code!==Kt.Redirect&&r.code!==Kt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof xr)this.navigated=!0,this.injectorCleanup?.(this.routeReuseStrategy,this.routerState,this.config);else if(r instanceof Kc){let o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=$({scroll:i.extras.scroll,browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||yq(i.source)},o);this.scheduleNavigation(a,Nd,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}EH(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Nd,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let c=$({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(s.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s).catch(c=>{this.disposed||this.injector.get(pn)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return gn(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Iw),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription?.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0,this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=r,d=c?this.currentUrlTree.fragment:o,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=$($({},this.currentUrlTree.queryParams),s);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=s||null}h!==null&&(h=this.removeEmptyProps(h));let g;try{let E=i?i.snapshot:this.routerState.snapshot.root;g=ok(E)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),g=this.currentUrlTree.root}return ak(g,t,h,d??null,this.urlSerializer)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Ns(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Nd,null,r)}navigate(t,r={skipLocationChange:!1}){return Iq(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.console.warn(wc(4018,!1)),this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=$({},Ok):r===!1?i=$({},Lk):i=r,Ns(t))return UP(this.currentUrlTree,t,i);let s=this.parseUrl(t);return UP(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,d;o?(a=o.resolve,c=o.reject,d=o.promise):d=new Promise((g,E)=>{a=g,c=E});let h=this.pendingTasks.add();return Tw(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:c,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(g=>Promise.reject(g))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Iq(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new Y(4008,!1)}var Fk=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=bs(null);get href(){return gn(this.reactiveHref)}set href(t){this.reactiveHref.set(t)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new xt;applicationErrorHandler=L(pn);options=L(Zc,{optional:!0});constructor(t,r,i,s,o,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=a,this.reactiveHref.set(L(new Pg("href"),{optional:!0}));let c=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area"||!!(typeof customElements=="object"&&customElements.get(c)?.observedAttributes?.includes?.("href")),this.isAnchorElement&&(this.setTabIndexIfNotOnNativeEl("0"),this.subscribeToNavigationEventsIfNecessary())}subscribeToNavigationEventsIfNecessary(){this.subscription===void 0&&(this.subscription=this.router.events.subscribe(t=>{t instanceof xr&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Ns(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,s,o){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||s||o||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c)?.catch(d=>{this.applicationErrorHandler(d)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.reactiveHref.set(t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t))??"":null)}applyAttributeValue(t,r){let i=this.renderer,s=this.el.nativeElement;r!==null?i.setAttribute(s,t,r):i.removeAttribute(s,t)}get urlTree(){return this.routerLinkInput===null?null:Ns(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(St($d),St(mi),dd("tabindex"),St(wg),St(hd),St(Bc))};static \u0275dir=Ds({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&Cg("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),r&2&&Dg("href",i.reactiveHref(),sE)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Mg],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Mg],replaceUrl:[2,"replaceUrl","replaceUrl",Mg],routerLink:"routerLink"},features:[Uc]})}return n})();var Tq=new J("");function bq(n,...e){return Zn([{provide:Bd,multi:!0,useValue:n},[],{provide:mi,useFactory:Aq},{provide:Ag,multi:!0,useFactory:Dq},e.map(t=>t.\u0275providers)])}function Aq(){return L($d).routerState.root}function Dq(){let n=L(At);return e=>{let t=n.get(Go);if(e!==t.components[0])return;let r=n.get($d),i=n.get(Sq);n.get(Cq)===1&&r.initialNavigation(),n.get(Rq,null,{optional:!0})?.setUpPreloading(),n.get(Tq,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var Sq=new J("",{factory:()=>new xt}),Cq=new J("",{factory:()=>1});var Rq=new J("");var Vk=()=>{};var Bk=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},Nq=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],a=n[t++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},gm={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,a=o?n[i+1]:0,c=i+2<n.length,d=c?n[i+2]:0,h=s>>2,g=(s&3)<<4|a>>4,E=(a&15)<<2|d>>6,D=d&63;c||(D=64,o||(E=64)),r.push(t[h],t[g],t[E],t[D])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Bk(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Nq(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let d=i<n.length?t[n.charAt(i)]:64;++i;let g=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||d==null||g==null)throw new Aw;let E=s<<2|a>>4;if(r.push(E),d!==64){let D=a<<4&240|d>>2;if(r.push(D),g!==64){let R=d<<6&192|g;r.push(R)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Aw=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},Pq=function(n){let e=Bk(n);return gm.encodeByteArray(e,!0)},qd=function(n){return Pq(n).replace(/\./g,"")},mm=function(n){try{return gm.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Sw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var kq=()=>Sw().__FIREBASE_DEFAULTS__,Mq=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},xq=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&mm(n[1]);return e&&JSON.parse(e)},ym=()=>{try{return Vk()||kq()||Mq()||xq()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Cw=n=>{var e,t;return(t=(e=ym())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},$k=n=>{let e=Cw(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Rw=()=>{var n;return(n=ym())===null||n===void 0?void 0:n.config},Nw=n=>{var e;return(e=ym())===null||e===void 0?void 0:e[`_${n}`]};var Zo=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function Ps(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function _m(n){return(await fetch(n,{credentials:"include"})).ok}function Hk(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[qd(JSON.stringify(t)),qd(JSON.stringify(o)),""].join(".")}var Hd={};function Oq(){let n={prod:[],emulator:[]};for(let e of Object.keys(Hd))Hd[e]?n.emulator.push(e):n.prod.push(e);return n}function Lq(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var Uk=!1;function vm(n,e){if(typeof window>"u"||typeof document>"u"||!Ps(window.location.host)||Hd[n]===e||Hd[n]||Uk)return;Hd[n]=e;function t(E){return`__firebase__banner__${E}`}let r="__firebase__banner",s=Oq().prod.length>0;function o(){let E=document.getElementById(r);E&&E.remove()}function a(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function c(E,D){E.setAttribute("width","24"),E.setAttribute("id",D),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function d(){let E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{Uk=!0,o()},E}function h(E,D){E.setAttribute("id",D),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function g(){let E=Lq(r),D=t("text"),R=document.getElementById(D)||document.createElement("span"),M=t("learnmore"),k=document.getElementById(M)||document.createElement("a"),V=t("preprendIcon"),z=document.getElementById(V)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){let K=E.element;a(K),h(k,M);let ye=d();c(z,V),K.append(z,R,k,ye),document.body.appendChild(K)}s?(R.innerText="Preview backend disconnected.",z.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(z.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,R.innerText="Preview backend running in this workspace."),R.setAttribute("id",D)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}function Rt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function qk(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Rt())}function Fq(){var n;let e=(n=ym())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function zk(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Gk(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Wk(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Kk(){let n=Rt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Qk(){return!Fq()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function zd(){try{return typeof indexedDB=="object"}catch{return!1}}function Yk(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var Vq="FirebaseError",An=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=Vq,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ar.prototype.create)}},ar=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?Uq(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new An(i,a,r)}};function Uq(n,e){return n.replace(jq,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var jq=/\{\$([^}]+)}/g;function Jk(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Or(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],o=e[i];if(jk(s)&&jk(o)){if(!Or(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function jk(n){return n!==null&&typeof n=="object"}function eu(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Xk(n,e){let t=new Dw(n,e);return t.subscribe.bind(t)}var Dw=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");Bq(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=bw),i.error===void 0&&(i.error=bw),i.complete===void 0&&(i.complete=bw);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function Bq(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function bw(){}var bhe=14400*1e3;function jt(n){return n&&n._delegate?n._delegate:n}var sn=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var ea="[DEFAULT]";var Pw=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new Zo;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Hq(e))try{this.getOrInitializeService({instanceIdentifier:ea})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=ea){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ea){return this.instances.has(e)}getOptions(e=ea){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:$q(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ea){return this.component?this.component.multipleInstances?e:ea:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function $q(n){return n===ea?void 0:n}function Hq(n){return n.instantiationMode==="EAGER"}var Im=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Pw(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var qq=[],we=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(we||{}),zq={debug:we.DEBUG,verbose:we.VERBOSE,info:we.INFO,warn:we.WARN,error:we.ERROR,silent:we.SILENT},Gq=we.INFO,Wq={[we.DEBUG]:"log",[we.VERBOSE]:"log",[we.INFO]:"info",[we.WARN]:"warn",[we.ERROR]:"error"},Kq=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=Wq[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Lr=class{constructor(e){this.name=e,this._logLevel=Gq,this._logHandler=Kq,this._userLogHandler=null,qq.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in we))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?zq[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,we.DEBUG,...e),this._logHandler(this,we.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,we.VERBOSE,...e),this._logHandler(this,we.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,we.INFO,...e),this._logHandler(this,we.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,we.WARN,...e),this._logHandler(this,we.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,we.ERROR,...e),this._logHandler(this,we.ERROR,...e)}};var Qq=(n,e)=>e.some(t=>n instanceof t),Zk,eM;function Yq(){return Zk||(Zk=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Jq(){return eM||(eM=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var tM=new WeakMap,Mw=new WeakMap,nM=new WeakMap,kw=new WeakMap,Ow=new WeakMap;function Xq(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(Fr(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&tM.set(t,n)}).catch(()=>{}),Ow.set(e,n),e}function Zq(n){if(Mw.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});Mw.set(n,e)}var xw={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Mw.get(n);if(e==="objectStoreNames")return n.objectStoreNames||nM.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Fr(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function rM(n){xw=n(xw)}function e6(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Em(this),e,...t);return nM.set(r,e.sort?e.sort():[e]),Fr(r)}:Jq().includes(n)?function(...e){return n.apply(Em(this),e),Fr(tM.get(this))}:function(...e){return Fr(n.apply(Em(this),e))}}function t6(n){return typeof n=="function"?e6(n):(n instanceof IDBTransaction&&Zq(n),Qq(n,Yq())?new Proxy(n,xw):n)}function Fr(n){if(n instanceof IDBRequest)return Xq(n);if(kw.has(n))return kw.get(n);let e=t6(n);return e!==n&&(kw.set(n,e),Ow.set(e,n)),e}var Em=n=>Ow.get(n);function wm(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(n,e),a=Fr(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Fr(o.result),c.oldVersion,c.newVersion,Fr(o.transaction),c)}),t&&o.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),a}var n6=["get","getKey","getAll","getAllKeys","count"],r6=["put","add","delete","clear"],Lw=new Map;function iM(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Lw.get(e))return Lw.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=r6.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||n6.includes(t)))return;let s=async function(o,...a){let c=this.transaction(o,i?"readwrite":"readonly"),d=c.store;return r&&(d=d.index(a.shift())),(await Promise.all([d[t](...a),i&&c.done]))[0]};return Lw.set(e,s),s}rM(n=>ve($({},n),{get:(e,t,r)=>iM(e,t)||n.get(e,t,r),has:(e,t)=>!!iM(e,t)||n.has(e,t)}));var Vw=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(i6(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function i6(n){let e=n.getComponent();return e?.type==="VERSION"}var Uw="@firebase/app",sM="0.13.2";var yi=new Lr("@firebase/app"),s6="@firebase/app-compat",o6="@firebase/analytics-compat",a6="@firebase/analytics",c6="@firebase/app-check-compat",u6="@firebase/app-check",l6="@firebase/auth",d6="@firebase/auth-compat",h6="@firebase/database",f6="@firebase/data-connect",p6="@firebase/database-compat",g6="@firebase/functions",m6="@firebase/functions-compat",y6="@firebase/installations",_6="@firebase/installations-compat",v6="@firebase/messaging",I6="@firebase/messaging-compat",E6="@firebase/performance",w6="@firebase/performance-compat",T6="@firebase/remote-config",b6="@firebase/remote-config-compat",A6="@firebase/storage",D6="@firebase/storage-compat",S6="@firebase/firestore",C6="@firebase/ai",R6="@firebase/firestore-compat",N6="firebase",P6="11.10.0";var jw="[DEFAULT]",k6={[Uw]:"fire-core",[s6]:"fire-core-compat",[a6]:"fire-analytics",[o6]:"fire-analytics-compat",[u6]:"fire-app-check",[c6]:"fire-app-check-compat",[l6]:"fire-auth",[d6]:"fire-auth-compat",[h6]:"fire-rtdb",[f6]:"fire-data-connect",[p6]:"fire-rtdb-compat",[g6]:"fire-fn",[m6]:"fire-fn-compat",[y6]:"fire-iid",[_6]:"fire-iid-compat",[v6]:"fire-fcm",[I6]:"fire-fcm-compat",[E6]:"fire-perf",[w6]:"fire-perf-compat",[T6]:"fire-rc",[b6]:"fire-rc-compat",[A6]:"fire-gcs",[D6]:"fire-gcs-compat",[S6]:"fire-fst",[R6]:"fire-fst-compat",[C6]:"fire-vertex","fire-js":"fire-js",[N6]:"fire-js-all"};var Gd=new Map,M6=new Map,Bw=new Map;function oM(n,e){try{n.container.addComponent(e)}catch(t){yi.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function cr(n){let e=n.name;if(Bw.has(e))return yi.debug(`There were multiple attempts to register component ${e}.`),!1;Bw.set(e,n);for(let t of Gd.values())oM(t,n);for(let t of M6.values())oM(t,n);return!0}function tu(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Dn(n){return n==null?!1:n.settings!==void 0}var x6={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ks=new ar("app","Firebase",x6);var $w=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new sn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ks.create("app-deleted",{appName:this._name})}};var Ms=P6;function zw(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:jw,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw ks.create("bad-app-name",{appName:String(i)});if(t||(t=Rw()),!t)throw ks.create("no-options");let s=Gd.get(i);if(s){if(Or(t,s.options)&&Or(r,s.config))return s;throw ks.create("duplicate-app",{appName:i})}let o=new Im(i);for(let c of Bw.values())o.addComponent(c);let a=new $w(t,r,o);return Gd.set(i,a),a}function ta(n=jw){let e=Gd.get(n);if(!e&&n===jw&&Rw())return zw();if(!e)throw ks.create("no-app",{appName:n});return e}function Tm(){return Array.from(Gd.values())}function et(n,e,t){var r;let i=(r=k6[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),yi.warn(a.join(" "));return}cr(new sn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var O6="firebase-heartbeat-database",L6=1,Wd="firebase-heartbeat-store",Fw=null;function lM(){return Fw||(Fw=wm(O6,L6,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Wd)}catch(t){console.warn(t)}}}}).catch(n=>{throw ks.create("idb-open",{originalErrorMessage:n.message})})),Fw}async function F6(n){try{let t=(await lM()).transaction(Wd),r=await t.objectStore(Wd).get(dM(n));return await t.done,r}catch(e){if(e instanceof An)yi.warn(e.message);else{let t=ks.create("idb-get",{originalErrorMessage:e?.message});yi.warn(t.message)}}}async function aM(n,e){try{let r=(await lM()).transaction(Wd,"readwrite");await r.objectStore(Wd).put(e,dM(n)),await r.done}catch(t){if(t instanceof An)yi.warn(t.message);else{let r=ks.create("idb-set",{originalErrorMessage:t?.message});yi.warn(r.message)}}}function dM(n){return`${n.name}!${n.options.appId}`}var V6=1024,U6=30,Hw=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new qw(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=cM();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>U6){let o=B6(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){yi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=cM(),{heartbeatsToSend:r,unsentEntries:i}=j6(this._heartbeatsCache.heartbeats),s=qd(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return yi.warn(t),""}}};function cM(){return new Date().toISOString().substring(0,10)}function j6(n,e=V6){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),uM(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),uM(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var qw=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return zd()?Yk().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let t=await F6(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){let i=await this.read();return aM(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){let i=await this.read();return aM(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}};function uM(n){return qd(JSON.stringify({version:2,heartbeats:n})).length}function B6(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function $6(n){cr(new sn("platform-logger",e=>new Vw(e),"PRIVATE")),cr(new sn("heartbeat",e=>new Hw(e),"PRIVATE")),et(Uw,sM,n),et(Uw,sM,"esm2017"),et("fire-js","")}$6("");var H6="firebase",q6="11.10.0";et(H6,q6,"app");function hM(n){n===void 0&&(n=L(At));let e=n.get(Nc);return t=>new fe(r=>{let i=e.add(),s=!1;function o(){s||(i(),s=!0)}let a=t.subscribe({next:c=>{r.next(c),o()},complete:()=>{r.complete(),o()},error:c=>{r.error(c),o()}});return a.add(()=>{r.unsubscribe(),o()}),a})}var xs=new Ec("ANGULARFIRE2_VERSION");function Kd(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var ru=(n,e)=>{let t=e?[e]:Tm(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},nu=(function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n})(nu||{}),fM=jE()&&typeof Zone<"u"?nu.WARN:nu.SILENT;var bm=class{zone;delegate;constructor(e,t=vv){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(o){i?i.runGuarded(()=>{e.apply(this,[o])}):e.apply(this,[o])};return this.delegate.schedule(s,t,r)}},Os=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=L(Ue);this.outsideAngular=t.runOutsideAngular(()=>new bm(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new bm(typeof Zone>"u"?void 0:Zone.current,_v))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),pM=!1;function z6(n,e){!pM&&(fM>nu.SILENT||jE())&&(pM=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),fM>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function G6(n){let e=L(Ue,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function na(n){let e=L(Ue,{optional:!0});return e?e.run(()=>n()):n()}var W6=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),ut(t,()=>na(()=>n.apply(void 0,r)))),on=(n,e,t)=>(t||=e?nu.WARN:nu.VERBOSE,function(){let r,i=arguments,s,o,a;try{s=L(Os),o=L(Nc),a=L(Xe)}catch{return z6(n,t),n.apply(this,i)}for(let d=0;d<arguments.length;d++)typeof i[d]=="function"&&(e&&(r||=na(()=>o.add())),i[d]=W6(i[d],r,a));let c=G6(()=>n.apply(this,i));return e?c instanceof fe?c.pipe(ds(s.outsideAngular),ls(s.insideAngular),hM(a)):c instanceof Promise?na(()=>{let d=o.add();return new Promise((h,g)=>{c.then(E=>ut(a,()=>na(()=>h(E))),E=>ut(a,()=>na(()=>g(E)))).finally(d)})}):typeof c=="function"&&r?function(){return setTimeout(r,0),c.apply(this,arguments)}:na(()=>c):c instanceof fe?c.pipe(ds(s.outsideAngular),ls(s.insideAngular)):na(()=>c)});var _i=class{constructor(e){return e}},ra=class{constructor(){return Tm()}};function K6(n){return n&&n.length===1?n[0]:new _i(ta())}var Gw=new J("angularfire2._apps"),Q6={provide:_i,useFactory:K6,deps:[[new wn,Gw]]},Y6={provide:ra,deps:[[new wn,Gw]]};function J6(n){return(e,t)=>{let r=t.get(Ho);et("angularfire",xs.full,"core"),et("angularfire",xs.full,"app"),et("angular",Uv.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new _i(i)}}function mfe(n,...e){return Zn([Q6,Y6,{provide:Gw,useFactory:J6(n),multi:!0,deps:[Ue,At,Os,...e]}])}var yfe=on(zw,!0);var X6=new Map,Z6={activated:!1,tokenObservers:[]},ez={initialized:!1,enabled:!1};function ur(n){return X6.get(n)||Object.assign({},Z6)}function _M(){return ez}var tz="https://content-firebaseappcheck.googleapis.com/v1";var nz="exchangeDebugToken",gM={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},Dfe=1440*60*1e3;var Qw=class{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new Zo,this.pending.promise.catch(t=>{}),await rz(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new Zo,this.pending.promise.catch(t=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function rz(n){return new Promise(e=>{setTimeout(e,n)})}var iz={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Ls=new ar("appCheck","AppCheck",iz);function vM(n){if(!ur(n).activated)throw Ls.create("use-before-activation",{appName:n.name})}async function IM({url:n,body:e},t){let r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){let g=await i.getHeartbeatsHeader();g&&(r["X-Firebase-Client"]=g)}let s={method:"POST",body:JSON.stringify(e),headers:r},o;try{o=await fetch(n,s)}catch(g){throw Ls.create("fetch-network-error",{originalErrorMessage:g?.message})}if(o.status!==200)throw Ls.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(g){throw Ls.create("fetch-parse-error",{originalErrorMessage:g?.message})}let c=a.ttl.match(/^([\d.]+)(s)$/);if(!c||!c[2]||isNaN(Number(c[1])))throw Ls.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});let d=Number(c[1])*1e3,h=Date.now();return{token:a.token,expireTimeMillis:h+d,issuedAtTimeMillis:h}}function EM(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${tz}/projects/${t}/apps/${r}:${nz}?key=${i}`,body:{debug_token:e}}}var sz="firebase-app-check-database",oz=1,Yw="firebase-app-check-store";var Am=null;function az(){return Am||(Am=new Promise((n,e)=>{try{let t=indexedDB.open(sz,oz);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Ls.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;r.oldVersion===0&&i.createObjectStore(Yw,{keyPath:"compositeKey"})}}catch(t){e(Ls.create("storage-open",{originalErrorMessage:t?.message}))}}),Am)}function cz(n,e){return uz(lz(n),e)}async function uz(n,e){let r=(await az()).transaction(Yw,"readwrite"),s=r.objectStore(Yw).put({compositeKey:n,value:e});return new Promise((o,a)=>{s.onsuccess=c=>{o()},r.onerror=c=>{var d;a(Ls.create("storage-set",{originalErrorMessage:(d=c.target.error)===null||d===void 0?void 0:d.message}))}})}function lz(n){return`${n.options.appId}-${n.name}`}var Qd=new Lr("@firebase/app-check");function Ww(n,e){return zd()?cz(n,e).catch(t=>{Qd.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function wM(){return _M().enabled}async function TM(){let n=_M();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}var dz={error:"UNKNOWN_ERROR"};function hz(n){return gm.encodeString(JSON.stringify(n),!1)}async function Jw(n,e=!1,t=!1){let r=n.app;vM(r);let i=ur(r),s=i.token,o;if(s&&!Yd(s)&&(i.token=void 0,s=void 0),!s){let d=await i.cachedTokenPromise;d&&(Yd(d)?s=d:await Ww(r,void 0))}if(!e&&s&&Yd(s))return{token:s.token};let a=!1;if(wM())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=IM(EM(r,await TM()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let d=await i.exchangeTokenPromise;return await Ww(r,d),i.token=d,{token:d.token}}catch(d){return d.code==="appCheck/throttled"||d.code==="appCheck/initial-throttle"?Qd.warn(d.message):t&&Qd.error(d),Kw(d)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),s=await ur(r).exchangeTokenPromise}catch(d){d.code==="appCheck/throttled"||d.code==="appCheck/initial-throttle"?Qd.warn(d.message):t&&Qd.error(d),o=d}let c;return s?o?Yd(s)?c={token:s.token,internalError:o}:c=Kw(o):(c={token:s.token},i.token=s,await Ww(r,s)):c=Kw(o),a&&mz(r,c),c}async function fz(n){let e=n.app;vM(e);let{provider:t}=ur(e);if(wM()){let r=await TM(),{token:i}=await IM(EM(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=await t.getToken();return{token:r}}}function pz(n,e,t,r){let{app:i}=n,s=ur(i),o={next:t,error:r,type:e};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&Yd(s.token)){let a=s.token;Promise.resolve().then(()=>{t({token:a.token}),mM(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>mM(n))}function bM(n,e){let t=ur(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function mM(n){let{app:e}=n,t=ur(e),r=t.tokenRefresher;r||(r=gz(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function gz(n){let{app:e}=n;return new Qw(async()=>{let t=ur(e),r;if(t.token?r=await Jw(n,!0):r=await Jw(n),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{let t=ur(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},gM.RETRIAL_MIN_WAIT,gM.RETRIAL_MAX_WAIT)}function mz(n,e){let t=ur(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Yd(n){return n.expireTimeMillis-Date.now()>0}function Kw(n){return{token:hz(dz),error:n}}var Xw=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=ur(this.app);for(let t of e)bM(this.app,t.next);return Promise.resolve()}};function yz(n,e){return new Xw(n,e)}function _z(n){return{getToken:e=>Jw(n,e),getLimitedUseToken:()=>fz(n),addTokenListener:e=>pz(n,"INTERNAL",e),removeTokenListener:e=>bM(n.app,e)}}var vz="@firebase/app-check",Iz="0.10.1";var Ez="app-check",yM="app-check-internal";function wz(){cr(new sn(Ez,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return yz(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(yM).initialize()})),cr(new sn(yM,n=>{let e=n.getProvider("app-check").getImmediate();return _z(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),et(vz,Iz)}wz();var Tz="app-check";var iu=class{constructor(){return ru(Tz)}};var bz=["localhost","0.0.0.0","127.0.0.1"],Vfe=typeof window<"u"&&bz.includes(window.location.hostname);var AM=()=>{};var DM=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},Az=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],a=n[t++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},SM={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,a=o?n[i+1]:0,c=i+2<n.length,d=c?n[i+2]:0,h=s>>2,g=(s&3)<<4|a>>4,E=(a&15)<<2|d>>6,D=d&63;c||(D=64,o||(E=64)),r.push(t[h],t[g],t[E],t[D])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(DM(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Az(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let d=i<n.length?t[n.charAt(i)]:64;++i;let g=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||d==null||g==null)throw new eT;let E=s<<2|a>>4;if(r.push(E),d!==64){let D=a<<4&240|d>>2;if(r.push(D),g!==64){let R=d<<6&192|g;r.push(R)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},eT=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},Dz=function(n){let e=DM(n);return SM.encodeByteArray(e,!0)},nT=function(n){return Dz(n).replace(/\./g,"")},Dm=function(n){try{return SM.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function CM(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var Sz=()=>CM().__FIREBASE_DEFAULTS__,Cz=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Rz=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Dm(n[1]);return e&&JSON.parse(e)},RM=()=>{try{return AM()||Sz()||Cz()||Rz()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}};var NM=n=>RM()?.[`_${n}`];function Jd(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function Sn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function PM(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Sn())}function Nz(){let n=RM()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function kM(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function MM(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function xM(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function OM(){return!Nz()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function rT(){try{return typeof indexedDB=="object"}catch{return!1}}function LM(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}var Pz="FirebaseError",Vn=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=Pz,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,vi.prototype.create)}},vi=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?kz(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Vn(i,a,r)}};function kz(n,e){return n.replace(Mz,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var Mz=/\{\$([^}]+)}/g;function iT(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function FM(n,e){let t=new tT(n,e);return t.subscribe.bind(t)}var tT=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");xz(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Zw),i.error===void 0&&(i.error=Zw),i.complete===void 0&&(i.complete=Zw);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function xz(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Zw(){}var Hfe=14400*1e3;function Vr(n){return n&&n._delegate?n._delegate:n}var lr=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Oz=[],Te=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(Te||{}),Lz={debug:Te.DEBUG,verbose:Te.VERBOSE,info:Te.INFO,warn:Te.WARN,error:Te.ERROR,silent:Te.SILENT},Fz=Te.INFO,Vz={[Te.DEBUG]:"log",[Te.VERBOSE]:"log",[Te.INFO]:"info",[Te.WARN]:"warn",[Te.ERROR]:"error"},Uz=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=Vz[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Fs=class{constructor(e){this.name=e,this._logLevel=Fz,this._logHandler=Uz,this._userLogHandler=null,Oz.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Te))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Lz[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Te.DEBUG,...e),this._logHandler(this,Te.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Te.VERBOSE,...e),this._logHandler(this,Te.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Te.INFO,...e),this._logHandler(this,Te.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Te.WARN,...e),this._logHandler(this,Te.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Te.ERROR,...e),this._logHandler(this,Te.ERROR,...e)}};var oT=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(jz(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function jz(n){return n.getComponent()?.type==="VERSION"}var aT="@firebase/app",VM="0.14.7";var Ei=new Fs("@firebase/app"),Bz="@firebase/app-compat",$z="@firebase/analytics-compat",Hz="@firebase/analytics",qz="@firebase/app-check-compat",zz="@firebase/app-check",Gz="@firebase/auth",Wz="@firebase/auth-compat",Kz="@firebase/database",Qz="@firebase/data-connect",Yz="@firebase/database-compat",Jz="@firebase/functions",Xz="@firebase/functions-compat",Zz="@firebase/installations",e9="@firebase/installations-compat",t9="@firebase/messaging",n9="@firebase/messaging-compat",r9="@firebase/performance",i9="@firebase/performance-compat",s9="@firebase/remote-config",o9="@firebase/remote-config-compat",a9="@firebase/storage",c9="@firebase/storage-compat",u9="@firebase/firestore",l9="@firebase/ai",d9="@firebase/firestore-compat",h9="firebase",f9="12.8.0";var p9={[aT]:"fire-core",[Bz]:"fire-core-compat",[Hz]:"fire-analytics",[$z]:"fire-analytics-compat",[zz]:"fire-app-check",[qz]:"fire-app-check-compat",[Gz]:"fire-auth",[Wz]:"fire-auth-compat",[Kz]:"fire-rtdb",[Qz]:"fire-data-connect",[Yz]:"fire-rtdb-compat",[Jz]:"fire-fn",[Xz]:"fire-fn-compat",[Zz]:"fire-iid",[e9]:"fire-iid-compat",[t9]:"fire-fcm",[n9]:"fire-fcm-compat",[r9]:"fire-perf",[i9]:"fire-perf-compat",[s9]:"fire-rc",[o9]:"fire-rc-compat",[a9]:"fire-gcs",[c9]:"fire-gcs-compat",[u9]:"fire-fst",[d9]:"fire-fst-compat",[l9]:"fire-vertex","fire-js":"fire-js",[h9]:"fire-js-all"};var g9=new Map,m9=new Map,UM=new Map;function jM(n,e){try{n.container.addComponent(e)}catch(t){Ei.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Vs(n){let e=n.name;if(UM.has(e))return Ei.debug(`There were multiple attempts to register component ${e}.`),!1;UM.set(e,n);for(let t of g9.values())jM(t,n);for(let t of m9.values())jM(t,n);return!0}function wi(n){return n==null?!1:n.settings!==void 0}var y9={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},dT=new vi("app","Firebase",y9);var su=f9;function Ii(n,e,t){let r=p9[n]??n;t&&(r+=`-${t}`);let i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){let o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ei.warn(o.join(" "));return}Vs(new lr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var _9="firebase-heartbeat-database",v9=1,Xd="firebase-heartbeat-store",sT=null;function qM(){return sT||(sT=wm(_9,v9,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Xd)}catch(t){console.warn(t)}}}}).catch(n=>{throw dT.create("idb-open",{originalErrorMessage:n.message})})),sT}async function I9(n){try{let t=(await qM()).transaction(Xd),r=await t.objectStore(Xd).get(zM(n));return await t.done,r}catch(e){if(e instanceof Vn)Ei.warn(e.message);else{let t=dT.create("idb-get",{originalErrorMessage:e?.message});Ei.warn(t.message)}}}async function BM(n,e){try{let r=(await qM()).transaction(Xd,"readwrite");await r.objectStore(Xd).put(e,zM(n)),await r.done}catch(t){if(t instanceof Vn)Ei.warn(t.message);else{let r=dT.create("idb-set",{originalErrorMessage:t?.message});Ei.warn(r.message)}}}function zM(n){return`${n.name}!${n.options.appId}`}var E9=1024,w9=30,cT=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new uT(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{let t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=$M();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>w9){let i=b9(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Ei.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=$M(),{heartbeatsToSend:t,unsentEntries:r}=T9(this._heartbeatsCache.heartbeats),i=nT(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return Ei.warn(e),""}}};function $M(){return new Date().toISOString().substring(0,10)}function T9(n,e=E9){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),HM(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),HM(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var uT=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return rT()?LM().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let t=await I9(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return BM(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return BM(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}};function HM(n){return nT(JSON.stringify({version:2,heartbeats:n})).length}function b9(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function A9(n){Vs(new lr("platform-logger",e=>new oT(e),"PRIVATE")),Vs(new lr("heartbeat",e=>new cT(e),"PRIVATE")),Ii(aT,VM,n),Ii(aT,VM,"esm2020"),Ii("fire-js","")}A9("");function ZM(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var ex=ZM,tx=new vi("auth","Firebase",ZM());var Nm=new Fs("@firebase/auth");function N9(n,...e){Nm.logLevel<=Te.WARN&&Nm.warn(`Auth (${su}): ${n}`,...e)}function Cm(n,...e){Nm.logLevel<=Te.ERROR&&Nm.error(`Auth (${su}): ${n}`,...e)}function GM(n,...e){throw TT(n,...e)}function wT(n,...e){return TT(n,...e)}function nx(n,e,t){let r=ve($({},ex()),{[e]:t});return new vi("auth","Firebase",r).create(e,{appName:n.name})}function Rm(n){return nx(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function TT(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return tx.create(n,...e)}function Oe(n,e,...t){if(!n)throw TT(e,...t)}function Zd(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Cm(e),new Error(e)}function Pm(n,e){n||Zd(e)}function P9(){return WM()==="http:"||WM()==="https:"}function WM(){return typeof self<"u"&&self.location?.protocol||null}function k9(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(P9()||MM()||"connection"in navigator)?navigator.onLine:!0}function M9(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var oa=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Pm(t>e,"Short delay should be less than long delay!"),this.isMobile=PM()||xM()}get(){return k9()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function x9(n,e){Pm(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var km=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Zd("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Zd("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Zd("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var O9={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var L9=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],F9=new oa(3e4,6e4);function rx(n,e){return n.tenantId&&!e.tenantId?ve($({},e),{tenantId:n.tenantId}):e}async function Fm(n,e,t,r,i={}){return ix(n,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});let a=iT($({key:n.config.apiKey},o)).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);let d=$({method:e,headers:c},s);return kM()||(d.referrerPolicy="no-referrer"),n.emulatorConfig&&Jd(n.emulatorConfig.host)&&(d.credentials="include"),km.fetch()(await sx(n,n.config.apiHost,t,a),d)})}async function ix(n,e,t){n._canInitEmulator=!1;let r=$($({},O9),e);try{let i=new pT(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=await s.json();if("needConfirmation"in o)throw Sm(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,d]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Sm(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Sm(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw Sm(n,"user-disabled",o);let h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw nx(n,h,d);GM(n,h)}}catch(i){if(i instanceof Vn)throw i;GM(n,"network-request-failed",{message:String(i)})}}async function sx(n,e,t,r){let i=`${e}${t}?${r}`,s=n,o=s.config.emulator?x9(n.config,i):`${n.config.apiScheme}://${i}`;return L9.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}var pT=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(wT(this.auth,"network-request-failed")),F9.get())})}};function Sm(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=wT(n,e,r);return i.customData._tokenResponse=t,i}async function V9(n,e){return Fm(n,"POST","/v1/accounts:delete",e)}async function Mm(n,e){return Fm(n,"POST","/v1/accounts:lookup",e)}function eh(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function ox(n,e=!1){let t=Vr(n),r=await t.getIdToken(e),i=ax(r);Oe(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:eh(hT(i.auth_time)),issuedAtTime:eh(hT(i.iat)),expirationTime:eh(hT(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}}function hT(n){return Number(n)*1e3}function ax(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Cm("JWT malformed, contained fewer than 3 sections"),null;try{let i=Dm(t);return i?JSON.parse(i):(Cm("Failed to decode base64 JWT payload"),null)}catch(i){return Cm("Caught error parsing JWT payload as JSON",i?.toString()),null}}function KM(n){let e=ax(n);return Oe(e,"internal-error"),Oe(typeof e.exp<"u","internal-error"),Oe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function gT(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Vn&&U9(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function U9({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var mT=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){let t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;let r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var nh=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=eh(this.lastLoginAt),this.creationTime=eh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function xm(n){let e=n.auth,t=await n.getIdToken(),r=await gT(n,Mm(e,{idToken:t}));Oe(r?.users.length,e,"internal-error");let i=r.users[0];n._notifyReloadListener(i);let s=i.providerUserInfo?.length?ux(i.providerUserInfo):[],o=j9(n.providerData,s),a=n.isAnonymous,c=!(n.email&&i.passwordHash)&&!o?.length,d=a?c:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new nh(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(n,h)}async function cx(n){let e=Vr(n);await xm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function j9(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function ux(n){return n.map(r=>{var i=r,{providerId:e}=i,t=Y_(i,["providerId"]);return{providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}})}async function B9(n,e){let t=await ix(n,{},async()=>{let r=iT({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=await sx(n,i,"/v1/token",`key=${s}`),a=await n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:r};return n.emulatorConfig&&Jd(n.emulatorConfig.host)&&(c.credentials="include"),km.fetch()(o,c)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function $9(n,e){return Fm(n,"POST","/v2/accounts:revokeToken",rx(n,e))}var th=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Oe(e.idToken,"internal-error"),Oe(typeof e.idToken<"u","internal-error"),Oe(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):KM(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Oe(e.length!==0,"internal-error");let t=KM(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Oe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:r,refreshToken:i,expiresIn:s}=await B9(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(Oe(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Oe(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(Oe(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Zd("not implemented")}};function Us(n,e){Oe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var ia=class n{constructor(s){var o=s,{uid:e,auth:t,stsTokenManager:r}=o,i=Y_(o,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new mT(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new nh(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){let t=await gT(this,this.stsTokenManager.getToken(this.auth,e));return Oe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return ox(this,e)}reload(){return cx(this)}_assign(e){this!==e&&(Oe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>$({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(ve($({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await xm(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(wi(this.auth.app))return Promise.reject(Rm(this.auth));let e=await this.getIdToken();return await gT(this,V9(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return ve($({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>$({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){let r=t.displayName??void 0,i=t.email??void 0,s=t.phoneNumber??void 0,o=t.photoURL??void 0,a=t.tenantId??void 0,c=t._redirectEventId??void 0,d=t.createdAt??void 0,h=t.lastLoginAt??void 0,{uid:g,emailVerified:E,isAnonymous:D,providerData:R,stsTokenManager:M}=t;Oe(g&&M,e,"internal-error");let k=th.fromJSON(this.name,M);Oe(typeof g=="string",e,"internal-error"),Us(r,e.name),Us(i,e.name),Oe(typeof E=="boolean",e,"internal-error"),Oe(typeof D=="boolean",e,"internal-error"),Us(s,e.name),Us(o,e.name),Us(a,e.name),Us(c,e.name),Us(d,e.name),Us(h,e.name);let V=new n({uid:g,auth:e,email:i,emailVerified:E,displayName:r,isAnonymous:D,photoURL:o,phoneNumber:s,tenantId:a,stsTokenManager:k,createdAt:d,lastLoginAt:h});return R&&Array.isArray(R)&&(V.providerData=R.map(z=>$({},z))),c&&(V._redirectEventId=c),V}static async _fromIdTokenResponse(e,t,r=!1){let i=new th;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await xm(s),s}static async _fromGetAccountInfoResponse(e,t,r){let i=t.users[0];Oe(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?ux(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new th;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new nh(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,d),c}};var QM=new Map;function sa(n){Pm(n instanceof Function,"Expected a class definition");let e=QM.get(n);return e?(Pm(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,QM.set(n,e),e)}var H9=(()=>{class n{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){let r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),yT=H9;function fT(n,e,t){return`firebase:${n}:${e}:${t}`}var Om=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=fT(this.userKey,i.apiKey,s),this.fullPersistenceKey=fT("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=await Mm(this.auth,{idToken:e}).catch(()=>{});return t?ia._fromGetAccountInfoResponse(this.auth,t,e):null}return ia._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new n(sa(yT),e,r);let i=(await Promise.all(t.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d),s=i[0]||sa(yT),o=fT(r,e.config.apiKey,e.name),a=null;for(let d of t)try{let h=await d._get(o);if(h){let g;if(typeof h=="string"){let E=await Mm(e,{idToken:h}).catch(()=>{});if(!E)break;g=await ia._fromGetAccountInfoResponse(e,E,h)}else g=ia._fromJSON(e,h);d!==s&&(a=g),s=d;break}}catch{}let c=i.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new n(s,e,r):(s=c[0],a&&await s._set(o,a.toJSON()),await Promise.all(t.map(async d=>{if(d!==s)try{await d._remove(o)}catch{}})),new n(s,e,r))}};function YM(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(W9(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(q9(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Q9(e))return"Blackberry";if(Y9(e))return"Webos";if(z9(e))return"Safari";if((e.includes("chrome/")||G9(e))&&!e.includes("edge/"))return"Chrome";if(K9(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function q9(n=Sn()){return/firefox\//i.test(n)}function z9(n=Sn()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function G9(n=Sn()){return/crios\//i.test(n)}function W9(n=Sn()){return/iemobile/i.test(n)}function K9(n=Sn()){return/android/i.test(n)}function Q9(n=Sn()){return/blackberry/i.test(n)}function Y9(n=Sn()){return/webos/i.test(n)}function lx(n,e=[]){let t;switch(n){case"Browser":t=YM(Sn());break;case"Worker":t=`${YM(Sn())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${su}/${r}`}var _T=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}};async function J9(n,e={}){return Fm(n,"GET","/v2/passwordPolicy",rx(n,e))}var X9=6,vT=class{constructor(e){let t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??X9,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){let t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var IT=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Lm(this),this.idTokenSubscription=new Lm(this),this.beforeStateQueue=new _T(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=tx,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=sa(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Om.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await Mm(this,{idToken:e}),r=await ia._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(wi(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(o,o))}):this.directlySetCurrentUser(null)}let t=await this.assertedPersistence.getCurrentUser(),r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let s=this.redirectUser?._redirectEventId,o=r?._redirectEventId,a=await this.tryRedirectSignIn(e);(!s||s===o)&&a?.user&&(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Oe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await xm(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=M9()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(wi(this.app))return Promise.reject(Rm(this));let t=e?Vr(e):null;return t&&Oe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Oe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return wi(this.app)?Promise.reject(Rm(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return wi(this.app)?Promise.reject(Rm(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(sa(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await J9(this),t=new vT(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new vi("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await $9(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){let r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&sa(e)||this._popupRedirectResolver;Oe(t,this,"argument-error"),this.redirectPersistenceManager=await Om.create(this,[sa(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Oe(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(t);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=lx(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);let t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);let r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(wi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&N9(`Error while retrieving App Check token: ${e.error}`),e?.token}};function Z9(n){return Vr(n)}var Lm=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=FM(t=>this.observer=t)}get next(){return Oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var e3={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function t3(n){e3=n}function n3(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function r3(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(sa);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function bT(n,e,t,r){return Vr(n).onIdTokenChanged(e,t,r)}var _pe=n3("rcb"),vpe=new oa(3e4,6e4);var Ipe=new oa(2e3,1e4);var Epe=600*1e3;var wpe=new oa(3e4,6e4);var Tpe=new oa(5e3,15e3);var bpe=encodeURIComponent("fac");var JM="@firebase/auth",XM="1.12.0";var ET=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function i3(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function s3(n){Vs(new lr("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Oe(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:lx(n)},d=new IT(r,i,s,c);return r3(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Vs(new lr("auth-internal",e=>{let t=Z9(e.getProvider("auth").getImmediate());return(r=>new ET(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ii(JM,XM,i3(n)),Ii(JM,XM,"esm2020")}var o3=300,Ape=NM("authIdTokenMaxAge")||o3;function a3(){return document.getElementsByTagName("head")?.[0]??document}t3({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=wT("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",a3().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});s3("Browser");function dx(n){return new fe(function(e){var t=bT(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}function Dx(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var Sx=Dx,Cx=new ar("auth","Firebase",Dx());var Hm=new Lr("@firebase/auth");function l3(n,...e){Hm.logLevel<=we.WARN&&Hm.warn(`Auth (${Ms}): ${n}`,...e)}function Um(n,...e){Hm.logLevel<=we.ERROR&&Hm.error(`Auth (${Ms}): ${n}`,...e)}function jr(n,...e){throw $T(n,...e)}function dr(n,...e){return $T(n,...e)}function BT(n,e,t){let r=Object.assign(Object.assign({},Sx()),{[e]:t});return new ar("auth","Firebase",r).create(e,{appName:n.name})}function aa(n){return BT(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function d3(n,e,t){let r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&jr(n,"argument-error"),BT(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function $T(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return Cx.create(n,...e)}function se(n,e,...t){if(!n)throw $T(e,...t)}function Ti(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Um(e),new Error(e)}function Ai(n,e){n||Ti(e)}function ST(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function h3(){return hx()==="http:"||hx()==="https:"}function hx(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function f3(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(h3()||Gk()||"connection"in navigator)?navigator.onLine:!0}function p3(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var ca=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ai(t>e,"Short delay should be less than long delay!"),this.isMobile=qk()||Wk()}get(){return f3()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function HT(n,e){Ai(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var qm=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ti("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ti("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ti("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var g3={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var m3=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],y3=new ca(3e4,6e4);function qT(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function au(n,e,t,r,i={}){return Rx(n,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});let a=eu(Object.assign({key:n.config.apiKey},o)).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);let d=Object.assign({method:e,headers:c},s);return zk()||(d.referrerPolicy="no-referrer"),n.emulatorConfig&&Ps(n.emulatorConfig.host)&&(d.credentials="include"),qm.fetch()(await Nx(n,n.config.apiHost,t,a),d)})}async function Rx(n,e,t){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},g3),e);try{let i=new CT(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=await s.json();if("needConfirmation"in o)throw Vm(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,d]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Vm(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Vm(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw Vm(n,"user-disabled",o);let h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw BT(n,h,d);jr(n,h)}}catch(i){if(i instanceof An)throw i;jr(n,"network-request-failed",{message:String(i)})}}async function _3(n,e,t,r,i={}){let s=await au(n,e,t,r,i);return"mfaPendingCredential"in s&&jr(n,"multi-factor-auth-required",{_serverResponse:s}),s}async function Nx(n,e,t,r){let i=`${e}${t}?${r}`,s=n,o=s.config.emulator?HT(n.config,i):`${n.config.apiScheme}://${i}`;return m3.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}var CT=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(dr(this.auth,"network-request-failed")),y3.get())})}};function Vm(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=dr(n,e,r);return i.customData._tokenResponse=t,i}async function v3(n,e){return au(n,"POST","/v1/accounts:delete",e)}async function zm(n,e){return au(n,"POST","/v1/accounts:lookup",e)}function rh(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function zT(n,e=!1){let t=jt(n),r=await t.getIdToken(e),i=GT(r);se(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:rh(AT(i.auth_time)),issuedAtTime:rh(AT(i.iat)),expirationTime:rh(AT(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}}function AT(n){return Number(n)*1e3}function GT(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Um("JWT malformed, contained fewer than 3 sections"),null;try{let i=mm(t);return i?JSON.parse(i):(Um("Failed to decode base64 JWT payload"),null)}catch(i){return Um("Caught error parsing JWT payload as JSON",i?.toString()),null}}function fx(n){let e=GT(n);return se(e,"internal-error"),se(typeof e.exp<"u","internal-error"),se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function sh(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof An&&I3(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function I3({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var RT=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var oh=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=rh(this.lastLoginAt),this.creationTime=rh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function Gm(n){var e;let t=n.auth,r=await n.getIdToken(),i=await sh(n,zm(t,{idToken:r}));se(i?.users.length,t,"internal-error");let s=i.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?Px(s.providerUserInfo):[],a=E3(n.providerData,o),c=n.isAnonymous,d=!(n.email&&s.passwordHash)&&!a?.length,h=c?d:!1,g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new oh(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(n,g)}async function WT(n){let e=jt(n);await Gm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function E3(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Px(n){return n.map(e=>{var{providerId:t}=e,r=Xf(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}async function w3(n,e){let t=await Rx(n,{},async()=>{let r=eu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=await Nx(n,i,"/v1/token",`key=${s}`),a=await n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:r};return n.emulatorConfig&&Ps(n.emulatorConfig.host)&&(c.credentials="include"),qm.fetch()(o,c)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function T3(n,e){return au(n,"POST","/v2/accounts:revokeToken",qT(n,e))}var ih=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){se(e.idToken,"internal-error"),se(typeof e.idToken<"u","internal-error"),se(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):fx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){se(e.length!==0,"internal-error");let t=fx(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:r,refreshToken:i,expiresIn:s}=await w3(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(se(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(se(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(se(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Ti("not implemented")}};function js(n,e){se(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Bs=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=Xf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new RT(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new oh(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){let t=await sh(this,this.stsTokenManager.getToken(this.auth,e));return se(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return zT(this,e)}reload(){return WT(this)}_assign(e){this!==e&&(se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Gm(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Dn(this.auth.app))return Promise.reject(aa(this.auth));let e=await this.getIdToken();return await sh(this,v3(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,c,d,h;let g=(r=t.displayName)!==null&&r!==void 0?r:void 0,E=(i=t.email)!==null&&i!==void 0?i:void 0,D=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,R=(o=t.photoURL)!==null&&o!==void 0?o:void 0,M=(a=t.tenantId)!==null&&a!==void 0?a:void 0,k=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,V=(d=t.createdAt)!==null&&d!==void 0?d:void 0,z=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:K,emailVerified:ye,isAnonymous:ze,providerData:re,stsTokenManager:b}=t;se(K&&b,e,"internal-error");let _=ih.fromJSON(this.name,b);se(typeof K=="string",e,"internal-error"),js(g,e.name),js(E,e.name),se(typeof ye=="boolean",e,"internal-error"),se(typeof ze=="boolean",e,"internal-error"),js(D,e.name),js(R,e.name),js(M,e.name),js(k,e.name),js(V,e.name),js(z,e.name);let I=new n({uid:K,auth:e,email:E,emailVerified:ye,displayName:g,isAnonymous:ze,photoURL:R,phoneNumber:D,tenantId:M,stsTokenManager:_,createdAt:V,lastLoginAt:z});return re&&Array.isArray(re)&&(I.providerData=re.map(T=>Object.assign({},T))),k&&(I._redirectEventId=k),I}static async _fromIdTokenResponse(e,t,r=!1){let i=new ih;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Gm(s),s}static async _fromGetAccountInfoResponse(e,t,r){let i=t.users[0];se(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?Px(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new ih;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new oh(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,d),c}};var px=new Map;function bi(n){Ai(n instanceof Function,"Expected a class definition");let e=px.get(n);return e?(Ai(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,px.set(n,e),e)}var b3=(()=>{class n{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){let r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),NT=b3;function jm(n,e,t){return`firebase:${n}:${e}:${t}`}var Wm=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=jm(this.userKey,i.apiKey,s),this.fullPersistenceKey=jm("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=await zm(this.auth,{idToken:e}).catch(()=>{});return t?Bs._fromGetAccountInfoResponse(this.auth,t,e):null}return Bs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new n(bi(NT),e,r);let i=(await Promise.all(t.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d),s=i[0]||bi(NT),o=jm(r,e.config.apiKey,e.name),a=null;for(let d of t)try{let h=await d._get(o);if(h){let g;if(typeof h=="string"){let E=await zm(e,{idToken:h}).catch(()=>{});if(!E)break;g=await Bs._fromGetAccountInfoResponse(e,E,h)}else g=Bs._fromJSON(e,h);d!==s&&(a=g),s=d;break}}catch{}let c=i.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new n(s,e,r):(s=c[0],a&&await s._set(o,a.toJSON()),await Promise.all(t.map(async d=>{if(d!==s)try{await d._remove(o)}catch{}})),new n(s,e,r))}};function gx(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Ox(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(kx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Fx(e))return"Blackberry";if(Vx(e))return"Webos";if(Mx(e))return"Safari";if((e.includes("chrome/")||xx(e))&&!e.includes("edge/"))return"Chrome";if(Lx(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function kx(n=Rt()){return/firefox\//i.test(n)}function Mx(n=Rt()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function xx(n=Rt()){return/crios\//i.test(n)}function Ox(n=Rt()){return/iemobile/i.test(n)}function Lx(n=Rt()){return/android/i.test(n)}function Fx(n=Rt()){return/blackberry/i.test(n)}function Vx(n=Rt()){return/webos/i.test(n)}function KT(n=Rt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function A3(n=Rt()){var e;return KT(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function D3(){return Kk()&&document.documentMode===10}function Ux(n=Rt()){return KT(n)||Lx(n)||Vx(n)||Fx(n)||/windows phone/i.test(n)||Ox(n)}function jx(n,e=[]){let t;switch(n){case"Browser":t=gx(Rt());break;case"Worker":t=`${gx(Rt())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ms}/${r}`}var PT=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}};async function S3(n,e={}){return au(n,"GET","/v2/passwordPolicy",qT(n,e))}var C3=6,kT=class{constructor(e){var t,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:C3,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var MT=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Km(this),this.idTokenSubscription=new Km(this),this.beforeStateQueue=new PT(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Cx,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=bi(t)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await Wm.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await zm(this,{idToken:e}),r=await Bs._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Dn(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=await this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Gm(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=p3()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Dn(this.app))return Promise.reject(aa(this));let t=e?jt(e):null;return t&&se(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Dn(this.app)?Promise.reject(aa(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Dn(this.app)?Promise.reject(aa(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(bi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await S3(this),t=new kT(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ar("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await T3(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){let r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&bi(e)||this._popupRedirectResolver;se(t,this,"argument-error"),this.redirectPersistenceManager=await Wm.create(this,[bi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(se(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(t);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=jx(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);let i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(Dn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&l3(`Error while retrieving App Check token: ${t.error}`),t?.token}};function ny(n){return jt(n)}var Km=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=Xk(t=>this.observer=t)}get next(){return se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var QT={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function R3(n){QT=n}function N3(n){return QT.loadJS(n)}function P3(){return QT.gapiScript}function Bx(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function YT(n,e){let t=tu(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),s=t.getOptions();if(Or(s,e??{}))return i;jr(i,"already-initialized")}return t.initialize({options:e})}function k3(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(bi);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function JT(n,e,t){let r=ny(n);se(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,s=$x(e),{host:o,port:a}=M3(e),c=a===null?"":`:${a}`,d={url:`${s}//${o}${c}/`},h=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){se(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),se(Or(d,r.config.emulator)&&Or(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Ps(o)?(_m(`${s}//${o}${c}`),vm("Auth",!0)):i||x3()}function $x(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function M3(n){let e=$x(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:mx(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:mx(o)}}}function mx(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function x3(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var ah=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ti("not implemented")}_getIdTokenResponse(e){return Ti("not implemented")}_linkToIdToken(e,t){return Ti("not implemented")}_getReauthenticationResolver(e){return Ti("not implemented")}};async function ou(n,e){return _3(n,"POST","/v1/accounts:signInWithIdp",qT(n,e))}var O3="http://localhost",Qm=class n extends ah{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):jr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,s=Xf(t,["providerId","signInMethod"]);if(!r||!i)return null;let o=new n(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){let t=this.buildRequest();return ou(e,t)}_linkToIdToken(e,t){let r=this.buildRequest();return r.idToken=t,ou(e,r)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,ou(e,t)}buildRequest(){let e={requestUri:O3,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=eu(t)}return e}};var ch=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Ym=class extends ch{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var XT=(()=>{class n extends Ym{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return Qm._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:r,oauthAccessToken:i}=t;if(!r&&!i)return null;try{return n.credential(r,i)}catch{return null}}}n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com";return n})();var uh=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){let s=await Bs._fromIdTokenResponse(e,r,i),o=yx(r);return new n({user:s,providerId:o,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);let i=yx(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})}};function yx(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var xT=class n extends An{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function Hx(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?xT._fromErrorAndOperation(n,s,e,r):s})}async function L3(n,e,t=!1){let r=await sh(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return uh._forOperation(n,"link",r)}async function F3(n,e,t=!1){let{auth:r}=n;if(Dn(r.app))return Promise.reject(aa(r));let i="reauthenticate";try{let s=await sh(n,Hx(r,i,e,n),t);se(s.idToken,r,"internal-error");let o=GT(s.idToken);se(o,r,"internal-error");let{sub:a}=o;return se(n.uid===a,r,"user-mismatch"),uh._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&jr(r,"user-mismatch"),s}}async function V3(n,e,t=!1){if(Dn(n.app))return Promise.reject(aa(n));let r="signIn",i=await Hx(n,r,e),s=await uh._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}function ZT(n,e,t,r){return jt(n).onIdTokenChanged(e,t,r)}function eb(n,e,t){return jt(n).beforeAuthStateChanged(e,t)}function tb(n){return jt(n).signOut()}var Jm="__sak";var Xm=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Jm,"1"),this.storage.removeItem(Jm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var U3=1e3,j3=10,B3=(()=>{class n extends Xm{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Ux(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&t(r,s,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,c,d)=>{this.notifyListeners(a,d)});return}let i=t.key;r?this.detachListener():this.stopPolling();let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);D3()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,j3):s()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},U3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,r){await super._set(t,r),this.localCache[t]=JSON.stringify(r)}async _get(t){let r=await super._get(t);return this.localCache[t]=JSON.stringify(r),r}async _remove(t){await super._remove(t),delete this.localCache[t]}}return n.type="LOCAL",n})(),qx=B3;var $3=(()=>{class n extends Xm{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),nb=$3;function H3(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}var q3=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){let r=t,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let c=Array.from(a).map(async h=>h(r.origin,o)),d=await H3(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:d})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function rb(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var OT=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{let d=rb("",20);i.port1.start();let h=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(g){let E=g;if(E.data.eventId===d)switch(E.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(E.data.response);break;default:clearTimeout(h),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}};function Ur(){return window}function z3(n){Ur().location.href=n}function zx(){return typeof Ur().WorkerGlobalScope<"u"&&typeof Ur().importScripts=="function"}async function G3(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function W3(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function K3(){return zx()?self:null}var Gx="firebaseLocalStorageDb",Q3=1,Zm="firebaseLocalStorage",Wx="fbase_key",ua=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function ry(n,e){return n.transaction([Zm],e?"readwrite":"readonly").objectStore(Zm)}function Y3(){let n=indexedDB.deleteDatabase(Gx);return new ua(n).toPromise()}function LT(){let n=indexedDB.open(Gx,Q3);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(Zm,{keyPath:Wx})}catch(i){t(i)}}),n.addEventListener("success",async()=>{let r=n.result;r.objectStoreNames.contains(Zm)?e(r):(r.close(),await Y3(),e(await LT()))})})}async function _x(n,e,t){let r=ry(n,!0).put({[Wx]:e,value:t});return new ua(r).toPromise()}async function J3(n,e){let t=ry(n,!1).get(e),r=await new ua(t).toPromise();return r===void 0?null:r.value}function vx(n,e){let t=ry(n,!0).delete(e);return new ua(t).toPromise()}var X3=800,Z3=3,eG=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await LT(),this.db)}async _withRetries(t){let r=0;for(;;)try{let i=await this._openDb();return await t(i)}catch(i){if(r++>Z3)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return zx()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=q3._getInstance(K3()),this.receiver._subscribe("keyChanged",async(t,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(t,r)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await G3(),!this.activeServiceWorker)return;this.sender=new OT(this.activeServiceWorker);let i=await this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||W3()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let t=await LT();return await _x(t,Jm,"1"),await vx(t,Jm),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,r){return this._withPendingWrite(async()=>(await this._withRetries(i=>_x(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)))}async _get(t){let r=await this._withRetries(i=>J3(i,t));return this.localCache[t]=r,r}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(r=>vx(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){let t=await this._withRetries(s=>{let o=ry(s,!1).getAll();return new ua(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:s,value:o}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),X3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),Kx=eG;var mme=Bx("rcb"),yme=new ca(3e4,6e4);function Qx(n,e){return e?bi(e):(se(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var lh=class extends ah{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ou(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ou(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ou(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function tG(n){return V3(n.auth,new lh(n),n.bypassAuthState)}function nG(n){let{auth:e,user:t}=n;return se(t,e,"internal-error"),F3(t,new lh(n),n.bypassAuthState)}async function rG(n){let{auth:e,user:t}=n;return se(t,e,"internal-error"),L3(t,new lh(n),n.bypassAuthState)}var ey=class{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){let{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return tG;case"linkViaPopup":case"linkViaRedirect":return rG;case"reauthViaPopup":case"reauthViaRedirect":return nG;default:jr(this.auth,"internal-error")}}resolve(e){Ai(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ai(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var iG=new ca(2e3,1e4);async function ib(n,e,t){if(Dn(n.app))return Promise.reject(dr(n,"operation-not-supported-in-this-environment"));let r=ny(n);d3(n,e,ch);let i=Qx(r,t);return new sG(r,"signInViaPopup",e,i).executeNotNull()}var sG=(()=>{class n extends ey{constructor(t,r,i,s,o){super(t,r,s,o),this.provider=i,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}async executeNotNull(){let t=await this.execute();return se(t,this.auth,"internal-error"),t}async onExecution(){Ai(this.filter.length===1,"Popup operations only handle one event");let t=rb();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(dr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(dr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){let t=()=>{var r,i;if(!((i=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(dr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,iG.get())};t()}}n.currentPopupAction=null;return n})(),oG="pendingRedirect",Bm=new Map,FT=class extends ey{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Bm.get(this.auth._key());if(!e){try{let r=await aG(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Bm.set(this.auth._key(),e)}return this.bypassAuthState||Bm.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function aG(n,e){let t=lG(e),r=uG(n);if(!await r._isAvailable())return!1;let i=await r._get(t)==="true";return await r._remove(t),i}function cG(n,e){Bm.set(n._key(),e)}function uG(n){return bi(n._redirectPersistence)}function lG(n){return jm(oG,n.config.apiKey,n.name)}async function dG(n,e,t=!1){if(Dn(n.app))return Promise.reject(aa(n));let r=ny(n),i=Qx(r,e),o=await new FT(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}var hG=600*1e3,VT=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!fG(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!Yx(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(dr(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=hG&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ix(e))}saveEventToCache(e){this.cachedEventUids.add(Ix(e)),this.lastProcessedEventTime=Date.now()}};function Ix(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Yx({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function fG(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Yx(n);default:return!1}}async function pG(n,e={}){return au(n,"GET","/v1/projects",e)}var gG=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,mG=/^https?/;async function yG(n){if(n.config.emulator)return;let{authorizedDomains:e}=await pG(n);for(let t of e)try{if(_G(t))return}catch{}jr(n,"unauthorized-domain")}function _G(n){let e=ST(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!mG.test(t))return!1;if(gG.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var vG=new ca(3e4,6e4);function Ex(){let n=Ur().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function IG(n){return new Promise((e,t)=>{var r,i,s;function o(){Ex(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ex(),t(dr(n,"network-request-failed"))},timeout:vG.get()})}if(!((i=(r=Ur().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Ur().gapi)===null||s===void 0)&&s.load)o();else{let a=Bx("iframefcb");return Ur()[a]=()=>{gapi.load?o():t(dr(n,"network-request-failed"))},N3(`${P3()}?onload=${a}`).catch(c=>t(c))}}).catch(e=>{throw $m=null,e})}var $m=null;function EG(n){return $m=$m||IG(n),$m}var wG=new ca(5e3,15e3),TG="__/auth/iframe",bG="emulator/auth/iframe",AG={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},DG=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function SG(n){let e=n.config;se(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?HT(e,bG):`https://${n.config.authDomain}/${TG}`,r={apiKey:e.apiKey,appName:n.name,v:Ms},i=DG.get(n.config.apiHost);i&&(r.eid=i);let s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${eu(r).slice(1)}`}async function CG(n){let e=await EG(n),t=Ur().gapi;return se(t,n,"internal-error"),e.open({where:document.body,url:SG(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:AG,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});let o=dr(n,"network-request-failed"),a=Ur().setTimeout(()=>{s(o)},wG.get());function c(){Ur().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{s(o)})}))}var RG={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},NG=500,PG=600,kG="_blank",MG="http://localhost",ty=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function xG(n,e,t,r=NG,i=PG){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},RG),{width:r.toString(),height:i.toString(),top:s,left:o}),d=Rt().toLowerCase();t&&(a=xx(d)?kG:t),kx(d)&&(e=e||MG,c.scrollbars="yes");let h=Object.entries(c).reduce((E,[D,R])=>`${E}${D}=${R},`,"");if(A3(d)&&a!=="_self")return OG(e||"",a),new ty(null);let g=window.open(e||"",a,h);se(g,n,"popup-blocked");try{g.focus()}catch{}return new ty(g)}function OG(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var LG="__/auth/handler",FG="emulator/auth/handler",VG=encodeURIComponent("fac");async function wx(n,e,t,r,i,s){se(n.config.authDomain,n,"auth-domain-config-required"),se(n.config.apiKey,n,"invalid-api-key");let o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Ms,eventId:i};if(e instanceof ch){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",Jk(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,g]of Object.entries(s||{}))o[h]=g}if(e instanceof Ym){let h=e.getScopes().filter(g=>g!=="");h.length>0&&(o.scopes=h.join(","))}n.tenantId&&(o.tid=n.tenantId);let a=o;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let c=await n._getAppCheckToken(),d=c?`#${VG}=${encodeURIComponent(c)}`:"";return`${UG(n)}?${eu(a).slice(1)}${d}`}function UG({config:n}){return n.emulator?HT(n,FG):`https://${n.authDomain}/${LG}`}var DT="webStorageSupport",UT=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=nb,this._completeRedirectFn=dG,this._overrideRedirectResult=cG}async _openPopup(e,t,r,i){var s;Ai((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=await wx(e,t,r,ST(),i);return xG(e,o,rb())}async _openRedirect(e,t,r,i){await this._originValidation(e);let s=await wx(e,t,r,ST(),i);return z3(s),new Promise(()=>{})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(Ai(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){let t=await CG(e),r=new VT(e);return t.register("authEvent",i=>(se(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(DT,{type:DT},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[DT];o!==void 0&&t(!!o),jr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=yG(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Ux()||Mx()||KT()}},Jx=UT;var Tx="@firebase/auth",bx="1.10.8";var jT=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function jG(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function BG(n){cr(new sn("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;se(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:jx(n)},d=new MT(r,i,s,c);return k3(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),cr(new sn("auth-internal",e=>{let t=ny(e.getProvider("auth").getImmediate());return(r=>new jT(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),et(Tx,bx,jG(n)),et(Tx,bx,"esm2017")}var $G=300,HG=Nw("authIdTokenMaxAge")||$G,Ax=null,qG=n=>async e=>{let t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>HG)return;let i=t?.token;Ax!==i&&(Ax=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function sb(n=ta()){let e=tu(n,"auth");if(e.isInitialized())return e.getImmediate();let t=YT(n,{popupRedirectResolver:Jx,persistence:[Kx,qx,nb]}),r=Nw("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=qG(s.toString());eb(t,o,()=>o(t.currentUser)),ZT(t,a=>o(a))}}let i=Cw("auth");return i&&JT(t,`http://${i}`),t}function zG(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}R3({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=dr("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",zG().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});BG("Browser");var Xx="auth",la=class{constructor(e){return e}},dh=class{constructor(){return ru(Xx)}};var ob=new J("angularfire2.auth-instances");function L5(n,e){let t=Kd(Xx,n,e);return t&&new la(t)}function F5(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new la(r)}}var V5={provide:dh,deps:[[new wn,ob]]},U5={provide:la,useFactory:L5,deps:[[new wn,ob],_i]};function oye(n,...e){return et("angularfire",xs.full,"auth"),Zn([U5,V5,{provide:ob,useFactory:F5(n),multi:!0,deps:[Ue,At,Os,ra,[new wn,iu],...e]}])}var Zx=on(dx,!0);var aye=on(sb,!0);var eO=on(ib,!0,2);var tO=on(tb,!0,2);var nO=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},rO={};var Di,ab;(function(){var n;function e(b,_){function I(){}I.prototype=_.prototype,b.F=_.prototype,b.prototype=new I,b.prototype.constructor=b,b.D=function(T,w,C){for(var v=Array(arguments.length-2),We=2;We<arguments.length;We++)v[We-2]=arguments[We];return _.prototype[w].apply(T,v)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(b,_,I){I||(I=0);let T=Array(16);if(typeof _=="string")for(var w=0;w<16;++w)T[w]=_.charCodeAt(I++)|_.charCodeAt(I++)<<8|_.charCodeAt(I++)<<16|_.charCodeAt(I++)<<24;else for(w=0;w<16;++w)T[w]=_[I++]|_[I++]<<8|_[I++]<<16|_[I++]<<24;_=b.g[0],I=b.g[1],w=b.g[2];let C=b.g[3],v;v=_+(C^I&(w^C))+T[0]+3614090360&4294967295,_=I+(v<<7&4294967295|v>>>25),v=C+(w^_&(I^w))+T[1]+3905402710&4294967295,C=_+(v<<12&4294967295|v>>>20),v=w+(I^C&(_^I))+T[2]+606105819&4294967295,w=C+(v<<17&4294967295|v>>>15),v=I+(_^w&(C^_))+T[3]+3250441966&4294967295,I=w+(v<<22&4294967295|v>>>10),v=_+(C^I&(w^C))+T[4]+4118548399&4294967295,_=I+(v<<7&4294967295|v>>>25),v=C+(w^_&(I^w))+T[5]+1200080426&4294967295,C=_+(v<<12&4294967295|v>>>20),v=w+(I^C&(_^I))+T[6]+2821735955&4294967295,w=C+(v<<17&4294967295|v>>>15),v=I+(_^w&(C^_))+T[7]+4249261313&4294967295,I=w+(v<<22&4294967295|v>>>10),v=_+(C^I&(w^C))+T[8]+1770035416&4294967295,_=I+(v<<7&4294967295|v>>>25),v=C+(w^_&(I^w))+T[9]+2336552879&4294967295,C=_+(v<<12&4294967295|v>>>20),v=w+(I^C&(_^I))+T[10]+4294925233&4294967295,w=C+(v<<17&4294967295|v>>>15),v=I+(_^w&(C^_))+T[11]+2304563134&4294967295,I=w+(v<<22&4294967295|v>>>10),v=_+(C^I&(w^C))+T[12]+1804603682&4294967295,_=I+(v<<7&4294967295|v>>>25),v=C+(w^_&(I^w))+T[13]+4254626195&4294967295,C=_+(v<<12&4294967295|v>>>20),v=w+(I^C&(_^I))+T[14]+2792965006&4294967295,w=C+(v<<17&4294967295|v>>>15),v=I+(_^w&(C^_))+T[15]+1236535329&4294967295,I=w+(v<<22&4294967295|v>>>10),v=_+(w^C&(I^w))+T[1]+4129170786&4294967295,_=I+(v<<5&4294967295|v>>>27),v=C+(I^w&(_^I))+T[6]+3225465664&4294967295,C=_+(v<<9&4294967295|v>>>23),v=w+(_^I&(C^_))+T[11]+643717713&4294967295,w=C+(v<<14&4294967295|v>>>18),v=I+(C^_&(w^C))+T[0]+3921069994&4294967295,I=w+(v<<20&4294967295|v>>>12),v=_+(w^C&(I^w))+T[5]+3593408605&4294967295,_=I+(v<<5&4294967295|v>>>27),v=C+(I^w&(_^I))+T[10]+38016083&4294967295,C=_+(v<<9&4294967295|v>>>23),v=w+(_^I&(C^_))+T[15]+3634488961&4294967295,w=C+(v<<14&4294967295|v>>>18),v=I+(C^_&(w^C))+T[4]+3889429448&4294967295,I=w+(v<<20&4294967295|v>>>12),v=_+(w^C&(I^w))+T[9]+568446438&4294967295,_=I+(v<<5&4294967295|v>>>27),v=C+(I^w&(_^I))+T[14]+3275163606&4294967295,C=_+(v<<9&4294967295|v>>>23),v=w+(_^I&(C^_))+T[3]+4107603335&4294967295,w=C+(v<<14&4294967295|v>>>18),v=I+(C^_&(w^C))+T[8]+1163531501&4294967295,I=w+(v<<20&4294967295|v>>>12),v=_+(w^C&(I^w))+T[13]+2850285829&4294967295,_=I+(v<<5&4294967295|v>>>27),v=C+(I^w&(_^I))+T[2]+4243563512&4294967295,C=_+(v<<9&4294967295|v>>>23),v=w+(_^I&(C^_))+T[7]+1735328473&4294967295,w=C+(v<<14&4294967295|v>>>18),v=I+(C^_&(w^C))+T[12]+2368359562&4294967295,I=w+(v<<20&4294967295|v>>>12),v=_+(I^w^C)+T[5]+4294588738&4294967295,_=I+(v<<4&4294967295|v>>>28),v=C+(_^I^w)+T[8]+2272392833&4294967295,C=_+(v<<11&4294967295|v>>>21),v=w+(C^_^I)+T[11]+1839030562&4294967295,w=C+(v<<16&4294967295|v>>>16),v=I+(w^C^_)+T[14]+4259657740&4294967295,I=w+(v<<23&4294967295|v>>>9),v=_+(I^w^C)+T[1]+2763975236&4294967295,_=I+(v<<4&4294967295|v>>>28),v=C+(_^I^w)+T[4]+1272893353&4294967295,C=_+(v<<11&4294967295|v>>>21),v=w+(C^_^I)+T[7]+4139469664&4294967295,w=C+(v<<16&4294967295|v>>>16),v=I+(w^C^_)+T[10]+3200236656&4294967295,I=w+(v<<23&4294967295|v>>>9),v=_+(I^w^C)+T[13]+681279174&4294967295,_=I+(v<<4&4294967295|v>>>28),v=C+(_^I^w)+T[0]+3936430074&4294967295,C=_+(v<<11&4294967295|v>>>21),v=w+(C^_^I)+T[3]+3572445317&4294967295,w=C+(v<<16&4294967295|v>>>16),v=I+(w^C^_)+T[6]+76029189&4294967295,I=w+(v<<23&4294967295|v>>>9),v=_+(I^w^C)+T[9]+3654602809&4294967295,_=I+(v<<4&4294967295|v>>>28),v=C+(_^I^w)+T[12]+3873151461&4294967295,C=_+(v<<11&4294967295|v>>>21),v=w+(C^_^I)+T[15]+530742520&4294967295,w=C+(v<<16&4294967295|v>>>16),v=I+(w^C^_)+T[2]+3299628645&4294967295,I=w+(v<<23&4294967295|v>>>9),v=_+(w^(I|~C))+T[0]+4096336452&4294967295,_=I+(v<<6&4294967295|v>>>26),v=C+(I^(_|~w))+T[7]+1126891415&4294967295,C=_+(v<<10&4294967295|v>>>22),v=w+(_^(C|~I))+T[14]+2878612391&4294967295,w=C+(v<<15&4294967295|v>>>17),v=I+(C^(w|~_))+T[5]+4237533241&4294967295,I=w+(v<<21&4294967295|v>>>11),v=_+(w^(I|~C))+T[12]+1700485571&4294967295,_=I+(v<<6&4294967295|v>>>26),v=C+(I^(_|~w))+T[3]+2399980690&4294967295,C=_+(v<<10&4294967295|v>>>22),v=w+(_^(C|~I))+T[10]+4293915773&4294967295,w=C+(v<<15&4294967295|v>>>17),v=I+(C^(w|~_))+T[1]+2240044497&4294967295,I=w+(v<<21&4294967295|v>>>11),v=_+(w^(I|~C))+T[8]+1873313359&4294967295,_=I+(v<<6&4294967295|v>>>26),v=C+(I^(_|~w))+T[15]+4264355552&4294967295,C=_+(v<<10&4294967295|v>>>22),v=w+(_^(C|~I))+T[6]+2734768916&4294967295,w=C+(v<<15&4294967295|v>>>17),v=I+(C^(w|~_))+T[13]+1309151649&4294967295,I=w+(v<<21&4294967295|v>>>11),v=_+(w^(I|~C))+T[4]+4149444226&4294967295,_=I+(v<<6&4294967295|v>>>26),v=C+(I^(_|~w))+T[11]+3174756917&4294967295,C=_+(v<<10&4294967295|v>>>22),v=w+(_^(C|~I))+T[2]+718787259&4294967295,w=C+(v<<15&4294967295|v>>>17),v=I+(C^(w|~_))+T[9]+3951481745&4294967295,b.g[0]=b.g[0]+_&4294967295,b.g[1]=b.g[1]+(w+(v<<21&4294967295|v>>>11))&4294967295,b.g[2]=b.g[2]+w&4294967295,b.g[3]=b.g[3]+C&4294967295}r.prototype.v=function(b,_){_===void 0&&(_=b.length);let I=_-this.blockSize,T=this.C,w=this.h,C=0;for(;C<_;){if(w==0)for(;C<=I;)i(this,b,C),C+=this.blockSize;if(typeof b=="string"){for(;C<_;)if(T[w++]=b.charCodeAt(C++),w==this.blockSize){i(this,T),w=0;break}}else for(;C<_;)if(T[w++]=b[C++],w==this.blockSize){i(this,T),w=0;break}}this.h=w,this.o+=_},r.prototype.A=function(){var b=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);b[0]=128;for(var _=1;_<b.length-8;++_)b[_]=0;_=this.o*8;for(var I=b.length-8;I<b.length;++I)b[I]=_&255,_/=256;for(this.v(b),b=Array(16),_=0,I=0;I<4;++I)for(let T=0;T<32;T+=8)b[_++]=this.g[I]>>>T&255;return b};function s(b,_){var I=a;return Object.prototype.hasOwnProperty.call(I,b)?I[b]:I[b]=_(b)}function o(b,_){this.h=_;let I=[],T=!0;for(let w=b.length-1;w>=0;w--){let C=b[w]|0;T&&C==_||(I[w]=C,T=!1)}this.g=I}var a={};function c(b){return-128<=b&&b<128?s(b,function(_){return new o([_|0],_<0?-1:0)}):new o([b|0],b<0?-1:0)}function d(b){if(isNaN(b)||!isFinite(b))return g;if(b<0)return k(d(-b));let _=[],I=1;for(let T=0;b>=I;T++)_[T]=b/I|0,I*=4294967296;return new o(_,0)}function h(b,_){if(b.length==0)throw Error("number format error: empty string");if(_=_||10,_<2||36<_)throw Error("radix out of range: "+_);if(b.charAt(0)=="-")return k(h(b.substring(1),_));if(b.indexOf("-")>=0)throw Error('number format error: interior "-" character');let I=d(Math.pow(_,8)),T=g;for(let C=0;C<b.length;C+=8){var w=Math.min(8,b.length-C);let v=parseInt(b.substring(C,C+w),_);w<8?(w=d(Math.pow(_,w)),T=T.j(w).add(d(v))):(T=T.j(I),T=T.add(d(v)))}return T}var g=c(0),E=c(1),D=c(16777216);n=o.prototype,n.m=function(){if(M(this))return-k(this).m();let b=0,_=1;for(let I=0;I<this.g.length;I++){let T=this.i(I);b+=(T>=0?T:4294967296+T)*_,_*=4294967296}return b},n.toString=function(b){if(b=b||10,b<2||36<b)throw Error("radix out of range: "+b);if(R(this))return"0";if(M(this))return"-"+k(this).toString(b);let _=d(Math.pow(b,6));var I=this;let T="";for(;;){let w=ye(I,_).g;I=V(I,w.j(_));let C=((I.g.length>0?I.g[0]:I.h)>>>0).toString(b);if(I=w,R(I))return C+T;for(;C.length<6;)C="0"+C;T=C+T}},n.i=function(b){return b<0?0:b<this.g.length?this.g[b]:this.h};function R(b){if(b.h!=0)return!1;for(let _=0;_<b.g.length;_++)if(b.g[_]!=0)return!1;return!0}function M(b){return b.h==-1}n.l=function(b){return b=V(this,b),M(b)?-1:R(b)?0:1};function k(b){let _=b.g.length,I=[];for(let T=0;T<_;T++)I[T]=~b.g[T];return new o(I,~b.h).add(E)}n.abs=function(){return M(this)?k(this):this},n.add=function(b){let _=Math.max(this.g.length,b.g.length),I=[],T=0;for(let w=0;w<=_;w++){let C=T+(this.i(w)&65535)+(b.i(w)&65535),v=(C>>>16)+(this.i(w)>>>16)+(b.i(w)>>>16);T=v>>>16,C&=65535,v&=65535,I[w]=v<<16|C}return new o(I,I[I.length-1]&-2147483648?-1:0)};function V(b,_){return b.add(k(_))}n.j=function(b){if(R(this)||R(b))return g;if(M(this))return M(b)?k(this).j(k(b)):k(k(this).j(b));if(M(b))return k(this.j(k(b)));if(this.l(D)<0&&b.l(D)<0)return d(this.m()*b.m());let _=this.g.length+b.g.length,I=[];for(var T=0;T<2*_;T++)I[T]=0;for(T=0;T<this.g.length;T++)for(let w=0;w<b.g.length;w++){let C=this.i(T)>>>16,v=this.i(T)&65535,We=b.i(w)>>>16,an=b.i(w)&65535;I[2*T+2*w]+=v*an,z(I,2*T+2*w),I[2*T+2*w+1]+=C*an,z(I,2*T+2*w+1),I[2*T+2*w+1]+=v*We,z(I,2*T+2*w+1),I[2*T+2*w+2]+=C*We,z(I,2*T+2*w+2)}for(b=0;b<_;b++)I[b]=I[2*b+1]<<16|I[2*b];for(b=_;b<2*_;b++)I[b]=0;return new o(I,0)};function z(b,_){for(;(b[_]&65535)!=b[_];)b[_+1]+=b[_]>>>16,b[_]&=65535,_++}function K(b,_){this.g=b,this.h=_}function ye(b,_){if(R(_))throw Error("division by zero");if(R(b))return new K(g,g);if(M(b))return _=ye(k(b),_),new K(k(_.g),k(_.h));if(M(_))return _=ye(b,k(_)),new K(k(_.g),_.h);if(b.g.length>30){if(M(b)||M(_))throw Error("slowDivide_ only works with positive integers.");for(var I=E,T=_;T.l(b)<=0;)I=ze(I),T=ze(T);var w=re(I,1),C=re(T,1);for(T=re(T,2),I=re(I,2);!R(T);){var v=C.add(T);v.l(b)<=0&&(w=w.add(I),C=v),T=re(T,1),I=re(I,1)}return _=V(b,w.j(_)),new K(w,_)}for(w=g;b.l(_)>=0;){for(I=Math.max(1,Math.floor(b.m()/_.m())),T=Math.ceil(Math.log(I)/Math.LN2),T=T<=48?1:Math.pow(2,T-48),C=d(I),v=C.j(_);M(v)||v.l(b)>0;)I-=T,C=d(I),v=C.j(_);R(C)&&(C=E),w=w.add(C),b=V(b,v)}return new K(w,b)}n.B=function(b){return ye(this,b).h},n.and=function(b){let _=Math.max(this.g.length,b.g.length),I=[];for(let T=0;T<_;T++)I[T]=this.i(T)&b.i(T);return new o(I,this.h&b.h)},n.or=function(b){let _=Math.max(this.g.length,b.g.length),I=[];for(let T=0;T<_;T++)I[T]=this.i(T)|b.i(T);return new o(I,this.h|b.h)},n.xor=function(b){let _=Math.max(this.g.length,b.g.length),I=[];for(let T=0;T<_;T++)I[T]=this.i(T)^b.i(T);return new o(I,this.h^b.h)};function ze(b){let _=b.g.length+1,I=[];for(let T=0;T<_;T++)I[T]=b.i(T)<<1|b.i(T-1)>>>31;return new o(I,b.h)}function re(b,_){let I=_>>5;_%=32;let T=b.g.length-I,w=[];for(let C=0;C<T;C++)w[C]=_>0?b.i(C+I)>>>_|b.i(C+I+1)<<32-_:b.i(C+I);return new o(w,b.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,ab=rO.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=h,Di=rO.Integer=o}).apply(typeof nO<"u"?nO:typeof self<"u"?self:typeof window<"u"?window:{});var iy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Si={};var cb,j5,cu,ub,hh,sy,lb,db,hb;(function(){var n,e=Object.defineProperty;function t(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof iy=="object"&&iy];for(var p=0;p<l.length;++p){var y=l[p];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var r=t(this);function i(l,p){if(p)e:{var y=r;l=l.split(".");for(var S=0;S<l.length-1;S++){var N=l[S];if(!(N in y))break e;y=y[N]}l=l[l.length-1],S=y[l],p=p(S),p!=S&&p!=null&&e(y,l,{configurable:!0,writable:!0,value:p})}}i("Symbol.dispose",function(l){return l||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(l){return l||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(l){return l||function(p){var y=[],S;for(S in p)Object.prototype.hasOwnProperty.call(p,S)&&y.push([S,p[S]]);return y}});var s=s||{},o=this||self;function a(l){var p=typeof l;return p=="object"&&l!=null||p=="function"}function c(l,p,y){return l.call.apply(l.bind,arguments)}function d(l,p,y){return d=c,d.apply(null,arguments)}function h(l,p){var y=Array.prototype.slice.call(arguments,1);return function(){var S=y.slice();return S.push.apply(S,arguments),l.apply(this,S)}}function g(l,p){function y(){}y.prototype=p.prototype,l.Z=p.prototype,l.prototype=new y,l.prototype.constructor=l,l.Ob=function(S,N,x){for(var H=Array(arguments.length-2),ie=2;ie<arguments.length;ie++)H[ie-2]=arguments[ie];return p.prototype[N].apply(S,H)}}var E=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?l=>l&&AsyncContext.Snapshot.wrap(l):l=>l;function D(l){let p=l.length;if(p>0){let y=Array(p);for(let S=0;S<p;S++)y[S]=l[S];return y}return[]}function R(l,p){for(let S=1;S<arguments.length;S++){let N=arguments[S];var y=typeof N;if(y=y!="object"?y:N?Array.isArray(N)?"array":y:"null",y=="array"||y=="object"&&typeof N.length=="number"){y=l.length||0;let x=N.length||0;l.length=y+x;for(let H=0;H<x;H++)l[y+H]=N[H]}else l.push(N)}}class M{constructor(p,y){this.i=p,this.j=y,this.h=0,this.g=null}get(){let p;return this.h>0?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function k(l){o.setTimeout(()=>{throw l},0)}function V(){var l=b;let p=null;return l.g&&(p=l.g,l.g=l.g.next,l.g||(l.h=null),p.next=null),p}class z{constructor(){this.h=this.g=null}add(p,y){let S=K.get();S.set(p,y),this.h?this.h.next=S:this.g=S,this.h=S}}var K=new M(()=>new ye,l=>l.reset());class ye{constructor(){this.next=this.g=this.h=null}set(p,y){this.h=p,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let ze,re=!1,b=new z,_=()=>{let l=Promise.resolve(void 0);ze=()=>{l.then(I)}};function I(){for(var l;l=V();){try{l.h.call(l.g)}catch(y){k(y)}var p=K;p.j(l),p.h<100&&(p.h++,l.next=p.g,p.g=l)}re=!1}function T(){this.u=this.u,this.C=this.C}T.prototype.u=!1,T.prototype.dispose=function(){this.u||(this.u=!0,this.N())},T.prototype[Symbol.dispose]=function(){this.dispose()},T.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function w(l,p){this.type=l,this.g=this.target=p,this.defaultPrevented=!1}w.prototype.h=function(){this.defaultPrevented=!0};var C=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var l=!1,p=Object.defineProperty({},"passive",{get:function(){l=!0}});try{let y=()=>{};o.addEventListener("test",y,p),o.removeEventListener("test",y,p)}catch{}return l})();function v(l){return/^[\s\xa0]*$/.test(l)}function We(l,p){w.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l&&this.init(l,p)}g(We,w),We.prototype.init=function(l,p){let y=this.type=l.type,S=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;this.target=l.target||l.srcElement,this.g=p,p=l.relatedTarget,p||(y=="mouseover"?p=l.fromElement:y=="mouseout"&&(p=l.toElement)),this.relatedTarget=p,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=l.pointerType,this.state=l.state,this.i=l,l.defaultPrevented&&We.Z.h.call(this)},We.prototype.h=function(){We.Z.h.call(this);let l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var an="closure_listenable_"+(Math.random()*1e6|0),G_=0;function no(l,p,y,S,N){this.listener=l,this.proxy=null,this.src=p,this.type=y,this.capture=!!S,this.ha=N,this.key=++G_,this.da=this.fa=!1}function mr(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Ui(l,p,y){for(let S in l)p.call(y,l[S],S,l)}function af(l,p){for(let y in l)p.call(void 0,l[y],y,l)}function cf(l){let p={};for(let y in l)p[y]=l[y];return p}let Hn="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _t(l,p){let y,S;for(let N=1;N<arguments.length;N++){S=arguments[N];for(y in S)l[y]=S[y];for(let x=0;x<Hn.length;x++)y=Hn[x],Object.prototype.hasOwnProperty.call(S,y)&&(l[y]=S[y])}}function Va(l){this.src=l,this.g={},this.h=0}Va.prototype.add=function(l,p,y,S,N){let x=l.toString();l=this.g[x],l||(l=this.g[x]=[],this.h++);let H=cl(l,p,S,N);return H>-1?(p=l[H],y||(p.fa=!1)):(p=new no(p,this.src,x,!!S,N),p.fa=y,l.push(p)),p};function Xr(l,p){let y=p.type;if(y in l.g){var S=l.g[y],N=Array.prototype.indexOf.call(S,p,void 0),x;(x=N>=0)&&Array.prototype.splice.call(S,N,1),x&&(mr(p),l.g[y].length==0&&(delete l.g[y],l.h--))}}function cl(l,p,y,S){for(let N=0;N<l.length;++N){let x=l[N];if(!x.da&&x.listener==p&&x.capture==!!y&&x.ha==S)return N}return-1}var Zr="closure_lm_"+(Math.random()*1e6|0),ul={};function uf(l,p,y,S,N){if(S&&S.once)return ja(l,p,y,S,N);if(Array.isArray(p)){for(let x=0;x<p.length;x++)uf(l,p[x],y,S,N);return null}return y=qa(y),l&&l[an]?l.J(p,y,a(S)?!!S.capture:!!S,N):ro(l,p,y,!1,S,N)}function ro(l,p,y,S,N,x){if(!p)throw Error("Invalid event type");let H=a(N)?!!N.capture:!!N,ie=Ha(l);if(ie||(l[Zr]=ie=new Va(l)),y=ie.add(p,y,S,H,x),y.proxy)return y;if(S=Ua(),y.proxy=S,S.src=l,S.listener=y,l.addEventListener)C||(N=H),N===void 0&&(N=!1),l.addEventListener(p.toString(),S,N);else if(l.attachEvent)l.attachEvent($a(p.toString()),S);else if(l.addListener&&l.removeListener)l.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return y}function Ua(){function l(y){return p.call(l.src,l.listener,y)}let p=lf;return l}function ja(l,p,y,S,N){if(Array.isArray(p)){for(let x=0;x<p.length;x++)ja(l,p[x],y,S,N);return null}return y=qa(y),l&&l[an]?l.K(p,y,a(S)?!!S.capture:!!S,N):ro(l,p,y,!0,S,N)}function Ba(l,p,y,S,N){if(Array.isArray(p))for(var x=0;x<p.length;x++)Ba(l,p[x],y,S,N);else S=a(S)?!!S.capture:!!S,y=qa(y),l&&l[an]?(l=l.i,x=String(p).toString(),x in l.g&&(p=l.g[x],y=cl(p,y,S,N),y>-1&&(mr(p[y]),Array.prototype.splice.call(p,y,1),p.length==0&&(delete l.g[x],l.h--)))):l&&(l=Ha(l))&&(p=l.g[p.toString()],l=-1,p&&(l=cl(p,y,S,N)),(y=l>-1?p[l]:null)&&io(y))}function io(l){if(typeof l!="number"&&l&&!l.da){var p=l.src;if(p&&p[an])Xr(p.i,l);else{var y=l.type,S=l.proxy;p.removeEventListener?p.removeEventListener(y,S,l.capture):p.detachEvent?p.detachEvent($a(y),S):p.addListener&&p.removeListener&&p.removeListener(S),(y=Ha(p))?(Xr(y,l),y.h==0&&(y.src=null,p[Zr]=null)):mr(l)}}}function $a(l){return l in ul?ul[l]:ul[l]="on"+l}function lf(l,p){if(l.da)l=!0;else{p=new We(p,this);let y=l.listener,S=l.ha||l.src;l.fa&&io(l),l=y.call(S,p)}return l}function Ha(l){return l=l[Zr],l instanceof Va?l:null}var ll="__closure_events_fn_"+(Math.random()*1e9>>>0);function qa(l){return typeof l=="function"?l:(l[ll]||(l[ll]=function(p){return l.handleEvent(p)}),l[ll])}function vt(){T.call(this),this.i=new Va(this),this.M=this,this.G=null}g(vt,T),vt.prototype[an]=!0,vt.prototype.removeEventListener=function(l,p,y,S){Ba(this,l,p,y,S)};function It(l,p){var y,S=l.G;if(S)for(y=[];S;S=S.G)y.push(S);if(l=l.M,S=p.type||p,typeof p=="string")p=new w(p,l);else if(p instanceof w)p.target=p.target||l;else{var N=p;p=new w(S,l),_t(p,N)}N=!0;let x,H;if(y)for(H=y.length-1;H>=0;H--)x=p.g=y[H],N=so(x,S,!0,p)&&N;if(x=p.g=l,N=so(x,S,!0,p)&&N,N=so(x,S,!1,p)&&N,y)for(H=0;H<y.length;H++)x=p.g=y[H],N=so(x,S,!1,p)&&N}vt.prototype.N=function(){if(vt.Z.N.call(this),this.i){var l=this.i;for(let p in l.g){let y=l.g[p];for(let S=0;S<y.length;S++)mr(y[S]);delete l.g[p],l.h--}}this.G=null},vt.prototype.J=function(l,p,y,S){return this.i.add(String(l),p,!1,y,S)},vt.prototype.K=function(l,p,y,S){return this.i.add(String(l),p,!0,y,S)};function so(l,p,y,S){if(p=l.i.g[String(p)],!p)return!0;p=p.concat();let N=!0;for(let x=0;x<p.length;++x){let H=p[x];if(H&&!H.da&&H.capture==y){let ie=H.listener,u=H.ha||H.src;H.fa&&Xr(l.i,H),N=ie.call(u,S)!==!1&&N}}return N&&!S.defaultPrevented}function W_(l,p){if(typeof l!="function")if(l&&typeof l.handleEvent=="function")l=d(l.handleEvent,l);else throw Error("Invalid listener argument");return Number(p)>2147483647?-1:o.setTimeout(l,p||0)}function za(l){l.g=W_(()=>{l.g=null,l.i&&(l.i=!1,za(l))},l.l);let p=l.h;l.h=null,l.m.apply(null,p)}class dl extends T{constructor(p,y){super(),this.m=p,this.l=y,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:za(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ei(l){T.call(this),this.h=l,this.g={}}g(ei,T);var Et=[];function bt(l){Ui(l.g,function(p,y){this.g.hasOwnProperty(y)&&io(p)},l),l.g={}}ei.prototype.N=function(){ei.Z.N.call(this),bt(this)},ei.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ji=o.JSON.stringify,df=o.JSON.parse,hf=class{stringify(l){return o.JSON.stringify(l,void 0)}parse(l){return o.JSON.parse(l,void 0)}};function ff(){}function Bi(){}var $i={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ga(){w.call(this,"d")}g(Ga,w);function oo(){w.call(this,"c")}g(oo,w);var ti={},pf=null;function Hi(){return pf=pf||new vt}ti.Ia="serverreachability";function hl(l){w.call(this,ti.Ia,l)}g(hl,w);function qi(l){let p=Hi();It(p,new hl(p))}ti.STAT_EVENT="statevent";function zi(l,p){w.call(this,ti.STAT_EVENT,l),this.stat=p}g(zi,w);function wt(l){let p=Hi();It(p,new zi(p,l))}ti.Ja="timingevent";function Wa(l,p){w.call(this,ti.Ja,l),this.size=p}g(Wa,w);function mn(l,p){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){l()},p)}function Gi(){this.g=!0}Gi.prototype.ua=function(){this.g=!1};function Ka(l,p,y,S,N,x){l.info(function(){if(l.g)if(x){var H="",ie=x.split("&");for(let f=0;f<ie.length;f++){var u=ie[f].split("=");if(u.length>1){let m=u[0];u=u[1];let A=m.split("_");H=A.length>=2&&A[1]=="type"?H+(m+"="+u+"&"):H+(m+"=redacted&")}}}else H=null;else H=x;return"XMLHTTP REQ ("+S+") [attempt "+N+"]: "+p+`
`+y+`
`+H})}function gf(l,p,y,S,N,x,H){l.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+N+"]: "+p+`
`+y+`
`+x+" "+H})}function Nn(l,p,y,S){l.info(function(){return"XMLHTTP TEXT ("+p+"): "+Mt(l,y)+(S?" "+S:"")})}function mf(l,p){l.info(function(){return"TIMEOUT: "+p})}Gi.prototype.info=function(){};function Mt(l,p){if(!l.g)return p;if(!p)return null;try{let x=JSON.parse(p);if(x){for(l=0;l<x.length;l++)if(Array.isArray(x[l])){var y=x[l];if(!(y.length<2)){var S=y[1];if(Array.isArray(S)&&!(S.length<1)){var N=S[0];if(N!="noop"&&N!="stop"&&N!="close")for(let H=1;H<S.length;H++)S[H]=""}}}}return ji(x)}catch{return p}}var ao={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Wi={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ki;function fl(){}g(fl,ff),fl.prototype.g=function(){return new XMLHttpRequest},Ki=new fl;function co(l){return encodeURIComponent(String(l))}function Qi(l){var p=1;l=l.split(":");let y=[];for(;p>0&&l.length;)y.push(l.shift()),p--;return l.length&&y.push(l.join(":")),y}function yr(l,p,y,S){this.j=l,this.i=p,this.l=y,this.S=S||1,this.V=new ei(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new yf}function yf(){this.i=null,this.g="",this.h=!1}var uo={},Qa={};function lo(l,p,y){l.M=1,l.A=go(yn(p)),l.u=y,l.R=!0,ho(l,null)}function ho(l,p){l.F=Date.now(),Yi(l),l.B=yn(l.A);var y=l.B,S=l.S;Array.isArray(S)||(S=[String(S)]),Tf(y.i,"t",S),l.C=0,y=l.j.L,l.h=new yf,l.g=cc(l.j,y?p:null,!l.u),l.P>0&&(l.O=new dl(d(l.Y,l,l.g),l.P)),p=l.V,y=l.g,S=l.ba;var N="readystatechange";Array.isArray(N)||(N&&(Et[0]=N.toString()),N=Et);for(let x=0;x<N.length;x++){let H=uf(y,N[x],S||p.handleEvent,!1,p.h||p);if(!H)break;p.g[H.key]=H}p=l.J?cf(l.J):{},l.u?(l.v||(l.v="POST"),p["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.B,l.v,l.u,p)):(l.v="GET",l.g.ea(l.B,l.v,null,p)),qi(),Ka(l.i,l.v,l.B,l.l,l.S,l.u)}yr.prototype.ba=function(l){l=l.target;let p=this.O;p&&ke(l)==3?p.j():this.Y(l)},yr.prototype.Y=function(l){try{if(l==this.g)e:{let ie=ke(this.g),u=this.g.ya(),f=this.g.ca();if(!(ie<3)&&(ie!=3||this.g&&(this.h.h||this.g.la()||Nf(this.g)))){this.K||ie!=4||u==7||(u==8||f<=0?qi(3):qi(2)),Ja(this);var p=this.g.ca();this.X=p;var y=_r(this);if(this.o=p==200,gf(this.i,this.v,this.B,this.l,this.S,ie,p),this.o){if(this.U&&!this.L){t:{if(this.g){var S,N=this.g;if((S=N.g?N.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(S)){var x=S;break t}}x=null}if(l=x)Nn(this.i,this.l,l,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Xi(this,l);else{this.o=!1,this.m=3,wt(12),ni(this),Ji(this);break e}}if(this.R){l=!0;let m;for(;!this.K&&this.C<y.length;)if(m=_f(this,y),m==Qa){ie==4&&(this.m=4,wt(14),l=!1),Nn(this.i,this.l,null,"[Incomplete Response]");break}else if(m==uo){this.m=4,wt(15),Nn(this.i,this.l,y,"[Invalid Chunk]"),l=!1;break}else Nn(this.i,this.l,m,null),Xi(this,m);if(pl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ie!=4||y.length!=0||this.h.h||(this.m=1,wt(16),l=!1),this.o=this.o&&l,!l)Nn(this.i,this.l,y,"[Invalid Chunked Response]"),ni(this),Ji(this);else if(y.length>0&&!this.W){this.W=!0;var H=this.j;H.g==this&&H.aa&&!H.P&&(H.j.info("Great, no buffering proxy detected. Bytes received: "+y.length),sc(H),H.P=!0,wt(11))}}else Nn(this.i,this.l,y,null),Xi(this,y);ie==4&&ni(this),this.o&&!this.K&&(ie==4?Sl(this.j,this):(this.o=!1,Yi(this)))}else K_(this.g),p==400&&y.indexOf("Unknown SID")>0?(this.m=3,wt(12)):(this.m=0,wt(13)),ni(this),Ji(this)}}}catch{}};function _r(l){if(!pl(l))return l.g.la();let p=Nf(l.g);if(p==="")return"";let y="",S=p.length,N=ke(l.g)==4;if(!l.h.i){if(typeof TextDecoder>"u")return ni(l),Ji(l),"";l.h.i=new o.TextDecoder}for(let x=0;x<S;x++)l.h.h=!0,y+=l.h.i.decode(p[x],{stream:!(N&&x==S-1)});return p.length=0,l.h.g+=y,l.C=0,l.h.g}function pl(l){return l.g?l.v=="GET"&&l.M!=2&&l.j.Aa:!1}function _f(l,p){var y=l.C,S=p.indexOf(`
`,y);return S==-1?Qa:(y=Number(p.substring(y,S)),isNaN(y)?uo:(S+=1,S+y>p.length?Qa:(p=p.slice(S,S+y),l.C=S+y,p)))}yr.prototype.cancel=function(){this.K=!0,ni(this)};function Yi(l){l.T=Date.now()+l.H,Ya(l,l.H)}function Ya(l,p){if(l.D!=null)throw Error("WatchDog timer not null");l.D=mn(d(l.aa,l),p)}function Ja(l){l.D&&(o.clearTimeout(l.D),l.D=null)}yr.prototype.aa=function(){this.D=null;let l=Date.now();l-this.T>=0?(mf(this.i,this.B),this.M!=2&&(qi(),wt(17)),ni(this),this.m=2,Ji(this)):Ya(this,this.T-l)};function Ji(l){l.j.I==0||l.K||Sl(l.j,l)}function ni(l){Ja(l);var p=l.O;p&&typeof p.dispose=="function"&&p.dispose(),l.O=null,bt(l.V),l.g&&(p=l.g,l.g=null,p.abort(),p.dispose())}function Xi(l,p){try{var y=l.j;if(y.I!=0&&(y.g==l||fo(y.h,l))){if(!l.L&&fo(y.h,l)&&y.I==3){try{var S=y.Ba.g.parse(p)}catch{S=null}if(Array.isArray(S)&&S.length==3){var N=S;if(N[0]==0){e:if(!y.v){if(y.g)if(y.g.F+3e3<l.F)oc(y),ri(y);else break e;os(y),wt(18)}}else y.xa=N[1],0<y.xa-y.K&&N[2]<37500&&y.F&&y.A==0&&!y.C&&(y.C=mn(d(y.Va,y),6e3));vr(y.h)<=1&&y.ta&&(y.ta=void 0)}else Er(y,11)}else if((l.L||y.g==l)&&oc(y),!v(p))for(N=y.Ba.g.parse(p),p=0;p<N.length;p++){let f=N[p],m=f[0];if(!(m<=y.K))if(y.K=m,f=f[1],y.I==2)if(f[0]=="c"){y.M=f[1],y.ba=f[2];let A=f[3];A!=null&&(y.ka=A,y.j.info("VER="+y.ka));let P=f[4];P!=null&&(y.za=P,y.j.info("SVER="+y.za));let O=f[5];O!=null&&typeof O=="number"&&O>0&&(S=1.5*O,y.O=S,y.j.info("backChannelRequestTimeoutMs_="+S)),S=y;let B=l.g;if(B){let Ne=B.g?B.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ne){var x=S.h;x.g||Ne.indexOf("spdy")==-1&&Ne.indexOf("quic")==-1&&Ne.indexOf("h2")==-1||(x.j=x.l,x.g=new Set,x.h&&(gl(x,x.h),x.h=null))}if(S.G){let nt=B.g?B.g.getResponseHeader("X-HTTP-Session-Id"):null;nt&&(S.wa=nt,$e(S.J,S.G,nt))}}y.I=3,y.l&&y.l.ra(),y.aa&&(y.T=Date.now()-l.F,y.j.info("Handshake RTT: "+y.T+"ms")),S=y;var H=l;if(S.na=ac(S,S.L?S.ba:null,S.W),H.L){ml(S.h,H);var ie=H,u=S.O;u&&(ie.H=u),ie.D&&(Ja(ie),Yi(ie)),S.g=H}else ic(S);y.i.length>0&&un(y)}else f[0]!="stop"&&f[0]!="close"||Er(y,7);else y.I==3&&(f[0]=="stop"||f[0]=="close"?f[0]=="stop"?Er(y,7):rc(y):f[0]!="noop"&&y.l&&y.l.qa(f),y.A=0)}}qi(4)}catch{}}var vf=class{constructor(l,p){this.g=l,this.map=p}};function Xa(l){this.l=l||10,o.PerformanceNavigationTiming?(l=o.performance.getEntriesByType("navigation"),l=l.length>0&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Zi(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function vr(l){return l.h?1:l.g?l.g.size:0}function fo(l,p){return l.h?l.h==p:l.g?l.g.has(p):!1}function gl(l,p){l.g?l.g.add(p):l.h=p}function ml(l,p){l.h&&l.h==p?l.h=null:l.g&&l.g.has(p)&&l.g.delete(p)}Xa.prototype.cancel=function(){if(this.i=yl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let l of this.g.values())l.cancel();this.g.clear()}};function yl(l){if(l.h!=null)return l.i.concat(l.h.G);if(l.g!=null&&l.g.size!==0){let p=l.i;for(let y of l.g.values())p=p.concat(y.G);return p}return D(l.i)}var _l=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function vl(l,p){if(l){l=l.split("&");for(let y=0;y<l.length;y++){let S=l[y].indexOf("="),N,x=null;S>=0?(N=l[y].substring(0,S),x=l[y].substring(S+1)):N=l[y],p(N,x?decodeURIComponent(x.replace(/\+/g," ")):"")}}}function Pn(l){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let p;l instanceof Pn?(this.l=l.l,es(this,l.j),this.o=l.o,this.g=l.g,po(this,l.u),this.h=l.h,Il(this,bf(l.i)),this.m=l.m):l&&(p=String(l).match(_l))?(this.l=!1,es(this,p[1]||"",!0),this.o=mo(p[2]||""),this.g=mo(p[3]||"",!0),po(this,p[4]),this.h=mo(p[5]||"",!0),Il(this,p[6]||"",!0),this.m=mo(p[7]||"")):(this.l=!1,this.i=new zn(null,this.l))}Pn.prototype.toString=function(){let l=[];var p=this.j;p&&l.push(_n(p,yo,!0),":");var y=this.g;return(y||p=="file")&&(l.push("//"),(p=this.o)&&l.push(_n(p,yo,!0),"@"),l.push(co(y).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.u,y!=null&&l.push(":",String(y))),(y=this.h)&&(this.g&&y.charAt(0)!="/"&&l.push("/"),l.push(_n(y,y.charAt(0)=="/"?If:Za,!0))),(y=this.i.toString())&&l.push("?",y),(y=this.m)&&l.push("#",_n(y,ec)),l.join("")},Pn.prototype.resolve=function(l){let p=yn(this),y=!!l.j;y?es(p,l.j):y=!!l.o,y?p.o=l.o:y=!!l.g,y?p.g=l.g:y=l.u!=null;var S=l.h;if(y)po(p,l.u);else if(y=!!l.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var N=p.h.lastIndexOf("/");N!=-1&&(S=p.h.slice(0,N+1)+S)}if(N=S,N==".."||N==".")S="";else if(N.indexOf("./")!=-1||N.indexOf("/.")!=-1){S=N.lastIndexOf("/",0)==0,N=N.split("/");let x=[];for(let H=0;H<N.length;){let ie=N[H++];ie=="."?S&&H==N.length&&x.push(""):ie==".."?((x.length>1||x.length==1&&x[0]!="")&&x.pop(),S&&H==N.length&&x.push("")):(x.push(ie),S=!0)}S=x.join("/")}else S=N}return y?p.h=S:y=l.i.toString()!=="",y?Il(p,bf(l.i)):y=!!l.m,y&&(p.m=l.m),p};function yn(l){return new Pn(l)}function es(l,p,y){l.j=y?mo(p,!0):p,l.j&&(l.j=l.j.replace(/:$/,""))}function po(l,p){if(p){if(p=Number(p),isNaN(p)||p<0)throw Error("Bad port number "+p);l.u=p}else l.u=null}function Il(l,p,y){p instanceof zn?(l.i=p,_o(l.i,l.l)):(y||(p=_n(p,Ge)),l.i=new zn(p,l.l))}function $e(l,p,y){l.i.set(p,y)}function go(l){return $e(l,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),l}function mo(l,p){return l?p?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function _n(l,p,y){return typeof l=="string"?(l=encodeURI(l).replace(p,qn),y&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function qn(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var yo=/[#\/\?@]/g,Za=/[#\?:]/g,If=/[#\?]/g,Ge=/[#\?@]/g,ec=/#/g;function zn(l,p){this.h=this.g=null,this.i=l||null,this.j=!!p}function vn(l){l.g||(l.g=new Map,l.h=0,l.i&&vl(l.i,function(p,y){l.add(decodeURIComponent(p.replace(/\+/g," ")),y)}))}n=zn.prototype,n.add=function(l,p){vn(this),this.i=null,l=ts(this,l);let y=this.g.get(l);return y||this.g.set(l,y=[]),y.push(p),this.h+=1,this};function Ef(l,p){vn(l),p=ts(l,p),l.g.has(p)&&(l.i=null,l.h-=l.g.get(p).length,l.g.delete(p))}function El(l,p){return vn(l),p=ts(l,p),l.g.has(p)}n.forEach=function(l,p){vn(this),this.g.forEach(function(y,S){y.forEach(function(N){l.call(p,N,S,this)},this)},this)};function wf(l,p){vn(l);let y=[];if(typeof p=="string")El(l,p)&&(y=y.concat(l.g.get(ts(l,p))));else for(l=Array.from(l.g.values()),p=0;p<l.length;p++)y=y.concat(l[p]);return y}n.set=function(l,p){return vn(this),this.i=null,l=ts(this,l),El(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[p]),this.h+=1,this},n.get=function(l,p){return l?(l=wf(this,l),l.length>0?String(l[0]):p):p};function Tf(l,p,y){Ef(l,p),y.length>0&&(l.i=null,l.g.set(ts(l,p),D(y)),l.h+=y.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let l=[],p=Array.from(this.g.keys());for(let S=0;S<p.length;S++){var y=p[S];let N=co(y);y=wf(this,y);for(let x=0;x<y.length;x++){let H=N;y[x]!==""&&(H+="="+co(y[x])),l.push(H)}}return this.i=l.join("&")};function bf(l){let p=new zn;return p.i=l.i,l.g&&(p.g=new Map(l.g),p.h=l.h),p}function ts(l,p){return p=String(p),l.j&&(p=p.toLowerCase()),p}function _o(l,p){p&&!l.j&&(vn(l),l.i=null,l.g.forEach(function(y,S){let N=S.toLowerCase();S!=N&&(Ef(this,S),Tf(this,N,y))},l)),l.j=p}function Ir(l,p){let y=new Gi;if(o.Image){let S=new Image;S.onload=h(Gn,y,"TestLoadImage: loaded",!0,p,S),S.onerror=h(Gn,y,"TestLoadImage: error",!1,p,S),S.onabort=h(Gn,y,"TestLoadImage: abort",!1,p,S),S.ontimeout=h(Gn,y,"TestLoadImage: timeout",!1,p,S),o.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=l}else p(!1)}function Af(l,p){let y=new Gi,S=new AbortController,N=setTimeout(()=>{S.abort(),Gn(y,"TestPingServer: timeout",!1,p)},1e4);fetch(l,{signal:S.signal}).then(x=>{clearTimeout(N),x.ok?Gn(y,"TestPingServer: ok",!0,p):Gn(y,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(N),Gn(y,"TestPingServer: error",!1,p)})}function Gn(l,p,y,S,N){try{N&&(N.onload=null,N.onerror=null,N.onabort=null,N.ontimeout=null),S(y)}catch{}}function Df(){this.g=new hf}function Wn(l){this.i=l.Sb||null,this.h=l.ab||!1}g(Wn,ff),Wn.prototype.g=function(){return new tc(this.i,this.h)};function tc(l,p){vt.call(this),this.H=l,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}g(tc,vt),n=tc.prototype,n.open=function(l,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=l,this.D=p,this.readyState=1,cn(this)},n.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;let p={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};l&&(p.body=l),(this.H||o).fetch(new Request(this.D,p)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,vo(this)),this.readyState=0},n.Pa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,cn(this)),this.g&&(this.readyState=3,cn(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Sf(this)}else l.text().then(this.Oa.bind(this),this.ga.bind(this))};function Sf(l){l.j.read().then(l.Ma.bind(l)).catch(l.ga.bind(l))}n.Ma=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var p=l.value?l.value:new Uint8Array(0);(p=this.B.decode(p,{stream:!l.done}))&&(this.response=this.responseText+=p)}l.done?vo(this):cn(this),this.readyState==3&&Sf(this)}},n.Oa=function(l){this.g&&(this.response=this.responseText=l,vo(this))},n.Na=function(l){this.g&&(this.response=l,vo(this))},n.ga=function(){this.g&&vo(this)};function vo(l){l.readyState=4,l.l=null,l.j=null,l.B=null,cn(l)}n.setRequestHeader=function(l,p){this.A.append(l,p)},n.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let l=[],p=this.h.entries();for(var y=p.next();!y.done;)y=y.value,l.push(y[0]+": "+y[1]),y=p.next();return l.join(`\r
`)};function cn(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(tc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Cf(l){let p="";return Ui(l,function(y,S){p+=S,p+=":",p+=y,p+=`\r
`}),p}function wl(l,p,y){e:{for(S in y){var S=!1;break e}S=!0}S||(y=Cf(y),typeof l=="string"?y!=null&&co(y):$e(l,p,y))}function He(l){vt.call(this),this.headers=new Map,this.L=l||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}g(He,vt);var nc=/^https?$/i,Rf=["POST","PUT"];n=He.prototype,n.Fa=function(l){this.H=l},n.ea=function(l,p,y,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);p=p?p.toUpperCase():"GET",this.D=l,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ki.g(),this.g.onreadystatechange=E(d(this.Ca,this));try{this.B=!0,this.g.open(p,String(l),!0),this.B=!1}catch(x){ns(this,x);return}if(l=y||"",y=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var N in S)y.set(N,S[N]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(let x of S.keys())y.set(x,S.get(x));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(y.keys()).find(x=>x.toLowerCase()=="content-type"),N=o.FormData&&l instanceof o.FormData,!(Array.prototype.indexOf.call(Rf,p,void 0)>=0)||S||N||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[x,H]of y)this.g.setRequestHeader(x,H);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(l),this.v=!1}catch(x){ns(this,x)}};function ns(l,p){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=p,l.o=5,rs(l),is(l)}function rs(l){l.A||(l.A=!0,It(l,"complete"),It(l,"error"))}n.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=l||7,It(this,"complete"),It(this,"abort"),is(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),is(this,!0)),He.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Tl(this):this.Xa())},n.Xa=function(){Tl(this)};function Tl(l){if(l.h&&typeof s<"u"){if(l.v&&ke(l)==4)setTimeout(l.Ca.bind(l),0);else if(It(l,"readystatechange"),ke(l)==4){l.h=!1;try{let x=l.ca();e:switch(x){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var y;if(!(y=p)){var S;if(S=x===0){let H=String(l.D).match(_l)[1]||null;!H&&o.self&&o.self.location&&(H=o.self.location.protocol.slice(0,-1)),S=!nc.test(H?H.toLowerCase():"")}y=S}if(y)It(l,"complete"),It(l,"success");else{l.o=6;try{var N=ke(l)>2?l.g.statusText:""}catch{N=""}l.l=N+" ["+l.ca()+"]",rs(l)}}finally{is(l)}}}}function is(l,p){if(l.g){l.m&&(clearTimeout(l.m),l.m=null);let y=l.g;l.g=null,p||It(l,"ready");try{y.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function ke(l){return l.g?l.g.readyState:0}n.ca=function(){try{return ke(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(l){if(this.g){var p=this.g.responseText;return l&&p.indexOf(l)==0&&(p=p.substring(l.length)),df(p)}};function Nf(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.F){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function K_(l){let p={};l=(l.g&&ke(l)>=2&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<l.length;S++){if(v(l[S]))continue;var y=Qi(l[S]);let N=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();let x=p[N]||[];p[N]=x,x.push(y)}af(p,function(S){return S.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ss(l,p,y){return y&&y.internalChannelParams&&y.internalChannelParams[l]||p}function bl(l){this.za=0,this.i=[],this.j=new Gi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ss("failFast",!1,l),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ss("baseRetryDelayMs",5e3,l),this.Za=ss("retryDelaySeedMs",1e4,l),this.Ta=ss("forwardChannelMaxRetries",2,l),this.va=ss("forwardChannelRequestTimeoutMs",2e4,l),this.ma=l&&l.xmlHttpFactory||void 0,this.Ua=l&&l.Rb||void 0,this.Aa=l&&l.useFetchStreams||!1,this.O=void 0,this.L=l&&l.supportsCrossDomainXhr||!1,this.M="",this.h=new Xa(l&&l.concurrentRequestLimit),this.Ba=new Df,this.S=l&&l.fastHandshake||!1,this.R=l&&l.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=l&&l.Pb||!1,l&&l.ua&&this.j.ua(),l&&l.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&l&&l.detectBufferingProxy||!1,this.ia=void 0,l&&l.longPollingTimeout&&l.longPollingTimeout>0&&(this.ia=l.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=bl.prototype,n.ka=8,n.I=1,n.connect=function(l,p,y,S){wt(0),this.W=l,this.H=p||{},y&&S!==void 0&&(this.H.OSID=y,this.H.OAID=S),this.F=this.X,this.J=ac(this,null,this.W),un(this)};function rc(l){if(Al(l),l.I==3){var p=l.V++,y=yn(l.J);if($e(y,"SID",l.M),$e(y,"RID",p),$e(y,"TYPE","terminate"),Kn(l,y),p=new yr(l,l.j,p),p.M=2,p.A=go(yn(y)),y=!1,o.navigator&&o.navigator.sendBeacon)try{y=o.navigator.sendBeacon(p.A.toString(),"")}catch{}!y&&o.Image&&(new Image().src=p.A,y=!0),y||(p.g=cc(p.j,null),p.g.ea(p.A)),p.F=Date.now(),Yi(p)}Cl(l)}function ri(l){l.g&&(sc(l),l.g.cancel(),l.g=null)}function Al(l){ri(l),l.v&&(o.clearTimeout(l.v),l.v=null),oc(l),l.h.cancel(),l.m&&(typeof l.m=="number"&&o.clearTimeout(l.m),l.m=null)}function un(l){if(!Zi(l.h)&&!l.m){l.m=!0;var p=l.Ea;ze||_(),re||(ze(),re=!0),b.add(p,l),l.D=0}}function Pf(l,p){return vr(l.h)>=l.h.j-(l.m?1:0)?!1:l.m?(l.i=p.G.concat(l.i),!0):l.I==1||l.I==2||l.D>=(l.Sa?0:l.Ta)?!1:(l.m=mn(d(l.Ea,l,p),as(l,l.D)),l.D++,!0)}n.Ea=function(l){if(this.m)if(this.m=null,this.I==1){if(!l){this.V=Math.floor(Math.random()*1e5),l=this.V++;let N=new yr(this,this.j,l),x=this.o;if(this.U&&(x?(x=cf(x),_t(x,this.U)):x=this.U),this.u!==null||this.R||(N.J=x,x=null),this.S)e:{for(var p=0,y=0;y<this.i.length;y++){t:{var S=this.i[y];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(p+=S,p>4096){p=y;break e}if(p===4096||y===this.i.length-1){p=y+1;break e}}p=1e3}else p=1e3;p=Dl(this,N,p),y=yn(this.J),$e(y,"RID",l),$e(y,"CVER",22),this.G&&$e(y,"X-HTTP-Session-Id",this.G),Kn(this,y),x&&(this.R?p="headers="+co(Cf(x))+"&"+p:this.u&&wl(y,this.u,x)),gl(this.h,N),this.Ra&&$e(y,"TYPE","init"),this.S?($e(y,"$req",p),$e(y,"SID","null"),N.U=!0,lo(N,y,null)):lo(N,y,p),this.I=2}}else this.I==3&&(l?kf(this,l):this.i.length==0||Zi(this.h)||kf(this))};function kf(l,p){var y;p?y=p.l:y=l.V++;let S=yn(l.J);$e(S,"SID",l.M),$e(S,"RID",y),$e(S,"AID",l.K),Kn(l,S),l.u&&l.o&&wl(S,l.u,l.o),y=new yr(l,l.j,y,l.D+1),l.u===null&&(y.J=l.o),p&&(l.i=p.G.concat(l.i)),p=Dl(l,y,1e3),y.H=Math.round(l.va*.5)+Math.round(l.va*.5*Math.random()),gl(l.h,y),lo(y,S,p)}function Kn(l,p){l.H&&Ui(l.H,function(y,S){$e(p,S,y)}),l.l&&Ui({},function(y,S){$e(p,S,y)})}function Dl(l,p,y){y=Math.min(l.i.length,y);let S=l.l?d(l.l.Ka,l.l,l):null;e:{var N=l.i;let ie=-1;for(;;){let u=["count="+y];ie==-1?y>0?(ie=N[0].g,u.push("ofs="+ie)):ie=0:u.push("ofs="+ie);let f=!0;for(let m=0;m<y;m++){var x=N[m].g;let A=N[m].map;if(x-=ie,x<0)ie=Math.max(0,N[m].g-100),f=!1;else try{x="req"+x+"_"||"";try{var H=A instanceof Map?A:Object.entries(A);for(let[P,O]of H){let B=O;a(O)&&(B=ji(O)),u.push(x+P+"="+encodeURIComponent(B))}}catch(P){throw u.push(x+"type="+encodeURIComponent("_badmap")),P}}catch{S&&S(A)}}if(f){H=u.join("&");break e}}H=void 0}return l=l.i.splice(0,y),p.G=l,H}function ic(l){if(!l.g&&!l.v){l.Y=1;var p=l.Da;ze||_(),re||(ze(),re=!0),b.add(p,l),l.A=0}}function os(l){return l.g||l.v||l.A>=3?!1:(l.Y++,l.v=mn(d(l.Da,l),as(l,l.A)),l.A++,!0)}n.Da=function(){if(this.v=null,Io(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var l=4*this.T;this.j.info("BP detection timer enabled: "+l),this.B=mn(d(this.Wa,this),l)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,wt(10),ri(this),Io(this))};function sc(l){l.B!=null&&(o.clearTimeout(l.B),l.B=null)}function Io(l){l.g=new yr(l,l.j,"rpc",l.Y),l.u===null&&(l.g.J=l.o),l.g.P=0;var p=yn(l.na);$e(p,"RID","rpc"),$e(p,"SID",l.M),$e(p,"AID",l.K),$e(p,"CI",l.F?"0":"1"),!l.F&&l.ia&&$e(p,"TO",l.ia),$e(p,"TYPE","xmlhttp"),Kn(l,p),l.u&&l.o&&wl(p,l.u,l.o),l.O&&(l.g.H=l.O);var y=l.g;l=l.ba,y.M=1,y.A=go(yn(p)),y.u=null,y.R=!0,ho(y,l)}n.Va=function(){this.C!=null&&(this.C=null,ri(this),os(this),wt(19))};function oc(l){l.C!=null&&(o.clearTimeout(l.C),l.C=null)}function Sl(l,p){var y=null;if(l.g==p){oc(l),sc(l),l.g=null;var S=2}else if(fo(l.h,p))y=p.G,ml(l.h,p),S=1;else return;if(l.I!=0){if(p.o)if(S==1){y=p.u?p.u.length:0,p=Date.now()-p.F;var N=l.D;S=Hi(),It(S,new Wa(S,y)),un(l)}else ic(l);else if(N=p.m,N==3||N==0&&p.X>0||!(S==1&&Pf(l,p)||S==2&&os(l)))switch(y&&y.length>0&&(p=l.h,p.i=p.i.concat(y)),N){case 1:Er(l,5);break;case 4:Er(l,10);break;case 3:Er(l,6);break;default:Er(l,2)}}}function as(l,p){let y=l.Qa+Math.floor(Math.random()*l.Za);return l.isActive()||(y*=2),y*p}function Er(l,p){if(l.j.info("Error code "+p),p==2){var y=d(l.bb,l),S=l.Ua;let N=!S;S=new Pn(S||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||es(S,"https"),go(S),N?Ir(S.toString(),y):Af(S.toString(),y)}else wt(2);l.I=0,l.l&&l.l.pa(p),Cl(l),Al(l)}n.bb=function(l){l?(this.j.info("Successfully pinged google.com"),wt(2)):(this.j.info("Failed to ping google.com"),wt(1))};function Cl(l){if(l.I=0,l.ja=[],l.l){let p=yl(l.h);(p.length!=0||l.i.length!=0)&&(R(l.ja,p),R(l.ja,l.i),l.h.i.length=0,D(l.i),l.i.length=0),l.l.oa()}}function ac(l,p,y){var S=y instanceof Pn?yn(y):new Pn(y);if(S.g!="")p&&(S.g=p+"."+S.g),po(S,S.u);else{var N=o.location;S=N.protocol,p=p?p+"."+N.hostname:N.hostname,N=+N.port;let x=new Pn(null);S&&es(x,S),p&&(x.g=p),N&&po(x,N),y&&(x.h=y),S=x}return y=l.G,p=l.wa,y&&p&&$e(S,y,p),$e(S,"VER",l.ka),Kn(l,S),S}function cc(l,p,y){if(p&&!l.L)throw Error("Can't create secondary domain capable XhrIo object.");return p=l.Aa&&!l.ma?new He(new Wn({ab:y})):new He(l.ma),p.Fa(l.L),p}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Rl(){}n=Rl.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function ii(){}ii.prototype.g=function(l,p){return new $t(l,p)};function $t(l,p){vt.call(this),this.g=new bl(p),this.l=l,this.h=p&&p.messageUrlParams||null,l=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(l?l["X-WebChannel-Content-Type"]=p.messageContentType:l={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.sa&&(l?l["X-WebChannel-Client-Profile"]=p.sa:l={"X-WebChannel-Client-Profile":p.sa}),this.g.U=l,(l=p&&p.Qb)&&!v(l)&&(this.g.u=l),this.A=p&&p.supportsCrossDomainXhr||!1,this.v=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!v(p)&&(this.g.G=p,l=this.h,l!==null&&p in l&&(l=this.h,p in l&&delete l[p])),this.j=new si(this)}g($t,vt),$t.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},$t.prototype.close=function(){rc(this.g)},$t.prototype.o=function(l){var p=this.g;if(typeof l=="string"){var y={};y.__data__=l,l=y}else this.v&&(y={},y.__data__=ji(l),l=y);p.i.push(new vf(p.Ya++,l)),p.I==3&&un(p)},$t.prototype.N=function(){this.g.l=null,delete this.j,rc(this.g),delete this.g,$t.Z.N.call(this)};function Nl(l){Ga.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var p=l.__sm__;if(p){e:{for(let y in p){l=y;break e}l=void 0}(this.i=l)&&(l=this.i,p=p!==null&&l in p?p[l]:void 0),this.data=p}else this.data=l}g(Nl,Ga);function wr(){oo.call(this),this.status=1}g(wr,oo);function si(l){this.g=l}g(si,Rl),si.prototype.ra=function(){It(this.g,"a")},si.prototype.qa=function(l){It(this.g,new Nl(l))},si.prototype.pa=function(l){It(this.g,new wr)},si.prototype.oa=function(){It(this.g,"b")},ii.prototype.createWebChannel=ii.prototype.g,$t.prototype.send=$t.prototype.o,$t.prototype.open=$t.prototype.m,$t.prototype.close=$t.prototype.close,hb=Si.createWebChannelTransport=function(){return new ii},db=Si.getStatEventTarget=function(){return Hi()},lb=Si.Event=ti,sy=Si.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ao.NO_ERROR=0,ao.TIMEOUT=8,ao.HTTP_ERROR=6,hh=Si.ErrorCode=ao,Wi.COMPLETE="complete",ub=Si.EventType=Wi,Bi.EventType=$i,$i.OPEN="a",$i.CLOSE="b",$i.ERROR="c",$i.MESSAGE="d",vt.prototype.listen=vt.prototype.J,cu=Si.WebChannel=Bi,j5=Si.FetchXmlHttpFactory=Wn,He.prototype.listenOnce=He.prototype.K,He.prototype.getLastError=He.prototype.Ha,He.prototype.getLastErrorCode=He.prototype.ya,He.prototype.getStatus=He.prototype.ca,He.prototype.getResponseJson=He.prototype.La,He.prototype.getResponseText=He.prototype.la,He.prototype.send=He.prototype.ea,He.prototype.setWithCredentials=He.prototype.Fa,cb=Si.XhrIo=He}).apply(typeof iy<"u"?iy:typeof self<"u"?self:typeof window<"u"?window:{});var Yt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Yt.UNAUTHENTICATED=new Yt(null),Yt.GOOGLE_CREDENTIALS=new Yt("google-credentials-uid"),Yt.FIRST_PARTY=new Yt("first-party-uid"),Yt.MOCK_USER=new Yt("mock-user");var Nu="12.8.0";function HO(n){Nu=n}var ma=new Fs("@firebase/firestore");function uu(){return ma.logLevel}function W(n,...e){if(ma.logLevel<=Te.DEBUG){let t=e.map(jA);ma.debug(`Firestore (${Nu}): ${n}`,...t)}}function Ci(n,...e){if(ma.logLevel<=Te.ERROR){let t=e.map(jA);ma.error(`Firestore (${Nu}): ${n}`,...t)}}function ya(n,...e){if(ma.logLevel<=Te.WARN){let t=e.map(jA);ma.warn(`Firestore (${Nu}): ${n}`,...t)}}function jA(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function ae(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,qO(n,r,t)}function qO(n,e,t){let r=`FIRESTORE (${Nu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Ci(r),new Error(r)}function Je(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||qO(e,i,r)}function Ce(n,e){return n}var q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Z=class extends Vn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var $s=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var vb=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},dy=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Yt.UNAUTHENTICATED))}shutdown(){}};var hy=class{constructor(e){this.t=e,this.currentUser=Yt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Je(this.o===void 0,42304);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),s=new $s;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new $s,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},a=c=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new $s)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Je(typeof r.accessToken=="string",31837,{l:r}),new vb(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Je(e===null||typeof e=="string",2055,{h:e}),new Yt(e)}},Ib=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Yt.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);let e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}},Eb=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new Ib(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Yt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},fy=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},py=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,wi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Je(this.o===void 0,3512);let r=s=>{s.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.m;return this.m=s.token,W("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.V.getImmediate({optional:!0});s?i(s):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new fy(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Je(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new fy(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function B5(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var _u=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=B5(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}};function Ae(n,e){return n<e?-1:n>e?1:0}function wb(n,e){let t=Math.min(n.length,e.length);for(let r=0;r<t;r++){let i=n.charAt(r),s=e.charAt(r);if(i!==s)return fb(i)===fb(s)?Ae(i,s):fb(i)?1:-1}return Ae(n.length,e.length)}var $5=55296,H5=57343;function fb(n){let e=n.charCodeAt(0);return e>=$5&&e<=H5}function vu(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var iO="__name__",gy=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&ae(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&ae(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=n.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return Ae(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):wb(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Di.fromString(e.substring(4,e.length-2))}},ht=class n extends gy{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new Z(q.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},q5=/^[_a-zA-Z][_a-zA-Z0-9]*$/,jn=class n extends gy{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return q5.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===iO}static keyField(){return new n([iO])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new Z(q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new Z(q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Z(q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Z(q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var ne=class n{constructor(e){this.path=e}static fromPath(e){return new n(ht.fromString(e))}static fromName(e){return new n(ht.fromString(e).popFirst(5))}static empty(){return new n(ht.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ht.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ht.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new ht(e.slice()))}};function zO(n,e,t,r){if(e===!0&&r===!0)throw new Z(q.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function z5(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function GO(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ae(12329,{type:typeof n})}function xh(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Z(q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=GO(n);throw new Z(q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function it(n,e){let t={typeString:n};return e&&(t.value=e),t}function Pu(n,e){if(!z5(n))throw new Z(q.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let o=n[r];if(i&&typeof o!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){t=`Expected '${r}' field to equal '${s.value}'`;break}}if(t)throw new Z(q.INVALID_ARGUMENT,t);return!0}var sO=-62135596800,oO=1e6,Jt=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*oO);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Z(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Z(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<sO)throw new Z(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Z(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/oO}_compareTo(e){return this.seconds===e.seconds?Ae(this.nanoseconds,e.nanoseconds):Ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Pu(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-sO;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Jt._jsonSchemaVersion="firestore/timestamp/1.0",Jt._jsonSchema={type:it("string",Jt._jsonSchemaVersion),seconds:it("number"),nanoseconds:it("number")};var pe=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new Jt(0,0))}static max(){return new n(new Jt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var _h=-1,my=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};my.UNKNOWN_ID=-1;function G5(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=pe.fromTimestamp(r===1e9?new Jt(t+1,0):new Jt(t,r));return new _a(i,ne.empty(),e)}function W5(n){return new _a(n.readTime,n.key,_h)}var _a=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(pe.min(),ne.empty(),_h)}static max(){return new n(pe.max(),ne.empty(),_h)}};function K5(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ne.comparator(n.documentKey,e.documentKey),t!==0?t:Ae(n.largestBatchId,e.largestBatchId))}var Q5="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Tb=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};async function By(n){if(n.code!==q.FAILED_PRECONDITION||n.message!==Q5)throw n;W("LocalStore","Unexpectedly lost primary lease")}var j=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ae(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},c=>r(c))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let d=c;t(e[d]).next(h=>{o[d]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};function Y5(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ku(n){return n.name==="IndexedDbTransactionError"}var BA=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>r.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ue&&this.ue(t),t}}n.ce=-1;return n})(),J5=-1;function $y(n){return n==null}function yy(n){return n===0&&1/n==-1/0}var WO="";function X5(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=aO(e)),e=Z5(n.get(t),e);return aO(e)}function Z5(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let s=n.charAt(i);switch(s){case"\0":t+="";break;case WO:t+="";break;default:t+=s}}return t}function aO(n){return n+WO+""}var eW="remoteDocuments",KO="owner";var QO="mutationQueues";var YO="mutations";var JO="documentMutations",tW="remoteDocumentsV14";var XO="remoteDocumentGlobal";var ZO="targets";var e1="targetDocuments";var t1="targetGlobal",n1="collectionParents";var r1="clientMetadata";var i1="bundles";var s1="namedQueries";var nW="indexConfiguration";var rW="indexState";var iW="indexEntries";var o1="documentOverlays";var sW="globals";var oW=[QO,YO,JO,eW,ZO,KO,t1,e1,r1,XO,n1,i1,s1],Tye=[...oW,o1],aW=[QO,YO,JO,tW,ZO,KO,t1,e1,r1,XO,n1,i1,s1,o1],cW=aW,uW=[...cW,nW,rW,iW];var bye=[...uW,sW];function cO(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Oh(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function lW(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var st=class n{constructor(e,t){this.comparator=e,this.root=t||$r.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,$r.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$r.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new fu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new fu(this.root,e,this.comparator,!1)}getReverseIterator(){return new fu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new fu(this.root,e,this.comparator,!0)}},fu=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},$r=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ae(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ae(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw ae(27949);return e+(this.isRed()?0:1)}};$r.EMPTY=null,$r.RED=!0,$r.BLACK=!1;$r.EMPTY=new class{constructor(){this.size=0}get key(){throw ae(57766)}get value(){throw ae(16141)}get color(){throw ae(16727)}get left(){throw ae(29726)}get right(){throw ae(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new $r(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Nt=class n{constructor(e){this.comparator=e,this.data=new st(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new _y(this.data.getIterator())}getIteratorFrom(e){return new _y(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},_y=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var da=class n{constructor(e){this.fields=e,e.sort(jn.comparator)}static empty(){return new n([])}unionWith(e){let t=new Nt(jn.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return vu(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var vy=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Bt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new vy("Invalid base64 string: "+s):s}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Bt.EMPTY_BYTE_STRING=new Bt("");var dW=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ri(n){if(Je(!!n,39018),typeof n=="string"){let e=0,t=dW.exec(n);if(Je(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Qe(n.seconds),nanos:Qe(n.nanos)}}function Qe(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ni(n){return typeof n=="string"?Bt.fromBase64String(n):Bt.fromUint8Array(n)}var a1="server_timestamp",c1="__type__",u1="__previous_value__",l1="__local_write_time__";function Hy(n){return(n?.mapValue?.fields||{})[c1]?.stringValue===a1}function qy(n){let e=n.mapValue.fields[u1];return Hy(e)?qy(e):e}function vh(n){let e=Ri(n.mapValue.fields[l1].timestampValue);return new Jt(e.seconds,e.nanos)}var bb=class{constructor(e,t,r,i,s,o,a,c,d,h,g){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=d,this.isUsingEmulator=h,this.apiKey=g}},Ab="(default)",Ih=class n{constructor(e,t){this.projectId=e,this.database=t||Ab}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===Ab}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};function d1(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new Z(q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ih(n.options.projectId,e)}var h1="__type__",f1="__max__",oy={mapValue:{fields:{__type__:{stringValue:f1}}}},p1="__vector__",Eh="value";function qs(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Hy(n)?4:m1(n)?9007199254740991:g1(n)?10:11:ae(28295,{value:n})}function qr(n,e){if(n===e)return!0;let t=qs(n);if(t!==qs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return vh(n).isEqual(vh(e));case 3:return(function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=Ri(i.timestampValue),a=Ri(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,s){return Ni(i.bytesValue).isEqual(Ni(s.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,s){return Qe(i.geoPointValue.latitude)===Qe(s.geoPointValue.latitude)&&Qe(i.geoPointValue.longitude)===Qe(s.geoPointValue.longitude)})(n,e);case 2:return(function(i,s){if("integerValue"in i&&"integerValue"in s)return Qe(i.integerValue)===Qe(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=Qe(i.doubleValue),a=Qe(s.doubleValue);return o===a?yy(o)===yy(a):isNaN(o)&&isNaN(a)}return!1})(n,e);case 9:return vu(n.arrayValue.values||[],e.arrayValue.values||[],qr);case 10:case 11:return(function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(cO(o)!==cO(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!qr(o[c],a[c])))return!1;return!0})(n,e);default:return ae(52216,{left:n})}}function wh(n,e){return(n.values||[]).find(t=>qr(t,e))!==void 0}function Iu(n,e){if(n===e)return 0;let t=qs(n),r=qs(e);if(t!==r)return Ae(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ae(n.booleanValue,e.booleanValue);case 2:return(function(s,o){let a=Qe(s.integerValue||s.doubleValue),c=Qe(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1})(n,e);case 3:return uO(n.timestampValue,e.timestampValue);case 4:return uO(vh(n),vh(e));case 5:return wb(n.stringValue,e.stringValue);case 6:return(function(s,o){let a=Ni(s),c=Ni(o);return a.compareTo(c)})(n.bytesValue,e.bytesValue);case 7:return(function(s,o){let a=s.split("/"),c=o.split("/");for(let d=0;d<a.length&&d<c.length;d++){let h=Ae(a[d],c[d]);if(h!==0)return h}return Ae(a.length,c.length)})(n.referenceValue,e.referenceValue);case 8:return(function(s,o){let a=Ae(Qe(s.latitude),Qe(o.latitude));return a!==0?a:Ae(Qe(s.longitude),Qe(o.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return lO(n.arrayValue,e.arrayValue);case 10:return(function(s,o){let a=s.fields||{},c=o.fields||{},d=a[Eh]?.arrayValue,h=c[Eh]?.arrayValue,g=Ae(d?.values?.length||0,h?.values?.length||0);return g!==0?g:lO(d,h)})(n.mapValue,e.mapValue);case 11:return(function(s,o){if(s===oy.mapValue&&o===oy.mapValue)return 0;if(s===oy.mapValue)return 1;if(o===oy.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),d=o.fields||{},h=Object.keys(d);c.sort(),h.sort();for(let g=0;g<c.length&&g<h.length;++g){let E=wb(c[g],h[g]);if(E!==0)return E;let D=Iu(a[c[g]],d[h[g]]);if(D!==0)return D}return Ae(c.length,h.length)})(n.mapValue,e.mapValue);default:throw ae(23264,{he:t})}}function uO(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ae(n,e);let t=Ri(n),r=Ri(e),i=Ae(t.seconds,r.seconds);return i!==0?i:Ae(t.nanos,r.nanos)}function lO(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=Iu(t[i],r[i]);if(s)return s}return Ae(t.length,r.length)}function Eu(n){return Db(n)}function Db(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=Ri(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Ni(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return ne.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=Db(s);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${Db(t.fields[o])}`;return i+"}"})(n.mapValue):ae(61005,{value:n})}function uy(n){switch(qs(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=qy(n);return e?16+uy(e):16;case 5:return 2*n.stringValue.length;case 6:return Ni(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,s)=>i+uy(s),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return Oh(r.fields,(s,o)=>{i+=s.length+uy(o)}),i})(n.mapValue);default:throw ae(13486,{value:n})}}function Sb(n){return!!n&&"integerValue"in n}function $A(n){return!!n&&"arrayValue"in n}function dO(n){return!!n&&"nullValue"in n}function hO(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function pb(n){return!!n&&"mapValue"in n}function g1(n){return(n?.mapValue?.fields||{})[h1]?.stringValue===p1}function gh(n){if(n.geoPointValue)return{geoPointValue:$({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:$({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Oh(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=gh(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=gh(n.arrayValue.values[t]);return e}return $({},n)}function m1(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===f1}var Dye={mapValue:{fields:{[h1]:{stringValue:p1},[Eh]:{arrayValue:{}}}}};var Br=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!pb(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=gh(t)}setAll(e){let t=jn.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=gh(o):i.push(a.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());pb(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return qr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];pb(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Oh(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(gh(this.value))}};var fr=class n{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,pe.min(),pe.min(),pe.min(),Br.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,pe.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,pe.min(),pe.min(),Br.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,pe.min(),pe.min(),Br.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(pe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Br.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Br.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=pe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var va=class{constructor(e,t){this.position=e,this.inclusive=t}};function fO(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField()?r=ne.comparator(ne.fromName(o.referenceValue),t.key):r=Iu(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function pO(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!qr(n.position[t],e.position[t]))return!1;return!0}var Ia=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function hW(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Iy=class{},ft=class n extends Iy{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Rb(e,t,r):t==="array-contains"?new kb(e,r):t==="in"?new Mb(e,r):t==="not-in"?new xb(e,r):t==="array-contains-any"?new Ob(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Nb(e,r):new Pb(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Iu(t,this.value)):t!==null&&qs(this.value)===qs(t)&&this.matchesComparison(Iu(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ae(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},pr=class n extends Iy{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new n(e,t)}matches(e){return y1(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function y1(n){return n.op==="and"}function _1(n){return fW(n)&&y1(n)}function fW(n){for(let e of n.filters)if(e instanceof pr)return!1;return!0}function Cb(n){if(n instanceof ft)return n.field.canonicalString()+n.op.toString()+Eu(n.value);if(_1(n))return n.filters.map(e=>Cb(e)).join(",");{let e=n.filters.map(t=>Cb(t)).join(",");return`${n.op}(${e})`}}function v1(n,e){return n instanceof ft?(function(r,i){return i instanceof ft&&r.op===i.op&&r.field.isEqual(i.field)&&qr(r.value,i.value)})(n,e):n instanceof pr?(function(r,i){return i instanceof pr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&v1(o,i.filters[a]),!0):!1})(n,e):void ae(19439)}function I1(n){return n instanceof ft?(function(t){return`${t.field.canonicalString()} ${t.op} ${Eu(t.value)}`})(n):n instanceof pr?(function(t){return t.op.toString()+" {"+t.getFilters().map(I1).join(" ,")+"}"})(n):"Filter"}var Rb=class extends ft{constructor(e,t,r){super(e,t,r),this.key=ne.fromName(r.referenceValue)}matches(e){let t=ne.comparator(e.key,this.key);return this.matchesComparison(t)}},Nb=class extends ft{constructor(e,t){super(e,"in",t),this.keys=E1("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},Pb=class extends ft{constructor(e,t){super(e,"not-in",t),this.keys=E1("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function E1(n,e){return(e.arrayValue?.values||[]).map(t=>ne.fromName(t.referenceValue))}var kb=class extends ft{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return $A(t)&&wh(t.arrayValue,this.value)}},Mb=class extends ft{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&wh(this.value.arrayValue,t)}},xb=class extends ft{constructor(e,t){super(e,"not-in",t)}matches(e){if(wh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!wh(this.value.arrayValue,t)}},Ob=class extends ft{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!$A(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>wh(this.value.arrayValue,r))}};var Lb=class{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Te=null}};function gO(n,e=null,t=[],r=[],i=null,s=null,o=null){return new Lb(n,e,t,r,i,s,o)}function HA(n){let e=Ce(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Cb(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(s){return s.field.canonicalString()+s.dir})(r)).join(","),$y(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Eu(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Eu(r)).join(",")),e.Te=t}return e.Te}function qA(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!hW(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!v1(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!pO(n.startAt,e.startAt)&&pO(n.endAt,e.endAt)}function Fb(n){return ne.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var wu=class{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}};function pW(n,e,t,r,i,s,o,a){return new wu(n,e,t,r,i,s,o,a)}function zy(n){return new wu(n)}function mO(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function gW(n){return ne.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function w1(n){return n.collectionGroup!==null}function pu(n){let e=Ce(n);if(e.Ie===null){e.Ie=[];let t=new Set;for(let s of e.explicitOrderBy)e.Ie.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Nt(jn.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(a=a.add(d.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new Ia(s,r))}),t.has(jn.keyField().canonicalString())||e.Ie.push(new Ia(jn.keyField(),r))}return e.Ie}function Hr(n){let e=Ce(n);return e.Ee||(e.Ee=mW(e,pu(n))),e.Ee}function mW(n,e){if(n.limitType==="F")return gO(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new Ia(i.field,s)});let t=n.endAt?new va(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new va(n.startAt.position,n.startAt.inclusive):null;return gO(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Ey(n,e,t){return new wu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Gy(n,e){return qA(Hr(n),Hr(e))&&n.limitType===e.limitType}function T1(n){return`${HA(Hr(n))}|lt:${n.limitType}`}function lu(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>I1(i)).join(", ")}]`),$y(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Eu(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Eu(i)).join(",")),`Target(${r})`})(Hr(n))}; limitType=${n.limitType})`}function Wy(n,e){return e.isFoundDocument()&&(function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ne.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)})(n,e)&&(function(r,i){for(let s of pu(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(o,a,c){let d=fO(o,a,c);return o.inclusive?d<=0:d<0})(r.startAt,pu(r),i)||r.endAt&&!(function(o,a,c){let d=fO(o,a,c);return o.inclusive?d>=0:d>0})(r.endAt,pu(r),i))})(n,e)}function yW(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function b1(n){return(e,t)=>{let r=!1;for(let i of pu(n)){let s=_W(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function _W(n,e,t){let r=n.field.isKeyField()?ne.comparator(e.key,t.key):(function(s,o,a){let c=o.data.field(s),d=a.data.field(s);return c!==null&&d!==null?Iu(c,d):ae(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ae(19790,{direction:n.dir})}}var Pi=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Oh(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return lW(this.inner)}size(){return this.innerSize}};var vW=new st(ne.comparator);function zs(){return vW}var A1=new st(ne.comparator);function ph(...n){let e=A1;for(let t of n)e=e.insert(t.key,t);return e}function IW(n){let e=A1;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ha(){return mh()}function D1(){return mh()}function mh(){return new Pi(n=>n.toString(),(n,e)=>n.isEqual(e))}var Sye=new st(ne.comparator),EW=new Nt(ne.comparator);function Se(...n){let e=EW;for(let t of n)e=e.add(t);return e}var wW=new Nt(Ae);function TW(){return wW}function bW(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:yy(e)?"-0":e}}function AW(n){return{integerValue:""+n}}var Tu=class{constructor(){this._=void 0}};function DW(n,e,t){return n instanceof Th?(function(i,s){let o={fields:{[c1]:{stringValue:a1},[l1]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Hy(s)&&(s=qy(s)),s&&(o.fields[u1]=s),{mapValue:o}})(t,e):n instanceof bu?S1(n,e):n instanceof Au?C1(n,e):(function(i,s){let o=CW(i,s),a=yO(o)+yO(i.Ae);return Sb(o)&&Sb(i.Ae)?AW(a):bW(i.serializer,a)})(n,e)}function SW(n,e,t){return n instanceof bu?S1(n,e):n instanceof Au?C1(n,e):t}function CW(n,e){return n instanceof bh?(function(r){return Sb(r)||(function(s){return!!s&&"doubleValue"in s})(r)})(e)?e:{integerValue:0}:null}var Th=class extends Tu{},bu=class extends Tu{constructor(e){super(),this.elements=e}};function S1(n,e){let t=R1(e);for(let r of n.elements)t.some(i=>qr(i,r))||t.push(r);return{arrayValue:{values:t}}}var Au=class extends Tu{constructor(e){super(),this.elements=e}};function C1(n,e){let t=R1(e);for(let r of n.elements)t=t.filter(i=>!qr(i,r));return{arrayValue:{values:t}}}var bh=class extends Tu{constructor(e,t){super(),this.serializer=e,this.Ae=t}};function yO(n){return Qe(n.integerValue||n.doubleValue)}function R1(n){return $A(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function RW(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof bu&&i instanceof bu||r instanceof Au&&i instanceof Au?vu(r.elements,i.elements,qr):r instanceof bh&&i instanceof bh?qr(r.Ae,i.Ae):r instanceof Th&&i instanceof Th})(n.transform,e.transform)}var gu=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function ly(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Ah=class{};function N1(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new wy(n.key,gu.none()):new Dh(n.key,n.data,gu.none());{let t=n.data,r=Br.empty(),i=new Nt(jn.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Du(n.key,r,new da(i.toArray()),gu.none())}}function NW(n,e,t){n instanceof Dh?(function(i,s,o){let a=i.value.clone(),c=vO(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()})(n,e,t):n instanceof Du?(function(i,s,o){if(!ly(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=vO(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(P1(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(n,e,t):(function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,t)}function yh(n,e,t,r){return n instanceof Dh?(function(s,o,a,c){if(!ly(s.precondition,o))return a;let d=s.value.clone(),h=IO(s.fieldTransforms,c,o);return d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null})(n,e,t,r):n instanceof Du?(function(s,o,a,c){if(!ly(s.precondition,o))return a;let d=IO(s.fieldTransforms,c,o),h=o.data;return h.setAll(P1(s)),h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))})(n,e,t,r):(function(s,o,a){return ly(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a})(n,e,t)}function _O(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&vu(r,i,(s,o)=>RW(s,o))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Dh=class extends Ah{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Du=class extends Ah{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function P1(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function vO(n,e,t){let r=new Map;Je(n.length===t.length,32656,{Ve:t.length,de:n.length});for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,SW(o,a,t[i]))}return r}function IO(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,DW(s,o,e))}return r}var wy=class extends Ah{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}};var Vb=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&NW(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=yh(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=yh(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=D1();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;let c=N1(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(pe.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Se())}isEqual(e){return this.batchId===e.batchId&&vu(this.mutations,e.mutations,(t,r)=>_O(t,r))&&vu(this.baseMutations,e.baseMutations,(t,r)=>_O(t,r))}};var Ub=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var jb=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var lt,De;function k1(n){if(n===void 0)return Ci("GRPC error has no .code"),q.UNKNOWN;switch(n){case lt.OK:return q.OK;case lt.CANCELLED:return q.CANCELLED;case lt.UNKNOWN:return q.UNKNOWN;case lt.DEADLINE_EXCEEDED:return q.DEADLINE_EXCEEDED;case lt.RESOURCE_EXHAUSTED:return q.RESOURCE_EXHAUSTED;case lt.INTERNAL:return q.INTERNAL;case lt.UNAVAILABLE:return q.UNAVAILABLE;case lt.UNAUTHENTICATED:return q.UNAUTHENTICATED;case lt.INVALID_ARGUMENT:return q.INVALID_ARGUMENT;case lt.NOT_FOUND:return q.NOT_FOUND;case lt.ALREADY_EXISTS:return q.ALREADY_EXISTS;case lt.PERMISSION_DENIED:return q.PERMISSION_DENIED;case lt.FAILED_PRECONDITION:return q.FAILED_PRECONDITION;case lt.ABORTED:return q.ABORTED;case lt.OUT_OF_RANGE:return q.OUT_OF_RANGE;case lt.UNIMPLEMENTED:return q.UNIMPLEMENTED;case lt.DATA_LOSS:return q.DATA_LOSS;default:return ae(39323,{code:n})}}(De=lt||(lt={}))[De.OK=0]="OK",De[De.CANCELLED=1]="CANCELLED",De[De.UNKNOWN=2]="UNKNOWN",De[De.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",De[De.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",De[De.NOT_FOUND=5]="NOT_FOUND",De[De.ALREADY_EXISTS=6]="ALREADY_EXISTS",De[De.PERMISSION_DENIED=7]="PERMISSION_DENIED",De[De.UNAUTHENTICATED=16]="UNAUTHENTICATED",De[De.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",De[De.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",De[De.ABORTED=10]="ABORTED",De[De.OUT_OF_RANGE=11]="OUT_OF_RANGE",De[De.UNIMPLEMENTED=12]="UNIMPLEMENTED",De[De.INTERNAL=13]="INTERNAL",De[De.UNAVAILABLE=14]="UNAVAILABLE",De[De.DATA_LOSS=15]="DATA_LOSS";var PW=null;function kW(){return new TextEncoder}var MW=new Di([4294967295,4294967295],0);function EO(n){let e=kW().encode(n),t=new ab;return t.update(e),new Uint8Array(t.digest())}function wO(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Di([t,r],0),new Di([i,s],0)]}var Bb=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new fa(`Invalid padding: ${t}`);if(r<0)throw new fa(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new fa(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new fa(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Di.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(Di.fromNumber(r)));return i.compare(MW)===1&&(i=new Di([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;let t=EO(e),[r,i]=wO(t);for(let s=0;s<this.hashCount;s++){let o=this.ye(r,i,s);if(!this.we(o))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;let t=EO(e),[r,i]=wO(t);for(let s=0;s<this.hashCount;s++){let o=this.ye(r,i,s);this.be(o)}}be(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},fa=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Ty=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Sh.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(pe.min(),i,new st(Ae),zs(),Se())}},Sh=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,Se(),Se(),Se())}};var mu=class{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.De=i}},by=class{constructor(e,t){this.targetId=e,this.Ce=t}},Ay=class{constructor(e,t,r=Bt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Dy=class{constructor(){this.ve=0,this.Fe=TO(),this.Me=Bt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Se(),t=Se(),r=Se();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ae(38017,{changeType:s})}}),new Sh(this.Me,this.xe,e,t,r)}Ke(){this.Oe=!1,this.Fe=TO()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Je(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}},$b=class{constructor(e){this.Ge=e,this.ze=new Map,this.je=zs(),this.He=ay(),this.Je=ay(),this.Ze=new st(Ae)}Xe(e){for(let t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(let t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{let r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:ae(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((r,i)=>{this.rt(i)&&t(i)})}st(e){let t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){let s=i.target;if(Fb(s))if(r===0){let o=new ne(s.path);this.et(t,o,fr.newNoDocument(o,pe.min()))}else Je(r===1,20013,{expectedCount:r});else{let o=this._t(t);if(o!==r){let a=this.ut(e),c=a?this.ct(a,e,o):1;if(c!==0){this.it(t);let d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,d)}PW?.lt((function(h,g,E,D,R){let M={localCacheCount:h,existenceFilterCount:g.count,databaseId:E.database,projectId:E.projectId},k=g.unchangedNames;return k&&(M.bloomFilter={applied:R===0,hashCount:k?.hashCount??0,bitmapLength:k?.bits?.bitmap?.length??0,padding:k?.bits?.padding??0,mightContain:V=>D?.mightContain(V)??!1}),M})(o,e.Ce,this.Ge.ht(),a,c))}}}}ut(e){let t=e.Ce.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,o,a;try{o=Ni(r).toUint8Array()}catch(c){if(c instanceof vy)return ya("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new Bb(o,i,s)}catch(c){return ya(c instanceof fa?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.ge===0?null:a}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){let r=this.Ge.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.et(t,s,null),i++)}),i}Tt(e){let t=new Map;this.ze.forEach((s,o)=>{let a=this.ot(o);if(a){if(s.current&&Fb(a.target)){let c=new ne(a.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,fr.newNoDocument(c,e))}s.Be&&(t.set(o,s.ke()),s.Ke())}});let r=Se();this.Je.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let d=this.ot(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.je.forEach((s,o)=>o.setReadTime(e));let i=new Ty(e,t,this.Ze,this.je,r);return this.je=zs(),this.He=ay(),this.Je=ay(),this.Ze=new st(Ae),i}Ye(e,t){if(!this.rt(e))return;let r=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,r),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;let i=this.nt(e);this.Et(e,t)?i.qe(t,1):i.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){let t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new Dy,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new Nt(Ae),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new Nt(Ae),this.He=this.He.insert(e,t)),t}rt(e){let t=this.ot(e)!==null;return t||W("WatchChangeAggregator","Detected inactive target",e),t}ot(e){let t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Dy),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}};function ay(){return new st(ne.comparator)}function TO(){return new st(ne.comparator)}var xW={asc:"ASCENDING",desc:"DESCENDING"},OW={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},LW={and:"AND",or:"OR"},Hb=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function qb(n,e){return n.useProto3Json||$y(e)?e:{value:e}}function FW(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function VW(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function yu(n){return Je(!!n,49232),pe.fromTimestamp((function(t){let r=Ri(t);return new Jt(r.seconds,r.nanos)})(n))}function UW(n,e){return zb(n,e).canonicalString()}function zb(n,e){let t=(function(i){return new ht(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function M1(n){let e=ht.fromString(n);return Je(V1(e),10190,{key:e.toString()}),e}function gb(n,e){let t=M1(e);if(t.get(1)!==n.databaseId.projectId)throw new Z(q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Z(q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ne(O1(t))}function x1(n,e){return UW(n.databaseId,e)}function jW(n){let e=M1(n);return e.length===4?ht.emptyPath():O1(e)}function bO(n){return new ht(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function O1(n){return Je(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function BW(n,e){let t;if("targetChange"in e){e.targetChange;let r=(function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:ae(39313,{state:d})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=(function(d,h){return d.useProto3Json?(Je(h===void 0||typeof h=="string",58123),Bt.fromBase64String(h||"")):(Je(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Bt.fromUint8Array(h||new Uint8Array))})(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&(function(d){let h=d.code===void 0?q.UNKNOWN:k1(d.code);return new Z(h,d.message||"")})(o);t=new Ay(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=gb(n,r.document.name),s=yu(r.document.updateTime),o=r.document.createTime?yu(r.document.createTime):pe.min(),a=new Br({mapValue:{fields:r.document.fields}}),c=fr.newFoundDocument(i,s,o,a),d=r.targetIds||[],h=r.removedTargetIds||[];t=new mu(d,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=gb(n,r.document),s=r.readTime?yu(r.readTime):pe.min(),o=fr.newNoDocument(i,s),a=r.removedTargetIds||[];t=new mu([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=gb(n,r.document),s=r.removedTargetIds||[];t=new mu([],s,i,null)}else{if(!("filter"in e))return ae(11601,{Vt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new jb(i,s),a=r.targetId;t=new by(a,o)}}return t}function $W(n,e){return{documents:[x1(n,e.path)]}}function HW(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=x1(n,i);let s=(function(d){if(d.length!==0)return F1(pr.create(d,"and"))})(e.filters);s&&(t.structuredQuery.where=s);let o=(function(d){if(d.length!==0)return d.map(h=>(function(E){return{field:du(E.field),direction:GW(E.dir)}})(h))})(e.orderBy);o&&(t.structuredQuery.orderBy=o);let a=qb(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(d){return{before:d.inclusive,values:d.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(d){return{before:!d.inclusive,values:d.position}})(e.endAt)),{ft:t,parent:i}}function qW(n){let e=jW(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Je(r===1,65062);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];t.where&&(s=(function(g){let E=L1(g);return E instanceof pr&&_1(E)?E.getFilters():[E]})(t.where));let o=[];t.orderBy&&(o=(function(g){return g.map(E=>(function(R){return new Ia(hu(R.field),(function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(R.direction))})(E))})(t.orderBy));let a=null;t.limit&&(a=(function(g){let E;return E=typeof g=="object"?g.value:g,$y(E)?null:E})(t.limit));let c=null;t.startAt&&(c=(function(g){let E=!!g.before,D=g.values||[];return new va(D,E)})(t.startAt));let d=null;return t.endAt&&(d=(function(g){let E=!g.before,D=g.values||[];return new va(D,E)})(t.endAt)),pW(e,i,o,s,a,"F",c,d)}function zW(n,e){let t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ae(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function L1(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=hu(t.unaryFilter.field);return ft.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=hu(t.unaryFilter.field);return ft.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=hu(t.unaryFilter.field);return ft.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=hu(t.unaryFilter.field);return ft.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ae(61313);default:return ae(60726)}})(n):n.fieldFilter!==void 0?(function(t){return ft.create(hu(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ae(58110);default:return ae(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return pr.create(t.compositeFilter.filters.map(r=>L1(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ae(1026)}})(t.compositeFilter.op))})(n):ae(30097,{filter:n})}function GW(n){return xW[n]}function WW(n){return OW[n]}function KW(n){return LW[n]}function du(n){return{fieldPath:n.canonicalString()}}function hu(n){return jn.fromServerFormat(n.fieldPath)}function F1(n){return n instanceof ft?(function(t){if(t.op==="=="){if(hO(t.value))return{unaryFilter:{field:du(t.field),op:"IS_NAN"}};if(dO(t.value))return{unaryFilter:{field:du(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(hO(t.value))return{unaryFilter:{field:du(t.field),op:"IS_NOT_NAN"}};if(dO(t.value))return{unaryFilter:{field:du(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:du(t.field),op:WW(t.op),value:t.value}}})(n):n instanceof pr?(function(t){let r=t.getFilters().map(i=>F1(i));return r.length===1?r[0]:{compositeFilter:{op:KW(t.op),filters:r}}})(n):ae(54877,{filter:n})}function V1(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Ch=class n{constructor(e,t,r,i,s=pe.min(),o=pe.min(),a=Bt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Gb=class{constructor(e){this.yt=e}};function U1(n){let e=qW({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Ey(e,e.limit,"L"):e}var Sy=class{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(Qe(e.integerValue));else if("doubleValue"in e){let r=Qe(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),yy(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=Ri(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Ni(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?m1(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):g1(e)?this.kt(e.mapValue,t):(this.Kt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Nt(t)):ae(19022,{Ut:e})}Ot(e,t){this.Ft(t,25),this.$t(e,t)}$t(e,t){t.xt(e)}Kt(e,t){let r=e.fields||{};this.Ft(t,55);for(let i of Object.keys(r))this.Ot(i,t),this.Ct(r[i],t)}kt(e,t){let r=e.fields||{};this.Ft(t,53);let i=Eh,s=r[i].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(Qe(s)),this.Ot(i,t),this.Ct(r[i],t)}qt(e,t){let r=e.values||[];this.Ft(t,50);for(let i of r)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),ne.fromName(e).path.forEach(r=>{this.Ft(t,60),this.$t(r,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}};Sy.Wt=new Sy;var Wb=class{constructor(){this.Sn=new Kb}addToCollectionParentIndex(e,t){return this.Sn.add(t),j.resolve()}getCollectionParents(e,t){return j.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return j.resolve()}deleteFieldIndex(e,t){return j.resolve()}deleteAllFieldIndexes(e){return j.resolve()}createTargetIndexes(e,t){return j.resolve()}getDocumentsMatchingTarget(e,t){return j.resolve(null)}getIndexType(e,t){return j.resolve(0)}getFieldIndexes(e,t){return j.resolve([])}getNextCollectionGroupToUpdate(e){return j.resolve(null)}getMinOffset(e,t){return j.resolve(_a.min())}getMinOffsetFromCollectionGroup(e,t){return j.resolve(_a.min())}updateCollectionGroup(e,t,r){return j.resolve()}updateIndexEntries(e,t){return j.resolve()}},Kb=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Nt(ht.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Nt(ht.comparator)).toArray()}};var Cye=new Uint8Array(0);var AO={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},j1=41943040,Un=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};Un.DEFAULT_COLLECTION_PERCENTILE=10,Un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Un.DEFAULT=new Un(j1,Un.DEFAULT_COLLECTION_PERCENTILE,Un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Un.DISABLED=new Un(-1,0,0);var Rh=class n{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new n(0)}static ar(){return new n(-1)}};var DO="LruGarbageCollector",QW=1048576;function SO([n,e],[t,r]){let i=Ae(n,t);return i===0?Ae(e,r):i}var Qb=class{constructor(e){this.Pr=e,this.buffer=new Nt(SO),this.Tr=0}Ir(){return++this.Tr}Er(e){let t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();SO(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},Yb=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){W(DO,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ku(t)?W(DO,"Ignoring IndexedDB error during garbage collection: ",t):await By(t)}await this.Ar(3e5)})}},Jb=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return j.resolve(BA.ce);let r=new Qb(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.mr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(W("LruGarbageCollector","Garbage collection skipped; disabled"),j.resolve(AO)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(W("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),AO):this.gr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let r,i,s,o,a,c,d,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(W("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,o=Date.now(),this.nthSequenceNumber(e,i))).next(g=>(r=g,a=Date.now(),this.removeTargets(e,r,t))).next(g=>(s=g,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(g=>(d=Date.now(),uu()<=Te.DEBUG&&W("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(c-a)+`ms
	Removed ${g} documents in `+(d-c)+`ms
Total Duration: ${d-h}ms`),j.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:g})))}};function YW(n,e){return new Jb(n,e)}var Xb=class{constructor(){this.changes=new Pi(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,fr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?j.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Zb=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var eA=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&yh(r.mutation,i,da.empty(),Jt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Se()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Se()){let i=ha();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=ph();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=ha();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Se()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=zs(),o=mh(),a=(function(){return mh()})();return t.forEach((c,d)=>{let h=r.get(d.key);i.has(d.key)&&(h===void 0||h.mutation instanceof Du)?s=s.insert(d.key,d):h!==void 0?(o.set(d.key,h.mutation.getFieldMask()),yh(h.mutation,d,h.mutation.getFieldMask(),Jt.now())):o.set(d.key,da.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((d,h)=>o.set(d,h)),t.forEach((d,h)=>a.set(d,new Zb(h,o.get(d)??null))),a))}recalculateAndSaveOverlays(e,t){let r=mh(),i=new st((o,a)=>o-a),s=Se();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let a of o)a.keys().forEach(c=>{let d=t.get(c);if(d===null)return;let h=r.get(c)||da.empty();h=a.applyToLocalView(d,h),r.set(c,h);let g=(i.get(a.batchId)||Se()).add(c);i=i.insert(a.batchId,g)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),d=c.key,h=c.value,g=D1();h.forEach(E=>{if(!s.has(E)){let D=N1(t.get(E),r.get(E));D!==null&&g.set(E,D),s=s.add(E)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,g))}return j.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return gW(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):w1(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):j.resolve(ha()),a=_h,c=s;return o.next(d=>j.forEach(d,(h,g)=>(a<g.largestBatchId&&(a=g.largestBatchId),s.get(h)?j.resolve():this.remoteDocumentCache.getEntry(e,h).next(E=>{c=c.insert(h,E)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,c,d,Se())).next(h=>({batchId:a,changes:IW(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ne(t)).next(r=>{let i=ph();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=ph();return this.indexManager.getCollectionParents(e,s).next(a=>j.forEach(a,c=>{let d=(function(g,E){return new wu(E,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)})(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(h=>{h.forEach((g,E)=>{o=o.insert(g,E)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((c,d)=>{let h=d.getKey();o.get(h)===null&&(o=o.insert(h,fr.newInvalidDocument(h)))});let a=ph();return o.forEach((c,d)=>{let h=s.get(c);h!==void 0&&yh(h.mutation,d,da.empty(),Jt.now()),Wy(t,d)&&(a=a.insert(c,d))}),a})}};var tA=class{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return j.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:yu(i.createTime)}})(t)),j.resolve()}getNamedQuery(e,t){return j.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(i){return{name:i.name,query:U1(i.bundledQuery),readTime:yu(i.readTime)}})(t)),j.resolve()}};var nA=class{constructor(){this.overlays=new st(ne.comparator),this.Lr=new Map}getOverlay(e,t){return j.resolve(this.overlays.get(t))}getOverlays(e,t){let r=ha();return j.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.bt(e,t,s)}),j.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Lr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Lr.delete(r)),j.resolve()}getOverlaysForCollection(e,t,r){let i=ha(),s=t.length+1,o=new ne(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,d=c.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return j.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new st((d,h)=>d-h),o=this.overlays.getIterator();for(;o.hasNext();){let d=o.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>r){let h=s.get(d.largestBatchId);h===null&&(h=ha(),s=s.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}let a=ha(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,h)=>a.set(d,h)),!(a.size()>=i)););return j.resolve(a)}bt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.Lr.get(i.largestBatchId).delete(r.key);this.Lr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Ub(t,r));let s=this.Lr.get(t);s===void 0&&(s=Se(),this.Lr.set(t,s)),this.Lr.set(t,s.add(r.key))}};var rA=class{constructor(){this.sessionToken=Bt.EMPTY_BYTE_STRING}getSessionToken(e){return j.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,j.resolve()}};var Nh=class{constructor(){this.kr=new Nt(dt.Kr),this.qr=new Nt(dt.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){let r=new dt(e,t);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new dt(e,t))}Qr(e,t){e.forEach(r=>this.removeReference(r,t))}Gr(e){let t=new ne(new ht([])),r=new dt(t,e),i=new dt(t,e+1),s=[];return this.qr.forEachInRange([r,i],o=>{this.Wr(o),s.push(o.key)}),s}zr(){this.kr.forEach(e=>this.Wr(e))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){let t=new ne(new ht([])),r=new dt(t,e),i=new dt(t,e+1),s=Se();return this.qr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new dt(e,0),r=this.kr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},dt=class{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return ne.comparator(e.key,t.key)||Ae(e.Hr,t.Hr)}static Ur(e,t){return Ae(e.Hr,t.Hr)||ne.comparator(e.key,t.key)}};var iA=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new Nt(dt.Kr)}checkEmpty(e){return j.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new Vb(s,t,r,i);this.mutationQueue.push(o);for(let a of i)this.Jr=this.Jr.add(new dt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return j.resolve(o)}lookupMutationBatch(e,t){return j.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Xr(r),s=i<0?0:i;return j.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return j.resolve(this.mutationQueue.length===0?J5:this.Yn-1)}getAllMutationBatches(e){return j.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new dt(t,0),i=new dt(t,Number.POSITIVE_INFINITY),s=[];return this.Jr.forEachInRange([r,i],o=>{let a=this.Zr(o.Hr);s.push(a)}),j.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Nt(Ae);return t.forEach(i=>{let s=new dt(i,0),o=new dt(i,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([s,o],a=>{r=r.add(a.Hr)})}),j.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;ne.isDocumentKey(s)||(s=s.child(""));let o=new dt(new ne(s),0),a=new Nt(Ae);return this.Jr.forEachWhile(c=>{let d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(a=a.add(c.Hr)),!0)},o),j.resolve(this.Yr(a))}Yr(e){let t=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Je(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return j.forEach(t.mutations,i=>{let s=new dt(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Jr=r})}nr(e){}containsKey(e,t){let r=new dt(t,0),i=this.Jr.firstAfterOrEqual(r);return j.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,j.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var sA=class{constructor(e){this.ti=e,this.docs=(function(){return new st(ne.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.ti(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return j.resolve(r?r.document.mutableCopy():fr.newInvalidDocument(t))}getEntries(e,t){let r=zs();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():fr.newInvalidDocument(i))}),j.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=zs(),o=t.path,a=new ne(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:d,value:{document:h}}=c.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||K5(W5(h),r)<=0||(i.has(h.key)||Wy(t,h))&&(s=s.insert(h.key,h.mutableCopy()))}return j.resolve(s)}getAllFromCollectionGroup(e,t,r,i){ae(9500)}ni(e,t){return j.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new oA(this)}getSize(e){return j.resolve(this.size)}},oA=class extends Xb{constructor(e){super(),this.Mr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Mr.addEntry(e,i)):this.Mr.removeEntry(r)}),j.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}};var aA=class{constructor(e){this.persistence=e,this.ri=new Pi(t=>HA(t),qA),this.lastRemoteSnapshotVersion=pe.min(),this.highestTargetId=0,this.ii=0,this.si=new Nh,this.targetCount=0,this.oi=Rh._r()}forEachTarget(e,t){return this.ri.forEach((r,i)=>t(i)),j.resolve()}getLastRemoteSnapshotVersion(e){return j.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return j.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),j.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.ii&&(this.ii=t),j.resolve()}lr(e){this.ri.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.oi=new Rh(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,j.resolve()}updateTargetData(e,t){return this.lr(t),j.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,j.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.ri.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.ri.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),j.waitFor(s).next(()=>i)}getTargetCount(e){return j.resolve(this.targetCount)}getTargetData(e,t){let r=this.ri.get(t)||null;return j.resolve(r)}addMatchingKeys(e,t,r){return this.si.$r(t,r),j.resolve()}removeMatchingKeys(e,t,r){this.si.Qr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),j.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),j.resolve()}getMatchingKeysForTargetId(e,t){let r=this.si.jr(t);return j.resolve(r)}containsKey(e,t){return j.resolve(this.si.containsKey(t))}};var Cy=class{constructor(e,t){this._i={},this.overlays={},this.ai=new BA(0),this.ui=!1,this.ui=!0,this.ci=new rA,this.referenceDelegate=e(this),this.li=new aA(this),this.indexManager=new Wb,this.remoteDocumentCache=(function(i){return new sA(i)})(r=>this.referenceDelegate.hi(r)),this.serializer=new Gb(t),this.Pi=new tA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new nA,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this._i[e.toKey()];return r||(r=new iA(t,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,r){W("MemoryPersistence","Starting transaction:",e);let i=new cA(this.ai.next());return this.referenceDelegate.Ti(),r(i).next(s=>this.referenceDelegate.Ii(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ei(e,t){return j.or(Object.values(this._i).map(r=>()=>r.containsKey(e,t)))}},cA=class extends Tb{constructor(e){super(),this.currentSequenceNumber=e}},uA=class n{constructor(e){this.persistence=e,this.Ri=new Nh,this.Ai=null}static Vi(e){return new n(e)}get di(){if(this.Ai)return this.Ai;throw ae(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.di.delete(r.toString()),j.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.di.add(r.toString()),j.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),j.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach(i=>this.di.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.di.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Ti(){this.Ai=new Set}Ii(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return j.forEach(this.di,r=>{let i=ne.fromPath(r);return this.mi(e,i).next(s=>{s||t.removeEntry(i,pe.min())})}).next(()=>(this.Ai=null,t.apply(e)))}updateLimboDocument(e,t){return this.mi(e,t).next(r=>{r?this.di.delete(t.toString()):this.di.add(t.toString())})}hi(e){return 0}mi(e,t){return j.or([()=>j.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},Ry=class n{constructor(e,t){this.persistence=e,this.fi=new Pi(r=>X5(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=YW(this,t)}static Vi(e,t){return new n(e,t)}Ti(){}Ii(e){return j.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){let t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}pr(e){let t=0;return this.mr(e,r=>{t++}).next(()=>t)}mr(e,t){return j.forEach(this.fi,(r,i)=>this.wr(e,r,i).next(s=>s?j.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ni(e,o=>this.wr(e,o,t).next(a=>{a||(r++,s.removeEntry(o,pe.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),j.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),j.resolve()}removeReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),j.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),j.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=uy(e.data.value)),t}wr(e,t,r){return j.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.fi.get(t);return j.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var lA=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Ts=r,this.Is=i}static Es(e,t){let r=Se(),i=Se();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var dA=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var hA=class{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return OM()?8:Y5(Sn())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.gs(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ps(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new dA;return this.ys(e,t,o).next(a=>{if(s.result=a,this.As)return this.ws(e,t,o,a.size)})}).next(()=>s.result)}ws(e,t,r,i){return r.documentReadCount<this.Vs?(uu()<=Te.DEBUG&&W("QueryEngine","SDK will not create cache indexes for query:",lu(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),j.resolve()):(uu()<=Te.DEBUG&&W("QueryEngine","Query:",lu(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ds*i?(uu()<=Te.DEBUG&&W("QueryEngine","The SDK decides to create cache indexes for query:",lu(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Hr(t))):j.resolve())}gs(e,t){if(mO(t))return j.resolve(null);let r=Hr(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Ey(t,null,"F"),r=Hr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=Se(...s);return this.fs.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let d=this.bs(t,a);return this.Ss(t,d,o,c.readTime)?this.gs(e,Ey(t,null,"F")):this.Ds(e,d,t,c)}))})))}ps(e,t,r,i){return mO(t)||i.isEqual(pe.min())?j.resolve(null):this.fs.getDocuments(e,r).next(s=>{let o=this.bs(t,s);return this.Ss(t,o,r,i)?j.resolve(null):(uu()<=Te.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),lu(t)),this.Ds(e,o,t,G5(i,_h)).next(a=>a))})}bs(e,t){let r=new Nt(b1(e));return t.forEach((i,s)=>{Wy(e,s)&&(r=r.add(s))}),r}Ss(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ys(e,t,r){return uu()<=Te.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",lu(t)),this.fs.getDocumentsMatchingQuery(e,t,_a.min(),r)}Ds(e,t,r,i){return this.fs.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var zA="LocalStore",JW=3e8,fA=class{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.vs=new st(Ae),this.Fs=new Pi(s=>HA(s),qA),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new eA(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.vs))}};function XW(n,e,t,r){return new fA(n,e,t,r)}async function B1(n,e){let t=Ce(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.Os(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=Se();for(let d of i){o.push(d.batchId);for(let h of d.mutations)c=c.add(h.key)}for(let d of s){a.push(d.batchId);for(let h of d.mutations)c=c.add(h.key)}return t.localDocuments.getDocuments(r,c).next(d=>({Ns:d,removedBatchIds:o,addedBatchIds:a}))})})}function $1(n){let e=Ce(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.li.getLastRemoteSnapshotVersion(t))}function ZW(n,e){let t=Ce(n),r=e.snapshotVersion,i=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.xs.newChangeBuffer({trackRemovals:!0});i=t.vs;let a=[];e.targetChanges.forEach((h,g)=>{let E=i.get(g);if(!E)return;a.push(t.li.removeMatchingKeys(s,h.removedDocuments,g).next(()=>t.li.addMatchingKeys(s,h.addedDocuments,g)));let D=E.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(g)!==null?D=D.withResumeToken(Bt.EMPTY_BYTE_STRING,pe.min()).withLastLimboFreeSnapshotVersion(pe.min()):h.resumeToken.approximateByteSize()>0&&(D=D.withResumeToken(h.resumeToken,r)),i=i.insert(g,D),(function(M,k,V){return M.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=JW?!0:V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0})(E,D,h)&&a.push(t.li.updateTargetData(s,D))});let c=zs(),d=Se();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(e8(s,o,e.documentUpdates).next(h=>{c=h.Bs,d=h.Ls})),!r.isEqual(pe.min())){let h=t.li.getLastRemoteSnapshotVersion(s).next(g=>t.li.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return j.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,d)).next(()=>c)}).then(s=>(t.vs=i,s))}function e8(n,e,t){let r=Se(),i=Se();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=zs();return t.forEach((a,c)=>{let d=s.get(a);c.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(pe.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):W(zA,"Ignoring outdated watch update for ",a,". Current version:",d.version," Watch version:",c.version)}),{Bs:o,Ls:i}})}function t8(n,e){let t=Ce(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.li.getTargetData(r,e).next(s=>s?(i=s,j.resolve(i)):t.li.allocateTargetId(r).next(o=>(i=new Ch(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.li.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.vs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.vs=t.vs.insert(r.targetId,r),t.Fs.set(e,r.targetId)),r})}async function pA(n,e,t){let r=Ce(n),i=r.vs.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!ku(o))throw o;W(zA,`Failed to update sequence numbers for target ${e}: ${o}`)}r.vs=r.vs.remove(e),r.Fs.delete(i.target)}function CO(n,e,t){let r=Ce(n),i=pe.min(),s=Se();return r.persistence.runTransaction("Execute query","readwrite",o=>(function(c,d,h){let g=Ce(c),E=g.Fs.get(h);return E!==void 0?j.resolve(g.vs.get(E)):g.li.getTargetData(d,h)})(r,o,Hr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,e,t?i:pe.min(),t?s:Se())).next(a=>(n8(r,yW(e),a),{documents:a,ks:s})))}function n8(n,e,t){let r=n.Ms.get(e)||pe.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.Ms.set(e,r)}var Ny=class{constructor(){this.activeTargetIds=TW()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var gA=class{constructor(){this.vo=new Ny,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,r){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Ny,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var mA=class{Mo(e){}shutdown(){}};var RO="ConnectivityMonitor",Py=class{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){W(RO,"Network connectivity changed: AVAILABLE");for(let e of this.Lo)e(0)}Bo(){W(RO,"Network connectivity changed: UNAVAILABLE");for(let e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var cy=null;function yA(){return cy===null?cy=(function(){return 268435456+Math.round(2147483648*Math.random())})():cy++,"0x"+cy.toString(16)}var mb="RestConnection",r8={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"},_A=class{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.$o=this.databaseId.database===Ab?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,s){let o=yA(),a=this.Qo(e,t.toUriEncodedString());W(mb,`Sending RPC '${e}' ${o}:`,a,r);let c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(c,i,s);let{host:d}=new URL(a),h=Jd(d);return this.zo(e,a,c,r,h).then(g=>(W(mb,`Received RPC '${e}' ${o}: `,g),g),g=>{throw ya(mb,`RPC '${e}' ${o} failed with error: `,g,"url: ",a,"request:",r),g})}jo(e,t,r,i,s,o){return this.Wo(e,t,r,i,s)}Go(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Nu})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}Qo(e,t){let r=r8[e],i=`${this.qo}/v1/${t}:${r}`;return this.databaseInfo.apiKey&&(i=`${i}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),i}terminate(){}};var vA=class{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}};var Qt="WebChannelConnection",fh=(n,e,t)=>{n.listen(e,r=>{try{t(r)}catch(i){setTimeout(()=>{throw i},0)}})},ky=class n extends _A{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!n.c_){let e=db();fh(e,lb.STAT_EVENT,t=>{t.stat===sy.PROXY?W(Qt,"STAT_EVENT: detected buffering proxy"):t.stat===sy.NOPROXY&&W(Qt,"STAT_EVENT: detected no buffering proxy")}),n.c_=!0}}zo(e,t,r,i,s){let o=yA();return new Promise((a,c)=>{let d=new cb;d.setWithCredentials(!0),d.listenOnce(ub.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case hh.NO_ERROR:let g=d.getResponseJson();W(Qt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(g)),a(g);break;case hh.TIMEOUT:W(Qt,`RPC '${e}' ${o} timed out`),c(new Z(q.DEADLINE_EXCEEDED,"Request time out"));break;case hh.HTTP_ERROR:let E=d.getStatus();if(W(Qt,`RPC '${e}' ${o} failed with status:`,E,"response text:",d.getResponseText()),E>0){let D=d.getResponseJson();Array.isArray(D)&&(D=D[0]);let R=D?.error;if(R&&R.status&&R.message){let M=(function(V){let z=V.toLowerCase().replace(/_/g,"-");return Object.values(q).indexOf(z)>=0?z:q.UNKNOWN})(R.status);c(new Z(M,R.message))}else c(new Z(q.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new Z(q.UNAVAILABLE,"Connection failed."));break;default:ae(9055,{l_:e,streamId:o,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{W(Qt,`RPC '${e}' ${o} completed.`)}});let h=JSON.stringify(i);W(Qt,`RPC '${e}' ${o} sending request:`,i),d.send(t,"POST",h,r,15)})}T_(e,t,r){let i=yA(),s=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=this.createWebChannelTransport(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(a.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Go(a.initMessageHeaders,t,r),a.encodeInitMessageHeaders=!0;let d=s.join("");W(Qt,`Creating RPC '${e}' stream ${i}: ${d}`,a);let h=o.createWebChannel(d,a);this.I_(h);let g=!1,E=!1,D=new vA({Ho:R=>{E?W(Qt,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(g||(W(Qt,`Opening RPC '${e}' stream ${i} transport.`),h.open(),g=!0),W(Qt,`RPC '${e}' stream ${i} sending:`,R),h.send(R))},Jo:()=>h.close()});return fh(h,cu.EventType.OPEN,()=>{E||(W(Qt,`RPC '${e}' stream ${i} transport opened.`),D.i_())}),fh(h,cu.EventType.CLOSE,()=>{E||(E=!0,W(Qt,`RPC '${e}' stream ${i} transport closed`),D.o_(),this.E_(h))}),fh(h,cu.EventType.ERROR,R=>{E||(E=!0,ya(Qt,`RPC '${e}' stream ${i} transport errored. Name:`,R.name,"Message:",R.message),D.o_(new Z(q.UNAVAILABLE,"The operation could not be completed")))}),fh(h,cu.EventType.MESSAGE,R=>{if(!E){let M=R.data[0];Je(!!M,16349);let k=M,V=k?.error||k[0]?.error;if(V){W(Qt,`RPC '${e}' stream ${i} received error:`,V);let z=V.status,K=(function(re){let b=lt[re];if(b!==void 0)return k1(b)})(z),ye=V.message;K===void 0&&(K=q.INTERNAL,ye="Unknown error status: "+z+" with message "+V.message),E=!0,D.o_(new Z(K,ye)),h.close()}else W(Qt,`RPC '${e}' stream ${i} received:`,M),D.__(M)}}),n.u_(),setTimeout(()=>{D.s_()},0),D}terminate(){this.a_.forEach(e=>e.close()),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter(t=>t===e)}Go(e,t,r){super.Go(e,t,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return hb()}};function i8(n){return new ky(n)}function yb(){return typeof document<"u"?document:null}function GA(n){return new Hb(n,!0)}ky.c_=!1;var My=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Ci=e,this.timerId=t,this.R_=r,this.A_=i,this.V_=s,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();let t=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&W("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}};var NO="PersistentStream",IA=class{constructor(e,t,r,i,s,o,a,c){this.Ci=e,this.b_=r,this.S_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new My(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,()=>this.k_()))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===q.RESOURCE_EXHAUSTED?(Ci(t.toString()),Ci("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;let e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===t&&this.G_(r,i)},r=>{e(()=>{let i=new Z(q.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,t){let r=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.Yo(()=>{r(()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.Yo()))}),this.stream.t_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.H_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return W(NO,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget(()=>this.D_===e?t():(W(NO,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},EA=class extends IA{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();let t=BW(this.serializer,e),r=(function(s){if(!("targetChange"in s))return pe.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?pe.min():o.readTime?yu(o.readTime):pe.min()})(e);return this.listener.J_(t,r)}Z_(e){let t={};t.database=bO(this.serializer),t.addTarget=(function(s,o){let a,c=o.target;if(a=Fb(c)?{documents:$W(s,c)}:{query:HW(s,c).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=VW(s,o.resumeToken);let d=qb(s,o.expectedCount);d!==null&&(a.expectedCount=d)}else if(o.snapshotVersion.compareTo(pe.min())>0){a.readTime=FW(s,o.snapshotVersion.toTimestamp());let d=qb(s,o.expectedCount);d!==null&&(a.expectedCount=d)}return a})(this.serializer,e);let r=zW(this.serializer,e);r&&(t.labels=r),this.K_(t)}X_(e){let t={};t.database=bO(this.serializer),t.removeTarget=e,this.K_(t)}};var wA=class{},TA=class extends wA{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new Z(q.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Wo(e,zb(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Z(q.UNKNOWN,s.toString())})}jo(e,t,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.jo(e,zb(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Z(q.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}};function s8(n,e,t,r){return new TA(n,e,t,r)}var bA=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ci(t),this.aa=!1):W("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}};var Su="RemoteStore",AA=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=s,this.Aa.Mo(o=>{r.enqueueAndForget(async()=>{Fh(this)&&(W(Su,"Restarting streams for network reachability change."),await(async function(c){let d=Ce(c);d.Ea.add(4),await Lh(d),d.Va.set("Unknown"),d.Ea.delete(4),await Ky(d)})(this))})}),this.Va=new bA(r,i)}};async function Ky(n){if(Fh(n))for(let e of n.Ra)await e(!0)}async function Lh(n){for(let e of n.Ra)await e(!1)}function H1(n,e){let t=Ce(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),YA(t)?QA(t):Mu(t).O_()&&KA(t,e))}function WA(n,e){let t=Ce(n),r=Mu(t);t.Ia.delete(e),r.O_()&&q1(t,e),t.Ia.size===0&&(r.O_()?r.L_():Fh(t)&&t.Va.set("Unknown"))}function KA(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(pe.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Mu(n).Z_(e)}function q1(n,e){n.da.$e(e),Mu(n).X_(e)}function QA(n){n.da=new $b({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Mu(n).start(),n.Va.ua()}function YA(n){return Fh(n)&&!Mu(n).x_()&&n.Ia.size>0}function Fh(n){return Ce(n).Ea.size===0}function z1(n){n.da=void 0}async function o8(n){n.Va.set("Online")}async function a8(n){n.Ia.forEach((e,t)=>{KA(n,e)})}async function c8(n,e){z1(n),YA(n)?(n.Va.ha(e),QA(n)):n.Va.set("Unknown")}async function u8(n,e,t){if(n.Va.set("Online"),e instanceof Ay&&e.state===2&&e.cause)try{await(async function(i,s){let o=s.cause;for(let a of s.targetIds)i.Ia.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ia.delete(a),i.da.removeTarget(a))})(n,e)}catch(r){W(Su,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await PO(n,r)}else if(e instanceof mu?n.da.Xe(e):e instanceof by?n.da.st(e):n.da.tt(e),!t.isEqual(pe.min()))try{let r=await $1(n.localStore);t.compareTo(r)>=0&&await(function(s,o){let a=s.da.Tt(o);return a.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){let h=s.Ia.get(d);h&&s.Ia.set(d,h.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,d)=>{let h=s.Ia.get(c);if(!h)return;s.Ia.set(c,h.withResumeToken(Bt.EMPTY_BYTE_STRING,h.snapshotVersion)),q1(s,c);let g=new Ch(h.target,c,d,h.sequenceNumber);KA(s,g)}),s.remoteSyncer.applyRemoteEvent(a)})(n,t)}catch(r){W(Su,"Failed to raise snapshot:",r),await PO(n,r)}}async function PO(n,e,t){if(!ku(e))throw e;n.Ea.add(1),await Lh(n),n.Va.set("Offline"),t||(t=()=>$1(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{W(Su,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Ky(n)})}async function kO(n,e){let t=Ce(n);t.asyncQueue.verifyOperationInProgress(),W(Su,"RemoteStore received new credentials");let r=Fh(t);t.Ea.add(3),await Lh(t),r&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Ky(t)}async function l8(n,e){let t=Ce(n);e?(t.Ea.delete(2),await Ky(t)):e||(t.Ea.add(2),await Lh(t),t.Va.set("Unknown"))}function Mu(n){return n.ma||(n.ma=(function(t,r,i){let s=Ce(t);return s.sa(),new EA(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Zo:o8.bind(null,n),Yo:a8.bind(null,n),t_:c8.bind(null,n),J_:u8.bind(null,n)}),n.Ra.push(async e=>{e?(n.ma.B_(),YA(n)?QA(n):n.Va.set("Unknown")):(await n.ma.stop(),z1(n))})),n.ma}var DA=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new $s,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,a=new n(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Z(q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function G1(n,e){if(Ci("AsyncQueue",`${e}: ${n}`),ku(n))return new Z(q.UNAVAILABLE,`${e}: ${n}`);throw n}var Ph=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ne.comparator(t.key,r.key):(t,r)=>ne.comparator(t.key,r.key),this.keyedMap=ph(),this.sortedSet=new st(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var xy=class{constructor(){this.ga=new st(ne.comparator)}track(e){let t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):ae(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){let e=[];return this.ga.inorderTraversal((t,r)=>{e.push(r)}),e}},Ea=class n{constructor(e,t,r,i,s,o,a,c,d){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,t,r,i,s){let o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new n(e,t,Ph.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Gy(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var SA=class{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some(e=>e.Da())}},CA=class{constructor(){this.queries=MO(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){let i=Ce(t),s=i.queries;i.queries=MO(),s.forEach((o,a)=>{for(let c of a.ba)c.onError(r)})})(this,new Z(q.ABORTED,"Firestore shutting down"))}};function MO(){return new Pi(n=>T1(n),Gy)}async function d8(n,e){let t=Ce(n),r=3,i=e.query,s=t.queries.get(i);s?!s.Sa()&&e.Da()&&(r=2):(s=new SA,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await t.onListen(i,!0);break;case 1:s.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(o){let a=G1(o,`Initialization of query '${lu(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.ba.push(e),e.va(t.onlineState),s.wa&&e.Fa(s.wa)&&JA(t)}async function h8(n,e){let t=Ce(n),r=e.query,i=3,s=t.queries.get(r);if(s){let o=s.ba.indexOf(e);o>=0&&(s.ba.splice(o,1),s.ba.length===0?i=e.Da()?0:1:!s.Sa()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function f8(n,e){let t=Ce(n),r=!1;for(let i of e){let s=i.query,o=t.queries.get(s);if(o){for(let a of o.ba)a.Fa(i)&&(r=!0);o.wa=i}}r&&JA(t)}function p8(n,e,t){let r=Ce(n),i=r.queries.get(e);if(i)for(let s of i.ba)s.onError(t);r.queries.delete(e)}function JA(n){n.Ca.forEach(e=>{e.next()})}var RA,xO;(xO=RA||(RA={})).Ma="default",xO.Cache="cache";var NA=class{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Ea(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;let r=t!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;let t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Ea.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==RA.Cache}};var Oy=class{constructor(e){this.key=e}},Ly=class{constructor(e){this.key=e}},PA=class{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Se(),this.mutatedKeys=Se(),this.eu=b1(e),this.tu=new Ph(this.eu)}get nu(){return this.Za}ru(e,t){let r=t?t.iu:new xy,i=t?t.tu:this.tu,s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,g)=>{let E=i.get(h),D=Wy(this.query,g)?g:null,R=!!E&&this.mutatedKeys.has(E.key),M=!!D&&(D.hasLocalMutations||this.mutatedKeys.has(D.key)&&D.hasCommittedMutations),k=!1;E&&D?E.data.isEqual(D.data)?R!==M&&(r.track({type:3,doc:D}),k=!0):this.su(E,D)||(r.track({type:2,doc:D}),k=!0,(c&&this.eu(D,c)>0||d&&this.eu(D,d)<0)&&(a=!0)):!E&&D?(r.track({type:0,doc:D}),k=!0):E&&!D&&(r.track({type:1,doc:E}),k=!0,(c||d)&&(a=!0)),k&&(D?(o=o.add(D),s=M?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Ss:a,mutatedKeys:s}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let o=e.iu.ya();o.sort((h,g)=>(function(D,R){let M=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ae(20277,{Vt:k})}};return M(D)-M(R)})(h.type,g.type)||this.eu(h.doc,g.doc)),this.ou(r),i=i??!1;let a=t&&!i?this._u():[],c=this.Ya.size===0&&this.current&&!i?1:0,d=c!==this.Xa;return this.Xa=c,o.length!==0||d?{snapshot:new Ea(this.query,e.tu,s,o,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new xy,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Za=this.Za.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Za=this.Za.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Ya;this.Ya=Se(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))});let t=[];return e.forEach(r=>{this.Ya.has(r)||t.push(new Ly(r))}),this.Ya.forEach(r=>{e.has(r)||t.push(new Oy(r))}),t}cu(e){this.Za=e.ks,this.Ya=Se();let t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Ea.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}},XA="SyncEngine",kA=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},MA=class{constructor(e){this.key=e,this.hu=!1}},xA=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Pi(a=>T1(a),Gy),this.Iu=new Map,this.Eu=new Set,this.Ru=new st(ne.comparator),this.Au=new Map,this.Vu=new Nh,this.du={},this.mu=new Map,this.fu=Rh.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}};async function g8(n,e,t=!0){let r=J1(n),i,s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await W1(r,e,t,!0),i}async function m8(n,e){let t=J1(n);await W1(t,e,!0,!1)}async function W1(n,e,t,r){let i=await t8(n.localStore,Hr(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),a;return r&&(a=await y8(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&H1(n.remoteStore,i),a}async function y8(n,e,t,r,i){n.pu=(g,E,D)=>(async function(M,k,V,z){let K=k.view.ru(V);K.Ss&&(K=await CO(M.localStore,k.query,!1).then(({documents:b})=>k.view.ru(b,K)));let ye=z&&z.targetChanges.get(k.targetId),ze=z&&z.targetMismatches.get(k.targetId)!=null,re=k.view.applyChanges(K,M.isPrimaryClient,ye,ze);return LO(M,k.targetId,re.au),re.snapshot})(n,g,E,D);let s=await CO(n.localStore,e,!0),o=new PA(e,s.ks),a=o.ru(s.documents),c=Sh.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),d=o.applyChanges(a,n.isPrimaryClient,c);LO(n,t,d.au);let h=new kA(e,t,o);return n.Tu.set(e,h),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),d.snapshot}async function _8(n,e,t){let r=Ce(n),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(o=>!Gy(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await pA(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&WA(r.remoteStore,i.targetId),OA(r,i.targetId)}).catch(By)):(OA(r,i.targetId),await pA(r.localStore,i.targetId,!0))}async function v8(n,e){let t=Ce(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),WA(t.remoteStore,r.targetId))}async function K1(n,e){let t=Ce(n);try{let r=await ZW(t.localStore,e);e.targetChanges.forEach((i,s)=>{let o=t.Au.get(s);o&&(Je(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?Je(o.hu,14607):i.removedDocuments.size>0&&(Je(o.hu,42227),o.hu=!1))}),await Y1(t,r,e)}catch(r){await By(r)}}function OO(n,e,t){let r=Ce(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Tu.forEach((s,o)=>{let a=o.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(o,a){let c=Ce(o);c.onlineState=a;let d=!1;c.queries.forEach((h,g)=>{for(let E of g.ba)E.va(a)&&(d=!0)}),d&&JA(c)})(r.eventManager,e),i.length&&r.Pu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function I8(n,e,t){let r=Ce(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Au.get(e),s=i&&i.key;if(s){let o=new st(ne.comparator);o=o.insert(s,fr.newNoDocument(s,pe.min()));let a=Se().add(s),c=new Ty(pe.min(),new Map,new st(Ae),o,a);await K1(r,c),r.Ru=r.Ru.remove(s),r.Au.delete(e),ZA(r)}else await pA(r.localStore,e,!1).then(()=>OA(r,e,t)).catch(By)}function OA(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach(r=>{n.Vu.containsKey(r)||Q1(n,r)})}function Q1(n,e){n.Eu.delete(e.path.canonicalString());let t=n.Ru.get(e);t!==null&&(WA(n.remoteStore,t),n.Ru=n.Ru.remove(e),n.Au.delete(t),ZA(n))}function LO(n,e,t){for(let r of t)r instanceof Oy?(n.Vu.addReference(r.key,e),E8(n,r)):r instanceof Ly?(W(XA,"Document no longer in limbo: "+r.key),n.Vu.removeReference(r.key,e),n.Vu.containsKey(r.key)||Q1(n,r.key)):ae(19791,{wu:r})}function E8(n,e){let t=e.key,r=t.path.canonicalString();n.Ru.get(t)||n.Eu.has(r)||(W(XA,"New document in limbo: "+t),n.Eu.add(r),ZA(n))}function ZA(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){let e=n.Eu.values().next().value;n.Eu.delete(e);let t=new ne(ht.fromString(e)),r=n.fu.next();n.Au.set(r,new MA(t)),n.Ru=n.Ru.insert(t,r),H1(n.remoteStore,new Ch(Hr(zy(t.path)),r,"TargetPurposeLimboResolution",BA.ce))}}async function Y1(n,e,t){let r=Ce(n),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,c)=>{o.push(r.pu(c,e,t).then(d=>{if((d||t)&&r.isPrimaryClient){let h=d?!d.fromCache:t?.targetChanges.get(c.targetId)?.current;r.sharedClientState.updateQueryState(c.targetId,h?"current":"not-current")}if(d){i.push(d);let h=lA.Es(c.targetId,d);s.push(h)}}))}),await Promise.all(o),r.Pu.J_(i),await(async function(c,d){let h=Ce(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>j.forEach(d,E=>j.forEach(E.Ts,D=>h.persistence.referenceDelegate.addReference(g,E.targetId,D)).next(()=>j.forEach(E.Is,D=>h.persistence.referenceDelegate.removeReference(g,E.targetId,D)))))}catch(g){if(!ku(g))throw g;W(zA,"Failed to update sequence numbers: "+g)}for(let g of d){let E=g.targetId;if(!g.fromCache){let D=h.vs.get(E),R=D.snapshotVersion,M=D.withLastLimboFreeSnapshotVersion(R);h.vs=h.vs.insert(E,M)}}})(r.localStore,s))}async function w8(n,e){let t=Ce(n);if(!t.currentUser.isEqual(e)){W(XA,"User change. New user:",e.toKey());let r=await B1(t.localStore,e);t.currentUser=e,(function(s,o){s.mu.forEach(a=>{a.forEach(c=>{c.reject(new Z(q.CANCELLED,o))})}),s.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Y1(t,r.Ns)}}function T8(n,e){let t=Ce(n),r=t.Au.get(e);if(r&&r.hu)return Se().add(r.key);{let i=Se(),s=t.Iu.get(e);if(!s)return i;for(let o of s){let a=t.Tu.get(o);i=i.unionWith(a.view.nu)}return i}}function J1(n){let e=Ce(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=K1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=T8.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=I8.bind(null,e),e.Pu.J_=f8.bind(null,e.eventManager),e.Pu.yu=p8.bind(null,e.eventManager),e}var eD=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=GA(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,r){return null}Mu(t,r){return null}vu(t){return XW(this.persistence,new hA,t.initialUser,this.serializer)}Cu(t){return new Cy(uA.Vi,this.serializer)}Du(t){return new gA}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}return n.provider={build:()=>new n},n})(),Fy=class extends eD{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Je(this.persistence.referenceDelegate instanceof Ry,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new Yb(r,e.asyncQueue,t)}Cu(e){let t=this.cacheSizeBytes!==void 0?Un.withCacheSize(this.cacheSizeBytes):Un.DEFAULT;return new Cy(r=>Ry.Vi(r,t),this.serializer)}};var X1=(()=>{class n{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>OO(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=w8.bind(null,this.syncEngine),await l8(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new CA})()}createDatastore(t){let r=GA(t.databaseInfo.databaseId),i=i8(t.databaseInfo);return s8(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return(function(i,s,o,a,c){return new AA(i,s,o,a,c)})(this.localStore,this.datastore,t.asyncQueue,r=>OO(this.syncEngine,r,0),(function(){return Py.v()?new Py:new mA})())}createSyncEngine(t,r){return(function(s,o,a,c,d,h,g){let E=new xA(s,o,a,c,d,h);return g&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){await(async function(r){let i=Ce(r);W(Su,"RemoteStore shutting down."),i.Ea.add(5),await Lh(i),i.Aa.shutdown(),i.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}return n.provider={build:()=>new n},n})();var LA=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ci("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Gs="FirestoreClient",FA=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this._databaseInfo=i,this.user=Yt.UNAUTHENTICATED,this.clientId=_u.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{W(Gs,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(W(Gs,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new $s;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=G1(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}};async function _b(n,e){n.asyncQueue.verifyOperationInProgress(),W(Gs,"Initializing OfflineComponentProvider");let t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await B1(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function FO(n,e){n.asyncQueue.verifyOperationInProgress();let t=await b8(n);W(Gs,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>kO(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>kO(e.remoteStore,i)),n._onlineComponents=e}async function b8(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){W(Gs,"Using user provided OfflineComponentProvider");try{await _b(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===q.FAILED_PRECONDITION||i.code===q.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;ya("Error using user provided cache. Falling back to memory cache: "+t),await _b(n,new eD)}}else W(Gs,"Using default OfflineComponentProvider"),await _b(n,new Fy(void 0));return n._offlineComponents}async function A8(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(W(Gs,"Using user provided OnlineComponentProvider"),await FO(n,n._uninitializedComponentsProvider._online)):(W(Gs,"Using default OnlineComponentProvider"),await FO(n,new X1))),n._onlineComponents}async function VO(n){let e=await A8(n),t=e.eventManager;return t.onListen=g8.bind(null,e.syncEngine),t.onUnlisten=_8.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=m8.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=v8.bind(null,e.syncEngine),t}function Z1(n,e,t,r){let i=new LA(r),s=new NA(e,i,t);return n.asyncQueue.enqueueAndForget(async()=>d8(await VO(n),s)),()=>{i.Nu(),n.asyncQueue.enqueueAndForget(async()=>h8(await VO(n),s))}}function eL(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var D8="ComponentProvider",UO=new Map;function S8(n,e,t,r,i){return new bb(n,e,t,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,eL(i.experimentalLongPollingOptions),i.useFetchStreams,i.isUsingEmulator,r)}var C8="firestore.googleapis.com",jO=!0,Vy=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Z(q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=C8,this.ssl=jO}else this.host=e.host,this.ssl=e.ssl??jO;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=j1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<QW)throw new Z(q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}zO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=eL(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Z(q.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Z(q.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Z(q.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},VA=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Vy({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Z(q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Z(q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Vy(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new dy;switch(r.type){case"firstParty":return new Eb(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Z(q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=UO.get(t);r&&(W(D8,"Removing Datastore"),UO.delete(t),r.terminate())})(this),Promise.resolve()}};var Cu=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},hr=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Uy(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Pu(t,n._jsonSchema))return new n(e,r||null,new ne(ht.fromString(t.referencePath)))}};hr._jsonSchemaVersion="firestore/documentReference/1.0",hr._jsonSchema={type:it("string",hr._jsonSchemaVersion),referencePath:it("string")};var Uy=class n extends Cu{constructor(e,t,r){super(e,t,zy(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new hr(this.firestore,null,new ne(e))}withConverter(e){return new n(this.firestore,e,this._path)}};var BO="AsyncQueue",jy=class{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new My(this,"async_queue_retry"),this._c=()=>{let r=yb();r&&W(BO,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;let t=yb();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let t=yb();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});let t=new $s;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Yu.push(e),this.lc()))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!ku(e))throw e;W(BO,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){let t=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Ci("INTERNAL UNHANDLED ERROR: ",$O(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);let i=DA.createAndSchedule(this,e,t,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&ae(47125,{Pc:$O(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(let t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}Rc(e){this.oc.push(e)}hc(e){let t=this.tc.indexOf(e);this.tc.splice(t,1)}};function $O(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}var wa=class extends VA{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new jy,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new jy(e),this._firestoreClient=void 0,await e}}};function tD(n){if(n._terminated)throw new Z(q.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||R8(n),n._firestoreClient}function R8(n){let e=n._freezeSettings(),t=S8(n._databaseId,n._app?.options.appId||"",n._persistenceKey,n._app?.options.apiKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new FA(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(i){let s=i?._online.build();return{_offline:i?._offline.build(s),_online:s}})(n._componentsProvider))}var Hs=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Bt.fromBase64String(e))}catch(t){throw new Z(q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Bt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Pu(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};Hs._jsonSchemaVersion="firestore/bytes/1.0",Hs._jsonSchema={type:it("string",Hs._jsonSchemaVersion),bytes:it("string")};var Ru=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Z(q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new jn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var pa=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Z(q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Z(q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ae(this._lat,e._lat)||Ae(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(Pu(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};pa._jsonSchemaVersion="firestore/geoPoint/1.0",pa._jsonSchema={type:it("string",pa._jsonSchemaVersion),latitude:it("number"),longitude:it("number")};var ga=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Pu(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new Z(q.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};ga._jsonSchemaVersion="firestore/vectorValue/1.0",ga._jsonSchema={type:it("string",ga._jsonSchemaVersion),vectorValues:it("object")};function nD(n,e,t){if((e=Vr(e))instanceof Ru)return e._internalPath;if(typeof e=="string")return tL(n,e);throw UA("Field path arguments must be of type string or ",n,!1,void 0,t)}var N8=new RegExp("[~\\*/\\[\\]]");function tL(n,e,t){if(e.search(N8)>=0)throw UA(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ru(...e.split("."))._internalPath}catch{throw UA(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function UA(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new Z(q.INVALID_ARGUMENT,a+n+c)}var kh=class{convertValue(e,t="none"){switch(qs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Qe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ni(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ae(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Oh(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){let t=e.fields?.[Eh].arrayValue?.values?.map(r=>Qe(r.doubleValue));return new ga(t)}convertGeoPoint(e){return new pa(Qe(e.latitude),Qe(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=qy(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(vh(e));default:return null}}convertTimestamp(e){let t=Ri(e);return new Jt(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=ht.fromString(e);Je(V1(r),9688,{name:e});let i=new Ih(r.get(1),r.get(3)),s=new ne(r.popFirst(5));return i.isEqual(t)||Ci(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};var Mh=class extends kh{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hs(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new hr(this.firestore,null,t)}};var nL="@firebase/firestore",rL="4.10.0";function iL(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1})(n,["next","error","complete"])}var Qy=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new hr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new rD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){let t=this._document.data.field(nD("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},rD=class extends Qy{data(){return super.data()}};function L8(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Z(q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Ta=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},ba=class n extends Qy{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new xu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(nD("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Z(q.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};ba._jsonSchemaVersion="firestore/documentSnapshot/1.0",ba._jsonSchema={type:it("string",ba._jsonSchemaVersion),bundleSource:it("string","DocumentSnapshot"),bundleName:it("string"),bundle:it("string")};var xu=class extends ba{data(e={}){return super.data(e)}},Ou=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Ta(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new xu(this._firestore,this._userDataWriter,r.key,r,new Ta(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Z(q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new xu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ta(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new xu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ta(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),d=-1,h=-1;return a.type!==0&&(d=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:F8(a.type),doc:c,oldIndex:d,newIndex:h}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Z(q.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=_u.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(t.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function F8(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ae(61501,{type:n})}}Ou._jsonSchemaVersion="firestore/querySnapshot/1.0",Ou._jsonSchema={type:it("string",Ou._jsonSchemaVersion),bundleSource:it("string","QuerySnapshot"),bundleName:it("string"),bundle:it("string")};function sL(n,...e){n=Vr(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||iL(e[r])||(t=e[r++]);let i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(iL(e[r])){let d=e[r];e[r]=d.next?.bind(d),e[r+1]=d.error?.bind(d),e[r+2]=d.complete?.bind(d)}let s,o,a;if(n instanceof hr)o=xh(n.firestore,wa),a=zy(n._key.path),s={next:d=>{e[r]&&e[r](V8(o,n,d))},error:e[r+1],complete:e[r+2]};else{let d=xh(n,Cu);o=xh(d.firestore,wa),a=d._query;let h=new Mh(o);s={next:g=>{e[r]&&e[r](new Ou(o,h,d,g))},error:e[r+1],complete:e[r+2]},L8(n._query)}let c=tD(o);return Z1(c,a,i,s)}function V8(n,e,t){let r=t.docs.get(e._key),i=new Mh(n);return new ba(n,i,e._key,r,new Ta(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){HO(su),Vs(new lr("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new wa(new hy(r.getProvider("auth-internal")),new py(o,r.getProvider("app-check-internal")),d1(o,i),o);return s=$({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Ii(nL,rL,e),Ii(nL,rL,"esm2020")})();var Yy=function(){return Yy=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Yy.apply(this,arguments)};var U8={includeMetadataChanges:!1};function oL(n,e){return e===void 0&&(e=U8),new fe(function(t){var r=sL(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function aL(n){return oL(n,{includeMetadataChanges:!0})}function cL(n,e){return e===void 0&&(e={}),aL(n).pipe(Ke(function(t){return uL(t,e)}))}function uL(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:Yy(Yy({},r),(t={},t[e.idField]=n.id,t))}var lL=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},dL={};var ki,iD;(function(){var n;function e(b,_){function I(){}I.prototype=_.prototype,b.D=_.prototype,b.prototype=new I,b.prototype.constructor=b,b.C=function(T,w,C){for(var v=Array(arguments.length-2),We=2;We<arguments.length;We++)v[We-2]=arguments[We];return _.prototype[w].apply(T,v)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(b,_,I){I||(I=0);var T=Array(16);if(typeof _=="string")for(var w=0;16>w;++w)T[w]=_.charCodeAt(I++)|_.charCodeAt(I++)<<8|_.charCodeAt(I++)<<16|_.charCodeAt(I++)<<24;else for(w=0;16>w;++w)T[w]=_[I++]|_[I++]<<8|_[I++]<<16|_[I++]<<24;_=b.g[0],I=b.g[1],w=b.g[2];var C=b.g[3],v=_+(C^I&(w^C))+T[0]+3614090360&4294967295;_=I+(v<<7&4294967295|v>>>25),v=C+(w^_&(I^w))+T[1]+3905402710&4294967295,C=_+(v<<12&4294967295|v>>>20),v=w+(I^C&(_^I))+T[2]+606105819&4294967295,w=C+(v<<17&4294967295|v>>>15),v=I+(_^w&(C^_))+T[3]+3250441966&4294967295,I=w+(v<<22&4294967295|v>>>10),v=_+(C^I&(w^C))+T[4]+4118548399&4294967295,_=I+(v<<7&4294967295|v>>>25),v=C+(w^_&(I^w))+T[5]+1200080426&4294967295,C=_+(v<<12&4294967295|v>>>20),v=w+(I^C&(_^I))+T[6]+2821735955&4294967295,w=C+(v<<17&4294967295|v>>>15),v=I+(_^w&(C^_))+T[7]+4249261313&4294967295,I=w+(v<<22&4294967295|v>>>10),v=_+(C^I&(w^C))+T[8]+1770035416&4294967295,_=I+(v<<7&4294967295|v>>>25),v=C+(w^_&(I^w))+T[9]+2336552879&4294967295,C=_+(v<<12&4294967295|v>>>20),v=w+(I^C&(_^I))+T[10]+4294925233&4294967295,w=C+(v<<17&4294967295|v>>>15),v=I+(_^w&(C^_))+T[11]+2304563134&4294967295,I=w+(v<<22&4294967295|v>>>10),v=_+(C^I&(w^C))+T[12]+1804603682&4294967295,_=I+(v<<7&4294967295|v>>>25),v=C+(w^_&(I^w))+T[13]+4254626195&4294967295,C=_+(v<<12&4294967295|v>>>20),v=w+(I^C&(_^I))+T[14]+2792965006&4294967295,w=C+(v<<17&4294967295|v>>>15),v=I+(_^w&(C^_))+T[15]+1236535329&4294967295,I=w+(v<<22&4294967295|v>>>10),v=_+(w^C&(I^w))+T[1]+4129170786&4294967295,_=I+(v<<5&4294967295|v>>>27),v=C+(I^w&(_^I))+T[6]+3225465664&4294967295,C=_+(v<<9&4294967295|v>>>23),v=w+(_^I&(C^_))+T[11]+643717713&4294967295,w=C+(v<<14&4294967295|v>>>18),v=I+(C^_&(w^C))+T[0]+3921069994&4294967295,I=w+(v<<20&4294967295|v>>>12),v=_+(w^C&(I^w))+T[5]+3593408605&4294967295,_=I+(v<<5&4294967295|v>>>27),v=C+(I^w&(_^I))+T[10]+38016083&4294967295,C=_+(v<<9&4294967295|v>>>23),v=w+(_^I&(C^_))+T[15]+3634488961&4294967295,w=C+(v<<14&4294967295|v>>>18),v=I+(C^_&(w^C))+T[4]+3889429448&4294967295,I=w+(v<<20&4294967295|v>>>12),v=_+(w^C&(I^w))+T[9]+568446438&4294967295,_=I+(v<<5&4294967295|v>>>27),v=C+(I^w&(_^I))+T[14]+3275163606&4294967295,C=_+(v<<9&4294967295|v>>>23),v=w+(_^I&(C^_))+T[3]+4107603335&4294967295,w=C+(v<<14&4294967295|v>>>18),v=I+(C^_&(w^C))+T[8]+1163531501&4294967295,I=w+(v<<20&4294967295|v>>>12),v=_+(w^C&(I^w))+T[13]+2850285829&4294967295,_=I+(v<<5&4294967295|v>>>27),v=C+(I^w&(_^I))+T[2]+4243563512&4294967295,C=_+(v<<9&4294967295|v>>>23),v=w+(_^I&(C^_))+T[7]+1735328473&4294967295,w=C+(v<<14&4294967295|v>>>18),v=I+(C^_&(w^C))+T[12]+2368359562&4294967295,I=w+(v<<20&4294967295|v>>>12),v=_+(I^w^C)+T[5]+4294588738&4294967295,_=I+(v<<4&4294967295|v>>>28),v=C+(_^I^w)+T[8]+2272392833&4294967295,C=_+(v<<11&4294967295|v>>>21),v=w+(C^_^I)+T[11]+1839030562&4294967295,w=C+(v<<16&4294967295|v>>>16),v=I+(w^C^_)+T[14]+4259657740&4294967295,I=w+(v<<23&4294967295|v>>>9),v=_+(I^w^C)+T[1]+2763975236&4294967295,_=I+(v<<4&4294967295|v>>>28),v=C+(_^I^w)+T[4]+1272893353&4294967295,C=_+(v<<11&4294967295|v>>>21),v=w+(C^_^I)+T[7]+4139469664&4294967295,w=C+(v<<16&4294967295|v>>>16),v=I+(w^C^_)+T[10]+3200236656&4294967295,I=w+(v<<23&4294967295|v>>>9),v=_+(I^w^C)+T[13]+681279174&4294967295,_=I+(v<<4&4294967295|v>>>28),v=C+(_^I^w)+T[0]+3936430074&4294967295,C=_+(v<<11&4294967295|v>>>21),v=w+(C^_^I)+T[3]+3572445317&4294967295,w=C+(v<<16&4294967295|v>>>16),v=I+(w^C^_)+T[6]+76029189&4294967295,I=w+(v<<23&4294967295|v>>>9),v=_+(I^w^C)+T[9]+3654602809&4294967295,_=I+(v<<4&4294967295|v>>>28),v=C+(_^I^w)+T[12]+3873151461&4294967295,C=_+(v<<11&4294967295|v>>>21),v=w+(C^_^I)+T[15]+530742520&4294967295,w=C+(v<<16&4294967295|v>>>16),v=I+(w^C^_)+T[2]+3299628645&4294967295,I=w+(v<<23&4294967295|v>>>9),v=_+(w^(I|~C))+T[0]+4096336452&4294967295,_=I+(v<<6&4294967295|v>>>26),v=C+(I^(_|~w))+T[7]+1126891415&4294967295,C=_+(v<<10&4294967295|v>>>22),v=w+(_^(C|~I))+T[14]+2878612391&4294967295,w=C+(v<<15&4294967295|v>>>17),v=I+(C^(w|~_))+T[5]+4237533241&4294967295,I=w+(v<<21&4294967295|v>>>11),v=_+(w^(I|~C))+T[12]+1700485571&4294967295,_=I+(v<<6&4294967295|v>>>26),v=C+(I^(_|~w))+T[3]+2399980690&4294967295,C=_+(v<<10&4294967295|v>>>22),v=w+(_^(C|~I))+T[10]+4293915773&4294967295,w=C+(v<<15&4294967295|v>>>17),v=I+(C^(w|~_))+T[1]+2240044497&4294967295,I=w+(v<<21&4294967295|v>>>11),v=_+(w^(I|~C))+T[8]+1873313359&4294967295,_=I+(v<<6&4294967295|v>>>26),v=C+(I^(_|~w))+T[15]+4264355552&4294967295,C=_+(v<<10&4294967295|v>>>22),v=w+(_^(C|~I))+T[6]+2734768916&4294967295,w=C+(v<<15&4294967295|v>>>17),v=I+(C^(w|~_))+T[13]+1309151649&4294967295,I=w+(v<<21&4294967295|v>>>11),v=_+(w^(I|~C))+T[4]+4149444226&4294967295,_=I+(v<<6&4294967295|v>>>26),v=C+(I^(_|~w))+T[11]+3174756917&4294967295,C=_+(v<<10&4294967295|v>>>22),v=w+(_^(C|~I))+T[2]+718787259&4294967295,w=C+(v<<15&4294967295|v>>>17),v=I+(C^(w|~_))+T[9]+3951481745&4294967295,b.g[0]=b.g[0]+_&4294967295,b.g[1]=b.g[1]+(w+(v<<21&4294967295|v>>>11))&4294967295,b.g[2]=b.g[2]+w&4294967295,b.g[3]=b.g[3]+C&4294967295}r.prototype.u=function(b,_){_===void 0&&(_=b.length);for(var I=_-this.blockSize,T=this.B,w=this.h,C=0;C<_;){if(w==0)for(;C<=I;)i(this,b,C),C+=this.blockSize;if(typeof b=="string"){for(;C<_;)if(T[w++]=b.charCodeAt(C++),w==this.blockSize){i(this,T),w=0;break}}else for(;C<_;)if(T[w++]=b[C++],w==this.blockSize){i(this,T),w=0;break}}this.h=w,this.o+=_},r.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var _=1;_<b.length-8;++_)b[_]=0;var I=8*this.o;for(_=b.length-8;_<b.length;++_)b[_]=I&255,I/=256;for(this.u(b),b=Array(16),_=I=0;4>_;++_)for(var T=0;32>T;T+=8)b[I++]=this.g[_]>>>T&255;return b};function s(b,_){var I=a;return Object.prototype.hasOwnProperty.call(I,b)?I[b]:I[b]=_(b)}function o(b,_){this.h=_;for(var I=[],T=!0,w=b.length-1;0<=w;w--){var C=b[w]|0;T&&C==_||(I[w]=C,T=!1)}this.g=I}var a={};function c(b){return-128<=b&&128>b?s(b,function(_){return new o([_|0],0>_?-1:0)}):new o([b|0],0>b?-1:0)}function d(b){if(isNaN(b)||!isFinite(b))return g;if(0>b)return k(d(-b));for(var _=[],I=1,T=0;b>=I;T++)_[T]=b/I|0,I*=4294967296;return new o(_,0)}function h(b,_){if(b.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(b.charAt(0)=="-")return k(h(b.substring(1),_));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=d(Math.pow(_,8)),T=g,w=0;w<b.length;w+=8){var C=Math.min(8,b.length-w),v=parseInt(b.substring(w,w+C),_);8>C?(C=d(Math.pow(_,C)),T=T.j(C).add(d(v))):(T=T.j(I),T=T.add(d(v)))}return T}var g=c(0),E=c(1),D=c(16777216);n=o.prototype,n.m=function(){if(M(this))return-k(this).m();for(var b=0,_=1,I=0;I<this.g.length;I++){var T=this.i(I);b+=(0<=T?T:4294967296+T)*_,_*=4294967296}return b},n.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(R(this))return"0";if(M(this))return"-"+k(this).toString(b);for(var _=d(Math.pow(b,6)),I=this,T="";;){var w=ye(I,_).g;I=V(I,w.j(_));var C=((0<I.g.length?I.g[0]:I.h)>>>0).toString(b);if(I=w,R(I))return C+T;for(;6>C.length;)C="0"+C;T=C+T}},n.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function R(b){if(b.h!=0)return!1;for(var _=0;_<b.g.length;_++)if(b.g[_]!=0)return!1;return!0}function M(b){return b.h==-1}n.l=function(b){return b=V(this,b),M(b)?-1:R(b)?0:1};function k(b){for(var _=b.g.length,I=[],T=0;T<_;T++)I[T]=~b.g[T];return new o(I,~b.h).add(E)}n.abs=function(){return M(this)?k(this):this},n.add=function(b){for(var _=Math.max(this.g.length,b.g.length),I=[],T=0,w=0;w<=_;w++){var C=T+(this.i(w)&65535)+(b.i(w)&65535),v=(C>>>16)+(this.i(w)>>>16)+(b.i(w)>>>16);T=v>>>16,C&=65535,v&=65535,I[w]=v<<16|C}return new o(I,I[I.length-1]&-2147483648?-1:0)};function V(b,_){return b.add(k(_))}n.j=function(b){if(R(this)||R(b))return g;if(M(this))return M(b)?k(this).j(k(b)):k(k(this).j(b));if(M(b))return k(this.j(k(b)));if(0>this.l(D)&&0>b.l(D))return d(this.m()*b.m());for(var _=this.g.length+b.g.length,I=[],T=0;T<2*_;T++)I[T]=0;for(T=0;T<this.g.length;T++)for(var w=0;w<b.g.length;w++){var C=this.i(T)>>>16,v=this.i(T)&65535,We=b.i(w)>>>16,an=b.i(w)&65535;I[2*T+2*w]+=v*an,z(I,2*T+2*w),I[2*T+2*w+1]+=C*an,z(I,2*T+2*w+1),I[2*T+2*w+1]+=v*We,z(I,2*T+2*w+1),I[2*T+2*w+2]+=C*We,z(I,2*T+2*w+2)}for(T=0;T<_;T++)I[T]=I[2*T+1]<<16|I[2*T];for(T=_;T<2*_;T++)I[T]=0;return new o(I,0)};function z(b,_){for(;(b[_]&65535)!=b[_];)b[_+1]+=b[_]>>>16,b[_]&=65535,_++}function K(b,_){this.g=b,this.h=_}function ye(b,_){if(R(_))throw Error("division by zero");if(R(b))return new K(g,g);if(M(b))return _=ye(k(b),_),new K(k(_.g),k(_.h));if(M(_))return _=ye(b,k(_)),new K(k(_.g),_.h);if(30<b.g.length){if(M(b)||M(_))throw Error("slowDivide_ only works with positive integers.");for(var I=E,T=_;0>=T.l(b);)I=ze(I),T=ze(T);var w=re(I,1),C=re(T,1);for(T=re(T,2),I=re(I,2);!R(T);){var v=C.add(T);0>=v.l(b)&&(w=w.add(I),C=v),T=re(T,1),I=re(I,1)}return _=V(b,w.j(_)),new K(w,_)}for(w=g;0<=b.l(_);){for(I=Math.max(1,Math.floor(b.m()/_.m())),T=Math.ceil(Math.log(I)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),C=d(I),v=C.j(_);M(v)||0<v.l(b);)I-=T,C=d(I),v=C.j(_);R(C)&&(C=E),w=w.add(C),b=V(b,v)}return new K(w,b)}n.A=function(b){return ye(this,b).h},n.and=function(b){for(var _=Math.max(this.g.length,b.g.length),I=[],T=0;T<_;T++)I[T]=this.i(T)&b.i(T);return new o(I,this.h&b.h)},n.or=function(b){for(var _=Math.max(this.g.length,b.g.length),I=[],T=0;T<_;T++)I[T]=this.i(T)|b.i(T);return new o(I,this.h|b.h)},n.xor=function(b){for(var _=Math.max(this.g.length,b.g.length),I=[],T=0;T<_;T++)I[T]=this.i(T)^b.i(T);return new o(I,this.h^b.h)};function ze(b){for(var _=b.g.length+1,I=[],T=0;T<_;T++)I[T]=b.i(T)<<1|b.i(T-1)>>>31;return new o(I,b.h)}function re(b,_){var I=_>>5;_%=32;for(var T=b.g.length-I,w=[],C=0;C<T;C++)w[C]=0<_?b.i(C+I)>>>_|b.i(C+I+1)<<32-_:b.i(C+I);return new o(w,b.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,iD=dL.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=h,ki=dL.Integer=o}).apply(typeof lL<"u"?lL:typeof self<"u"?self:typeof window<"u"?window:{});var Jy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Mi={};var sD,j8,Lu,oD,Vh,Xy,aD,cD,uD;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,f,m){return u==Array.prototype||u==Object.prototype||(u[f]=m.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Jy=="object"&&Jy];for(var f=0;f<u.length;++f){var m=u[f];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=t(this);function i(u,f){if(f)e:{var m=r;u=u.split(".");for(var A=0;A<u.length-1;A++){var P=u[A];if(!(P in m))break e;m=m[P]}u=u[u.length-1],A=m[u],f=f(A),f!=A&&f!=null&&e(m,u,{configurable:!0,writable:!0,value:f})}}function s(u,f){u instanceof String&&(u+="");var m=0,A=!1,P={next:function(){if(!A&&m<u.length){var O=m++;return{value:f(O,u[O]),done:!1}}return A=!0,{done:!0,value:void 0}}};return P[Symbol.iterator]=function(){return P},P}i("Array.prototype.values",function(u){return u||function(){return s(this,function(f,m){return m})}});var o=o||{},a=this||self;function c(u){var f=typeof u;return f=f!="object"?f:u?Array.isArray(u)?"array":f:"null",f=="array"||f=="object"&&typeof u.length=="number"}function d(u){var f=typeof u;return f=="object"&&u!=null||f=="function"}function h(u,f,m){return u.call.apply(u.bind,arguments)}function g(u,f,m){if(!u)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var P=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(P,A),u.apply(f,P)}}return function(){return u.apply(f,arguments)}}function E(u,f,m){return E=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:g,E.apply(null,arguments)}function D(u,f){var m=Array.prototype.slice.call(arguments,1);return function(){var A=m.slice();return A.push.apply(A,arguments),u.apply(this,A)}}function R(u,f){function m(){}m.prototype=f.prototype,u.aa=f.prototype,u.prototype=new m,u.prototype.constructor=u,u.Qb=function(A,P,O){for(var B=Array(arguments.length-2),Ne=2;Ne<arguments.length;Ne++)B[Ne-2]=arguments[Ne];return f.prototype[P].apply(A,B)}}function M(u){let f=u.length;if(0<f){let m=Array(f);for(let A=0;A<f;A++)m[A]=u[A];return m}return[]}function k(u,f){for(let m=1;m<arguments.length;m++){let A=arguments[m];if(c(A)){let P=u.length||0,O=A.length||0;u.length=P+O;for(let B=0;B<O;B++)u[P+B]=A[B]}else u.push(A)}}class V{constructor(f,m){this.i=f,this.j=m,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function z(u){return/^[\s\xa0]*$/.test(u)}function K(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function ye(u){return ye[" "](u),u}ye[" "]=function(){};var ze=K().indexOf("Gecko")!=-1&&!(K().toLowerCase().indexOf("webkit")!=-1&&K().indexOf("Edge")==-1)&&!(K().indexOf("Trident")!=-1||K().indexOf("MSIE")!=-1)&&K().indexOf("Edge")==-1;function re(u,f,m){for(let A in u)f.call(m,u[A],A,u)}function b(u,f){for(let m in u)f.call(void 0,u[m],m,u)}function _(u){let f={};for(let m in u)f[m]=u[m];return f}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(u,f){let m,A;for(let P=1;P<arguments.length;P++){A=arguments[P];for(m in A)u[m]=A[m];for(let O=0;O<I.length;O++)m=I[O],Object.prototype.hasOwnProperty.call(A,m)&&(u[m]=A[m])}}function w(u){var f=1;u=u.split(":");let m=[];for(;0<f&&u.length;)m.push(u.shift()),f--;return u.length&&m.push(u.join(":")),m}function C(u){a.setTimeout(()=>{throw u},0)}function v(){var u=Ui;let f=null;return u.g&&(f=u.g,u.g=u.g.next,u.g||(u.h=null),f.next=null),f}class We{constructor(){this.h=this.g=null}add(f,m){let A=an.get();A.set(f,m),this.h?this.h.next=A:this.g=A,this.h=A}}var an=new V(()=>new G_,u=>u.reset());class G_{constructor(){this.next=this.g=this.h=null}set(f,m){this.h=f,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let no,mr=!1,Ui=new We,af=()=>{let u=a.Promise.resolve(void 0);no=()=>{u.then(cf)}};var cf=()=>{for(var u;u=v();){try{u.h.call(u.g)}catch(m){C(m)}var f=an;f.j(u),100>f.h&&(f.h++,u.next=f.g,f.g=u)}mr=!1};function Hn(){this.s=this.s,this.C=this.C}Hn.prototype.s=!1,Hn.prototype.ma=function(){this.s||(this.s=!0,this.N())},Hn.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function _t(u,f){this.type=u,this.g=this.target=f,this.defaultPrevented=!1}_t.prototype.h=function(){this.defaultPrevented=!0};var Va=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,f=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let m=()=>{};a.addEventListener("test",m,f),a.removeEventListener("test",m,f)}catch{}return u})();function Xr(u,f){if(_t.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var m=this.type=u.type,A=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=f,f=u.relatedTarget){if(ze){e:{try{ye(f.nodeName);var P=!0;break e}catch{}P=!1}P||(f=null)}}else m=="mouseover"?f=u.fromElement:m=="mouseout"&&(f=u.toElement);this.relatedTarget=f,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:cl[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Xr.aa.h.call(this)}}R(Xr,_t);var cl={2:"touch",3:"pen",4:"mouse"};Xr.prototype.h=function(){Xr.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Zr="closure_listenable_"+(1e6*Math.random()|0),ul=0;function uf(u,f,m,A,P){this.listener=u,this.proxy=null,this.src=f,this.type=m,this.capture=!!A,this.ha=P,this.key=++ul,this.da=this.fa=!1}function ro(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Ua(u){this.src=u,this.g={},this.h=0}Ua.prototype.add=function(u,f,m,A,P){var O=u.toString();u=this.g[O],u||(u=this.g[O]=[],this.h++);var B=Ba(u,f,A,P);return-1<B?(f=u[B],m||(f.fa=!1)):(f=new uf(f,this.src,O,!!A,P),f.fa=m,u.push(f)),f};function ja(u,f){var m=f.type;if(m in u.g){var A=u.g[m],P=Array.prototype.indexOf.call(A,f,void 0),O;(O=0<=P)&&Array.prototype.splice.call(A,P,1),O&&(ro(f),u.g[m].length==0&&(delete u.g[m],u.h--))}}function Ba(u,f,m,A){for(var P=0;P<u.length;++P){var O=u[P];if(!O.da&&O.listener==f&&O.capture==!!m&&O.ha==A)return P}return-1}var io="closure_lm_"+(1e6*Math.random()|0),$a={};function lf(u,f,m,A,P){if(A&&A.once)return qa(u,f,m,A,P);if(Array.isArray(f)){for(var O=0;O<f.length;O++)lf(u,f[O],m,A,P);return null}return m=ei(m),u&&u[Zr]?u.K(f,m,d(A)?!!A.capture:!!A,P):Ha(u,f,m,!1,A,P)}function Ha(u,f,m,A,P,O){if(!f)throw Error("Invalid event type");var B=d(P)?!!P.capture:!!P,Ne=za(u);if(Ne||(u[io]=Ne=new Ua(u)),m=Ne.add(f,m,A,B,O),m.proxy)return m;if(A=ll(),m.proxy=A,A.src=u,A.listener=m,u.addEventListener)Va||(P=B),P===void 0&&(P=!1),u.addEventListener(f.toString(),A,P);else if(u.attachEvent)u.attachEvent(so(f.toString()),A);else if(u.addListener&&u.removeListener)u.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return m}function ll(){function u(m){return f.call(u.src,u.listener,m)}let f=W_;return u}function qa(u,f,m,A,P){if(Array.isArray(f)){for(var O=0;O<f.length;O++)qa(u,f[O],m,A,P);return null}return m=ei(m),u&&u[Zr]?u.L(f,m,d(A)?!!A.capture:!!A,P):Ha(u,f,m,!0,A,P)}function vt(u,f,m,A,P){if(Array.isArray(f))for(var O=0;O<f.length;O++)vt(u,f[O],m,A,P);else A=d(A)?!!A.capture:!!A,m=ei(m),u&&u[Zr]?(u=u.i,f=String(f).toString(),f in u.g&&(O=u.g[f],m=Ba(O,m,A,P),-1<m&&(ro(O[m]),Array.prototype.splice.call(O,m,1),O.length==0&&(delete u.g[f],u.h--)))):u&&(u=za(u))&&(f=u.g[f.toString()],u=-1,f&&(u=Ba(f,m,A,P)),(m=-1<u?f[u]:null)&&It(m))}function It(u){if(typeof u!="number"&&u&&!u.da){var f=u.src;if(f&&f[Zr])ja(f.i,u);else{var m=u.type,A=u.proxy;f.removeEventListener?f.removeEventListener(m,A,u.capture):f.detachEvent?f.detachEvent(so(m),A):f.addListener&&f.removeListener&&f.removeListener(A),(m=za(f))?(ja(m,u),m.h==0&&(m.src=null,f[io]=null)):ro(u)}}}function so(u){return u in $a?$a[u]:$a[u]="on"+u}function W_(u,f){if(u.da)u=!0;else{f=new Xr(f,this);var m=u.listener,A=u.ha||u.src;u.fa&&It(u),u=m.call(A,f)}return u}function za(u){return u=u[io],u instanceof Ua?u:null}var dl="__closure_events_fn_"+(1e9*Math.random()>>>0);function ei(u){return typeof u=="function"?u:(u[dl]||(u[dl]=function(f){return u.handleEvent(f)}),u[dl])}function Et(){Hn.call(this),this.i=new Ua(this),this.M=this,this.F=null}R(Et,Hn),Et.prototype[Zr]=!0,Et.prototype.removeEventListener=function(u,f,m,A){vt(this,u,f,m,A)};function bt(u,f){var m,A=u.F;if(A)for(m=[];A;A=A.F)m.push(A);if(u=u.M,A=f.type||f,typeof f=="string")f=new _t(f,u);else if(f instanceof _t)f.target=f.target||u;else{var P=f;f=new _t(A,u),T(f,P)}if(P=!0,m)for(var O=m.length-1;0<=O;O--){var B=f.g=m[O];P=ji(B,A,!0,f)&&P}if(B=f.g=u,P=ji(B,A,!0,f)&&P,P=ji(B,A,!1,f)&&P,m)for(O=0;O<m.length;O++)B=f.g=m[O],P=ji(B,A,!1,f)&&P}Et.prototype.N=function(){if(Et.aa.N.call(this),this.i){var u=this.i,f;for(f in u.g){for(var m=u.g[f],A=0;A<m.length;A++)ro(m[A]);delete u.g[f],u.h--}}this.F=null},Et.prototype.K=function(u,f,m,A){return this.i.add(String(u),f,!1,m,A)},Et.prototype.L=function(u,f,m,A){return this.i.add(String(u),f,!0,m,A)};function ji(u,f,m,A){if(f=u.i.g[String(f)],!f)return!0;f=f.concat();for(var P=!0,O=0;O<f.length;++O){var B=f[O];if(B&&!B.da&&B.capture==m){var Ne=B.listener,nt=B.ha||B.src;B.fa&&ja(u.i,B),P=Ne.call(nt,A)!==!1&&P}}return P&&!A.defaultPrevented}function df(u,f,m){if(typeof u=="function")m&&(u=E(u,m));else if(u&&typeof u.handleEvent=="function")u=E(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(u,f||0)}function hf(u){u.g=df(()=>{u.g=null,u.i&&(u.i=!1,hf(u))},u.l);let f=u.h;u.h=null,u.m.apply(null,f)}class ff extends Hn{constructor(f,m){super(),this.m=f,this.l=m,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:hf(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Bi(u){Hn.call(this),this.h=u,this.g={}}R(Bi,Hn);var $i=[];function Ga(u){re(u.g,function(f,m){this.g.hasOwnProperty(m)&&It(f)},u),u.g={}}Bi.prototype.N=function(){Bi.aa.N.call(this),Ga(this)},Bi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var oo=a.JSON.stringify,ti=a.JSON.parse,pf=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function Hi(){}Hi.prototype.h=null;function hl(u){return u.h||(u.h=u.i())}function qi(){}var zi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function wt(){_t.call(this,"d")}R(wt,_t);function Wa(){_t.call(this,"c")}R(Wa,_t);var mn={},Gi=null;function Ka(){return Gi=Gi||new Et}mn.La="serverreachability";function gf(u){_t.call(this,mn.La,u)}R(gf,_t);function Nn(u){let f=Ka();bt(f,new gf(f))}mn.STAT_EVENT="statevent";function mf(u,f){_t.call(this,mn.STAT_EVENT,u),this.stat=f}R(mf,_t);function Mt(u){let f=Ka();bt(f,new mf(f,u))}mn.Ma="timingevent";function ao(u,f){_t.call(this,mn.Ma,u),this.size=f}R(ao,_t);function Wi(u,f){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},f)}function Ki(){this.g=!0}Ki.prototype.xa=function(){this.g=!1};function fl(u,f,m,A,P,O){u.info(function(){if(u.g)if(O)for(var B="",Ne=O.split("&"),nt=0;nt<Ne.length;nt++){var Pe=Ne[nt].split("=");if(1<Pe.length){var Ht=Pe[0];Pe=Pe[1];var qt=Ht.split("_");B=2<=qt.length&&qt[1]=="type"?B+(Ht+"="+Pe+"&"):B+(Ht+"=redacted&")}}else B=null;else B=O;return"XMLHTTP REQ ("+A+") [attempt "+P+"]: "+f+`
`+m+`
`+B})}function co(u,f,m,A,P,O,B){u.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+P+"]: "+f+`
`+m+`
`+O+" "+B})}function Qi(u,f,m,A){u.info(function(){return"XMLHTTP TEXT ("+f+"): "+yf(u,m)+(A?" "+A:"")})}function yr(u,f){u.info(function(){return"TIMEOUT: "+f})}Ki.prototype.info=function(){};function yf(u,f){if(!u.g)return f;if(!f)return null;try{var m=JSON.parse(f);if(m){for(u=0;u<m.length;u++)if(Array.isArray(m[u])){var A=m[u];if(!(2>A.length)){var P=A[1];if(Array.isArray(P)&&!(1>P.length)){var O=P[0];if(O!="noop"&&O!="stop"&&O!="close")for(var B=1;B<P.length;B++)P[B]=""}}}}return oo(m)}catch{return f}}var uo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Qa={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},lo;function ho(){}R(ho,Hi),ho.prototype.g=function(){return new XMLHttpRequest},ho.prototype.i=function(){return{}},lo=new ho;function _r(u,f,m,A){this.j=u,this.i=f,this.l=m,this.R=A||1,this.U=new Bi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new pl}function pl(){this.i=null,this.g="",this.h=!1}var _f={},Yi={};function Ya(u,f,m){u.L=1,u.v=ec(qn(f)),u.m=m,u.P=!0,Ja(u,null)}function Ja(u,f){u.F=Date.now(),Xi(u),u.A=qn(u.v);var m=u.A,A=u.R;Array.isArray(A)||(A=[String(A)]),Df(m.i,"t",A),u.C=0,m=u.j.J,u.h=new pl,u.g=p(u.j,m?f:null,!u.m),0<u.O&&(u.M=new ff(E(u.Y,u,u.g),u.O)),f=u.U,m=u.g,A=u.ca;var P="readystatechange";Array.isArray(P)||(P&&($i[0]=P.toString()),P=$i);for(var O=0;O<P.length;O++){var B=lf(m,P[O],A||f.handleEvent,!1,f.h||f);if(!B)break;f.g[B.key]=B}f=u.H?_(u.H):{},u.m?(u.u||(u.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,f)):(u.u="GET",u.g.ea(u.A,u.u,null,f)),Nn(),fl(u.i,u.u,u.A,u.l,u.R,u.m)}_r.prototype.ca=function(u){u=u.target;let f=this.M;f&&un(u)==3?f.j():this.Y(u)},_r.prototype.Y=function(u){try{if(u==this.g)e:{let qt=un(this.g);var f=this.g.Ba();let uc=this.g.Z();if(!(3>qt)&&(qt!=3||this.g&&(this.h.h||this.g.oa()||Pf(this.g)))){this.J||qt!=4||f==7||(f==8||0>=uc?Nn(3):Nn(2)),Xa(this);var m=this.g.Z();this.X=m;t:if(Ji(this)){var A=Pf(this.g);u="";var P=A.length,O=un(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){vr(this),Zi(this);var B="";break t}this.h.i=new a.TextDecoder}for(f=0;f<P;f++)this.h.h=!0,u+=this.h.i.decode(A[f],{stream:!(O&&f==P-1)});A.length=0,this.h.g+=u,this.C=0,B=this.h.g}else B=this.g.oa();if(this.o=m==200,co(this.i,this.u,this.A,this.l,this.R,qt,m),this.o){if(this.T&&!this.K){t:{if(this.g){var Ne,nt=this.g;if((Ne=nt.g?nt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!z(Ne)){var Pe=Ne;break t}}Pe=null}if(m=Pe)Qi(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,fo(this,m);else{this.o=!1,this.s=3,Mt(12),vr(this),Zi(this);break e}}if(this.P){m=!0;let Qn;for(;!this.J&&this.C<B.length;)if(Qn=ni(this,B),Qn==Yi){qt==4&&(this.s=4,Mt(14),m=!1),Qi(this.i,this.l,null,"[Incomplete Response]");break}else if(Qn==_f){this.s=4,Mt(15),Qi(this.i,this.l,B,"[Invalid Chunk]"),m=!1;break}else Qi(this.i,this.l,Qn,null),fo(this,Qn);if(Ji(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),qt!=4||B.length!=0||this.h.h||(this.s=1,Mt(16),m=!1),this.o=this.o&&m,!m)Qi(this.i,this.l,B,"[Invalid Chunked Response]"),vr(this),Zi(this);else if(0<B.length&&!this.W){this.W=!0;var Ht=this.j;Ht.g==this&&Ht.ba&&!Ht.M&&(Ht.j.info("Great, no buffering proxy detected. Bytes received: "+B.length),cc(Ht),Ht.M=!0,Mt(11))}}else Qi(this.i,this.l,B,null),fo(this,B);qt==4&&vr(this),this.o&&!this.J&&(qt==4?$t(this.j,this):(this.o=!1,Xi(this)))}else kf(this.g),m==400&&0<B.indexOf("Unknown SID")?(this.s=3,Mt(12)):(this.s=0,Mt(13)),vr(this),Zi(this)}}}catch{}};function Ji(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function ni(u,f){var m=u.C,A=f.indexOf(`
`,m);return A==-1?Yi:(m=Number(f.substring(m,A)),isNaN(m)?_f:(A+=1,A+m>f.length?Yi:(f=f.slice(A,A+m),u.C=A+m,f)))}_r.prototype.cancel=function(){this.J=!0,vr(this)};function Xi(u){u.S=Date.now()+u.I,vf(u,u.I)}function vf(u,f){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Wi(E(u.ba,u),f)}function Xa(u){u.B&&(a.clearTimeout(u.B),u.B=null)}_r.prototype.ba=function(){this.B=null;let u=Date.now();0<=u-this.S?(yr(this.i,this.A),this.L!=2&&(Nn(),Mt(17)),vr(this),this.s=2,Zi(this)):vf(this,this.S-u)};function Zi(u){u.j.G==0||u.J||$t(u.j,u)}function vr(u){Xa(u);var f=u.M;f&&typeof f.ma=="function"&&f.ma(),u.M=null,Ga(u.U),u.g&&(f=u.g,u.g=null,f.abort(),f.ma())}function fo(u,f){try{var m=u.j;if(m.G!=0&&(m.g==u||vl(m.h,u))){if(!u.K&&vl(m.h,u)&&m.G==3){try{var A=m.Da.g.parse(f)}catch{A=null}if(Array.isArray(A)&&A.length==3){var P=A;if(P[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<u.F)ii(m),os(m);else break e;ac(m),Mt(18)}}else m.za=P[1],0<m.za-m.T&&37500>P[2]&&m.F&&m.v==0&&!m.C&&(m.C=Wi(E(m.Za,m),6e3));if(1>=_l(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else wr(m,11)}else if((u.K||m.g==u)&&ii(m),!z(f))for(P=m.Da.g.parse(f),f=0;f<P.length;f++){let Pe=P[f];if(m.T=Pe[0],Pe=Pe[1],m.G==2)if(Pe[0]=="c"){m.K=Pe[1],m.ia=Pe[2];let Ht=Pe[3];Ht!=null&&(m.la=Ht,m.j.info("VER="+m.la));let qt=Pe[4];qt!=null&&(m.Aa=qt,m.j.info("SVER="+m.Aa));let uc=Pe[5];uc!=null&&typeof uc=="number"&&0<uc&&(A=1.5*uc,m.L=A,m.j.info("backChannelRequestTimeoutMs_="+A)),A=m;let Qn=u.g;if(Qn){let Mf=Qn.g?Qn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Mf){var O=A.h;O.g||Mf.indexOf("spdy")==-1&&Mf.indexOf("quic")==-1&&Mf.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(Pn(O,O.h),O.h=null))}if(A.D){let Q_=Qn.g?Qn.g.getResponseHeader("X-HTTP-Session-Id"):null;Q_&&(A.ya=Q_,Ge(A.I,A.D,Q_))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-u.F,m.j.info("Handshake RTT: "+m.R+"ms")),A=m;var B=u;if(A.qa=l(A,A.J?A.ia:null,A.W),B.K){yn(A.h,B);var Ne=B,nt=A.L;nt&&(Ne.I=nt),Ne.B&&(Xa(Ne),Xi(Ne)),A.g=B}else Cl(A);0<m.i.length&&Io(m)}else Pe[0]!="stop"&&Pe[0]!="close"||wr(m,7);else m.G==3&&(Pe[0]=="stop"||Pe[0]=="close"?Pe[0]=="stop"?wr(m,7):ic(m):Pe[0]!="noop"&&m.l&&m.l.ta(Pe),m.v=0)}}Nn(4)}catch{}}var gl=class{constructor(u,f){this.g=u,this.map=f}};function ml(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function yl(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function _l(u){return u.h?1:u.g?u.g.size:0}function vl(u,f){return u.h?u.h==f:u.g?u.g.has(f):!1}function Pn(u,f){u.g?u.g.add(f):u.h=f}function yn(u,f){u.h&&u.h==f?u.h=null:u.g&&u.g.has(f)&&u.g.delete(f)}ml.prototype.cancel=function(){if(this.i=es(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function es(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let f=u.i;for(let m of u.g.values())f=f.concat(m.D);return f}return M(u.i)}function po(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var f=[],m=u.length,A=0;A<m;A++)f.push(u[A]);return f}f=[],m=0;for(A in u)f[m++]=u[A];return f}function Il(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var f=[];u=u.length;for(var m=0;m<u;m++)f.push(m);return f}f=[],m=0;for(let A in u)f[m++]=A;return f}}}function $e(u,f){if(u.forEach&&typeof u.forEach=="function")u.forEach(f,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,f,void 0);else for(var m=Il(u),A=po(u),P=A.length,O=0;O<P;O++)f.call(void 0,A[O],m&&m[O],u)}var go=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function mo(u,f){if(u){u=u.split("&");for(var m=0;m<u.length;m++){var A=u[m].indexOf("="),P=null;if(0<=A){var O=u[m].substring(0,A);P=u[m].substring(A+1)}else O=u[m];f(O,P?decodeURIComponent(P.replace(/\+/g," ")):"")}}}function _n(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof _n){this.h=u.h,yo(this,u.j),this.o=u.o,this.g=u.g,Za(this,u.s),this.l=u.l;var f=u.i,m=new _o;m.i=f.i,f.g&&(m.g=new Map(f.g),m.h=f.h),If(this,m),this.m=u.m}else u&&(f=String(u).match(go))?(this.h=!1,yo(this,f[1]||"",!0),this.o=zn(f[2]||""),this.g=zn(f[3]||"",!0),Za(this,f[4]),this.l=zn(f[5]||"",!0),If(this,f[6]||"",!0),this.m=zn(f[7]||"")):(this.h=!1,this.i=new _o(null,this.h))}_n.prototype.toString=function(){var u=[],f=this.j;f&&u.push(vn(f,El,!0),":");var m=this.g;return(m||f=="file")&&(u.push("//"),(f=this.o)&&u.push(vn(f,El,!0),"@"),u.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&u.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&u.push("/"),u.push(vn(m,m.charAt(0)=="/"?Tf:wf,!0))),(m=this.i.toString())&&u.push("?",m),(m=this.m)&&u.push("#",vn(m,ts)),u.join("")};function qn(u){return new _n(u)}function yo(u,f,m){u.j=m?zn(f,!0):f,u.j&&(u.j=u.j.replace(/:$/,""))}function Za(u,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);u.s=f}else u.s=null}function If(u,f,m){f instanceof _o?(u.i=f,tc(u.i,u.h)):(m||(f=vn(f,bf)),u.i=new _o(f,u.h))}function Ge(u,f,m){u.i.set(f,m)}function ec(u){return Ge(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function zn(u,f){return u?f?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function vn(u,f,m){return typeof u=="string"?(u=encodeURI(u).replace(f,Ef),m&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Ef(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var El=/[#\/\?@]/g,wf=/[#\?:]/g,Tf=/[#\?]/g,bf=/[#\?@]/g,ts=/#/g;function _o(u,f){this.h=this.g=null,this.i=u||null,this.j=!!f}function Ir(u){u.g||(u.g=new Map,u.h=0,u.i&&mo(u.i,function(f,m){u.add(decodeURIComponent(f.replace(/\+/g," ")),m)}))}n=_o.prototype,n.add=function(u,f){Ir(this),this.i=null,u=Wn(this,u);var m=this.g.get(u);return m||this.g.set(u,m=[]),m.push(f),this.h+=1,this};function Af(u,f){Ir(u),f=Wn(u,f),u.g.has(f)&&(u.i=null,u.h-=u.g.get(f).length,u.g.delete(f))}function Gn(u,f){return Ir(u),f=Wn(u,f),u.g.has(f)}n.forEach=function(u,f){Ir(this),this.g.forEach(function(m,A){m.forEach(function(P){u.call(f,P,A,this)},this)},this)},n.na=function(){Ir(this);let u=Array.from(this.g.values()),f=Array.from(this.g.keys()),m=[];for(let A=0;A<f.length;A++){let P=u[A];for(let O=0;O<P.length;O++)m.push(f[A])}return m},n.V=function(u){Ir(this);let f=[];if(typeof u=="string")Gn(this,u)&&(f=f.concat(this.g.get(Wn(this,u))));else{u=Array.from(this.g.values());for(let m=0;m<u.length;m++)f=f.concat(u[m])}return f},n.set=function(u,f){return Ir(this),this.i=null,u=Wn(this,u),Gn(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[f]),this.h+=1,this},n.get=function(u,f){return u?(u=this.V(u),0<u.length?String(u[0]):f):f};function Df(u,f,m){Af(u,f),0<m.length&&(u.i=null,u.g.set(Wn(u,f),M(m)),u.h+=m.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],f=Array.from(this.g.keys());for(var m=0;m<f.length;m++){var A=f[m];let O=encodeURIComponent(String(A)),B=this.V(A);for(A=0;A<B.length;A++){var P=O;B[A]!==""&&(P+="="+encodeURIComponent(String(B[A]))),u.push(P)}}return this.i=u.join("&")};function Wn(u,f){return f=String(f),u.j&&(f=f.toLowerCase()),f}function tc(u,f){f&&!u.j&&(Ir(u),u.i=null,u.g.forEach(function(m,A){var P=A.toLowerCase();A!=P&&(Af(this,A),Df(this,P,m))},u)),u.j=f}function Sf(u,f){let m=new Ki;if(a.Image){let A=new Image;A.onload=D(cn,m,"TestLoadImage: loaded",!0,f,A),A.onerror=D(cn,m,"TestLoadImage: error",!1,f,A),A.onabort=D(cn,m,"TestLoadImage: abort",!1,f,A),A.ontimeout=D(cn,m,"TestLoadImage: timeout",!1,f,A),a.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=u}else f(!1)}function vo(u,f){let m=new Ki,A=new AbortController,P=setTimeout(()=>{A.abort(),cn(m,"TestPingServer: timeout",!1,f)},1e4);fetch(u,{signal:A.signal}).then(O=>{clearTimeout(P),O.ok?cn(m,"TestPingServer: ok",!0,f):cn(m,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(P),cn(m,"TestPingServer: error",!1,f)})}function cn(u,f,m,A,P){try{P&&(P.onload=null,P.onerror=null,P.onabort=null,P.ontimeout=null),A(m)}catch{}}function Cf(){this.g=new pf}function wl(u,f,m){let A=m||"";try{$e(u,function(P,O){let B=P;d(P)&&(B=oo(P)),f.push(A+O+"="+encodeURIComponent(B))})}catch(P){throw f.push(A+"type="+encodeURIComponent("_badmap")),P}}function He(u){this.l=u.Ub||null,this.j=u.eb||!1}R(He,Hi),He.prototype.g=function(){return new nc(this.l,this.j)},He.prototype.i=(function(u){return function(){return u}})({});function nc(u,f){Et.call(this),this.D=u,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}R(nc,Et),n=nc.prototype,n.open=function(u,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=f,this.readyState=1,rs(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(f.body=u),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ns(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,rs(this)),this.g&&(this.readyState=3,rs(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Rf(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Rf(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var f=u.value?u.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!u.done}))&&(this.response=this.responseText+=f)}u.done?ns(this):rs(this),this.readyState==3&&Rf(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,ns(this))},n.Qa=function(u){this.g&&(this.response=u,ns(this))},n.ga=function(){this.g&&ns(this)};function ns(u){u.readyState=4,u.l=null,u.j=null,u.v=null,rs(u)}n.setRequestHeader=function(u,f){this.u.append(u,f)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],f=this.h.entries();for(var m=f.next();!m.done;)m=m.value,u.push(m[0]+": "+m[1]),m=f.next();return u.join(`\r
`)};function rs(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(nc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Tl(u){let f="";return re(u,function(m,A){f+=A,f+=":",f+=m,f+=`\r
`}),f}function is(u,f,m){e:{for(A in m){var A=!1;break e}A=!0}A||(m=Tl(m),typeof u=="string"?m!=null&&encodeURIComponent(String(m)):Ge(u,f,m))}function ke(u){Et.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}R(ke,Et);var Nf=/^https?$/i,K_=["POST","PUT"];n=ke.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,f,m,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);f=f?f.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():lo.g(),this.v=this.o?hl(this.o):hl(lo),this.g.onreadystatechange=E(this.Ea,this);try{this.B=!0,this.g.open(f,String(u),!0),this.B=!1}catch(O){ss(this,O);return}if(u=m||"",m=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var P in A)m.set(P,A[P]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(let O of A.keys())m.set(O,A.get(O));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(m.keys()).find(O=>O.toLowerCase()=="content-type"),P=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(K_,f,void 0))||A||P||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[O,B]of m)this.g.setRequestHeader(O,B);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Al(this),this.u=!0,this.g.send(u),this.u=!1}catch(O){ss(this,O)}};function ss(u,f){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=f,u.m=5,bl(u),ri(u)}function bl(u){u.A||(u.A=!0,bt(u,"complete"),bt(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,bt(this,"complete"),bt(this,"abort"),ri(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ri(this,!0)),ke.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?rc(this):this.bb())},n.bb=function(){rc(this)};function rc(u){if(u.h&&typeof o<"u"&&(!u.v[1]||un(u)!=4||u.Z()!=2)){if(u.u&&un(u)==4)df(u.Ea,0,u);else if(bt(u,"readystatechange"),un(u)==4){u.h=!1;try{let B=u.Z();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var m;if(!(m=f)){var A;if(A=B===0){var P=String(u.D).match(go)[1]||null;!P&&a.self&&a.self.location&&(P=a.self.location.protocol.slice(0,-1)),A=!Nf.test(P?P.toLowerCase():"")}m=A}if(m)bt(u,"complete"),bt(u,"success");else{u.m=6;try{var O=2<un(u)?u.g.statusText:""}catch{O=""}u.l=O+" ["+u.Z()+"]",bl(u)}}finally{ri(u)}}}}function ri(u,f){if(u.g){Al(u);let m=u.g,A=u.v[0]?()=>{}:null;u.g=null,u.v=null,f||bt(u,"ready");try{m.onreadystatechange=A}catch{}}}function Al(u){u.I&&(a.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function un(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<un(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var f=this.g.responseText;return u&&f.indexOf(u)==0&&(f=f.substring(u.length)),ti(f)}};function Pf(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function kf(u){let f={};u=(u.g&&2<=un(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<u.length;A++){if(z(u[A]))continue;var m=w(u[A]);let P=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();let O=f[P]||[];f[P]=O,O.push(m)}b(f,function(A){return A.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Kn(u,f,m){return m&&m.internalChannelParams&&m.internalChannelParams[u]||f}function Dl(u){this.Aa=0,this.i=[],this.j=new Ki,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Kn("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Kn("baseRetryDelayMs",5e3,u),this.cb=Kn("retryDelaySeedMs",1e4,u),this.Wa=Kn("forwardChannelMaxRetries",2,u),this.wa=Kn("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new ml(u&&u.concurrentRequestLimit),this.Da=new Cf,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Dl.prototype,n.la=8,n.G=1,n.connect=function(u,f,m,A){Mt(0),this.W=u,this.H=f||{},m&&A!==void 0&&(this.H.OSID=m,this.H.OAID=A),this.F=this.X,this.I=l(this,null,this.W),Io(this)};function ic(u){if(sc(u),u.G==3){var f=u.U++,m=qn(u.I);if(Ge(m,"SID",u.K),Ge(m,"RID",f),Ge(m,"TYPE","terminate"),as(u,m),f=new _r(u,u.j,f),f.L=2,f.v=ec(qn(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!m&&a.Image&&(new Image().src=f.v,m=!0),m||(f.g=p(f.j,null),f.g.ea(f.v)),f.F=Date.now(),Xi(f)}si(u)}function os(u){u.g&&(cc(u),u.g.cancel(),u.g=null)}function sc(u){os(u),u.u&&(a.clearTimeout(u.u),u.u=null),ii(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function Io(u){if(!yl(u.h)&&!u.s){u.s=!0;var f=u.Ga;no||af(),mr||(no(),mr=!0),Ui.add(f,u),u.B=0}}function oc(u,f){return _l(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=f.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Wi(E(u.Ga,u,f),Nl(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;let P=new _r(this,this.j,u),O=this.o;if(this.S&&(O?(O=_(O),T(O,this.S)):O=this.S),this.m!==null||this.O||(P.H=O,O=null),this.P)e:{for(var f=0,m=0;m<this.i.length;m++){t:{var A=this.i[m];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(f+=A,4096<f){f=m;break e}if(f===4096||m===this.i.length-1){f=m+1;break e}}f=1e3}else f=1e3;f=Er(this,P,f),m=qn(this.I),Ge(m,"RID",u),Ge(m,"CVER",22),this.D&&Ge(m,"X-HTTP-Session-Id",this.D),as(this,m),O&&(this.O?f="headers="+encodeURIComponent(String(Tl(O)))+"&"+f:this.m&&is(m,this.m,O)),Pn(this.h,P),this.Ua&&Ge(m,"TYPE","init"),this.P?(Ge(m,"$req",f),Ge(m,"SID","null"),P.T=!0,Ya(P,m,null)):Ya(P,m,f),this.G=2}}else this.G==3&&(u?Sl(this,u):this.i.length==0||yl(this.h)||Sl(this))};function Sl(u,f){var m;f?m=f.l:m=u.U++;let A=qn(u.I);Ge(A,"SID",u.K),Ge(A,"RID",m),Ge(A,"AID",u.T),as(u,A),u.m&&u.o&&is(A,u.m,u.o),m=new _r(u,u.j,m,u.B+1),u.m===null&&(m.H=u.o),f&&(u.i=f.D.concat(u.i)),f=Er(u,m,1e3),m.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Pn(u.h,m),Ya(m,A,f)}function as(u,f){u.H&&re(u.H,function(m,A){Ge(f,A,m)}),u.l&&$e({},function(m,A){Ge(f,A,m)})}function Er(u,f,m){m=Math.min(u.i.length,m);var A=u.l?E(u.l.Na,u.l,u):null;e:{var P=u.i;let O=-1;for(;;){let B=["count="+m];O==-1?0<m?(O=P[0].g,B.push("ofs="+O)):O=0:B.push("ofs="+O);let Ne=!0;for(let nt=0;nt<m;nt++){let Pe=P[nt].g,Ht=P[nt].map;if(Pe-=O,0>Pe)O=Math.max(0,P[nt].g-100),Ne=!1;else try{wl(Ht,B,"req"+Pe+"_")}catch{A&&A(Ht)}}if(Ne){A=B.join("&");break e}}}return u=u.i.splice(0,m),f.D=u,A}function Cl(u){if(!u.g&&!u.u){u.Y=1;var f=u.Fa;no||af(),mr||(no(),mr=!0),Ui.add(f,u),u.v=0}}function ac(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Wi(E(u.Fa,u),Nl(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,Rl(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Wi(E(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Mt(10),os(this),Rl(this))};function cc(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function Rl(u){u.g=new _r(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var f=qn(u.qa);Ge(f,"RID","rpc"),Ge(f,"SID",u.K),Ge(f,"AID",u.T),Ge(f,"CI",u.F?"0":"1"),!u.F&&u.ja&&Ge(f,"TO",u.ja),Ge(f,"TYPE","xmlhttp"),as(u,f),u.m&&u.o&&is(f,u.m,u.o),u.L&&(u.g.I=u.L);var m=u.g;u=u.ia,m.L=1,m.v=ec(qn(f)),m.m=null,m.P=!0,Ja(m,u)}n.Za=function(){this.C!=null&&(this.C=null,os(this),ac(this),Mt(19))};function ii(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function $t(u,f){var m=null;if(u.g==f){ii(u),cc(u),u.g=null;var A=2}else if(vl(u.h,f))m=f.D,yn(u.h,f),A=1;else return;if(u.G!=0){if(f.o)if(A==1){m=f.m?f.m.length:0,f=Date.now()-f.F;var P=u.B;A=Ka(),bt(A,new ao(A,m)),Io(u)}else Cl(u);else if(P=f.s,P==3||P==0&&0<f.X||!(A==1&&oc(u,f)||A==2&&ac(u)))switch(m&&0<m.length&&(f=u.h,f.i=f.i.concat(m)),P){case 1:wr(u,5);break;case 4:wr(u,10);break;case 3:wr(u,6);break;default:wr(u,2)}}}function Nl(u,f){let m=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(m*=2),m*f}function wr(u,f){if(u.j.info("Error code "+f),f==2){var m=E(u.fb,u),A=u.Xa;let P=!A;A=new _n(A||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||yo(A,"https"),ec(A),P?Sf(A.toString(),m):vo(A.toString(),m)}else Mt(2);u.G=0,u.l&&u.l.sa(f),si(u),sc(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Mt(2)):(this.j.info("Failed to ping google.com"),Mt(1))};function si(u){if(u.G=0,u.ka=[],u.l){let f=es(u.h);(f.length!=0||u.i.length!=0)&&(k(u.ka,f),k(u.ka,u.i),u.h.i.length=0,M(u.i),u.i.length=0),u.l.ra()}}function l(u,f,m){var A=m instanceof _n?qn(m):new _n(m);if(A.g!="")f&&(A.g=f+"."+A.g),Za(A,A.s);else{var P=a.location;A=P.protocol,f=f?f+"."+P.hostname:P.hostname,P=+P.port;var O=new _n(null);A&&yo(O,A),f&&(O.g=f),P&&Za(O,P),m&&(O.l=m),A=O}return m=u.D,f=u.ya,m&&f&&Ge(A,m,f),Ge(A,"VER",u.la),as(u,A),A}function p(u,f,m){if(f&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=u.Ca&&!u.pa?new ke(new He({eb:m})):new ke(u.pa),f.Ha(u.J),f}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function y(){}n=y.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function S(){}S.prototype.g=function(u,f){return new N(u,f)};function N(u,f){Et.call(this),this.g=new Dl(f),this.l=u,this.h=f&&f.messageUrlParams||null,u=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(u?u["X-WebChannel-Content-Type"]=f.messageContentType:u={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(u?u["X-WebChannel-Client-Profile"]=f.va:u={"X-WebChannel-Client-Profile":f.va}),this.g.S=u,(u=f&&f.Sb)&&!z(u)&&(this.g.m=u),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!z(f)&&(this.g.D=f,u=this.h,u!==null&&f in u&&(u=this.h,f in u&&delete u[f])),this.j=new ie(this)}R(N,Et),N.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},N.prototype.close=function(){ic(this.g)},N.prototype.o=function(u){var f=this.g;if(typeof u=="string"){var m={};m.__data__=u,u=m}else this.u&&(m={},m.__data__=oo(u),u=m);f.i.push(new gl(f.Ya++,u)),f.G==3&&Io(f)},N.prototype.N=function(){this.g.l=null,delete this.j,ic(this.g),delete this.g,N.aa.N.call(this)};function x(u){wt.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var f=u.__sm__;if(f){e:{for(let m in f){u=m;break e}u=void 0}(this.i=u)&&(u=this.i,f=f!==null&&u in f?f[u]:void 0),this.data=f}else this.data=u}R(x,wt);function H(){Wa.call(this),this.status=1}R(H,Wa);function ie(u){this.g=u}R(ie,y),ie.prototype.ua=function(){bt(this.g,"a")},ie.prototype.ta=function(u){bt(this.g,new x(u))},ie.prototype.sa=function(u){bt(this.g,new H)},ie.prototype.ra=function(){bt(this.g,"b")},S.prototype.createWebChannel=S.prototype.g,N.prototype.send=N.prototype.o,N.prototype.open=N.prototype.m,N.prototype.close=N.prototype.close,uD=Mi.createWebChannelTransport=function(){return new S},cD=Mi.getStatEventTarget=function(){return Ka()},aD=Mi.Event=mn,Xy=Mi.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},uo.NO_ERROR=0,uo.TIMEOUT=8,uo.HTTP_ERROR=6,Vh=Mi.ErrorCode=uo,Qa.COMPLETE="complete",oD=Mi.EventType=Qa,qi.EventType=zi,zi.OPEN="a",zi.CLOSE="b",zi.ERROR="c",zi.MESSAGE="d",Et.prototype.listen=Et.prototype.K,Lu=Mi.WebChannel=qi,j8=Mi.FetchXmlHttpFactory=He,ke.prototype.listenOnce=ke.prototype.L,ke.prototype.getLastError=ke.prototype.Ka,ke.prototype.getLastErrorCode=ke.prototype.Ba,ke.prototype.getStatus=ke.prototype.Z,ke.prototype.getResponseJson=ke.prototype.Oa,ke.prototype.getResponseText=ke.prototype.oa,ke.prototype.send=ke.prototype.ea,ke.prototype.setWithCredentials=ke.prototype.Ha,sD=Mi.XhrIo=ke}).apply(typeof Jy<"u"?Jy:typeof self<"u"?self:typeof window<"u"?window:{});var hL="@firebase/firestore",fL="4.8.0";var Pt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Pt.UNAUTHENTICATED=new Pt(null),Pt.GOOGLE_CREDENTIALS=new Pt("google-credentials-uid"),Pt.FIRST_PARTY=new Pt("first-party-uid"),Pt.MOCK_USER=new Pt("mock-user");var il="11.10.0";var Ra=new Lr("@firebase/firestore");function Fu(){return Ra.logLevel}function G(n,...e){if(Ra.logLevel<=we.DEBUG){let t=e.map(XS);Ra.debug(`Firestore (${il}): ${n}`,...t)}}function xi(n,...e){if(Ra.logLevel<=we.ERROR){let t=e.map(XS);Ra.error(`Firestore (${il}): ${n}`,...t)}}function Js(n,...e){if(Ra.logLevel<=we.WARN){let t=e.map(XS);Ra.warn(`Firestore (${il}): ${n}`,...t)}}function XS(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function ee(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,eF(n,r,t)}function eF(n,e,t){let r=`FIRESTORE (${il}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw xi(r),new Error(r)}function je(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||eF(e,i,r)}function ue(n,e){return n}var F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Q=class extends An{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var zr=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var s_=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},pD=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Pt.UNAUTHENTICATED))}shutdown(){}},gD=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},mD=class{constructor(e){this.t=e,this.currentUser=Pt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){je(this.o===void 0,42304);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),s=new zr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new zr,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},a=c=>{G("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(G("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new zr)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(G("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(je(typeof r.accessToken=="string",31837,{l:r}),new s_(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return je(e===null||typeof e=="string",2055,{h:e}),new Pt(e)}},yD=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Pt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},_D=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new yD(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Pt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},o_=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},vD=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Dn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){je(this.o===void 0,3512);let r=s=>{s.error!=null&&G("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.m;return this.m=s.token,G("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{G("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.V.getImmediate({optional:!0});s?i(s):G("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new o_(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(je(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new o_(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function B8(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function tF(){return new TextEncoder}var zh=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=B8(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}};function _e(n,e){return n<e?-1:n>e?1:0}function ID(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return _e(r,i);{let s=tF(),o=$8(s.encode(pL(n,t)),s.encode(pL(e,t)));return o!==0?o:_e(r,i)}}t+=r>65535?2:1}return _e(n.length,e.length)}function pL(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function $8(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return _e(n[t],e[t]);return _e(n.length,e.length)}function qu(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var gL="__name__",a_=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&ee(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&ee(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=n.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return _e(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):ID(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ki.fromString(e.substring(4,e.length-2))}},ot=class n extends a_{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new Q(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},H8=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Rn=class n extends a_{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return H8.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===gL}static keyField(){return new n([gL])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new Q(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new Q(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Q(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Q(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var te=class n{constructor(e){this.path=e}static fromPath(e){return new n(ot.fromString(e))}static fromName(e){return new n(ot.fromString(e).popFirst(5))}static empty(){return new n(ot.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ot.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ot.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new ot(e.slice()))}};function q8(n,e,t){if(!t)throw new Q(F.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function z8(n,e,t,r){if(e===!0&&r===!0)throw new Q(F.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function mL(n){if(!te.isDocumentKey(n))throw new Q(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function nF(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function ZS(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ee(12329,{type:typeof n})}function Na(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Q(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=ZS(n);throw new Q(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function mt(n,e){let t={typeString:n};return e&&(t.value=e),t}function rf(n,e){if(!nF(n))throw new Q(F.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let o=n[r];if(i&&typeof o!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){t=`Expected '${r}' field to equal '${s.value}'`;break}}if(t)throw new Q(F.INVALID_ARGUMENT,t);return!0}var yL=-62135596800,_L=1e6,yt=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*_L);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Q(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Q(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<yL)throw new Q(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Q(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/_L}_compareTo(e){return this.seconds===e.seconds?_e(this.nanoseconds,e.nanoseconds):_e(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(rf(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-yL;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};yt._jsonSchemaVersion="firestore/timestamp/1.0",yt._jsonSchema={type:mt("string",yt._jsonSchemaVersion),seconds:mt("number"),nanoseconds:mt("number")};var he=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new yt(0,0))}static max(){return new n(new yt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Gh=-1,ED=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};ED.UNKNOWN_ID=-1;function G8(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=he.fromTimestamp(r===1e9?new yt(t+1,0):new yt(t,r));return new Pa(i,te.empty(),e)}function W8(n){return new Pa(n.readTime,n.key,Gh)}var Pa=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(he.min(),te.empty(),Gh)}static max(){return new n(he.max(),te.empty(),Gh)}};function K8(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=te.comparator(n.documentKey,e.documentKey),t!==0?t:_e(n.largestBatchId,e.largestBatchId))}var Q8="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",wD=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};async function sl(n){if(n.code!==F.FAILED_PRECONDITION||n.message!==Q8)throw n;G("LocalStore","Unexpectedly lost primary lease")}var U=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ee(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},c=>r(c))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let d=c;t(e[d]).next(h=>{o[d]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};function Y8(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ol(n){return n.name==="IndexedDbTransactionError"}var eC=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ae&&this.ae(t),t}}n.ue=-1;return n})(),tC=-1;function F_(n){return n==null}function Wh(n){return n===0&&1/n==-1/0}function J8(n){return typeof n=="number"&&Number.isInteger(n)&&!Wh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var rF="";function X8(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=vL(e)),e=Z8(n.get(t),e);return vL(e)}function Z8(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let s=n.charAt(i);switch(s){case"\0":t+="";break;case rF:t+="";break;default:t+=s}}return t}function vL(n){return n+rF+""}var eK="remoteDocuments",iF="owner";var sF="mutationQueues";var oF="mutations";var aF="documentMutations",tK="remoteDocumentsV14";var cF="remoteDocumentGlobal";var uF="targets";var lF="targetDocuments";var dF="targetGlobal",hF="collectionParents";var fF="clientMetadata";var pF="bundles";var gF="namedQueries";var nK="indexConfiguration";var rK="indexState";var iK="indexEntries";var mF="documentOverlays";var sK="globals";var oK=[sF,oF,aF,eK,uF,iF,dF,lF,fF,cF,hF,pF,gF],gve=[...oK,mF],aK=[sF,oF,aF,tK,uF,iF,dF,lF,fF,cF,hF,pF,gF,mF],cK=aK,uK=[...cK,nK,rK,iK];var mve=[...uK,sK];function IL(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function to(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function yF(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var tt=class n{constructor(e,t){this.comparator=e,this.root=t||Gr.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Gr.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Gr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Bu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Bu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Bu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Bu(this.root,e,this.comparator,!0)}},Bu=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Gr=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ee(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ee(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw ee(27949);return e+(this.isRed()?0:1)}};Gr.EMPTY=null,Gr.RED=!0,Gr.BLACK=!1;Gr.EMPTY=new class{constructor(){this.size=0}get key(){throw ee(57766)}get value(){throw ee(16141)}get color(){throw ee(16727)}get left(){throw ee(29726)}get right(){throw ee(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new Gr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var kt=class n{constructor(e){this.comparator=e,this.data=new tt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new c_(this.data.getIterator())}getIteratorFrom(e){return new c_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},c_=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var $n=class n{constructor(e){this.fields=e,e.sort(Rn.comparator)}static empty(){return new n([])}unionWith(e){let t=new kt(Rn.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return qu(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var u_=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var en=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new u_("Invalid base64 string: "+s):s}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return _e(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};en.EMPTY_BYTE_STRING=new en("");var lK=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Oi(n){if(je(!!n,39018),typeof n=="string"){let e=0,t=lK.exec(n);if(je(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ye(n.seconds),nanos:Ye(n.nanos)}}function Ye(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Li(n){return typeof n=="string"?en.fromBase64String(n):en.fromUint8Array(n)}var _F="server_timestamp",vF="__type__",IF="__previous_value__",EF="__local_write_time__";function nC(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[vF])===null||t===void 0?void 0:t.stringValue)===_F}function V_(n){let e=n.mapValue.fields[IF];return nC(e)?V_(e):e}function Kh(n){let e=Oi(n.mapValue.fields[EF].timestampValue);return new yt(e.seconds,e.nanos)}var TD=class{constructor(e,t,r,i,s,o,a,c,d,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=d,this.isUsingEmulator=h}},l_="(default)",d_=class n{constructor(e,t){this.projectId=e,this.database=t||l_}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===l_}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var rC="__type__",wF="__max__",Zy={mapValue:{fields:{__type__:{stringValue:wF}}}},iC="__vector__",zu="value";function Xs(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?nC(n)?4:bF(n)?9007199254740991:TF(n)?10:11:ee(28295,{value:n})}function Qr(n,e){if(n===e)return!0;let t=Xs(n);if(t!==Xs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Kh(n).isEqual(Kh(e));case 3:return(function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=Oi(i.timestampValue),a=Oi(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,s){return Li(i.bytesValue).isEqual(Li(s.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,s){return Ye(i.geoPointValue.latitude)===Ye(s.geoPointValue.latitude)&&Ye(i.geoPointValue.longitude)===Ye(s.geoPointValue.longitude)})(n,e);case 2:return(function(i,s){if("integerValue"in i&&"integerValue"in s)return Ye(i.integerValue)===Ye(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=Ye(i.doubleValue),a=Ye(s.doubleValue);return o===a?Wh(o)===Wh(a):isNaN(o)&&isNaN(a)}return!1})(n,e);case 9:return qu(n.arrayValue.values||[],e.arrayValue.values||[],Qr);case 10:case 11:return(function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(IL(o)!==IL(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!Qr(o[c],a[c])))return!1;return!0})(n,e);default:return ee(52216,{left:n})}}function Qh(n,e){return(n.values||[]).find(t=>Qr(t,e))!==void 0}function Gu(n,e){if(n===e)return 0;let t=Xs(n),r=Xs(e);if(t!==r)return _e(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return _e(n.booleanValue,e.booleanValue);case 2:return(function(s,o){let a=Ye(s.integerValue||s.doubleValue),c=Ye(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1})(n,e);case 3:return EL(n.timestampValue,e.timestampValue);case 4:return EL(Kh(n),Kh(e));case 5:return ID(n.stringValue,e.stringValue);case 6:return(function(s,o){let a=Li(s),c=Li(o);return a.compareTo(c)})(n.bytesValue,e.bytesValue);case 7:return(function(s,o){let a=s.split("/"),c=o.split("/");for(let d=0;d<a.length&&d<c.length;d++){let h=_e(a[d],c[d]);if(h!==0)return h}return _e(a.length,c.length)})(n.referenceValue,e.referenceValue);case 8:return(function(s,o){let a=_e(Ye(s.latitude),Ye(o.latitude));return a!==0?a:_e(Ye(s.longitude),Ye(o.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return wL(n.arrayValue,e.arrayValue);case 10:return(function(s,o){var a,c,d,h;let g=s.fields||{},E=o.fields||{},D=(a=g[zu])===null||a===void 0?void 0:a.arrayValue,R=(c=E[zu])===null||c===void 0?void 0:c.arrayValue,M=_e(((d=D?.values)===null||d===void 0?void 0:d.length)||0,((h=R?.values)===null||h===void 0?void 0:h.length)||0);return M!==0?M:wL(D,R)})(n.mapValue,e.mapValue);case 11:return(function(s,o){if(s===Zy.mapValue&&o===Zy.mapValue)return 0;if(s===Zy.mapValue)return 1;if(o===Zy.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),d=o.fields||{},h=Object.keys(d);c.sort(),h.sort();for(let g=0;g<c.length&&g<h.length;++g){let E=ID(c[g],h[g]);if(E!==0)return E;let D=Gu(a[c[g]],d[h[g]]);if(D!==0)return D}return _e(c.length,h.length)})(n.mapValue,e.mapValue);default:throw ee(23264,{le:t})}}function EL(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return _e(n,e);let t=Oi(n),r=Oi(e),i=_e(t.seconds,r.seconds);return i!==0?i:_e(t.nanos,r.nanos)}function wL(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=Gu(t[i],r[i]);if(s)return s}return _e(t.length,r.length)}function Wu(n){return bD(n)}function bD(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=Oi(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Li(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return te.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=bD(s);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${bD(t.fields[o])}`;return i+"}"})(n.mapValue):ee(61005,{value:n})}function n_(n){switch(Xs(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=V_(n);return e?16+n_(e):16;case 5:return 2*n.stringValue.length;case 6:return Li(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,s)=>i+n_(s),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return to(r.fields,(s,o)=>{i+=s.length+n_(o)}),i})(n.mapValue);default:throw ee(13486,{value:n})}}function AD(n){return!!n&&"integerValue"in n}function sC(n){return!!n&&"arrayValue"in n}function TL(n){return!!n&&"nullValue"in n}function bL(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function r_(n){return!!n&&"mapValue"in n}function TF(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[rC])===null||t===void 0?void 0:t.stringValue)===iC}function jh(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return to(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=jh(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=jh(n.arrayValue.values[t]);return e}return Object.assign({},n)}function bF(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===wF}var _ve={mapValue:{fields:{[rC]:{stringValue:iC},[zu]:{arrayValue:{}}}}};var Cn=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!r_(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=jh(t)}setAll(e){let t=Rn.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=jh(o):i.push(a.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());r_(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Qr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];r_(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){to(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(jh(this.value))}};function AF(n){let e=[];return to(n.fields,(t,r)=>{let i=new Rn([t]);if(r_(r)){let s=AF(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new $n(e)}var gr=class n{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,he.min(),he.min(),he.min(),Cn.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,he.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,he.min(),he.min(),Cn.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,he.min(),he.min(),Cn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(he.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Cn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Cn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=he.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Ku=class{constructor(e,t){this.position=e,this.inclusive=t}};function AL(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField()?r=te.comparator(te.fromName(o.referenceValue),t.key):r=Gu(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function DL(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Qr(n.position[t],e.position[t]))return!1;return!0}var Qu=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function dK(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var h_=class{},Tt=class n extends h_{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new SD(e,t,r):t==="array-contains"?new ND(e,r):t==="in"?new PD(e,r):t==="not-in"?new kD(e,r):t==="array-contains-any"?new MD(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new CD(e,r):new RD(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Gu(t,this.value)):t!==null&&Xs(this.value)===Xs(t)&&this.matchesComparison(Gu(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ee(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Yr=class n extends h_{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new n(e,t)}matches(e){return DF(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function DF(n){return n.op==="and"}function SF(n){return hK(n)&&DF(n)}function hK(n){for(let e of n.filters)if(e instanceof Yr)return!1;return!0}function DD(n){if(n instanceof Tt)return n.field.canonicalString()+n.op.toString()+Wu(n.value);if(SF(n))return n.filters.map(e=>DD(e)).join(",");{let e=n.filters.map(t=>DD(t)).join(",");return`${n.op}(${e})`}}function CF(n,e){return n instanceof Tt?(function(r,i){return i instanceof Tt&&r.op===i.op&&r.field.isEqual(i.field)&&Qr(r.value,i.value)})(n,e):n instanceof Yr?(function(r,i){return i instanceof Yr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&CF(o,i.filters[a]),!0):!1})(n,e):void ee(19439)}function RF(n){return n instanceof Tt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Wu(t.value)}`})(n):n instanceof Yr?(function(t){return t.op.toString()+" {"+t.getFilters().map(RF).join(" ,")+"}"})(n):"Filter"}var SD=class extends Tt{constructor(e,t,r){super(e,t,r),this.key=te.fromName(r.referenceValue)}matches(e){let t=te.comparator(e.key,this.key);return this.matchesComparison(t)}},CD=class extends Tt{constructor(e,t){super(e,"in",t),this.keys=NF("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},RD=class extends Tt{constructor(e,t){super(e,"not-in",t),this.keys=NF("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function NF(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>te.fromName(r.referenceValue))}var ND=class extends Tt{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return sC(t)&&Qh(t.arrayValue,this.value)}},PD=class extends Tt{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Qh(this.value.arrayValue,t)}},kD=class extends Tt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Qh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Qh(this.value.arrayValue,t)}},MD=class extends Tt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!sC(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Qh(this.value.arrayValue,r))}};var xD=class{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Pe=null}};function SL(n,e=null,t=[],r=[],i=null,s=null,o=null){return new xD(n,e,t,r,i,s,o)}function oC(n){let e=ue(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>DD(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(s){return s.field.canonicalString()+s.dir})(r)).join(","),F_(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Wu(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Wu(r)).join(",")),e.Pe=t}return e.Pe}function aC(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!dK(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!CF(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!DL(n.startAt,e.startAt)&&DL(n.endAt,e.endAt)}function OD(n){return te.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Yu=class{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function fK(n,e,t,r,i,s,o,a){return new Yu(n,e,t,r,i,s,o,a)}function cC(n){return new Yu(n)}function CL(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function pK(n){return n.collectionGroup!==null}function Bh(n){let e=ue(n);if(e.Te===null){e.Te=[];let t=new Set;for(let s of e.explicitOrderBy)e.Te.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new kt(Rn.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(a=a.add(d.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.Te.push(new Qu(s,r))}),t.has(Rn.keyField().canonicalString())||e.Te.push(new Qu(Rn.keyField(),r))}return e.Te}function Wr(n){let e=ue(n);return e.Ie||(e.Ie=gK(e,Bh(n))),e.Ie}function gK(n,e){if(n.limitType==="F")return SL(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new Qu(i.field,s)});let t=n.endAt?new Ku(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Ku(n.startAt.position,n.startAt.inclusive):null;return SL(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function LD(n,e,t){return new Yu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function U_(n,e){return aC(Wr(n),Wr(e))&&n.limitType===e.limitType}function PF(n){return`${oC(Wr(n))}|lt:${n.limitType}`}function Vu(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>RF(i)).join(", ")}]`),F_(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Wu(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Wu(i)).join(",")),`Target(${r})`})(Wr(n))}; limitType=${n.limitType})`}function j_(n,e){return e.isFoundDocument()&&(function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):te.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)})(n,e)&&(function(r,i){for(let s of Bh(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(o,a,c){let d=AL(o,a,c);return o.inclusive?d<=0:d<0})(r.startAt,Bh(r),i)||r.endAt&&!(function(o,a,c){let d=AL(o,a,c);return o.inclusive?d>=0:d>0})(r.endAt,Bh(r),i))})(n,e)}function mK(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function kF(n){return(e,t)=>{let r=!1;for(let i of Bh(n)){let s=yK(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function yK(n,e,t){let r=n.field.isKeyField()?te.comparator(e.key,t.key):(function(s,o,a){let c=o.data.field(s),d=a.data.field(s);return c!==null&&d!==null?Gu(c,d):ee(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ee(19790,{direction:n.dir})}}var Fi=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){to(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return yF(this.inner)}size(){return this.innerSize}};var _K=new tt(te.comparator);function Vi(){return _K}var MF=new tt(te.comparator);function Uh(...n){let e=MF;for(let t of n)e=e.insert(t.key,t);return e}function xF(n){let e=MF;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Aa(){return $h()}function OF(){return $h()}function $h(){return new Fi(n=>n.toString(),(n,e)=>n.isEqual(e))}var vK=new tt(te.comparator),IK=new kt(te.comparator);function be(...n){let e=IK;for(let t of n)e=e.add(t);return e}var EK=new kt(_e);function wK(){return EK}function uC(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wh(e)?"-0":e}}function LF(n){return{integerValue:""+n}}function TK(n,e){return J8(e)?LF(e):uC(n,e)}var Ju=class{constructor(){this._=void 0}};function bK(n,e,t){return n instanceof Xu?(function(i,s){let o={fields:{[vF]:{stringValue:_F},[EF]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&nC(s)&&(s=V_(s)),s&&(o.fields[IF]=s),{mapValue:o}})(t,e):n instanceof ka?VF(n,e):n instanceof Ma?UF(n,e):(function(i,s){let o=FF(i,s),a=RL(o)+RL(i.Ee);return AD(o)&&AD(i.Ee)?LF(a):uC(i.serializer,a)})(n,e)}function AK(n,e,t){return n instanceof ka?VF(n,e):n instanceof Ma?UF(n,e):t}function FF(n,e){return n instanceof Zu?(function(r){return AD(r)||(function(s){return!!s&&"doubleValue"in s})(r)})(e)?e:{integerValue:0}:null}var Xu=class extends Ju{},ka=class extends Ju{constructor(e){super(),this.elements=e}};function VF(n,e){let t=jF(e);for(let r of n.elements)t.some(i=>Qr(i,r))||t.push(r);return{arrayValue:{values:t}}}var Ma=class extends Ju{constructor(e){super(),this.elements=e}};function UF(n,e){let t=jF(e);for(let r of n.elements)t=t.filter(i=>!Qr(i,r));return{arrayValue:{values:t}}}var Zu=class extends Ju{constructor(e,t){super(),this.serializer=e,this.Ee=t}};function RL(n){return Ye(n.integerValue||n.doubleValue)}function jF(n){return sC(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function DK(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof ka&&i instanceof ka||r instanceof Ma&&i instanceof Ma?qu(r.elements,i.elements,Qr):r instanceof Zu&&i instanceof Zu?Qr(r.Ee,i.Ee):r instanceof Xu&&i instanceof Xu})(n.transform,e.transform)}var FD=class{constructor(e,t){this.version=e,this.transformResults=t}},Ws=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function i_(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var el=class{};function BF(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new f_(n.key,Ws.none()):new xa(n.key,n.data,Ws.none());{let t=n.data,r=Cn.empty(),i=new kt(Rn.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Jr(n.key,r,new $n(i.toArray()),Ws.none())}}function SK(n,e,t){n instanceof xa?(function(i,s,o){let a=i.value.clone(),c=PL(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()})(n,e,t):n instanceof Jr?(function(i,s,o){if(!i_(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=PL(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll($F(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(n,e,t):(function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,t)}function Hh(n,e,t,r){return n instanceof xa?(function(s,o,a,c){if(!i_(s.precondition,o))return a;let d=s.value.clone(),h=kL(s.fieldTransforms,c,o);return d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null})(n,e,t,r):n instanceof Jr?(function(s,o,a,c){if(!i_(s.precondition,o))return a;let d=kL(s.fieldTransforms,c,o),h=o.data;return h.setAll($F(s)),h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))})(n,e,t,r):(function(s,o,a){return i_(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a})(n,e,t)}function CK(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),s=FF(r.transform,i||null);s!=null&&(t===null&&(t=Cn.empty()),t.set(r.field,s))}return t||null}function NL(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&qu(r,i,(s,o)=>DK(s,o))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var xa=class extends el{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Jr=class extends el{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function $F(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function PL(n,e,t){let r=new Map;je(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,AK(o,a,t[i]))}return r}function kL(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,bK(s,o,e))}return r}var f_=class extends el{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},VD=class extends el{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var UD=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&SK(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Hh(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Hh(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=OF();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;let c=BF(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(he.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),be())}isEqual(e){return this.batchId===e.batchId&&qu(this.mutations,e.mutations,(t,r)=>NL(t,r))&&qu(this.baseMutations,e.baseMutations,(t,r)=>NL(t,r))}},jD=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){je(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=(function(){return vK})(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new n(e,t,r,i)}};var BD=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var $D=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var pt,Re;function RK(n){switch(n){case F.OK:return ee(64938);case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0;default:return ee(15467,{code:n})}}function HF(n){if(n===void 0)return xi("GRPC error has no .code"),F.UNKNOWN;switch(n){case pt.OK:return F.OK;case pt.CANCELLED:return F.CANCELLED;case pt.UNKNOWN:return F.UNKNOWN;case pt.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case pt.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case pt.INTERNAL:return F.INTERNAL;case pt.UNAVAILABLE:return F.UNAVAILABLE;case pt.UNAUTHENTICATED:return F.UNAUTHENTICATED;case pt.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case pt.NOT_FOUND:return F.NOT_FOUND;case pt.ALREADY_EXISTS:return F.ALREADY_EXISTS;case pt.PERMISSION_DENIED:return F.PERMISSION_DENIED;case pt.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case pt.ABORTED:return F.ABORTED;case pt.OUT_OF_RANGE:return F.OUT_OF_RANGE;case pt.UNIMPLEMENTED:return F.UNIMPLEMENTED;case pt.DATA_LOSS:return F.DATA_LOSS;default:return ee(39323,{code:n})}}(Re=pt||(pt={}))[Re.OK=0]="OK",Re[Re.CANCELLED=1]="CANCELLED",Re[Re.UNKNOWN=2]="UNKNOWN",Re[Re.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Re[Re.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Re[Re.NOT_FOUND=5]="NOT_FOUND",Re[Re.ALREADY_EXISTS=6]="ALREADY_EXISTS",Re[Re.PERMISSION_DENIED=7]="PERMISSION_DENIED",Re[Re.UNAUTHENTICATED=16]="UNAUTHENTICATED",Re[Re.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Re[Re.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Re[Re.ABORTED=10]="ABORTED",Re[Re.OUT_OF_RANGE=11]="OUT_OF_RANGE",Re[Re.UNIMPLEMENTED=12]="UNIMPLEMENTED",Re[Re.INTERNAL=13]="INTERNAL",Re[Re.UNAVAILABLE=14]="UNAVAILABLE",Re[Re.DATA_LOSS=15]="DATA_LOSS";var ML=null;var NK=new ki([4294967295,4294967295],0);function xL(n){let e=tF().encode(n),t=new iD;return t.update(e),new Uint8Array(t.digest())}function OL(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new ki([t,r],0),new ki([i,s],0)]}var HD=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Da(`Invalid padding: ${t}`);if(r<0)throw new Da(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Da(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Da(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=ki.fromNumber(this.fe)}pe(e,t,r){let i=e.add(t.multiply(ki.fromNumber(r)));return i.compare(NK)===1&&(i=new ki([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let t=xL(e),[r,i]=OL(t);for(let s=0;s<this.hashCount;s++){let o=this.pe(r,i,s);if(!this.ye(o))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.fe===0)return;let t=xL(e),[r,i]=OL(t);for(let s=0;s<this.hashCount;s++){let o=this.pe(r,i,s);this.we(o)}}we(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Da=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var p_=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Yh.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(he.min(),i,new tt(_e),Vi(),be())}},Yh=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,be(),be(),be())}};var $u=class{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=i}},g_=class{constructor(e,t){this.targetId=e,this.De=t}},m_=class{constructor(e,t,r=en.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},y_=class{constructor(){this.ve=0,this.Ce=LL(),this.Fe=en.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=be(),t=be(),r=be();return this.Ce.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ee(38017,{changeType:s})}}),new Yh(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=LL()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,je(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},qD=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=Vi(),this.je=e_(),this.Je=e_(),this.He=new tt(_e)}Ye(e){for(let t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(let t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{let r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:ee(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,i)=>{this.nt(i)&&t(i)})}it(e){let t=e.targetId,r=e.De.count,i=this.st(t);if(i){let s=i.target;if(OD(s))if(r===0){let o=new te(s.path);this.Xe(t,o,gr.newNoDocument(o,he.min()))}else je(r===1,20013,{expectedCount:r});else{let o=this.ot(t);if(o!==r){let a=this._t(e),c=a?this.ut(a,e,o):1;if(c!==0){this.rt(t);let d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,d)}ML?.ct((function(h,g,E,D,R){var M,k,V,z,K,ye;let ze={localCacheCount:h,existenceFilterCount:g.count,databaseId:E.database,projectId:E.projectId},re=g.unchangedNames;return re&&(ze.bloomFilter={applied:R===0,hashCount:(M=re?.hashCount)!==null&&M!==void 0?M:0,bitmapLength:(z=(V=(k=re?.bits)===null||k===void 0?void 0:k.bitmap)===null||V===void 0?void 0:V.length)!==null&&z!==void 0?z:0,padding:(ye=(K=re?.bits)===null||K===void 0?void 0:K.padding)!==null&&ye!==void 0?ye:0,mightContain:b=>{var _;return(_=D?.mightContain(b))!==null&&_!==void 0&&_}}),ze})(o,e.De,this.We.lt(),a,c))}}}}_t(e){let t=e.De.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,o,a;try{o=Li(r).toUint8Array()}catch(c){if(c instanceof u_)return Js("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new HD(o,i,s)}catch(c){return Js(c instanceof Da?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.fe===0?null:a}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){let r=this.We.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let o=this.We.lt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Xe(t,s,null),i++)}),i}Pt(e){let t=new Map;this.Ge.forEach((s,o)=>{let a=this.st(o);if(a){if(s.current&&OD(a.target)){let c=new te(a.target.path);this.Tt(c).has(o)||this.It(o,c)||this.Xe(o,c,gr.newNoDocument(c,e))}s.Ne&&(t.set(o,s.Le()),s.ke())}});let r=be();this.Je.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let d=this.st(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ze.forEach((s,o)=>o.setReadTime(e));let i=new p_(e,t,this.He,this.ze,r);return this.ze=Vi(),this.je=e_(),this.Je=e_(),this.He=new tt(_e),i}Ze(e,t){if(!this.nt(e))return;let r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,t)?i.qe(t,1):i.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new y_,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new kt(_e),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new kt(_e),this.je=this.je.insert(e,t)),t}nt(e){let t=this.st(e)!==null;return t||G("WatchChangeAggregator","Detected inactive target",e),t}st(e){let t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new y_),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}};function e_(){return new tt(te.comparator)}function LL(){return new tt(te.comparator)}var PK={asc:"ASCENDING",desc:"DESCENDING"},kK={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},MK={and:"AND",or:"OR"},zD=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function GD(n,e){return n.useProto3Json||F_(e)?e:{value:e}}function __(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function qF(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function xK(n,e){return __(n,e.toTimestamp())}function Kr(n){return je(!!n,49232),he.fromTimestamp((function(t){let r=Oi(t);return new yt(r.seconds,r.nanos)})(n))}function lC(n,e){return WD(n,e).canonicalString()}function WD(n,e){let t=(function(i){return new ot(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function zF(n){let e=ot.fromString(n);return je(YF(e),10190,{key:e.toString()}),e}function KD(n,e){return lC(n.databaseId,e.path)}function lD(n,e){let t=zF(e);if(t.get(1)!==n.databaseId.projectId)throw new Q(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Q(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new te(WF(t))}function GF(n,e){return lC(n.databaseId,e)}function OK(n){let e=zF(n);return e.length===4?ot.emptyPath():WF(e)}function QD(n){return new ot(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function WF(n){return je(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function FL(n,e,t){return{name:KD(n,e),fields:t.value.mapValue.fields}}function LK(n,e){let t;if("targetChange"in e){e.targetChange;let r=(function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:ee(39313,{state:d})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=(function(d,h){return d.useProto3Json?(je(h===void 0||typeof h=="string",58123),en.fromBase64String(h||"")):(je(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),en.fromUint8Array(h||new Uint8Array))})(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&(function(d){let h=d.code===void 0?F.UNKNOWN:HF(d.code);return new Q(h,d.message||"")})(o);t=new m_(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=lD(n,r.document.name),s=Kr(r.document.updateTime),o=r.document.createTime?Kr(r.document.createTime):he.min(),a=new Cn({mapValue:{fields:r.document.fields}}),c=gr.newFoundDocument(i,s,o,a),d=r.targetIds||[],h=r.removedTargetIds||[];t=new $u(d,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=lD(n,r.document),s=r.readTime?Kr(r.readTime):he.min(),o=gr.newNoDocument(i,s),a=r.removedTargetIds||[];t=new $u([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=lD(n,r.document),s=r.removedTargetIds||[];t=new $u([],s,i,null)}else{if(!("filter"in e))return ee(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new $D(i,s),a=r.targetId;t=new g_(a,o)}}return t}function FK(n,e){let t;if(e instanceof xa)t={update:FL(n,e.key,e.value)};else if(e instanceof f_)t={delete:KD(n,e.key)};else if(e instanceof Jr)t={update:FL(n,e.key,e.data),updateMask:GK(e.fieldMask)};else{if(!(e instanceof VD))return ee(16599,{Rt:e.type});t={verify:KD(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>(function(s,o){let a=o.transform;if(a instanceof Xu)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ka)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ma)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Zu)return{fieldPath:o.field.canonicalString(),increment:a.Ee};throw ee(20930,{transform:o.transform})})(0,r))),e.precondition.isNone||(t.currentDocument=(function(i,s){return s.updateTime!==void 0?{updateTime:xK(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ee(27497)})(n,e.precondition)),t}function VK(n,e){return n&&n.length>0?(je(e!==void 0,14353),n.map(t=>(function(i,s){let o=i.updateTime?Kr(i.updateTime):Kr(s);return o.isEqual(he.min())&&(o=Kr(s)),new FD(o,i.transformResults||[])})(t,e))):[]}function UK(n,e){return{documents:[GF(n,e.path)]}}function jK(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=GF(n,i);let s=(function(d){if(d.length!==0)return QF(Yr.create(d,"and"))})(e.filters);s&&(t.structuredQuery.where=s);let o=(function(d){if(d.length!==0)return d.map(h=>(function(E){return{field:Uu(E.field),direction:HK(E.dir)}})(h))})(e.orderBy);o&&(t.structuredQuery.orderBy=o);let a=GD(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(d){return{before:d.inclusive,values:d.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(d){return{before:!d.inclusive,values:d.position}})(e.endAt)),{Vt:t,parent:i}}function BK(n){let e=OK(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){je(r===1,65062);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];t.where&&(s=(function(g){let E=KF(g);return E instanceof Yr&&SF(E)?E.getFilters():[E]})(t.where));let o=[];t.orderBy&&(o=(function(g){return g.map(E=>(function(R){return new Qu(ju(R.field),(function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(R.direction))})(E))})(t.orderBy));let a=null;t.limit&&(a=(function(g){let E;return E=typeof g=="object"?g.value:g,F_(E)?null:E})(t.limit));let c=null;t.startAt&&(c=(function(g){let E=!!g.before,D=g.values||[];return new Ku(D,E)})(t.startAt));let d=null;return t.endAt&&(d=(function(g){let E=!g.before,D=g.values||[];return new Ku(D,E)})(t.endAt)),fK(e,i,o,s,a,"F",c,d)}function $K(n,e){let t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ee(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function KF(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=ju(t.unaryFilter.field);return Tt.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=ju(t.unaryFilter.field);return Tt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=ju(t.unaryFilter.field);return Tt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=ju(t.unaryFilter.field);return Tt.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ee(61313);default:return ee(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Tt.create(ju(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ee(58110);default:return ee(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Yr.create(t.compositeFilter.filters.map(r=>KF(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ee(1026)}})(t.compositeFilter.op))})(n):ee(30097,{filter:n})}function HK(n){return PK[n]}function qK(n){return kK[n]}function zK(n){return MK[n]}function Uu(n){return{fieldPath:n.canonicalString()}}function ju(n){return Rn.fromServerFormat(n.fieldPath)}function QF(n){return n instanceof Tt?(function(t){if(t.op==="=="){if(bL(t.value))return{unaryFilter:{field:Uu(t.field),op:"IS_NAN"}};if(TL(t.value))return{unaryFilter:{field:Uu(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(bL(t.value))return{unaryFilter:{field:Uu(t.field),op:"IS_NOT_NAN"}};if(TL(t.value))return{unaryFilter:{field:Uu(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Uu(t.field),op:qK(t.op),value:t.value}}})(n):n instanceof Yr?(function(t){let r=t.getFilters().map(i=>QF(i));return r.length===1?r[0]:{compositeFilter:{op:zK(t.op),filters:r}}})(n):ee(54877,{filter:n})}function GK(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function YF(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Jh=class n{constructor(e,t,r,i,s=he.min(),o=he.min(),a=en.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var YD=class{constructor(e){this.gt=e}};function WK(n){let e=BK({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?LD(e,e.limit,"L"):e}var v_=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(Ye(e.integerValue));else if("doubleValue"in e){let r=Ye(e.doubleValue);isNaN(r)?this.Ct(t,13):(this.Ct(t,15),Wh(r)?t.Ft(0):t.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(t,20),typeof r=="string"&&(r=Oi(r)),t.Mt(`${r.seconds||""}`),t.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(Li(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(t,45),t.Ft(r.latitude||0),t.Ft(r.longitude||0)}else"mapValue"in e?bF(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):TF(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):ee(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let r=e.fields||{};this.Ct(t,55);for(let i of Object.keys(r))this.xt(i,t),this.Dt(r[i],t)}Lt(e,t){var r,i;let s=e.fields||{};this.Ct(t,53);let o=zu,a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(t,15),t.Ft(Ye(a)),this.xt(o,t),this.Dt(s[o],t)}qt(e,t){let r=e.values||[];this.Ct(t,50);for(let i of r)this.Dt(i,t)}Bt(e,t){this.Ct(t,37),te.fromName(e).path.forEach(r=>{this.Ct(t,60),this.$t(r,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};v_.Ut=new v_;var JD=class{constructor(){this.Dn=new XD}addToCollectionParentIndex(e,t){return this.Dn.add(t),U.resolve()}getCollectionParents(e,t){return U.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return U.resolve()}deleteFieldIndex(e,t){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,t){return U.resolve()}getDocumentsMatchingTarget(e,t){return U.resolve(null)}getIndexType(e,t){return U.resolve(0)}getFieldIndexes(e,t){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,t){return U.resolve(Pa.min())}getMinOffsetFromCollectionGroup(e,t){return U.resolve(Pa.min())}updateCollectionGroup(e,t,r){return U.resolve()}updateIndexEntries(e,t){return U.resolve()}},XD=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new kt(ot.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new kt(ot.comparator)).toArray()}};var vve=new Uint8Array(0);var VL={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},JF=41943040,Bn=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};Bn.DEFAULT_COLLECTION_PERCENTILE=10,Bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Bn.DEFAULT=new Bn(JF,Bn.DEFAULT_COLLECTION_PERCENTILE,Bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Bn.DISABLED=new Bn(-1,0,0);var Xh=class n{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new n(0)}static ur(){return new n(-1)}};var UL="LruGarbageCollector",KK=1048576;function jL([n,e],[t,r]){let i=_e(n,t);return i===0?_e(e,r):i}var ZD=class{constructor(e){this.Tr=e,this.buffer=new kt(jL),this.Ir=0}dr(){return++this.Ir}Er(e){let t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();jL(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},eS=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){G(UL,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ol(t)?G(UL,"Ignoring IndexedDB error during garbage collection: ",t):await sl(t)}await this.Rr(3e5)})}},tS=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return U.resolve(eC.ue);let r=new ZD(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(G("LruGarbageCollector","Garbage collection skipped; disabled"),U.resolve(VL)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(G("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),VL):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,i,s,o,a,c,d,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(G("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,o=Date.now(),this.nthSequenceNumber(e,i))).next(g=>(r=g,a=Date.now(),this.removeTargets(e,r,t))).next(g=>(s=g,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(g=>(d=Date.now(),Fu()<=we.DEBUG&&G("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(c-a)+`ms
	Removed ${g} documents in `+(d-c)+`ms
Total Duration: ${d-h}ms`),U.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:g})))}};function QK(n,e){return new tS(n,e)}var nS=class{constructor(){this.changes=new Fi(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,gr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?U.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var rS=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var iS=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Hh(r.mutation,i,$n.empty(),yt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,be()).next(()=>r))}getLocalViewOfDocuments(e,t,r=be()){let i=Aa();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=Uh();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=Aa();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,be()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=Vi(),o=$h(),a=(function(){return $h()})();return t.forEach((c,d)=>{let h=r.get(d.key);i.has(d.key)&&(h===void 0||h.mutation instanceof Jr)?s=s.insert(d.key,d):h!==void 0?(o.set(d.key,h.mutation.getFieldMask()),Hh(h.mutation,d,h.mutation.getFieldMask(),yt.now())):o.set(d.key,$n.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((d,h)=>o.set(d,h)),t.forEach((d,h)=>{var g;return a.set(d,new rS(h,(g=o.get(d))!==null&&g!==void 0?g:null))}),a))}recalculateAndSaveOverlays(e,t){let r=$h(),i=new tt((o,a)=>o-a),s=be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let a of o)a.keys().forEach(c=>{let d=t.get(c);if(d===null)return;let h=r.get(c)||$n.empty();h=a.applyToLocalView(d,h),r.set(c,h);let g=(i.get(a.batchId)||be()).add(c);i=i.insert(a.batchId,g)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),d=c.key,h=c.value,g=OF();h.forEach(E=>{if(!s.has(E)){let D=BF(t.get(E),r.get(E));D!==null&&g.set(E,D),s=s.add(E)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,g))}return U.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return(function(o){return te.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):pK(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):U.resolve(Aa()),a=Gh,c=s;return o.next(d=>U.forEach(d,(h,g)=>(a<g.largestBatchId&&(a=g.largestBatchId),s.get(h)?U.resolve():this.remoteDocumentCache.getEntry(e,h).next(E=>{c=c.insert(h,E)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,c,d,be())).next(h=>({batchId:a,changes:xF(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new te(t)).next(r=>{let i=Uh();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=Uh();return this.indexManager.getCollectionParents(e,s).next(a=>U.forEach(a,c=>{let d=(function(g,E){return new Yu(E,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)})(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(h=>{h.forEach((g,E)=>{o=o.insert(g,E)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((c,d)=>{let h=d.getKey();o.get(h)===null&&(o=o.insert(h,gr.newInvalidDocument(h)))});let a=Uh();return o.forEach((c,d)=>{let h=s.get(c);h!==void 0&&Hh(h.mutation,d,$n.empty(),yt.now()),j_(t,d)&&(a=a.insert(c,d))}),a})}};var sS=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return U.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:Kr(i.createTime)}})(t)),U.resolve()}getNamedQuery(e,t){return U.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(i){return{name:i.name,query:WK(i.bundledQuery),readTime:Kr(i.readTime)}})(t)),U.resolve()}};var oS=class{constructor(){this.overlays=new tt(te.comparator),this.kr=new Map}getOverlay(e,t){return U.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Aa();return U.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.wt(e,t,s)}),U.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.kr.delete(r)),U.resolve()}getOverlaysForCollection(e,t,r){let i=Aa(),s=t.length+1,o=new te(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,d=c.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return U.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new tt((d,h)=>d-h),o=this.overlays.getIterator();for(;o.hasNext();){let d=o.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>r){let h=s.get(d.largestBatchId);h===null&&(h=Aa(),s=s.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}let a=Aa(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,h)=>a.set(d,h)),!(a.size()>=i)););return U.resolve(a)}wt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new BD(t,r));let s=this.kr.get(t);s===void 0&&(s=be(),this.kr.set(t,s)),this.kr.set(t,s.add(r.key))}};var aS=class{constructor(){this.sessionToken=en.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,U.resolve()}};var Zh=class{constructor(){this.qr=new kt(gt.Qr),this.$r=new kt(gt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){let r=new gt(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new gt(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){let t=new te(new ot([])),r=new gt(t,e),i=new gt(t,e+1),s=[];return this.$r.forEachInRange([r,i],o=>{this.Wr(o),s.push(o.key)}),s}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let t=new te(new ot([])),r=new gt(t,e),i=new gt(t,e+1),s=be();return this.$r.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new gt(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},gt=class{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return te.comparator(e.key,t.key)||_e(e.Hr,t.Hr)}static Ur(e,t){return _e(e.Hr,t.Hr)||te.comparator(e.key,t.key)}};var cS=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new kt(gt.Qr)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new UD(s,t,r,i);this.mutationQueue.push(o);for(let a of i)this.Yr=this.Yr.add(new gt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return U.resolve(o)}lookupMutationBatch(e,t){return U.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Xr(r),s=i<0?0:i;return U.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?tC:this.er-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new gt(t,0),i=new gt(t,Number.POSITIVE_INFINITY),s=[];return this.Yr.forEachInRange([r,i],o=>{let a=this.Zr(o.Hr);s.push(a)}),U.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new kt(_e);return t.forEach(i=>{let s=new gt(i,0),o=new gt(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([s,o],a=>{r=r.add(a.Hr)})}),U.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;te.isDocumentKey(s)||(s=s.child(""));let o=new gt(new te(s),0),a=new kt(_e);return this.Yr.forEachWhile(c=>{let d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(a=a.add(c.Hr)),!0)},o),U.resolve(this.ei(a))}ei(e){let t=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){je(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return U.forEach(t.mutations,i=>{let s=new gt(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){let r=new gt(t,0),i=this.Yr.firstAfterOrEqual(r);return U.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var uS=class{constructor(e){this.ni=e,this.docs=(function(){return new tt(te.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return U.resolve(r?r.document.mutableCopy():gr.newInvalidDocument(t))}getEntries(e,t){let r=Vi();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():gr.newInvalidDocument(i))}),U.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Vi(),o=t.path,a=new te(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:d,value:{document:h}}=c.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||K8(W8(h),r)<=0||(i.has(h.key)||j_(t,h))&&(s=s.insert(h.key,h.mutableCopy()))}return U.resolve(s)}getAllFromCollectionGroup(e,t,r,i){ee(9500)}ri(e,t){return U.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new lS(this)}getSize(e){return U.resolve(this.size)}},lS=class extends nS{constructor(e){super(),this.Or=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),U.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}};var dS=class{constructor(e){this.persistence=e,this.ii=new Fi(t=>oC(t),aC),this.lastRemoteSnapshotVersion=he.min(),this.highestTargetId=0,this.si=0,this.oi=new Zh,this.targetCount=0,this._i=Xh.ar()}forEachTarget(e,t){return this.ii.forEach((r,i)=>t(i)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),U.resolve()}hr(e){this.ii.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this._i=new Xh(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,U.resolve()}updateTargetData(e,t){return this.hr(t),U.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.ii.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.ii.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),U.waitFor(s).next(()=>i)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,t){let r=this.ii.get(t)||null;return U.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),U.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),U.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),U.resolve()}getMatchingKeysForTargetId(e,t){let r=this.oi.Jr(t);return U.resolve(r)}containsKey(e,t){return U.resolve(this.oi.containsKey(t))}};var I_=class{constructor(e,t){this.ai={},this.overlays={},this.ui=new eC(0),this.ci=!1,this.ci=!0,this.li=new aS,this.referenceDelegate=e(this),this.hi=new dS(this),this.indexManager=new JD,this.remoteDocumentCache=(function(i){return new uS(i)})(r=>this.referenceDelegate.Pi(r)),this.serializer=new YD(t),this.Ti=new sS(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new oS,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new cS(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){G("MemoryPersistence","Starting transaction:",e);let i=new hS(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ei(e,t){return U.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}},hS=class extends wD{constructor(e){super(),this.currentSequenceNumber=e}},fS=class n{constructor(e){this.persistence=e,this.Ai=new Zh,this.Ri=null}static Vi(e){return new n(e)}get mi(){if(this.Ri)return this.Ri;throw ee(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),U.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),U.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.mi.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.mi,r=>{let i=te.fromPath(r);return this.fi(e,i).next(s=>{s||t.removeEntry(i,he.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return U.or([()=>U.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},E_=class n{constructor(e,t){this.persistence=e,this.gi=new Fi(r=>X8(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=QK(this,t)}static Vi(e,t){return new n(e,t)}Ii(){}di(e){return U.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){let t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return U.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(s=>s?U.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ri(e,o=>this.Sr(e,o,t).next(a=>{a||(r++,s.removeEntry(o,he.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),U.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),U.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),U.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),U.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=n_(e.data.value)),t}Sr(e,t,r){return U.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.gi.get(t);return U.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var pS=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=i}static Es(e,t){let r=be(),i=be();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var gS=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var mS=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return Qk()?8:Y8(Rt())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.ps(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ys(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new gS;return this.ws(e,t,o).next(a=>{if(s.result=a,this.Rs)return this.Ss(e,t,o,a.size)})}).next(()=>s.result)}Ss(e,t,r,i){return r.documentReadCount<this.Vs?(Fu()<=we.DEBUG&&G("QueryEngine","SDK will not create cache indexes for query:",Vu(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),U.resolve()):(Fu()<=we.DEBUG&&G("QueryEngine","Query:",Vu(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(Fu()<=we.DEBUG&&G("QueryEngine","The SDK decides to create cache indexes for query:",Vu(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Wr(t))):U.resolve())}ps(e,t){if(CL(t))return U.resolve(null);let r=Wr(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=LD(t,null,"F"),r=Wr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=be(...s);return this.gs.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let d=this.bs(t,a);return this.Ds(t,d,o,c.readTime)?this.ps(e,LD(t,null,"F")):this.vs(e,d,t,c)}))})))}ys(e,t,r,i){return CL(t)||i.isEqual(he.min())?U.resolve(null):this.gs.getDocuments(e,r).next(s=>{let o=this.bs(t,s);return this.Ds(t,o,r,i)?U.resolve(null):(Fu()<=we.DEBUG&&G("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Vu(t)),this.vs(e,o,t,G8(i,Gh)).next(a=>a))})}bs(e,t){let r=new kt(kF(e));return t.forEach((i,s)=>{j_(e,s)&&(r=r.add(s))}),r}Ds(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ws(e,t,r){return Fu()<=we.DEBUG&&G("QueryEngine","Using full collection scan to execute query:",Vu(t)),this.gs.getDocumentsMatchingQuery(e,t,Pa.min(),r)}vs(e,t,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var dC="LocalStore",YK=3e8,yS=class{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.Fs=new tt(_e),this.Ms=new Fi(s=>oC(s),aC),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new iS(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}};function JK(n,e,t,r){return new yS(n,e,t,r)}async function XF(n,e){let t=ue(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=be();for(let d of i){o.push(d.batchId);for(let h of d.mutations)c=c.add(h.key)}for(let d of s){a.push(d.batchId);for(let h of d.mutations)c=c.add(h.key)}return t.localDocuments.getDocuments(r,c).next(d=>({Bs:d,removedBatchIds:o,addedBatchIds:a}))})})}function XK(n,e){let t=ue(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=t.Os.newChangeBuffer({trackRemovals:!0});return(function(a,c,d,h){let g=d.batch,E=g.keys(),D=U.resolve();return E.forEach(R=>{D=D.next(()=>h.getEntry(c,R)).next(M=>{let k=d.docVersions.get(R);je(k!==null,48541),M.version.compareTo(k)<0&&(g.applyToRemoteDocument(M,d),M.isValidDocument()&&(M.setReadTime(d.commitVersion),h.addEntry(M)))})}),D.next(()=>a.mutationQueue.removeMutationBatch(c,g))})(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let c=be();for(let d=0;d<a.mutationResults.length;++d)a.mutationResults[d].transformResults.length>0&&(c=c.add(a.batch.mutations[d].key));return c})(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function ZF(n){let e=ue(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function ZK(n,e){let t=ue(n),r=e.snapshotVersion,i=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.Os.newChangeBuffer({trackRemovals:!0});i=t.Fs;let a=[];e.targetChanges.forEach((h,g)=>{let E=i.get(g);if(!E)return;a.push(t.hi.removeMatchingKeys(s,h.removedDocuments,g).next(()=>t.hi.addMatchingKeys(s,h.addedDocuments,g)));let D=E.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(g)!==null?D=D.withResumeToken(en.EMPTY_BYTE_STRING,he.min()).withLastLimboFreeSnapshotVersion(he.min()):h.resumeToken.approximateByteSize()>0&&(D=D.withResumeToken(h.resumeToken,r)),i=i.insert(g,D),(function(M,k,V){return M.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=YK?!0:V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0})(E,D,h)&&a.push(t.hi.updateTargetData(s,D))});let c=Vi(),d=be();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(e7(s,o,e.documentUpdates).next(h=>{c=h.Ls,d=h.ks})),!r.isEqual(he.min())){let h=t.hi.getLastRemoteSnapshotVersion(s).next(g=>t.hi.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return U.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,d)).next(()=>c)}).then(s=>(t.Fs=i,s))}function e7(n,e,t){let r=be(),i=be();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=Vi();return t.forEach((a,c)=>{let d=s.get(a);c.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(he.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):G(dC,"Ignoring outdated watch update for ",a,". Current version:",d.version," Watch version:",c.version)}),{Ls:o,ks:i}})}function t7(n,e){let t=ue(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=tC),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function n7(n,e){let t=ue(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.hi.getTargetData(r,e).next(s=>s?(i=s,U.resolve(i)):t.hi.allocateTargetId(r).next(o=>(i=new Jh(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}async function _S(n,e,t){let r=ue(n),i=r.Fs.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!ol(o))throw o;G(dC,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)}function BL(n,e,t){let r=ue(n),i=he.min(),s=be();return r.persistence.runTransaction("Execute query","readwrite",o=>(function(c,d,h){let g=ue(c),E=g.Ms.get(h);return E!==void 0?U.resolve(g.Fs.get(E)):g.hi.getTargetData(d,h)})(r,o,Wr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,e,t?i:he.min(),t?s:be())).next(a=>(r7(r,mK(e),a),{documents:a,qs:s})))}function r7(n,e,t){let r=n.xs.get(e)||he.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.xs.set(e,r)}var w_=class{constructor(){this.activeTargetIds=wK()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var vS=class{constructor(){this.Fo=new w_,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new w_,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var IS=class{xo(e){}shutdown(){}};var $L="ConnectivityMonitor",T_=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){G($L,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){G($L,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var t_=null;function ES(){return t_===null?t_=(function(){return 268435456+Math.round(2147483648*Math.random())})():t_++,"0x"+t_.toString(16)}var dD="RestConnection",i7={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},wS=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===l_?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,s){let o=ES(),a=this.Go(e,t.toUriEncodedString());G(dD,`Sending RPC '${e}' ${o}:`,a,r);let c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,i,s);let{host:d}=new URL(a),h=Ps(d);return this.jo(e,a,c,r,h).then(g=>(G(dD,`Received RPC '${e}' ${o}: `,g),g),g=>{throw Js(dD,`RPC '${e}' ${o} failed with error: `,g,"url: ",a,"request:",r),g})}Jo(e,t,r,i,s,o){return this.Wo(e,t,r,i,s)}zo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+il})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}Go(e,t){let r=i7[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}};var TS=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var Xt="WebChannelConnection",bS=class extends wS{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,i,s){let o=ES();return new Promise((a,c)=>{let d=new sD;d.setWithCredentials(!0),d.listenOnce(oD.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Vh.NO_ERROR:let g=d.getResponseJson();G(Xt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(g)),a(g);break;case Vh.TIMEOUT:G(Xt,`RPC '${e}' ${o} timed out`),c(new Q(F.DEADLINE_EXCEEDED,"Request time out"));break;case Vh.HTTP_ERROR:let E=d.getStatus();if(G(Xt,`RPC '${e}' ${o} failed with status:`,E,"response text:",d.getResponseText()),E>0){let D=d.getResponseJson();Array.isArray(D)&&(D=D[0]);let R=D?.error;if(R&&R.status&&R.message){let M=(function(V){let z=V.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(z)>=0?z:F.UNKNOWN})(R.status);c(new Q(M,R.message))}else c(new Q(F.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new Q(F.UNAVAILABLE,"Connection failed."));break;default:ee(9055,{c_:e,streamId:o,l_:d.getLastErrorCode(),h_:d.getLastError()})}}finally{G(Xt,`RPC '${e}' ${o} completed.`)}});let h=JSON.stringify(i);G(Xt,`RPC '${e}' ${o} sending request:`,i),d.send(t,"POST",h,r,15)})}P_(e,t,r){let i=ES(),s=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=uD(),a=cD(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let h=s.join("");G(Xt,`Creating RPC '${e}' stream ${i}: ${h}`,c);let g=o.createWebChannel(h,c);this.T_(g);let E=!1,D=!1,R=new TS({Ho:k=>{D?G(Xt,`Not sending because RPC '${e}' stream ${i} is closed:`,k):(E||(G(Xt,`Opening RPC '${e}' stream ${i} transport.`),g.open(),E=!0),G(Xt,`RPC '${e}' stream ${i} sending:`,k),g.send(k))},Yo:()=>g.close()}),M=(k,V,z)=>{k.listen(V,K=>{try{z(K)}catch(ye){setTimeout(()=>{throw ye},0)}})};return M(g,Lu.EventType.OPEN,()=>{D||(G(Xt,`RPC '${e}' stream ${i} transport opened.`),R.s_())}),M(g,Lu.EventType.CLOSE,()=>{D||(D=!0,G(Xt,`RPC '${e}' stream ${i} transport closed`),R.__(),this.I_(g))}),M(g,Lu.EventType.ERROR,k=>{D||(D=!0,Js(Xt,`RPC '${e}' stream ${i} transport errored. Name:`,k.name,"Message:",k.message),R.__(new Q(F.UNAVAILABLE,"The operation could not be completed")))}),M(g,Lu.EventType.MESSAGE,k=>{var V;if(!D){let z=k.data[0];je(!!z,16349);let K=z,ye=K?.error||((V=K[0])===null||V===void 0?void 0:V.error);if(ye){G(Xt,`RPC '${e}' stream ${i} received error:`,ye);let ze=ye.status,re=(function(I){let T=pt[I];if(T!==void 0)return HF(T)})(ze),b=ye.message;re===void 0&&(re=F.INTERNAL,b="Unknown error status: "+ze+" with message "+ye.message),D=!0,R.__(new Q(re,b)),g.close()}else G(Xt,`RPC '${e}' stream ${i} received:`,z),R.a_(z)}}),M(a,aD.STAT_EVENT,k=>{k.stat===Xy.PROXY?G(Xt,`RPC '${e}' stream ${i} detected buffering proxy`):k.stat===Xy.NOPROXY&&G(Xt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{R.o_()},0),R}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}};function hD(){return typeof document<"u"?document:null}function B_(n){return new zD(n,!0)}var b_=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=s,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&G("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var HL="PersistentStream",A_=class{constructor(e,t,r,i,s,o,a,c){this.Fi=e,this.w_=r,this.S_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new b_(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===F.RESOURCE_EXHAUSTED?(xi(t.toString()),xi("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;let e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===t&&this.W_(r,i)},r=>{e(()=>{let i=new Q(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,t){let r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return G(HL,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(G(HL,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},AS=class extends A_{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let t=LK(this.serializer,e),r=(function(s){if(!("targetChange"in s))return he.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?he.min():o.readTime?Kr(o.readTime):he.min()})(e);return this.listener.J_(t,r)}H_(e){let t={};t.database=QD(this.serializer),t.addTarget=(function(s,o){let a,c=o.target;if(a=OD(c)?{documents:UK(s,c)}:{query:jK(s,c).Vt},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=qF(s,o.resumeToken);let d=GD(s,o.expectedCount);d!==null&&(a.expectedCount=d)}else if(o.snapshotVersion.compareTo(he.min())>0){a.readTime=__(s,o.snapshotVersion.toTimestamp());let d=GD(s,o.expectedCount);d!==null&&(a.expectedCount=d)}return a})(this.serializer,e);let r=$K(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){let t={};t.database=QD(this.serializer),t.removeTarget=e,this.k_(t)}},DS=class extends A_{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return je(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,je(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){je(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let t=VK(e.writeResults,e.commitTime),r=Kr(e.commitTime);return this.listener.ta(r,t)}na(){let e={};e.database=QD(this.serializer),this.k_(e)}X_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>FK(this.serializer,r))};this.k_(t)}};var SS=class{},CS=class extends SS{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new Q(F.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Wo(e,WD(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Q(F.UNKNOWN,s.toString())})}Jo(e,t,r,i,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Jo(e,WD(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Q(F.UNKNOWN,o.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},RS=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(xi(t),this._a=!1):G("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var Oa="RemoteStore",NS=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=s,this.Ea.xo(o=>{r.enqueueAndForget(async()=>{La(this)&&(G(Oa,"Restarting streams for network reachability change."),await(async function(c){let d=ue(c);d.Ia.add(4),await sf(d),d.Aa.set("Unknown"),d.Ia.delete(4),await $_(d)})(this))})}),this.Aa=new RS(r,i)}};async function $_(n){if(La(n))for(let e of n.da)await e(!0)}async function sf(n){for(let e of n.da)await e(!1)}function eV(n,e){let t=ue(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),gC(t)?pC(t):al(t).x_()&&fC(t,e))}function hC(n,e){let t=ue(n),r=al(t);t.Ta.delete(e),r.x_()&&tV(t,e),t.Ta.size===0&&(r.x_()?r.B_():La(t)&&t.Aa.set("Unknown"))}function fC(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(he.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}al(n).H_(e)}function tV(n,e){n.Ra.$e(e),al(n).Y_(e)}function pC(n){n.Ra=new qD({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),al(n).start(),n.Aa.aa()}function gC(n){return La(n)&&!al(n).M_()&&n.Ta.size>0}function La(n){return ue(n).Ia.size===0}function nV(n){n.Ra=void 0}async function s7(n){n.Aa.set("Online")}async function o7(n){n.Ta.forEach((e,t)=>{fC(n,e)})}async function a7(n,e){nV(n),gC(n)?(n.Aa.la(e),pC(n)):n.Aa.set("Unknown")}async function c7(n,e,t){if(n.Aa.set("Online"),e instanceof m_&&e.state===2&&e.cause)try{await(async function(i,s){let o=s.cause;for(let a of s.targetIds)i.Ta.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ta.delete(a),i.Ra.removeTarget(a))})(n,e)}catch(r){G(Oa,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await D_(n,r)}else if(e instanceof $u?n.Ra.Ye(e):e instanceof g_?n.Ra.it(e):n.Ra.et(e),!t.isEqual(he.min()))try{let r=await ZF(n.localStore);t.compareTo(r)>=0&&await(function(s,o){let a=s.Ra.Pt(o);return a.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){let h=s.Ta.get(d);h&&s.Ta.set(d,h.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,d)=>{let h=s.Ta.get(c);if(!h)return;s.Ta.set(c,h.withResumeToken(en.EMPTY_BYTE_STRING,h.snapshotVersion)),tV(s,c);let g=new Jh(h.target,c,d,h.sequenceNumber);fC(s,g)}),s.remoteSyncer.applyRemoteEvent(a)})(n,t)}catch(r){G(Oa,"Failed to raise snapshot:",r),await D_(n,r)}}async function D_(n,e,t){if(!ol(e))throw e;n.Ia.add(1),await sf(n),n.Aa.set("Offline"),t||(t=()=>ZF(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{G(Oa,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await $_(n)})}function rV(n,e){return e().catch(t=>D_(n,t,e))}async function H_(n){let e=ue(n),t=Zs(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:tC;for(;u7(e);)try{let i=await t7(e.localStore,r);if(i===null){e.Pa.length===0&&t.B_();break}r=i.batchId,l7(e,i)}catch(i){await D_(e,i)}iV(e)&&sV(e)}function u7(n){return La(n)&&n.Pa.length<10}function l7(n,e){n.Pa.push(e);let t=Zs(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function iV(n){return La(n)&&!Zs(n).M_()&&n.Pa.length>0}function sV(n){Zs(n).start()}async function d7(n){Zs(n).na()}async function h7(n){let e=Zs(n);for(let t of n.Pa)e.X_(t.mutations)}async function f7(n,e,t){let r=n.Pa.shift(),i=jD.from(r,e,t);await rV(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await H_(n)}async function p7(n,e){e&&Zs(n).Z_&&await(async function(r,i){if((function(o){return RK(o)&&o!==F.ABORTED})(i.code)){let s=r.Pa.shift();Zs(r).N_(),await rV(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await H_(r)}})(n,e),iV(n)&&sV(n)}async function qL(n,e){let t=ue(n);t.asyncQueue.verifyOperationInProgress(),G(Oa,"RemoteStore received new credentials");let r=La(t);t.Ia.add(3),await sf(t),r&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await $_(t)}async function g7(n,e){let t=ue(n);e?(t.Ia.delete(2),await $_(t)):e||(t.Ia.add(2),await sf(t),t.Aa.set("Unknown"))}function al(n){return n.Va||(n.Va=(function(t,r,i){let s=ue(t);return s.ia(),new AS(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Zo:s7.bind(null,n),e_:o7.bind(null,n),n_:a7.bind(null,n),J_:c7.bind(null,n)}),n.da.push(async e=>{e?(n.Va.N_(),gC(n)?pC(n):n.Aa.set("Unknown")):(await n.Va.stop(),nV(n))})),n.Va}function Zs(n){return n.ma||(n.ma=(function(t,r,i){let s=ue(t);return s.ia(),new DS(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:d7.bind(null,n),n_:p7.bind(null,n),ea:h7.bind(null,n),ta:f7.bind(null,n)}),n.da.push(async e=>{e?(n.ma.N_(),await H_(n)):(await n.ma.stop(),n.Pa.length>0&&(G(Oa,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))})),n.ma}var PS=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new zr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,a=new n(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Q(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function mC(n,e){if(xi("AsyncQueue",`${e}: ${n}`),ol(n))return new Q(F.UNAVAILABLE,`${e}: ${n}`);throw n}var S_=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||te.comparator(t.key,r.key):(t,r)=>te.comparator(t.key,r.key),this.keyedMap=Uh(),this.sortedSet=new tt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var C_=class{constructor(){this.fa=new tt(te.comparator)}track(e){let t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):ee(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){let e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}},tl=class n{constructor(e,t,r,i,s,o,a,c,d){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,t,r,i,s){let o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new n(e,t,S_.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&U_(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var kS=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},MS=class{constructor(){this.queries=zL(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){let i=ue(t),s=i.queries;i.queries=zL(),s.forEach((o,a)=>{for(let c of a.wa)c.onError(r)})})(this,new Q(F.ABORTED,"Firestore shutting down"))}};function zL(){return new Fi(n=>PF(n),U_)}async function m7(n,e){let t=ue(n),r=3,i=e.query,s=t.queries.get(i);s?!s.Sa()&&e.ba()&&(r=2):(s=new kS,r=e.ba()?0:1);try{switch(r){case 0:s.ya=await t.onListen(i,!0);break;case 1:s.ya=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(o){let a=mC(o,`Initialization of query '${Vu(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.wa.push(e),e.va(t.onlineState),s.ya&&e.Ca(s.ya)&&yC(t)}async function y7(n,e){let t=ue(n),r=e.query,i=3,s=t.queries.get(r);if(s){let o=s.wa.indexOf(e);o>=0&&(s.wa.splice(o,1),s.wa.length===0?i=e.ba()?0:1:!s.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function _7(n,e){let t=ue(n),r=!1;for(let i of e){let s=i.query,o=t.queries.get(s);if(o){for(let a of o.wa)a.Ca(i)&&(r=!0);o.ya=i}}r&&yC(t)}function v7(n,e,t){let r=ue(n),i=r.queries.get(e);if(i)for(let s of i.wa)s.onError(t);r.queries.delete(e)}function yC(n){n.Da.forEach(e=>{e.next()})}var xS,GL;(GL=xS||(xS={})).Fa="default",GL.Cache="cache";var OS=class{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new tl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;let r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=tl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==xS.Cache}};var R_=class{constructor(e){this.key=e}},N_=class{constructor(e){this.key=e}},LS=class{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=be(),this.mutatedKeys=be(),this.Xa=kF(e),this.eu=new S_(this.Xa)}get tu(){return this.Ha}nu(e,t){let r=t?t.ru:new C_,i=t?t.eu:this.eu,s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,g)=>{let E=i.get(h),D=j_(this.query,g)?g:null,R=!!E&&this.mutatedKeys.has(E.key),M=!!D&&(D.hasLocalMutations||this.mutatedKeys.has(D.key)&&D.hasCommittedMutations),k=!1;E&&D?E.data.isEqual(D.data)?R!==M&&(r.track({type:3,doc:D}),k=!0):this.iu(E,D)||(r.track({type:2,doc:D}),k=!0,(c&&this.Xa(D,c)>0||d&&this.Xa(D,d)<0)&&(a=!0)):!E&&D?(r.track({type:0,doc:D}),k=!0):E&&!D&&(r.track({type:1,doc:E}),k=!0,(c||d)&&(a=!0)),k&&(D?(o=o.add(D),s=M?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{eu:o,ru:r,Ds:a,mutatedKeys:s}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let o=e.ru.pa();o.sort((h,g)=>(function(D,R){let M=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ee(20277,{At:k})}};return M(D)-M(R)})(h.type,g.type)||this.Xa(h.doc,g.doc)),this.su(r),i=i!=null&&i;let a=t&&!i?this.ou():[],c=this.Za.size===0&&this.current&&!i?1:0,d=c!==this.Ya;return this.Ya=c,o.length!==0||d?{snapshot:new tl(this.query,e.eu,s,o,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new C_,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=be(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new N_(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new R_(r))}),t}uu(e){this.Ha=e.qs,this.Za=be();let t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return tl.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},_C="SyncEngine",FS=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},VS=class{constructor(e){this.key=e,this.lu=!1}},US=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.hu={},this.Pu=new Fi(a=>PF(a),U_),this.Tu=new Map,this.Iu=new Set,this.du=new tt(te.comparator),this.Eu=new Map,this.Au=new Zh,this.Ru={},this.Vu=new Map,this.mu=Xh.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};async function I7(n,e,t=!0){let r=dV(n),i,s=r.Pu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.cu()):i=await oV(r,e,t,!0),i}async function E7(n,e){let t=dV(n);await oV(t,e,!0,!1)}async function oV(n,e,t,r){let i=await n7(n.localStore,Wr(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),a;return r&&(a=await w7(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&eV(n.remoteStore,i),a}async function w7(n,e,t,r,i){n.gu=(g,E,D)=>(async function(M,k,V,z){let K=k.view.nu(V);K.Ds&&(K=await BL(M.localStore,k.query,!1).then(({documents:b})=>k.view.nu(b,K)));let ye=z&&z.targetChanges.get(k.targetId),ze=z&&z.targetMismatches.get(k.targetId)!=null,re=k.view.applyChanges(K,M.isPrimaryClient,ye,ze);return KL(M,k.targetId,re._u),re.snapshot})(n,g,E,D);let s=await BL(n.localStore,e,!0),o=new LS(e,s.qs),a=o.nu(s.documents),c=Yh.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),d=o.applyChanges(a,n.isPrimaryClient,c);KL(n,t,d._u);let h=new FS(e,t,o);return n.Pu.set(e,h),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),d.snapshot}async function T7(n,e,t){let r=ue(n),i=r.Pu.get(e),s=r.Tu.get(i.targetId);if(s.length>1)return r.Tu.set(i.targetId,s.filter(o=>!U_(o,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await _S(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&hC(r.remoteStore,i.targetId),jS(r,i.targetId)}).catch(sl)):(jS(r,i.targetId),await _S(r.localStore,i.targetId,!0))}async function b7(n,e){let t=ue(n),r=t.Pu.get(e),i=t.Tu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),hC(t.remoteStore,r.targetId))}async function A7(n,e,t){let r=k7(n);try{let i=await(function(o,a){let c=ue(o),d=yt.now(),h=a.reduce((D,R)=>D.add(R.key),be()),g,E;return c.persistence.runTransaction("Locally write mutations","readwrite",D=>{let R=Vi(),M=be();return c.Os.getEntries(D,h).next(k=>{R=k,R.forEach((V,z)=>{z.isValidDocument()||(M=M.add(V))})}).next(()=>c.localDocuments.getOverlayedDocuments(D,R)).next(k=>{g=k;let V=[];for(let z of a){let K=CK(z,g.get(z.key).overlayedDocument);K!=null&&V.push(new Jr(z.key,K,AF(K.value.mapValue),Ws.exists(!0)))}return c.mutationQueue.addMutationBatch(D,d,V,a)}).next(k=>{E=k;let V=k.applyToLocalDocumentSet(g,M);return c.documentOverlayCache.saveOverlays(D,k.batchId,V)})}).then(()=>({batchId:E.batchId,changes:xF(g)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(o,a,c){let d=o.Ru[o.currentUser.toKey()];d||(d=new tt(_e)),d=d.insert(a,c),o.Ru[o.currentUser.toKey()]=d})(r,i.batchId,t),await of(r,i.changes),await H_(r.remoteStore)}catch(i){let s=mC(i,"Failed to persist write");t.reject(s)}}async function aV(n,e){let t=ue(n);try{let r=await ZK(t.localStore,e);e.targetChanges.forEach((i,s)=>{let o=t.Eu.get(s);o&&(je(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.lu=!0:i.modifiedDocuments.size>0?je(o.lu,14607):i.removedDocuments.size>0&&(je(o.lu,42227),o.lu=!1))}),await of(t,r,e)}catch(r){await sl(r)}}function WL(n,e,t){let r=ue(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Pu.forEach((s,o)=>{let a=o.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(o,a){let c=ue(o);c.onlineState=a;let d=!1;c.queries.forEach((h,g)=>{for(let E of g.wa)E.va(a)&&(d=!0)}),d&&yC(c)})(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function D7(n,e,t){let r=ue(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Eu.get(e),s=i&&i.key;if(s){let o=new tt(te.comparator);o=o.insert(s,gr.newNoDocument(s,he.min()));let a=be().add(s),c=new p_(he.min(),new Map,new tt(_e),o,a);await aV(r,c),r.du=r.du.remove(s),r.Eu.delete(e),vC(r)}else await _S(r.localStore,e,!1).then(()=>jS(r,e,t)).catch(sl)}async function S7(n,e){let t=ue(n),r=e.batch.batchId;try{let i=await XK(t.localStore,e);uV(t,r,null),cV(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await of(t,i)}catch(i){await sl(i)}}async function C7(n,e,t){let r=ue(n);try{let i=await(function(o,a){let c=ue(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return c.mutationQueue.lookupMutationBatch(d,a).next(g=>(je(g!==null,37113),h=g.keys(),c.mutationQueue.removeMutationBatch(d,g))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,h,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>c.localDocuments.getDocuments(d,h))})})(r.localStore,e);uV(r,e,t),cV(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await of(r,i)}catch(i){await sl(i)}}function cV(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function uV(n,e,t){let r=ue(n),i=r.Ru[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function jS(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||lV(n,r)})}function lV(n,e){n.Iu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(hC(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),vC(n))}function KL(n,e,t){for(let r of t)r instanceof R_?(n.Au.addReference(r.key,e),R7(n,r)):r instanceof N_?(G(_C,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||lV(n,r.key)):ee(19791,{yu:r})}function R7(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(G(_C,"New document in limbo: "+t),n.Iu.add(r),vC(n))}function vC(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Iu.values().next().value;n.Iu.delete(e);let t=new te(ot.fromString(e)),r=n.mu.next();n.Eu.set(r,new VS(t)),n.du=n.du.insert(t,r),eV(n.remoteStore,new Jh(Wr(cC(t.path)),r,"TargetPurposeLimboResolution",eC.ue))}}async function of(n,e,t){let r=ue(n),i=[],s=[],o=[];r.Pu.isEmpty()||(r.Pu.forEach((a,c)=>{o.push(r.gu(c,e,t).then(d=>{var h;if((d||t)&&r.isPrimaryClient){let g=d?!d.fromCache:(h=t?.targetChanges.get(c.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,g?"current":"not-current")}if(d){i.push(d);let g=pS.Es(c.targetId,d);s.push(g)}}))}),await Promise.all(o),r.hu.J_(i),await(async function(c,d){let h=ue(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>U.forEach(d,E=>U.forEach(E.Is,D=>h.persistence.referenceDelegate.addReference(g,E.targetId,D)).next(()=>U.forEach(E.ds,D=>h.persistence.referenceDelegate.removeReference(g,E.targetId,D)))))}catch(g){if(!ol(g))throw g;G(dC,"Failed to update sequence numbers: "+g)}for(let g of d){let E=g.targetId;if(!g.fromCache){let D=h.Fs.get(E),R=D.snapshotVersion,M=D.withLastLimboFreeSnapshotVersion(R);h.Fs=h.Fs.insert(E,M)}}})(r.localStore,s))}async function N7(n,e){let t=ue(n);if(!t.currentUser.isEqual(e)){G(_C,"User change. New user:",e.toKey());let r=await XF(t.localStore,e);t.currentUser=e,(function(s,o){s.Vu.forEach(a=>{a.forEach(c=>{c.reject(new Q(F.CANCELLED,o))})}),s.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await of(t,r.Bs)}}function P7(n,e){let t=ue(n),r=t.Eu.get(e);if(r&&r.lu)return be().add(r.key);{let i=be(),s=t.Tu.get(e);if(!s)return i;for(let o of s){let a=t.Pu.get(o);i=i.unionWith(a.view.tu)}return i}}function dV(n){let e=ue(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=aV.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=P7.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=D7.bind(null,e),e.hu.J_=_7.bind(null,e.eventManager),e.hu.pu=v7.bind(null,e.eventManager),e}function k7(n){let e=ue(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=S7.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=C7.bind(null,e),e}var hV=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=B_(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)}Cu(t,r){return null}Fu(t,r){return null}vu(t){return JK(this.persistence,new mS,t.initialUser,this.serializer)}Du(t){return new I_(fS.Vi,this.serializer)}bu(t){return new vS}async terminate(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}return n.provider={build:()=>new n},n})(),BS=class extends hV{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){je(this.persistence.referenceDelegate instanceof E_,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new eS(r,e.asyncQueue,t)}Du(e){let t=this.cacheSizeBytes!==void 0?Bn.withCacheSize(this.cacheSizeBytes):Bn.DEFAULT;return new I_(r=>E_.Vi(r,t),this.serializer)}};var M7=(()=>{class n{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>WL(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=N7.bind(null,this.syncEngine),await g7(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new MS})()}createDatastore(t){let r=B_(t.databaseInfo.databaseId),i=(function(o){return new bS(o)})(t.databaseInfo);return(function(o,a,c,d){return new CS(o,a,c,d)})(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return(function(i,s,o,a,c){return new NS(i,s,o,a,c)})(this.localStore,this.datastore,t.asyncQueue,r=>WL(this.syncEngine,r,0),(function(){return T_.C()?new T_:new IS})())}createSyncEngine(t,r){return(function(s,o,a,c,d,h,g){let E=new US(s,o,a,c,d,h);return g&&(E.fu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){var t,r;await(async function(s){let o=ue(s);G(Oa,"RemoteStore shutting down."),o.Ia.add(5),await sf(o),o.Ea.shutdown(),o.Aa.set("Unknown")})(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}return n.provider={build:()=>new n},n})();var $S=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):xi("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var eo="FirestoreClient",HS=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Pt.UNAUTHENTICATED,this.clientId=zh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{G(eo,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(G(eo,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new zr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=mC(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}};async function fD(n,e){n.asyncQueue.verifyOperationInProgress(),G(eo,"Initializing OfflineComponentProvider");let t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await XF(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>{Js("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{G("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{Js("Terminating Firestore due to IndexedDb database deletion failed",i)})}),n._offlineComponents=e}async function QL(n,e){n.asyncQueue.verifyOperationInProgress();let t=await x7(n);G(eo,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>qL(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>qL(e.remoteStore,i)),n._onlineComponents=e}async function x7(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){G(eo,"Using user provided OfflineComponentProvider");try{await fD(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===F.FAILED_PRECONDITION||i.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;Js("Error using user provided cache. Falling back to memory cache: "+t),await fD(n,new hV)}}else G(eo,"Using default OfflineComponentProvider"),await fD(n,new BS(void 0));return n._offlineComponents}async function fV(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(G(eo,"Using user provided OnlineComponentProvider"),await QL(n,n._uninitializedComponentsProvider._online)):(G(eo,"Using default OnlineComponentProvider"),await QL(n,new M7))),n._onlineComponents}function O7(n){return fV(n).then(e=>e.syncEngine)}async function L7(n){let e=await fV(n),t=e.eventManager;return t.onListen=I7.bind(null,e.syncEngine),t.onUnlisten=T7.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=E7.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=b7.bind(null,e.syncEngine),t}function F7(n,e,t={}){let r=new zr;return n.asyncQueue.enqueueAndForget(async()=>(function(s,o,a,c,d){let h=new $S({next:E=>{h.Ou(),o.enqueueAndForget(()=>y7(s,g));let D=E.docs.has(a);!D&&E.fromCache?d.reject(new Q(F.UNAVAILABLE,"Failed to get document because the client is offline.")):D&&E.fromCache&&c&&c.source==="server"?d.reject(new Q(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(E)},error:E=>d.reject(E)}),g=new OS(cC(a.path),h,{includeMetadataChanges:!0,ka:!0});return m7(s,g)})(await L7(n),n.asyncQueue,e,t,r)),r.promise}function pV(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var YL=new Map;var gV="firestore.googleapis.com",JL=!0,P_=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Q(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=gV,this.ssl=JL}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:JL;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=JF;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<KK)throw new Q(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}z8("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=pV((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},ef=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new P_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Q(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Q(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new P_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new pD;switch(r.type){case"firstParty":return new _D(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Q(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=YL.get(t);r&&(G("ComponentProvider","Removing Datastore"),YL.delete(t),r.terminate())})(this),Promise.resolve()}};function mV(n,e,t,r={}){var i;n=Na(n,ef);let s=Ps(e),o=n._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:n._getEmulatorOptions()}),c=`${e}:${t}`;s&&(_m(`https://${c}`),vm("Firestore",!0)),o.host!==gV&&o.host!==c&&Js("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let d=Object.assign(Object.assign({},o),{host:c,ssl:s,emulatorOptions:r});if(!Or(d,a)&&(n._setSettings(d),r.mockUserToken)){let h,g;if(typeof r.mockUserToken=="string")h=r.mockUserToken,g=Pt.MOCK_USER;else{h=Hk(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let E=r.mockUserToken.sub||r.mockUserToken.user_id;if(!E)throw new Q(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Pt(E)}n._authCredentials=new gD(new s_(h,g))}}var qS=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Zt=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new tf(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(rf(t,n._jsonSchema))return new n(e,r||null,new te(ot.fromString(t.referencePath)))}};Zt._jsonSchemaVersion="firestore/documentReference/1.0",Zt._jsonSchema={type:mt("string",Zt._jsonSchemaVersion),referencePath:mt("string")};var tf=class n extends qS{constructor(e,t,r){super(e,t,cC(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Zt(this.firestore,null,new te(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function yV(n,e,...t){if(n=jt(n),arguments.length===1&&(e=zh.newId()),q8("doc","path",e),n instanceof ef){let r=ot.fromString(e,...t);return mL(r),new Zt(n,null,new te(r))}{if(!(n instanceof Zt||n instanceof tf))throw new Q(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ot.fromString(e,...t));return mL(r),new Zt(n.firestore,n instanceof tf?n.converter:null,new te(r))}}var XL="AsyncQueue",k_=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new b_(this,"async_queue_retry"),this.oc=()=>{let r=hD();r&&G(XL,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let t=hD();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=hD();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new zr;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!ol(e))throw e;G(XL,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,xi("INTERNAL UNHANDLED ERROR: ",ZL(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let i=PS.createAndSchedule(this,e,t,r,s=>this.lc(s));return this.ec.push(i),i}ac(){this.tc&&ee(47125,{hc:ZL(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function ZL(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}var nl=class extends ef{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new k_,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new k_(e),this._firestoreClient=void 0,await e}}};function _V(n,e){let t=typeof n=="object"?n:ta(),r=typeof n=="string"?n:e||l_,i=tu(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=$k("firestore");s&&mV(i,...s)}return i}function vV(n){if(n._terminated)throw new Q(F.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||V7(n),n._firestoreClient}function V7(n){var e,t,r;let i=n._freezeSettings(),s=(function(a,c,d,h){return new TD(a,c,d,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,pV(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new HS(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&(function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}})(n._componentsProvider))}var Ks=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(en.fromBase64String(e))}catch(t){throw new Q(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(en.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(rf(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};Ks._jsonSchemaVersion="firestore/bytes/1.0",Ks._jsonSchema={type:mt("string",Ks._jsonSchemaVersion),bytes:mt("string")};var rl=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Q(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Rn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var nf=class{constructor(e){this._methodName=e}};var Qs=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Q(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Q(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return _e(this._lat,e._lat)||_e(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(rf(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};Qs._jsonSchemaVersion="firestore/geoPoint/1.0",Qs._jsonSchema={type:mt("string",Qs._jsonSchemaVersion),latitude:mt("number"),longitude:mt("number")};var Ys=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(rf(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new Q(F.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Ys._jsonSchemaVersion="firestore/vectorValue/1.0",Ys._jsonSchema={type:mt("string",Ys._jsonSchemaVersion),vectorValues:mt("object")};var U7=/^__.*__$/,zS=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Jr(e,this.data,this.fieldMask,t,this.fieldTransforms):new xa(e,this.data,t,this.fieldTransforms)}},M_=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Jr(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function IV(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ee(40011,{Ec:n})}}var GS=class n{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Ac(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return O_(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(IV(this.Ec)&&U7.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},WS=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||B_(e)}Dc(e,t,r,i=!1){return new GS({Ec:e,methodName:t,bc:r,path:Rn.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function EV(n){let e=n._freezeSettings(),t=B_(n._databaseId);return new WS(n._databaseId,!!e.ignoreUndefinedProperties,t)}function j7(n,e,t,r,i,s={}){let o=n.Dc(s.merge||s.mergeFields?2:0,e,t,i);IC("Data must be an object, but it was:",o,r);let a=wV(r,o),c,d;if(s.merge)c=new $n(o.fieldMask),d=o.fieldTransforms;else if(s.mergeFields){let h=[];for(let g of s.mergeFields){let E=KS(e,g,t);if(!o.contains(E))throw new Q(F.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);bV(h,E)||h.push(E)}c=new $n(h),d=o.fieldTransforms.filter(g=>c.covers(g.field))}else c=null,d=o.fieldTransforms;return new zS(new Cn(a),c,d)}var x_=class n extends nf{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function B7(n,e,t,r){let i=n.Dc(1,e,t);IC("Data must be an object, but it was:",i,r);let s=[],o=Cn.empty();to(r,(c,d)=>{let h=EC(e,c,t);d=jt(d);let g=i.gc(h);if(d instanceof x_)s.push(h);else{let E=q_(d,g);E!=null&&(s.push(h),o.set(h,E))}});let a=new $n(s);return new M_(o,a,i.fieldTransforms)}function $7(n,e,t,r,i,s){let o=n.Dc(1,e,t),a=[KS(e,r,t)],c=[i];if(s.length%2!=0)throw new Q(F.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<s.length;E+=2)a.push(KS(e,s[E])),c.push(s[E+1]);let d=[],h=Cn.empty();for(let E=a.length-1;E>=0;--E)if(!bV(d,a[E])){let D=a[E],R=c[E];R=jt(R);let M=o.gc(D);if(R instanceof x_)d.push(D);else{let k=q_(R,M);k!=null&&(d.push(D),h.set(D,k))}}let g=new $n(d);return new M_(h,g,o.fieldTransforms)}function q_(n,e){if(TV(n=jt(n)))return IC("Unsupported field value:",e,n),wV(n,e);if(n instanceof nf)return(function(r,i){if(!IV(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,i){let s=[],o=0;for(let a of r){let c=q_(a,i.yc(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}})(n,e)}return(function(r,i){if((r=jt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return TK(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=yt.fromDate(r);return{timestampValue:__(i.serializer,s)}}if(r instanceof yt){let s=new yt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:__(i.serializer,s)}}if(r instanceof Qs)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ks)return{bytesValue:qF(i.serializer,r._byteString)};if(r instanceof Zt){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.wc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:lC(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ys)return(function(o,a){return{mapValue:{fields:{[rC]:{stringValue:iC},[zu]:{arrayValue:{values:o.toArray().map(d=>{if(typeof d!="number")throw a.wc("VectorValues must only contain numeric values.");return uC(a.serializer,d)})}}}}}})(r,i);throw i.wc(`Unsupported field value: ${ZS(r)}`)})(n,e)}function wV(n,e){let t={};return yF(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):to(n,(r,i)=>{let s=q_(i,e.Vc(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function TV(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof yt||n instanceof Qs||n instanceof Ks||n instanceof Zt||n instanceof nf||n instanceof Ys)}function IC(n,e,t){if(!TV(t)||!nF(t)){let r=ZS(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function KS(n,e,t){if((e=jt(e))instanceof rl)return e._internalPath;if(typeof e=="string")return EC(n,e);throw O_("Field path arguments must be of type string or ",n,!1,void 0,t)}var H7=new RegExp("[~\\*/\\[\\]]");function EC(n,e,t){if(e.search(H7)>=0)throw O_(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new rl(...e.split("."))._internalPath}catch{throw O_(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function O_(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new Q(F.INVALID_ARGUMENT,a+n+c)}function bV(n,e){return n.some(t=>t.isEqual(e))}var L_=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Zt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new QS(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(AV("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},QS=class extends L_{data(){return super.data()}};function AV(n,e){return typeof e=="string"?EC(n,e):e instanceof rl?e._internalPath:e._delegate._internalPath}var YS=class{convertValue(e,t="none"){switch(Xs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ye(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Li(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ee(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return to(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;let s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[zu].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Ye(o.doubleValue));return new Ys(s)}convertGeoPoint(e){return new Qs(Ye(e.latitude),Ye(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=V_(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Kh(e));default:return null}}convertTimestamp(e){let t=Oi(e);return new yt(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=ot.fromString(e);je(YF(r),9688,{name:e});let i=new d_(r.get(1),r.get(3)),s=new te(r.popFirst(5));return i.isEqual(t)||xi(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function q7(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Sa=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Ca=class n extends L_{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Hu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(AV("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Q(F.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};Ca._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ca._jsonSchema={type:mt("string",Ca._jsonSchemaVersion),bundleSource:mt("string","DocumentSnapshot"),bundleName:mt("string"),bundle:mt("string")};var Hu=class extends Ca{data(e={}){return super.data(e)}},qh=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Sa(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Hu(this._firestore,this._userDataWriter,r.key,r,new Sa(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Q(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new Hu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Sa(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new Hu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Sa(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),d=-1,h=-1;return a.type!==0&&(d=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:z7(a.type),doc:c,oldIndex:d,newIndex:h}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Q(F.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=zh.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(t.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function z7(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ee(61501,{type:n})}}function DV(n){n=Na(n,Zt);let e=Na(n.firestore,nl);return F7(vV(e),n._key).then(t=>G7(e,n,t))}qh._jsonSchemaVersion="firestore/querySnapshot/1.0",qh._jsonSchema={type:mt("string",qh._jsonSchemaVersion),bundleSource:mt("string","QuerySnapshot"),bundleName:mt("string"),bundle:mt("string")};var JS=class extends YS{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ks(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Zt(this.firestore,null,t)}};function SV(n,e,t){n=Na(n,Zt);let r=Na(n.firestore,nl),i=q7(n.converter,e,t);return RV(r,[j7(EV(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Ws.none())])}function CV(n,e,t,...r){n=Na(n,Zt);let i=Na(n.firestore,nl),s=EV(i),o;return o=typeof(e=jt(e))=="string"||e instanceof rl?$7(s,"updateDoc",n._key,e,t,r):B7(s,"updateDoc",n._key,e),RV(i,[o.toMutation(n._key,Ws.exists(!0))])}function RV(n,e){return(function(r,i){let s=new zr;return r.asyncQueue.enqueueAndForget(async()=>A7(await O7(r),i,s)),s.promise})(vV(n),e)}function G7(n,e,t){let r=t.docs.get(e._key),i=new JS(n);return new Ca(n,i,e._key,r,new Sa(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){il=i})(Ms),cr(new sn("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new nl(new mD(r.getProvider("auth-internal")),new vD(o,r.getProvider("app-check-internal")),(function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Q(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new d_(d.options.projectId,h)})(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),et(hL,fL,e),et(hL,fL,"esm2017")})();var Fa=class{constructor(e){return e}},NV="firestore",wC=class{constructor(){return ru(NV)}};var TC=new J("angularfire2.firestore-instances");function W7(n,e){let t=Kd(NV,n,e);return t&&new Fa(t)}function K7(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Fa(r)}}var Q7={provide:wC,deps:[[new wn,TC]]},Y7={provide:Fa,useFactory:W7,deps:[[new wn,TC],_i]};function FIe(n,...e){return et("angularfire",xs.full,"fst"),Zn([Y7,Q7,{provide:TC,useFactory:K7(n),multi:!0,deps:[Ue,At,Os,ra,[new wn,dh],[new wn,iu],...e]}])}var PV=on(cL,!0);var z_=on(yV,!0,2);var kV=on(DV,!0);var VIe=on(_V,!0);var MV=on(SV,!0,2);var xV=on(CV,!0,2);var OV=class n{auth=L(la);firestore=L(Fa);user$=Zx(this.auth).pipe(Xn(e=>{if(!e)return Ie(null);let t=z_(this.firestore,"users",e.uid);return PV(t,{idField:"uid"})}));constructor(){}async loginWithGoogle(e){let t=new XT,i=(await eO(this.auth,t)).user;if(i){let s=z_(this.firestore,"users",i.uid);if(!(await kV(s)).exists()&&e){let a={uid:i.uid,email:i.email,displayName:i.displayName||"",photoURL:i.photoURL||"",role:e,profileStatus:"INCOMPLETE",active:!1,verified:!1,createdAt:new Date,updatedAt:new Date};await MV(s,a)}}}async logout(){await tO(this.auth)}async updateUserProfile(e,t){let r=z_(this.firestore,"users",e);await xV(r,ve($({},t),{updatedAt:new Date}))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})};export{$ as a,ve as b,xt as c,ct as d,s2 as e,Ke as f,p2 as g,Y as h,wp as i,X as j,Ro as k,J as l,L as m,VR as n,UR as o,rn as p,bs as q,gn as r,Uc as s,cg as t,hd as u,oj as v,wg as w,St as x,bE as y,jc as z,Ds as A,WN as B,KN as C,zo as D,XN as E,RE as F,NE as G,Sg as H,PE as I,kE as J,ZN as K,tP as L,nP as M,t$ as N,Cg as O,iP as P,i$ as Q,sP as R,E$ as S,oP as T,ME as U,C$ as V,P$ as W,M$ as X,dP as Y,iue as Z,fi as _,CP as $,b4 as aa,C4 as ba,RP as ca,$4 as da,_w as ea,$d as fa,Fk as ga,bq as ha,mfe as ia,yfe as ja,oye as ka,aye as la,FIe as ma,VIe as na,OV as oa};
